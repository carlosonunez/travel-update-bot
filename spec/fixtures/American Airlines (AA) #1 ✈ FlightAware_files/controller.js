
var Rosetta=(function(){var _scope={};_scope.parsedStrings={};_scope.processString=function(string){return string.replace(/(%\d)/g,'$1$s');};_scope.getString=function(key){if(!(key in _scope.parsedStrings)){if(typeof rosettaBootstrap!=='undefined'&&key in rosettaBootstrap){_scope.parsedStrings[key]=_scope.processString(rosettaBootstrap[key]);}else{_scope.parsedStrings[key]=false;}}
return _scope.parsedStrings[key]};_scope.getTranslation=function(key,def){if(typeof key=='undefined'){throw'Rosetta error: Cannot translate a string without a key!'}
var string=_scope.getString(key);if(string===false){if(typeof def!=='undefined'){string=_scope.processString(def);}else{throw'Rosetta error: '+key+'is not a known translation string, and no default was provided!'}}
var params=Array.prototype.slice.call(arguments,2);if(params.length){return vsprintf(string,params);}else{return string;}};return{getTranslation:_scope.getTranslation};}());!function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?module.exports=a():window.noUiSlider=a()}(function(){"use strict";function a(a){return"object"==typeof a&&"function"==typeof a.to&&"function"==typeof a.from}function b(a){a.parentElement.removeChild(a)}function c(a){a.preventDefault()}function d(a){return a.filter(function(a){return!this[a]&&(this[a]=!0)},{})}function e(a,b){return Math.round(a/b)*b}function f(a,b){var c=a.getBoundingClientRect(),d=a.ownerDocument,e=d.documentElement,f=o(d);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(f.x=0),b?c.top+f.y-e.clientTop:c.left+f.x-e.clientLeft}function g(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function h(a,b,c){c>0&&(l(a,b),setTimeout(function(){m(a,b)},c))}function i(a){return Math.max(Math.min(a,100),0)}function j(a){return Array.isArray(a)?a:[a]}function k(a){a=String(a);var b=a.split(".");return b.length>1?b[1].length:0}function l(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function m(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}function n(a,b){return a.classList?a.classList.contains(b):new RegExp("\\b"+b+"\\b").test(a.className)}function o(a){var b=void 0!==window.pageXOffset,c="CSS1Compat"===(a.compatMode||"");return{x:b?window.pageXOffset:c?a.documentElement.scrollLeft:a.body.scrollLeft,y:b?window.pageYOffset:c?a.documentElement.scrollTop:a.body.scrollTop}}function p(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function q(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,b)}catch(a){}return a}function r(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function s(a,b){return 100/(b-a)}function t(a,b){return 100*b/(a[1]-a[0])}function u(a,b){return t(a,a[0]<0?b+Math.abs(a[0]):b-a[0])}function v(a,b){return b*(a[1]-a[0])/100+a[0]}function w(a,b){for(var c=1;a>=b[c];)c+=1;return c}function x(a,b,c){if(c>=a.slice(-1)[0])return 100;var d,e,f,g,h=w(c,a);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],f+u([d,e],c)/s(f,g)}function y(a,b,c){if(c>=100)return a.slice(-1)[0];var d,e,f,g,h=w(c,b);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],v([d,e],(c-f)*s(f,g))}function z(a,b,c,d){if(100===d)return d;var f,g,h=w(d,a);return c?(f=a[h-1],g=a[h],d-f>(g-f)/2?g:f):b[h-1]?a[h-1]+e(d-a[h-1],b[h-1]):d}function A(a,b,c){var d;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b))throw new Error("noUiSlider ("+_+"): 'range' contains invalid value.");if(d="min"===a?0:"max"===a?100:parseFloat(a),!g(d)||!g(b[0]))throw new Error("noUiSlider ("+_+"): 'range' value isn't numeric.");c.xPct.push(d),c.xVal.push(b[0]),d?c.xSteps.push(!isNaN(b[1])&&b[1]):isNaN(b[1])||(c.xSteps[0]=b[1]),c.xHighestCompleteStep.push(0)}function B(a,b,c){if(!b)return!0;c.xSteps[a]=t([c.xVal[a],c.xVal[a+1]],b)/s(c.xPct[a],c.xPct[a+1]);var d=(c.xVal[a+1]-c.xVal[a])/c.xNumSteps[a],e=Math.ceil(Number(d.toFixed(3))-1),f=c.xVal[a]+c.xNumSteps[a]*e;c.xHighestCompleteStep[a]=f}function C(a,b,c){this.xPct=[],this.xVal=[],this.xSteps=[c||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=b;var d,e=[];for(d in a)a.hasOwnProperty(d)&&e.push([a[d],d]);for(e.length&&"object"==typeof e[0][0]?e.sort(function(a,b){return a[0][0]-b[0][0]}):e.sort(function(a,b){return a[0]-b[0]}),d=0;d<e.length;d++)A(e[d][1],e[d][0],this);for(this.xNumSteps=this.xSteps.slice(0),d=0;d<this.xNumSteps.length;d++)B(d,this.xNumSteps[d],this)}function D(b){if(a(b))return!0;throw new Error("noUiSlider ("+_+"): 'format' requires 'to' and 'from' methods.")}function E(a,b){if(!g(b))throw new Error("noUiSlider ("+_+"): 'step' is not numeric.");a.singleStep=b}function F(a,b){if("object"!=typeof b||Array.isArray(b))throw new Error("noUiSlider ("+_+"): 'range' is not an object.");if(void 0===b.min||void 0===b.max)throw new Error("noUiSlider ("+_+"): Missing 'min' or 'max' in 'range'.");if(b.min===b.max)throw new Error("noUiSlider ("+_+"): 'range' 'min' and 'max' cannot be equal.");a.spectrum=new C(b,a.snap,a.singleStep)}function G(a,b){if(b=j(b),!Array.isArray(b)||!b.length)throw new Error("noUiSlider ("+_+"): 'start' option is incorrect.");a.handles=b.length,a.start=b}function H(a,b){if(a.snap=b,"boolean"!=typeof b)throw new Error("noUiSlider ("+_+"): 'snap' option must be a boolean.")}function I(a,b){if(a.animate=b,"boolean"!=typeof b)throw new Error("noUiSlider ("+_+"): 'animate' option must be a boolean.")}function J(a,b){if(a.animationDuration=b,"number"!=typeof b)throw new Error("noUiSlider ("+_+"): 'animationDuration' option must be a number.")}function K(a,b){var c,d=[!1];if("lower"===b?b=[!0,!1]:"upper"===b&&(b=[!1,!0]),!0===b||!1===b){for(c=1;c<a.handles;c++)d.push(b);d.push(!1)}else{if(!Array.isArray(b)||!b.length||b.length!==a.handles+1)throw new Error("noUiSlider ("+_+"): 'connect' option doesn't match handle count.");d=b}a.connect=d}function L(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider ("+_+"): 'orientation' option is invalid.")}}function M(a,b){if(!g(b))throw new Error("noUiSlider ("+_+"): 'margin' option must be numeric.");if(0!==b&&(a.margin=a.spectrum.getMargin(b),!a.margin))throw new Error("noUiSlider ("+_+"): 'margin' option is only supported on linear sliders.")}function N(a,b){if(!g(b))throw new Error("noUiSlider ("+_+"): 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(b),!a.limit||a.handles<2)throw new Error("noUiSlider ("+_+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function O(a,b){if(!g(b))throw new Error("noUiSlider ("+_+"): 'padding' option must be numeric.");if(0!==b){if(a.padding=a.spectrum.getMargin(b),!a.padding)throw new Error("noUiSlider ("+_+"): 'padding' option is only supported on linear sliders.");if(a.padding<0)throw new Error("noUiSlider ("+_+"): 'padding' option must be a positive number.");if(a.padding>=50)throw new Error("noUiSlider ("+_+"): 'padding' option must be less than half the range.")}}function P(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1;break;default:throw new Error("noUiSlider ("+_+"): 'direction' option was not recognized.")}}function Q(a,b){if("string"!=typeof b)throw new Error("noUiSlider ("+_+"): 'behaviour' must be a string containing options.");var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0,g=b.indexOf("hover")>=0;if(e){if(2!==a.handles)throw new Error("noUiSlider ("+_+"): 'fixed' behaviour must be used with 2 handles");M(a,a.start[1]-a.start[0])}a.events={tap:c||f,drag:d,fixed:e,snap:f,hover:g}}function R(a,b){if(a.multitouch=b,"boolean"!=typeof b)throw new Error("noUiSlider ("+_+"): 'multitouch' option must be a boolean.")}function S(a,b){if(!1!==b)if(!0===b){a.tooltips=[];for(var c=0;c<a.handles;c++)a.tooltips.push(!0)}else{if(a.tooltips=j(b),a.tooltips.length!==a.handles)throw new Error("noUiSlider ("+_+"): must pass a formatter for all handles.");a.tooltips.forEach(function(a){if("boolean"!=typeof a&&("object"!=typeof a||"function"!=typeof a.to))throw new Error("noUiSlider ("+_+"): 'tooltips' must be passed a formatter or 'false'.")})}}function T(a,b){a.ariaFormat=b,D(b)}function U(a,b){a.format=b,D(b)}function V(a,b){if(void 0!==b&&"string"!=typeof b&&!1!==b)throw new Error("noUiSlider ("+_+"): 'cssPrefix' must be a string or `false`.");a.cssPrefix=b}function W(a,b){if(void 0!==b&&"object"!=typeof b)throw new Error("noUiSlider ("+_+"): 'cssClasses' must be an object.");if("string"==typeof a.cssPrefix){a.cssClasses={};for(var c in b)b.hasOwnProperty(c)&&(a.cssClasses[c]=a.cssPrefix+b[c])}else a.cssClasses=b}function X(a,b){if(!0!==b&&!1!==b)throw new Error("noUiSlider ("+_+"): 'useRequestAnimationFrame' option should be true (default) or false.");a.useRequestAnimationFrame=b}function Y(a){var b={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:aa,format:aa},c={step:{r:!1,t:E},start:{r:!0,t:G},connect:{r:!0,t:K},direction:{r:!0,t:P},snap:{r:!1,t:H},animate:{r:!1,t:I},animationDuration:{r:!1,t:J},range:{r:!0,t:F},orientation:{r:!1,t:L},margin:{r:!1,t:M},limit:{r:!1,t:N},padding:{r:!1,t:O},behaviour:{r:!0,t:Q},multitouch:{r:!0,t:R},ariaFormat:{r:!1,t:T},format:{r:!1,t:U},tooltips:{r:!1,t:S},cssPrefix:{r:!1,t:V},cssClasses:{r:!1,t:W},useRequestAnimationFrame:{r:!1,t:X}},d={connect:!1,direction:"ltr",behaviour:"tap",multitouch:!1,orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},useRequestAnimationFrame:!0};a.format&&!a.ariaFormat&&(a.ariaFormat=a.format),Object.keys(c).forEach(function(e){if(void 0===a[e]&&void 0===d[e]){if(c[e].r)throw new Error("noUiSlider ("+_+"): '"+e+"' is required.");return!0}c[e].t(b,void 0===a[e]?d[e]:a[e])}),b.pips=a.pips;var e=[["left","top"],["right","bottom"]];return b.style=e[b.dir][b.ort],b.styleOposite=e[b.dir?0:1][b.ort],b}function Z(a,e,g){function k(a,b){var c=wa.createElement("div");return b&&l(c,b),a.appendChild(c),c}function s(a,b){var c=k(a,e.cssClasses.origin),d=k(c,e.cssClasses.handle);return d.setAttribute("data-handle",b),d.setAttribute("tabindex","0"),d.setAttribute("role","slider"),d.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),0===b?l(d,e.cssClasses.handleLower):b===e.handles-1&&l(d,e.cssClasses.handleUpper),c}function t(a,b){return!!b&&k(a,e.cssClasses.connect)}function u(a,b){ia=[],ja=[],ja.push(t(b,a[0]));for(var c=0;c<e.handles;c++)ia.push(s(b,c)),ra[c]=c,ja.push(t(b,a[c+1]))}function v(a){l(a,e.cssClasses.target),0===e.dir?l(a,e.cssClasses.ltr):l(a,e.cssClasses.rtl),0===e.ort?l(a,e.cssClasses.horizontal):l(a,e.cssClasses.vertical),ha=k(a,e.cssClasses.base)}function w(a,b){return!!e.tooltips[b]&&k(a.firstChild,e.cssClasses.tooltip)}function x(){var a=ia.map(w);ea("update",function(b,c,d){if(a[c]){var f=b[c];!0!==e.tooltips[c]&&(f=e.tooltips[c].to(d[c])),a[c].innerHTML=f}})}function y(){ea("update",function(a,b,c,d,f){ra.forEach(function(a){var b=ia[a],d=S(qa,a,0,!0,!0,!0),g=S(qa,a,100,!0,!0,!0),h=f[a],i=e.ariaFormat.to(c[a]);b.children[0].setAttribute("aria-valuemin",d.toFixed(1)),b.children[0].setAttribute("aria-valuemax",g.toFixed(1)),b.children[0].setAttribute("aria-valuenow",h.toFixed(1)),b.children[0].setAttribute("aria-valuetext",i)})})}function z(a,b,c){if("range"===a||"steps"===a)return ta.xVal;if("count"===a){if(!b)throw new Error("noUiSlider ("+_+"): 'values' required for mode 'count'.");var d,e=100/(b-1),f=0;for(b=[];(d=f++*e)<=100;)b.push(d);a="positions"}return"positions"===a?b.map(function(a){return ta.fromStepping(c?ta.getStep(a):a)}):"values"===a?c?b.map(function(a){return ta.fromStepping(ta.getStep(ta.toStepping(a)))}):b:void 0}function A(a,b,c){function e(a,b){return(a+b).toFixed(7)/1}var f={},g=ta.xVal[0],h=ta.xVal[ta.xVal.length-1],i=!1,j=!1,k=0;return c=d(c.slice().sort(function(a,b){return a-b})),c[0]!==g&&(c.unshift(g),i=!0),c[c.length-1]!==h&&(c.push(h),j=!0),c.forEach(function(d,g){var h,l,m,n,o,p,q,r,s,t,u=d,v=c[g+1];if("steps"===b&&(h=ta.xNumSteps[g]),h||(h=v-u),!1!==u&&void 0!==v)for(h=Math.max(h,1e-7),l=u;l<=v;l=e(l,h)){for(n=ta.toStepping(l),o=n-k,r=o/a,s=Math.round(r),t=o/s,m=1;m<=s;m+=1)p=k+m*t,f[p.toFixed(5)]=["x",0];q=c.indexOf(l)>-1?1:"steps"===b?2:0,!g&&i&&(q=0),l===v&&j||(f[n.toFixed(5)]=[l,q]),k=n}}),f}function B(a,b,c){function d(a,b){var c=b===e.cssClasses.value,d=c?j:m,f=c?h:i;return b+" "+d[e.ort]+" "+f[a]}function f(a,f){f[1]=f[1]&&b?b(f[0],f[1]):f[1];var h=k(g,!1);h.className=d(f[1],e.cssClasses.marker),h.style[e.style]=a+"%",f[1]&&(h=k(g,!1),h.className=d(f[1],e.cssClasses.value),h.style[e.style]=a+"%",h.innerText=c.to(f[0]))}var g=wa.createElement("div"),h=[e.cssClasses.valueNormal,e.cssClasses.valueLarge,e.cssClasses.valueSub],i=[e.cssClasses.markerNormal,e.cssClasses.markerLarge,e.cssClasses.markerSub],j=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],m=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];return l(g,e.cssClasses.pips),l(g,0===e.ort?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical),Object.keys(a).forEach(function(b){f(b,a[b])}),g}function C(){la&&(b(la),la=null)}function D(a){C();var b=a.mode,c=a.density||1,d=a.filter||!1,e=a.values||!1,f=a.stepped||!1,g=z(b,e,f),h=A(c,b,g),i=a.format||{to:Math.round};return la=pa.appendChild(B(h,d,i))}function E(){var a=ha.getBoundingClientRect(),b="offset"+["Width","Height"][e.ort];return 0===e.ort?a.width||ha[b]:a.height||ha[b]}function F(a,b,c,d){var f=function(f){return!pa.hasAttribute("disabled")&&(!n(pa,e.cssClasses.tap)&&(!!(f=G(f,d.pageOffset,d.target||b))&&(!(a===ma.start&&void 0!==f.buttons&&f.buttons>1)&&((!d.hover||!f.buttons)&&(oa||f.preventDefault(),f.calcPoint=f.points[e.ort],void c(f,d))))))},g=[];return a.split(" ").forEach(function(a){b.addEventListener(a,f,!!oa&&{passive:!0}),g.push([a,f])}),g}function G(a,b,c){var d,f,g=0===a.type.indexOf("touch"),h=0===a.type.indexOf("mouse"),i=0===a.type.indexOf("pointer");if(0===a.type.indexOf("MSPointer")&&(i=!0),g&&e.multitouch){var j=function(a){return a.target===c||c.contains(a.target)};if("touchstart"===a.type){var k=Array.prototype.filter.call(a.touches,j);if(k.length>1)return!1;d=k[0].pageX,f=k[0].pageY}else{var l=Array.prototype.find.call(a.changedTouches,j);if(!l)return!1;d=l.pageX,f=l.pageY}}else if(g){if(a.touches.length>1)return!1;d=a.changedTouches[0].pageX,f=a.changedTouches[0].pageY}return b=b||o(wa),(h||i)&&(d=a.clientX+b.x,f=a.clientY+b.y),a.pageOffset=b,a.points=[d,f],a.cursor=h||i,a}function H(a){var b=a-f(ha,e.ort),c=100*b/E();return e.dir?100-c:c}function I(a){var b=100,c=!1;return ia.forEach(function(d,e){if(!d.hasAttribute("disabled")){var f=Math.abs(qa[e]-a);f<b&&(c=e,b=f)}}),c}function J(a,b,c,d){var e=c.slice(),f=[!a,a],g=[a,!a];d=d.slice(),a&&d.reverse(),d.length>1?d.forEach(function(a,c){var d=S(e,a,e[a]+b,f[c],g[c],!1);!1===d?b=0:(b=d-e[a],e[a]=d)}):f=g=[!0];var h=!1;d.forEach(function(a,d){h=W(a,c[a]+b,f[d],g[d])||h}),h&&d.forEach(function(a){K("update",a),K("slide",a)})}function K(a,b,c){Object.keys(va).forEach(function(d){var f=d.split(".")[0];a===f&&va[d].forEach(function(a){a.call(ka,ua.map(e.format.to),b,ua.slice(),c||!1,qa.slice())})})}function L(a,b){"mouseout"===a.type&&"HTML"===a.target.nodeName&&null===a.relatedTarget&&N(a,b)}function M(a,b){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===a.buttons&&0!==b.buttonsProperty)return N(a,b);var c=(e.dir?-1:1)*(a.calcPoint-b.startCalcPoint);J(c>0,100*c/b.baseSize,b.locations,b.handleNumbers)}function N(a,b){b.handle&&(m(b.handle,e.cssClasses.active),sa-=1),b.listeners.forEach(function(a){xa.removeEventListener(a[0],a[1])}),0===sa&&(m(pa,e.cssClasses.drag),V(),a.cursor&&(ya.style.cursor="",ya.removeEventListener("selectstart",c))),b.handleNumbers.forEach(function(a){K("change",a),K("set",a),K("end",a)})}function O(a,b){var d;if(1===b.handleNumbers.length){var f=ia[b.handleNumbers[0]];if(f.hasAttribute("disabled"))return!1;d=f.children[0],sa+=1,l(d,e.cssClasses.active)}a.stopPropagation();var g=[],h=F(ma.move,xa,M,{target:a.target,handle:d,listeners:g,startCalcPoint:a.calcPoint,baseSize:E(),pageOffset:a.pageOffset,handleNumbers:b.handleNumbers,buttonsProperty:a.buttons,locations:qa.slice()}),i=F(ma.end,xa,N,{target:a.target,handle:d,listeners:g,handleNumbers:b.handleNumbers}),j=F("mouseout",xa,L,{target:a.target,handle:d,listeners:g,handleNumbers:b.handleNumbers});g.push.apply(g,h.concat(i,j)),a.cursor&&(ya.style.cursor=getComputedStyle(a.target).cursor,ia.length>1&&l(pa,e.cssClasses.drag),ya.addEventListener("selectstart",c,!1)),b.handleNumbers.forEach(function(a){K("start",a)})}function P(a){a.stopPropagation();var b=H(a.calcPoint),c=I(b);if(!1===c)return!1;e.events.snap||h(pa,e.cssClasses.tap,e.animationDuration),W(c,b,!0,!0),V(),K("slide",c,!0),K("update",c,!0),K("change",c,!0),K("set",c,!0),e.events.snap&&O(a,{handleNumbers:[c]})}function Q(a){var b=H(a.calcPoint),c=ta.getStep(b),d=ta.fromStepping(c);Object.keys(va).forEach(function(a){"hover"===a.split(".")[0]&&va[a].forEach(function(a){a.call(ka,d)})})}function R(a){a.fixed||ia.forEach(function(a,b){F(ma.start,a.children[0],O,{handleNumbers:[b]})}),a.tap&&F(ma.start,ha,P,{}),a.hover&&F(ma.move,ha,Q,{hover:!0}),a.drag&&ja.forEach(function(b,c){if(!1!==b&&0!==c&&c!==ja.length-1){var d=ia[c-1],f=ia[c],g=[b];l(b,e.cssClasses.draggable),a.fixed&&(g.push(d.children[0]),g.push(f.children[0])),g.forEach(function(a){F(ma.start,a,O,{handles:[d,f],handleNumbers:[c-1,c]})})}})}function S(a,b,c,d,f,g){return ia.length>1&&(d&&b>0&&(c=Math.max(c,a[b-1]+e.margin)),f&&b<ia.length-1&&(c=Math.min(c,a[b+1]-e.margin))),ia.length>1&&e.limit&&(d&&b>0&&(c=Math.min(c,a[b-1]+e.limit)),f&&b<ia.length-1&&(c=Math.max(c,a[b+1]-e.limit))),e.padding&&(0===b&&(c=Math.max(c,e.padding)),b===ia.length-1&&(c=Math.min(c,100-e.padding))),c=ta.getStep(c),!((c=i(c))===a[b]&&!g)&&c}function T(a){return a+"%"}function U(a,b){qa[a]=b,ua[a]=ta.fromStepping(b);var c=function(){ia[a].style[e.style]=T(b),X(a),X(a+1)};window.requestAnimationFrame&&e.useRequestAnimationFrame?window.requestAnimationFrame(c):c()}function V(){ra.forEach(function(a){var b=qa[a]>50?-1:1,c=3+(ia.length+b*a);ia[a].childNodes[0].style.zIndex=c})}function W(a,b,c,d){return!1!==(b=S(qa,a,b,c,d,!1))&&(U(a,b),!0)}function X(a){if(ja[a]){var b=0,c=100;0!==a&&(b=qa[a-1]),a!==ja.length-1&&(c=qa[a]),ja[a].style[e.style]=T(b),ja[a].style[e.styleOposite]=T(100-c)}}function Z(a,b){null!==a&&!1!==a&&("number"==typeof a&&(a=String(a)),!1===(a=e.format.from(a))||isNaN(a)||W(b,ta.toStepping(a),!1,!1))}function $(a,b){var c=j(a),d=void 0===qa[0];b=void 0===b||!!b,c.forEach(Z),e.animate&&!d&&h(pa,e.cssClasses.tap,e.animationDuration),ra.forEach(function(a){W(a,qa[a],!0,!1)}),V(),ra.forEach(function(a){K("update",a),null!==c[a]&&b&&K("set",a)})}function aa(a){$(e.start,a)}function ba(){var a=ua.map(e.format.to);return 1===a.length?a[0]:a}function ca(){for(var a in e.cssClasses)e.cssClasses.hasOwnProperty(a)&&m(pa,e.cssClasses[a]);for(;pa.firstChild;)pa.removeChild(pa.firstChild);delete pa.noUiSlider}function da(){return qa.map(function(a,b){var c=ta.getNearbySteps(a),d=ua[b],e=c.thisStep.step,f=null;!1!==e&&d+e>c.stepAfter.startValue&&(e=c.stepAfter.startValue-d),f=d>c.thisStep.startValue?c.thisStep.step:!1!==c.stepBefore.step&&d-c.stepBefore.highestStep,100===a?e=null:0===a&&(f=null);var g=ta.countStepDecimals();return null!==e&&!1!==e&&(e=Number(e.toFixed(g))),null!==f&&!1!==f&&(f=Number(f.toFixed(g))),[f,e]})}function ea(a,b){va[a]=va[a]||[],va[a].push(b),"update"===a.split(".")[0]&&ia.forEach(function(a,b){K("update",b)})}function fa(a){var b=a&&a.split(".")[0],c=b&&a.substring(b.length);Object.keys(va).forEach(function(a){var d=a.split(".")[0],e=a.substring(d.length);b&&b!==d||c&&c!==e||delete va[a]})}function ga(a,b){var c=ba(),d=["margin","limit","padding","range","animate","snap","step","format"];d.forEach(function(b){void 0!==a[b]&&(g[b]=a[b])});var f=Y(g);d.forEach(function(b){void 0!==a[b]&&(e[b]=f[b])}),ta=f.spectrum,e.margin=f.margin,e.limit=f.limit,e.padding=f.padding,e.pips&&D(e.pips),qa=[],$(a.start||c,b)}var ha,ia,ja,ka,la,ma=p(),na=r(),oa=na&&q(),pa=a,qa=[],ra=[],sa=0,ta=e.spectrum,ua=[],va={},wa=a.ownerDocument,xa=wa.documentElement,ya=wa.body;if(pa.noUiSlider)throw new Error("noUiSlider ("+_+"): Slider was already initialized.");return v(pa),u(e.connect,ha),ka={destroy:ca,steps:da,on:ea,off:fa,get:ba,set:$,reset:aa,__moveHandles:function(a,b,c){J(a,b,qa,c)},options:g,updateOptions:ga,target:pa,removePips:C,pips:D},R(e.events),$(e.start),e.pips&&D(e.pips),e.tooltips&&x(),y(),ka}function $(a,b){if(!a||!a.nodeName)throw new Error("noUiSlider ("+_+"): create requires a single element, got: "+a);var c=Y(b,a),d=Z(a,c,b);return a.noUiSlider=d,d}var _="10.1.0";C.prototype.getMargin=function(a){var b=this.xNumSteps[0];if(b&&a/b%1!=0)throw new Error("noUiSlider ("+_+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&t(this.xVal,a)},C.prototype.toStepping=function(a){return a=x(this.xVal,this.xPct,a)},C.prototype.fromStepping=function(a){return y(this.xVal,this.xPct,a)},C.prototype.getStep=function(a){return a=z(this.xPct,this.xSteps,this.snap,a)},C.prototype.getNearbySteps=function(a){var b=w(a,this.xPct);return{stepBefore:{startValue:this.xVal[b-2],step:this.xNumSteps[b-2],highestStep:this.xHighestCompleteStep[b-2]},thisStep:{startValue:this.xVal[b-1],step:this.xNumSteps[b-1],highestStep:this.xHighestCompleteStep[b-1]},stepAfter:{startValue:this.xVal[b-0],step:this.xNumSteps[b-0],highestStep:this.xHighestCompleteStep[b-0]}}},C.prototype.countStepDecimals=function(){var a=this.xNumSteps.map(k);return Math.max.apply(null,a)},C.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var aa={to:function(a){return void 0!==a&&a.toFixed(2)},from:Number};return{version:_,create:$}});!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(function(){try{return require("moment")}catch(t){}}()):"function"==typeof define&&define.amd?define(["require"],function(t){return e(function(){try{return t("moment")}catch(t){}}())}):t.Chart=e(t.moment)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={rgb2hsl:i,rgb2hsv:n,rgb2hwb:a,rgb2cmyk:o,rgb2keyword:s,rgb2xyz:l,rgb2lab:d,rgb2lch:function(t){return x(d(t))},hsl2rgb:u,hsl2hsv:function(t){var e=t[0],i=t[1]/100,n=t[2]/100;if(0===n)return[0,0,0];return[e,100*(2*(i*=(n*=2)<=1?n:2-n)/(n+i)),100*((n+i)/2)]},hsl2hwb:function(t){return a(u(t))},hsl2cmyk:function(t){return o(u(t))},hsl2keyword:function(t){return s(u(t))},hsv2rgb:h,hsv2hsl:function(t){var e,i,n=t[0],a=t[1]/100,o=t[2]/100;return e=a*o,[n,100*(e=(e/=(i=(2-a)*o)<=1?i:2-i)||0),100*(i/=2)]},hsv2hwb:function(t){return a(h(t))},hsv2cmyk:function(t){return o(h(t))},hsv2keyword:function(t){return s(h(t))},hwb2rgb:c,hwb2hsl:function(t){return i(c(t))},hwb2hsv:function(t){return n(c(t))},hwb2cmyk:function(t){return o(c(t))},hwb2keyword:function(t){return s(c(t))},cmyk2rgb:f,cmyk2hsl:function(t){return i(f(t))},cmyk2hsv:function(t){return n(f(t))},cmyk2hwb:function(t){return a(f(t))},cmyk2keyword:function(t){return s(f(t))},keyword2rgb:w,keyword2hsl:function(t){return i(w(t))},keyword2hsv:function(t){return n(w(t))},keyword2hwb:function(t){return a(w(t))},keyword2cmyk:function(t){return o(w(t))},keyword2lab:function(t){return d(w(t))},keyword2xyz:function(t){return l(w(t))},xyz2rgb:p,xyz2lab:m,xyz2lch:function(t){return x(m(t))},lab2xyz:v,lab2rgb:y,lab2lch:x,lch2lab:k,lch2xyz:function(t){return v(k(t))},lch2rgb:function(t){return y(k(t))}};function i(t){var e,i,n=t[0]/255,a=t[1]/255,o=t[2]/255,r=Math.min(n,a,o),s=Math.max(n,a,o),l=s-r;return s==r?e=0:n==s?e=(a-o)/l:a==s?e=2+(o-n)/l:o==s&&(e=4+(n-a)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(r+s)/2,[e,100*(s==r?0:i<=.5?l/(s+r):l/(2-s-r)),100*i]}function n(t){var e,i,n=t[0],a=t[1],o=t[2],r=Math.min(n,a,o),s=Math.max(n,a,o),l=s-r;return i=0==s?0:l/s*1e3/10,s==r?e=0:n==s?e=(a-o)/l:a==s?e=2+(o-n)/l:o==s&&(e=4+(n-a)/l),(e=Math.min(60*e,360))<0&&(e+=360),[e,i,s/255*1e3/10]}function a(t){var e=t[0],n=t[1],a=t[2];return[i(t)[0],100*(1/255*Math.min(e,Math.min(n,a))),100*(a=1-1/255*Math.max(e,Math.max(n,a)))]}function o(t){var e,i=t[0]/255,n=t[1]/255,a=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-n,1-a)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-a-e)/(1-e)||0),100*e]}function s(t){return _[JSON.stringify(t)]}function l(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*i+.0722*n),100*(.0193*e+.1192*i+.9505*n)]}function d(t){var e=l(t),i=e[0],n=e[1],a=e[2];return n/=100,a/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]}function u(t){var e,i,n,a,o,r=t[0]/360,s=t[1]/100,l=t[2]/100;if(0==s)return[o=255*l,o,o];e=2*l-(i=l<.5?l*(1+s):l+s-l*s),a=[0,0,0];for(var d=0;d<3;d++)(n=r+1/3*-(d-1))<0&&n++,n>1&&n--,o=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,a[d]=255*o;return a}function h(t){var e=t[0]/60,i=t[1]/100,n=t[2]/100,a=Math.floor(e)%6,o=e-Math.floor(e),r=255*n*(1-i),s=255*n*(1-i*o),l=255*n*(1-i*(1-o));n*=255;switch(a){case 0:return[n,l,r];case 1:return[s,n,r];case 2:return[r,n,l];case 3:return[r,s,n];case 4:return[l,r,n];case 5:return[n,r,s]}}function c(t){var e,i,n,a,o=t[0]/360,s=t[1]/100,l=t[2]/100,d=s+l;switch(d>1&&(s/=d,l/=d),n=6*o-(e=Math.floor(6*o)),0!=(1&e)&&(n=1-n),a=s+n*((i=1-l)-s),e){default:case 6:case 0:r=i,g=a,b=s;break;case 1:r=a,g=i,b=s;break;case 2:r=s,g=i,b=a;break;case 3:r=s,g=a,b=i;break;case 4:r=a,g=s,b=i;break;case 5:r=i,g=s,b=a}return[255*r,255*g,255*b]}function f(t){var e=t[0]/100,i=t[1]/100,n=t[2]/100,a=t[3]/100;return[255*(1-Math.min(1,e*(1-a)+a)),255*(1-Math.min(1,i*(1-a)+a)),255*(1-Math.min(1,n*(1-a)+a))]}function p(t){var e,i,n,a=t[0]/100,o=t[1]/100,r=t[2]/100;return i=-.9689*a+1.8758*o+.0415*r,n=.0557*a+-.204*o+1.057*r,e=(e=3.2406*a+-1.5372*o+-.4986*r)>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]}function m(t){var e=t[0],i=t[1],n=t[2];return i/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function v(t){var e,i,n,a,o=t[0],r=t[1],s=t[2];return o<=8?a=(i=100*o/903.3)/100*7.787+16/116:(i=100*Math.pow((o+16)/116,3),a=Math.pow(i/100,1/3)),[e=e/95.047<=.008856?e=95.047*(r/500+a-16/116)/7.787:95.047*Math.pow(r/500+a,3),i,n=n/108.883<=.008859?n=108.883*(a-s/200-16/116)/7.787:108.883*Math.pow(a-s/200,3)]}function x(t){var e,i=t[0],n=t[1],a=t[2];return(e=360*Math.atan2(a,n)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(n*n+a*a),e]}function y(t){return p(v(t))}function k(t){var e,i=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[i,n*Math.cos(e),n*Math.sin(e)]}function w(t){return M[t]}var M={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},_={};for(var C in M)_[JSON.stringify(M[C])]=C;var S=function(){return new T};for(var P in e){S[P+"Raw"]=function(t){return function(i){return"number"==typeof i&&(i=Array.prototype.slice.call(arguments)),e[t](i)}}(P);var I=/(\w+)2(\w+)/.exec(P),A=I[1],D=I[2];(S[A]=S[A]||{})[D]=S[P]=function(t){return function(i){"number"==typeof i&&(i=Array.prototype.slice.call(arguments));var n=e[t](i);if("string"==typeof n||void 0===n)return n;for(var a=0;a<n.length;a++)n[a]=Math.round(n[a]);return n}}(P)}var T=function(){this.convs={}};T.prototype.routeSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i))},T.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},T.prototype.getValues=function(t){var e=this.convs[t];if(!e){var i=this.space,n=this.convs[i];e=S[i][t](n),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){T.prototype[t]=function(e){return this.routeSpace(t,arguments)}});var F=S,L={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},R={getRgba:O,getHsla:z,getRgb:function(t){var e=O(t);return e&&e.slice(0,3)},getHsl:function(t){var e=z(t);return e&&e.slice(0,3)},getHwb:B,getAlpha:function(t){var e=O(t);if(e)return e[3];if(e=z(t))return e[3];if(e=B(t))return e[3]},hexString:function(t,e){var e=void 0!==e&&3===t.length?e:t[3];return"#"+H(t[0])+H(t[1])+H(t[2])+(e>=0&&e<1?H(Math.round(255*e)):"")},rgbString:function(t,e){if(e<1||t[3]&&t[3]<1)return N(t,e);return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:N,percentString:function(t,e){if(e<1||t[3]&&t[3]<1)return W(t,e);var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),a=Math.round(t[2]/255*100);return"rgb("+i+"%, "+n+"%, "+a+"%)"},percentaString:W,hslString:function(t,e){if(e<1||t[3]&&t[3]<1)return V(t,e);return"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:V,hwbString:function(t,e){void 0===e&&(e=void 0!==t[3]?t[3]:1);return"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return j[t.slice(0,3)]}};function O(t){if(t){var e=[0,0,0],i=1,n=t.match(/^#([a-fA-F0-9]{3,4})$/i),a="";if(n){a=(n=n[1])[3];for(var o=0;o<e.length;o++)e[o]=parseInt(n[o]+n[o],16);a&&(i=Math.round(parseInt(a+a,16)/255*100)/100)}else if(n=t.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){a=n[2],n=n[1];for(o=0;o<e.length;o++)e[o]=parseInt(n.slice(2*o,2*o+2),16);a&&(i=Math.round(parseInt(a,16)/255*100)/100)}else if(n=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<e.length;o++)e[o]=parseInt(n[o+1]);i=parseFloat(n[4])}else if(n=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<e.length;o++)e[o]=Math.round(2.55*parseFloat(n[o+1]));i=parseFloat(n[4])}else if(n=t.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(e=L[n[1]]))return}for(o=0;o<e.length;o++)e[o]=E(e[o],0,255);return i=i||0==i?E(i,0,1):1,e[3]=i,e}}function z(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[E(parseInt(e[1]),0,360),E(parseFloat(e[2]),0,100),E(parseFloat(e[3]),0,100),E(isNaN(i)?1:i,0,1)]}}}function B(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[E(parseInt(e[1]),0,360),E(parseFloat(e[2]),0,100),E(parseFloat(e[3]),0,100),E(isNaN(i)?1:i,0,1)]}}}function N(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function W(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function V(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function E(t,e,i){return Math.min(Math.max(e,t),i)}function H(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var j={};for(var q in L)j[L[q]]=q;var Y=function(t){return t instanceof Y?t:this instanceof Y?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=R.getRgba(t))?this.setValues("rgb",e):(e=R.getHsla(t))?this.setValues("hsl",e):(e=R.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new Y(t);var e};Y.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return R.hexString(this.values.rgb)},rgbString:function(){return R.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return R.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return R.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return R.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return R.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return R.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return R.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,i=(e[0]+t)%360;return e[0]=i<0?360+i:i,this.setValues("hsl",e),this},mix:function(t,e){var i=t,n=void 0===e?.5:e,a=2*n-1,o=this.alpha()-i.alpha(),r=((a*o==-1?a:(a+o)/(1+a*o))+1)/2,s=1-r;return this.rgb(r*this.red()+s*i.red(),r*this.green()+s*i.green(),r*this.blue()+s*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var t,e,i=new Y,n=this.values,a=i.values;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],"[object Array]"===(e={}.toString.call(t))?a[o]=t.slice(0):"[object Number]"===e?a[o]=t:console.error("unexpected color value:",t));return i}},Y.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Y.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Y.prototype.getValues=function(t){for(var e=this.values,i={},n=0;n<t.length;n++)i[t.charAt(n)]=e[t][n];return 1!==e.alpha&&(i.a=e.alpha),i},Y.prototype.setValues=function(t,e){var i,n,a=this.values,o=this.spaces,r=this.maxes,s=1;if(this.valid=!0,"alpha"===t)s=e;else if(e.length)a[t]=e.slice(0,t.length),s=e[t.length];else if(void 0!==e[t.charAt(0)]){for(i=0;i<t.length;i++)a[t][i]=e[t.charAt(i)];s=e.a}else if(void 0!==e[o[t][0]]){var l=o[t];for(i=0;i<t.length;i++)a[t][i]=e[l[i]];s=e.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===s?a.alpha:s)),"alpha"===t)return!1;for(i=0;i<t.length;i++)n=Math.max(0,Math.min(r[t][i],a[t][i])),a[t][i]=Math.round(n);for(var d in o)d!==t&&(a[d]=F[t][d](a[t]));return!0},Y.prototype.setSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i),this)},Y.prototype.setChannel=function(t,e,i){var n=this.values[t];return void 0===i?n[e]:i===n[e]?this:(n[e]=i,this.setValues(t,n),this)},"undefined"!=typeof window&&(window.Color=Y);var U,X=Y,K={noop:function(){},uid:(U=0,function(){return U++}),isNullOrUndef:function(t){return null==t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,i){return K.valueOrDefault(K.isArray(t)?t[e]:t,i)},callback:function(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)},each:function(t,e,i,n){var a,o,r;if(K.isArray(t))if(o=t.length,n)for(a=o-1;a>=0;a--)e.call(i,t[a],a);else for(a=0;a<o;a++)e.call(i,t[a],a);else if(K.isObject(t))for(o=(r=Object.keys(t)).length,a=0;a<o;a++)e.call(i,t[r[a]],r[a])},arrayEquals:function(t,e){var i,n,a,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(a=t[i],o=e[i],a instanceof Array&&o instanceof Array){if(!K.arrayEquals(a,o))return!1}else if(a!==o)return!1;return!0},clone:function(t){if(K.isArray(t))return t.map(K.clone);if(K.isObject(t)){for(var e={},i=Object.keys(t),n=i.length,a=0;a<n;++a)e[i[a]]=K.clone(t[i[a]]);return e}return t},_merger:function(t,e,i,n){var a=e[t],o=i[t];K.isObject(a)&&K.isObject(o)?K.merge(a,o,n):e[t]=K.clone(o)},_mergerIf:function(t,e,i){var n=e[t],a=i[t];K.isObject(n)&&K.isObject(a)?K.mergeIf(n,a):e.hasOwnProperty(t)||(e[t]=K.clone(a))},merge:function(t,e,i){var n,a,o,r,s,l=K.isArray(e)?e:[e],d=l.length;if(!K.isObject(t))return t;for(n=(i=i||{}).merger||K._merger,a=0;a<d;++a)if(e=l[a],K.isObject(e))for(s=0,r=(o=Object.keys(e)).length;s<r;++s)n(o[s],t,e,i);return t},mergeIf:function(t,e){return K.merge(t,e,{merger:K._mergerIf})},extend:function(t){for(var e=function(e,i){t[i]=e},i=1,n=arguments.length;i<n;++i)K.each(arguments[i],e);return t},inherits:function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=K.inherits,t&&K.extend(i.prototype,t),i.__super__=e.prototype,i}},G=K;K.callCallback=K.callback,K.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)},K.getValueOrDefault=K.valueOrDefault,K.getValueAtIndexOrDefault=K.valueAtIndexOrDefault;var Z={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.45),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-Z.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*Z.easeInBounce(2*t):.5*Z.easeOutBounce(2*t-1)+.5}},$={effects:Z};G.easingEffects=Z;var J=Math.PI,Q=J/180,tt=2*J,et=J/2,it=J/4,nt=2*J/3,at={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,i,n,a,o){if(o){var r=Math.min(o,a/2,n/2),s=e+r,l=i+r,d=e+n-r,u=i+a-r;t.moveTo(e,l),s<d&&l<u?(t.arc(s,l,r,-J,-et),t.arc(d,l,r,-et,0),t.arc(d,u,r,0,et),t.arc(s,u,r,et,J)):s<d?(t.moveTo(s,i),t.arc(d,l,r,-et,et),t.arc(s,l,r,et,J+et)):l<u?(t.arc(s,l,r,-J,0),t.arc(s,u,r,0,J)):t.arc(s,l,r,-J,J),t.closePath(),t.moveTo(e,i)}else t.rect(e,i,n,a)},drawPoint:function(t,e,i,n,a,o){var r,s,l,d,u,h=(o||0)*Q;if(!e||"object"!=typeof e||"[object HTMLImageElement]"!==(r=e.toString())&&"[object HTMLCanvasElement]"!==r){if(!(isNaN(i)||i<=0)){switch(t.beginPath(),e){default:t.arc(n,a,i,0,tt),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(h)*i,a-Math.cos(h)*i),h+=nt,t.lineTo(n+Math.sin(h)*i,a-Math.cos(h)*i),h+=nt,t.lineTo(n+Math.sin(h)*i,a-Math.cos(h)*i),t.closePath();break;case"rectRounded":d=i-(u=.516*i),s=Math.cos(h+it)*d,l=Math.sin(h+it)*d,t.arc(n-s,a-l,u,h-J,h-et),t.arc(n+l,a-s,u,h-et,h),t.arc(n+s,a+l,u,h,h+et),t.arc(n-l,a+s,u,h+et,h+J),t.closePath();break;case"rect":if(!o){d=Math.SQRT1_2*i,t.rect(n-d,a-d,2*d,2*d);break}h+=it;case"rectRot":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,a-l),t.lineTo(n+l,a-s),t.lineTo(n+s,a+l),t.lineTo(n-l,a+s),t.closePath();break;case"crossRot":h+=it;case"cross":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,a-l),t.lineTo(n+s,a+l),t.moveTo(n+l,a-s),t.lineTo(n-l,a+s);break;case"star":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,a-l),t.lineTo(n+s,a+l),t.moveTo(n+l,a-s),t.lineTo(n-l,a+s),h+=it,s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,a-l),t.lineTo(n+s,a+l),t.moveTo(n+l,a-s),t.lineTo(n-l,a+s);break;case"line":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,a-l),t.lineTo(n+s,a+l);break;case"dash":t.moveTo(n,a),t.lineTo(n+Math.cos(h)*i,a+Math.sin(h)*i)}t.fill(),t.stroke()}}else t.drawImage(e,n-e.width/2,a-e.height/2,e.width,e.height)},_isPointInArea:function(t,e){return t.x>e.left-1e-6&&t.x<e.right+1e-6&&t.y>e.top-1e-6&&t.y<e.bottom+1e-6},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,i,n){var a=i.steppedLine;if(a){if("middle"===a){var o=(e.x+i.x)/2;t.lineTo(o,n?i.y:e.y),t.lineTo(o,n?e.y:i.y)}else"after"===a&&!n||"after"!==a&&n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}else i.tension?t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y):t.lineTo(i.x,i.y)}},ot=at;G.clear=at.clear,G.drawRoundedRectangle=function(t){t.beginPath(),at.roundedRect.apply(at,arguments)};var rt={_set:function(t,e){return G.merge(this[t]||(this[t]={}),e)}};rt._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var st=rt,lt=G.valueOrDefault;var dt={toLineHeight:function(t,e){var i=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,i,n,a;return G.isObject(t)?(e=+t.top||0,i=+t.right||0,n=+t.bottom||0,a=+t.left||0):e=i=n=a=+t||0,{top:e,right:i,bottom:n,left:a,height:e+n,width:a+i}},_parseFont:function(t){var e=st.global,i=lt(t.fontSize,e.defaultFontSize),n={family:lt(t.fontFamily,e.defaultFontFamily),lineHeight:G.options.toLineHeight(lt(t.lineHeight,e.defaultLineHeight),i),size:i,style:lt(t.fontStyle,e.defaultFontStyle),weight:null,string:""};return n.string=function(t){return!t||G.isNullOrUndef(t.size)||G.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(n),n},resolve:function(t,e,i){var n,a,o;for(n=0,a=t.length;n<a;++n)if(void 0!==(o=t[n])&&(void 0!==e&&"function"==typeof o&&(o=o(e)),void 0!==i&&G.isArray(o)&&(o=o[i]),void 0!==o))return o}},ut=G,ht=$,ct=ot,ft=dt;ut.easing=ht,ut.canvas=ct,ut.options=ft;var gt=function(t){ut.extend(this,t),this.initialize.apply(this,arguments)};ut.extend(gt.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=ut.clone(t._model)),t._start={},t},transition:function(t){var e=this,i=e._model,n=e._start,a=e._view;return i&&1!==t?(a||(a=e._view={}),n||(n=e._start={}),function(t,e,i,n){var a,o,r,s,l,d,u,h,c,f=Object.keys(i);for(a=0,o=f.length;a<o;++a)if(d=i[r=f[a]],e.hasOwnProperty(r)||(e[r]=d),(s=e[r])!==d&&"_"!==r[0]){if(t.hasOwnProperty(r)||(t[r]=s),(u=typeof d)==typeof(l=t[r]))if("string"===u){if((h=X(l)).valid&&(c=X(d)).valid){e[r]=c.mix(h,n).rgbString();continue}}else if(ut.isFinite(l)&&ut.isFinite(d)){e[r]=l+(d-l)*n;continue}e[r]=d}}(n,a,i,t),e):(e._view=i,e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ut.isNumber(this._model.x)&&ut.isNumber(this._model.y)}}),gt.extend=ut.inherits;var pt=gt,mt=pt.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),vt=mt;Object.defineProperty(mt.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(mt.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),st._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ut.noop,onComplete:ut.noop}});var bt={animations:[],request:null,addAnimation:function(t,e,i,n){var a,o,r=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=i,n||(t.animating=!0),a=0,o=r.length;a<o;++a)if(r[a].chart===t)return void(r[a]=e);r.push(e),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=ut.findIndex(this.animations,function(e){return e.chart===t});-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=ut.requestAnimFrame.call(window,function(){t.request=null,t.startDigest()}))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var t,e,i,n,a=this.animations,o=0;o<a.length;)e=(t=a[o]).chart,i=t.numSteps,n=Math.floor((Date.now()-t.startTime)/t.duration*i)+1,t.currentStep=Math.min(n,i),ut.callback(t.render,[e,t],e),ut.callback(t.onAnimationProgress,[t],e),t.currentStep>=i?(ut.callback(t.onAnimationComplete,[t],e),e.animating=!1,a.splice(o,1)):++o}},xt=ut.options.resolve,yt=["push","pop","shift","splice","unshift"];function kt(t,e){var i=t._chartjs;if(i){var n=i.listeners,a=n.indexOf(e);-1!==a&&n.splice(a,1),n.length>0||(yt.forEach(function(e){delete t[e]}),delete t._chartjs)}}var wt=function(t,e){this.initialize(t,e)};ut.extend(wt.prototype,{datasetElementType:null,dataElementType:null,initialize:function(t,e){this.chart=t,this.index=e,this.linkScales(),this.addElements()},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,e=t.getMeta(),i=t.getDataset();null!==e.xAxisID&&e.xAxisID in t.chart.scales||(e.xAxisID=i.xAxisID||t.chart.options.scales.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in t.chart.scales||(e.yAxisID=i.yAxisID||t.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this.update(!0)},destroy:function(){this._data&&kt(this._data,this)},createMetaDataset:function(){var t=this.datasetElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(t){var e=this.dataElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index,_index:t})},addElements:function(){var t,e,i=this.getMeta(),n=this.getDataset().data||[],a=i.data;for(t=0,e=n.length;t<e;++t)a[t]=a[t]||this.createMetaData(t);i.dataset=i.dataset||this.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t,e,i=this,n=i.getDataset(),a=n.data||(n.data=[]);i._data!==a&&(i._data&&kt(i._data,i),a&&Object.isExtensible(a)&&(e=i,(t=a)._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),yt.forEach(function(e){var i="onData"+e.charAt(0).toUpperCase()+e.slice(1),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),a=n.apply(this,e);return ut.each(t._chartjs.listeners,function(t){"function"==typeof t[i]&&t[i].apply(t,e)}),a}})}))),i._data=a),i.resyncElements()},update:ut.noop,transition:function(t){for(var e=this.getMeta(),i=e.data||[],n=i.length,a=0;a<n;++a)i[a].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],i=e.length,n=0;for(t.dataset&&t.dataset.draw();n<i;++n)e[n].draw()},removeHoverStyle:function(t){ut.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],i=t._index,n=t.custom||{},a=t._model,o=ut.getHoverColor;t.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth},a.backgroundColor=xt([n.hoverBackgroundColor,e.hoverBackgroundColor,o(a.backgroundColor)],void 0,i),a.borderColor=xt([n.hoverBorderColor,e.hoverBorderColor,o(a.borderColor)],void 0,i),a.borderWidth=xt([n.hoverBorderWidth,e.hoverBorderWidth,a.borderWidth],void 0,i)},resyncElements:function(){var t=this.getMeta(),e=this.getDataset().data,i=t.data.length,n=e.length;n<i?t.data.splice(n,i-n):n>i&&this.insertElements(i,n-i)},insertElements:function(t,e){for(var i=0;i<e;++i)this.addElementAndReset(t+i)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),wt.extend=ut.inherits;var Mt=wt;st._set("global",{elements:{arc:{backgroundColor:st.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var _t=pt.extend({inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var i=this._view;if(i){for(var n=ut.getAngleFromPoint(i,{x:t,y:e}),a=n.angle,o=n.distance,r=i.startAngle,s=i.endAngle;s<r;)s+=2*Math.PI;for(;a>s;)a-=2*Math.PI;for(;a<r;)a+=2*Math.PI;var l=a>=r&&a<=s,d=o>=i.innerRadius&&o<=i.outerRadius;return l&&d}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,i=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,i=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},draw:function(){var t,e=this._chart.ctx,i=this._view,n=i.startAngle,a=i.endAngle,o="inner"===i.borderAlign?.33:0;e.save(),e.beginPath(),e.arc(i.x,i.y,Math.max(i.outerRadius-o,0),n,a),e.arc(i.x,i.y,i.innerRadius,a,n,!0),e.closePath(),e.fillStyle=i.backgroundColor,e.fill(),i.borderWidth&&("inner"===i.borderAlign?(e.beginPath(),t=o/i.outerRadius,e.arc(i.x,i.y,i.outerRadius,n-t,a+t),i.innerRadius>o?(t=o/i.innerRadius,e.arc(i.x,i.y,i.innerRadius-o,a+t,n-t,!0)):e.arc(i.x,i.y,o,a+Math.PI/2,n-Math.PI/2),e.closePath(),e.clip(),e.beginPath(),e.arc(i.x,i.y,i.outerRadius,n,a),e.arc(i.x,i.y,i.innerRadius,a,n,!0),e.closePath(),e.lineWidth=2*i.borderWidth,e.lineJoin="round"):(e.lineWidth=i.borderWidth,e.lineJoin="bevel"),e.strokeStyle=i.borderColor,e.stroke()),e.restore()}}),Ct=ut.valueOrDefault,St=st.global.defaultColor;st._set("global",{elements:{line:{tension:.4,backgroundColor:St,borderWidth:3,borderColor:St,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Pt=pt.extend({draw:function(){var t,e,i,n,a=this._view,o=this._chart.ctx,r=a.spanGaps,s=this._children.slice(),l=st.global,d=l.elements.line,u=-1;for(this._loop&&s.length&&s.push(s[0]),o.save(),o.lineCap=a.borderCapStyle||d.borderCapStyle,o.setLineDash&&o.setLineDash(a.borderDash||d.borderDash),o.lineDashOffset=Ct(a.borderDashOffset,d.borderDashOffset),o.lineJoin=a.borderJoinStyle||d.borderJoinStyle,o.lineWidth=Ct(a.borderWidth,d.borderWidth),o.strokeStyle=a.borderColor||l.defaultColor,o.beginPath(),u=-1,t=0;t<s.length;++t)e=s[t],i=ut.previousItem(s,t),n=e._view,0===t?n.skip||(o.moveTo(n.x,n.y),u=t):(i=-1===u?i:s[u],n.skip||(u!==t-1&&!r||-1===u?o.moveTo(n.x,n.y):ut.canvas.lineTo(o,i._view,e._view),u=t));o.stroke(),o.restore()}}),It=ut.valueOrDefault,At=st.global.defaultColor;function Dt(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}st._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:At,borderColor:At,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Tt=pt.extend({inRange:function(t,e){var i=this._view;return!!i&&Math.pow(t-i.x,2)+Math.pow(e-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:Dt,inXRange:Dt,inYRange:function(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,i=this._chart.ctx,n=e.pointStyle,a=e.rotation,o=e.radius,r=e.x,s=e.y,l=st.global,d=l.defaultColor;e.skip||(void 0===t||ut.canvas._isPointInArea(e,t))&&(i.strokeStyle=e.borderColor||d,i.lineWidth=It(e.borderWidth,l.elements.point.borderWidth),i.fillStyle=e.backgroundColor||d,ut.canvas.drawPoint(i,n,o,r,s,a))}}),Ft=st.global.defaultColor;function Lt(t){return t&&void 0!==t.width}function Rt(t){var e,i,n,a,o;return Lt(t)?(o=t.width/2,e=t.x-o,i=t.x+o,n=Math.min(t.y,t.base),a=Math.max(t.y,t.base)):(o=t.height/2,e=Math.min(t.x,t.base),i=Math.max(t.x,t.base),n=t.y-o,a=t.y+o),{left:e,top:n,right:i,bottom:a}}function Ot(t,e,i){return t===e?i:t===i?e:t}function zt(t,e,i){var n,a,o,r,s=t.borderWidth,l=function(t){var e=t.borderSkipped,i={};return e?(t.horizontal?t.base>t.x&&(e=Ot(e,"left","right")):t.base<t.y&&(e=Ot(e,"bottom","top")),i[e]=!0,i):i}(t);return ut.isObject(s)?(n=+s.top||0,a=+s.right||0,o=+s.bottom||0,r=+s.left||0):n=a=o=r=+s||0,{t:l.top||n<0?0:n>i?i:n,r:l.right||a<0?0:a>e?e:a,b:l.bottom||o<0?0:o>i?i:o,l:l.left||r<0?0:r>e?e:r}}function Bt(t,e,i){var n=null===e,a=null===i,o=!(!t||n&&a)&&Rt(t);return o&&(n||e>=o.left&&e<=o.right)&&(a||i>=o.top&&i<=o.bottom)}st._set("global",{elements:{rectangle:{backgroundColor:Ft,borderColor:Ft,borderSkipped:"bottom",borderWidth:0}}});var Nt=pt.extend({draw:function(){var t=this._chart.ctx,e=this._view,i=function(t){var e=Rt(t),i=e.right-e.left,n=e.bottom-e.top,a=zt(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n},inner:{x:e.left+a.l,y:e.top+a.t,w:i-a.l-a.r,h:n-a.t-a.b}}}(e),n=i.outer,a=i.inner;t.fillStyle=e.backgroundColor,t.fillRect(n.x,n.y,n.w,n.h),n.w===a.w&&n.h===a.h||(t.save(),t.beginPath(),t.rect(n.x,n.y,n.w,n.h),t.clip(),t.fillStyle=e.borderColor,t.rect(a.x,a.y,a.w,a.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return Bt(this._view,t,e)},inLabelRange:function(t,e){var i=this._view;return Lt(i)?Bt(i,t,null):Bt(i,null,e)},inXRange:function(t){return Bt(this._view,t,null)},inYRange:function(t){return Bt(this._view,null,t)},getCenterPoint:function(){var t,e,i=this._view;return Lt(i)?(t=i.x,e=(i.y+i.base)/2):(t=(i.x+i.base)/2,e=i.y),{x:t,y:e}},getArea:function(){var t=this._view;return Lt(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),Wt={},Vt=_t,Et=Pt,Ht=Tt,jt=Nt;Wt.Arc=Vt,Wt.Line=Et,Wt.Point=Ht,Wt.Rectangle=jt;var qt=ut.options.resolve;st._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}});var Yt=Mt.extend({dataElementType:Wt.Rectangle,initialize:function(){var t;Mt.prototype.initialize.apply(this,arguments),(t=this.getMeta()).stack=this.getDataset().stack,t.bar=!0},update:function(t){var e,i,n=this.getMeta().data;for(this._ruler=this.getRuler(),e=0,i=n.length;e<i;++e)this.updateElement(n[e],e,t)},updateElement:function(t,e,i){var n=this,a=n.getMeta(),o=n.getDataset(),r=n._resolveElementOptions(t,e);t._xScale=n.getScaleForId(a.xAxisID),t._yScale=n.getScaleForId(a.yAxisID),t._datasetIndex=n.index,t._index=e,t._model={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderSkipped:r.borderSkipped,borderWidth:r.borderWidth,datasetLabel:o.label,label:n.chart.data.labels[e]},n._updateElementGeometry(t,e,i),t.pivot()},_updateElementGeometry:function(t,e,i){var n=this,a=t._model,o=n._getValueScale(),r=o.getBasePixel(),s=o.isHorizontal(),l=n._ruler||n.getRuler(),d=n.calculateBarValuePixels(n.index,e),u=n.calculateBarIndexPixels(n.index,e,l);a.horizontal=s,a.base=i?r:d.base,a.x=s?i?r:d.head:u.center,a.y=s?u.center:i?r:d.head,a.height=s?u.size:void 0,a.width=s?void 0:u.size},_getStacks:function(t){var e,i,n=this.chart,a=this._getIndexScale().options.stacked,o=void 0===t?n.data.datasets.length:t+1,r=[];for(e=0;e<o;++e)(i=n.getDatasetMeta(e)).bar&&n.isDatasetVisible(e)&&(!1===a||!0===a&&-1===r.indexOf(i.stack)||void 0===a&&(void 0===i.stack||-1===r.indexOf(i.stack)))&&r.push(i.stack);return r},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var i=this._getStacks(t),n=void 0!==e?i.indexOf(e):-1;return-1===n?i.length-1:n},getRuler:function(){var t,e,i=this._getIndexScale(),n=this.getStackCount(),a=this.index,o=i.isHorizontal(),r=o?i.left:i.top,s=r+(o?i.width:i.height),l=[];for(t=0,e=this.getMeta().data.length;t<e;++t)l.push(i.getPixelForValue(null,t,a));return{min:ut.isNullOrUndef(i.options.barThickness)?function(t,e){var i,n,a,o,r=t.isHorizontal()?t.width:t.height,s=t.getTicks();for(a=1,o=e.length;a<o;++a)r=Math.min(r,Math.abs(e[a]-e[a-1]));for(a=0,o=s.length;a<o;++a)n=t.getPixelForTick(a),r=a>0?Math.min(r,n-i):r,i=n;return r}(i,l):-1,pixels:l,start:r,end:s,stackCount:n,scale:i}},calculateBarValuePixels:function(t,e){var i,n,a,o,r,s,l=this.chart,d=this.getMeta(),u=this._getValueScale(),h=u.isHorizontal(),c=l.data.datasets,f=+u.getRightValue(c[t].data[e]),g=u.options.minBarLength,p=u.options.stacked,m=d.stack,v=0;if(p||void 0===p&&void 0!==m)for(i=0;i<t;++i)(n=l.getDatasetMeta(i)).bar&&n.stack===m&&n.controller._getValueScaleId()===u.id&&l.isDatasetVisible(i)&&(a=+u.getRightValue(c[i].data[e]),(f<0&&a<0||f>=0&&a>0)&&(v+=a));return o=u.getPixelForValue(v),s=(r=u.getPixelForValue(v+f))-o,void 0!==g&&Math.abs(s)<g&&(s=g,r=f>=0&&!h||f<0&&h?o-g:o+g),{size:s,base:o,head:r,center:r+s/2}},calculateBarIndexPixels:function(t,e,i){var n=i.scale.options,a="flex"===n.barThickness?function(t,e,i){var n,a=e.pixels,o=a[t],r=t>0?a[t-1]:null,s=t<a.length-1?a[t+1]:null,l=i.categoryPercentage;return null===r&&(r=o-(null===s?e.end-e.start:s-o)),null===s&&(s=o+o-r),n=o-(o-Math.min(r,s))/2*l,{chunk:Math.abs(s-r)/2*l/e.stackCount,ratio:i.barPercentage,start:n}}(e,i,n):function(t,e,i){var n,a,o=i.barThickness,r=e.stackCount,s=e.pixels[t];return ut.isNullOrUndef(o)?(n=e.min*i.categoryPercentage,a=i.barPercentage):(n=o*r,a=1),{chunk:n/r,ratio:a,start:s-n/2}}(e,i,n),o=this.getStackIndex(t,this.getMeta().stack),r=a.start+a.chunk*o+a.chunk/2,s=Math.min(ut.valueOrDefault(n.maxBarThickness,1/0),a.chunk*a.ratio);return{base:r-s/2,head:r+s/2,center:r,size:s}},draw:function(){var t=this.chart,e=this._getValueScale(),i=this.getMeta().data,n=this.getDataset(),a=i.length,o=0;for(ut.canvas.clipArea(t.ctx,t.chartArea);o<a;++o)isNaN(e.getRightValue(n.data[o]))||i[o].draw();ut.canvas.unclipArea(t.ctx)},_resolveElementOptions:function(t,e){var i,n,a,o=this.chart,r=o.data.datasets[this.index],s=t.custom||{},l=o.options.elements.rectangle,d={},u={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},h=["backgroundColor","borderColor","borderSkipped","borderWidth"];for(i=0,n=h.length;i<n;++i)d[a=h[i]]=qt([s[a],r[a],l[a]],u,e);return d}}),Ut=ut.valueOrDefault,Xt=ut.options.resolve;st._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.datasets[t.datasetIndex].label||"",n=e.datasets[t.datasetIndex].data[t.index];return i+": ("+t.xLabel+", "+t.yLabel+", "+n.r+")"}}}});var Kt=Mt.extend({dataElementType:Wt.Point,update:function(t){var e=this,i=e.getMeta().data;ut.each(i,function(i,n){e.updateElement(i,n,t)})},updateElement:function(t,e,i){var n=this,a=n.getMeta(),o=t.custom||{},r=n.getScaleForId(a.xAxisID),s=n.getScaleForId(a.yAxisID),l=n._resolveElementOptions(t,e),d=n.getDataset().data[e],u=n.index,h=i?r.getPixelForDecimal(.5):r.getPixelForValue("object"==typeof d?d:NaN,e,u),c=i?s.getBasePixel():s.getPixelForValue(d,e,u);t._xScale=r,t._yScale=s,t._options=l,t._datasetIndex=u,t._index=e,t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:o.skip||isNaN(h)||isNaN(c),x:h,y:c},t.pivot()},setHoverStyle:function(t){var e=t._model,i=t._options,n=ut.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ut(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Ut(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Ut(i.hoverBorderWidth,i.borderWidth),e.radius=i.radius+i.hoverRadius},_resolveElementOptions:function(t,e){var i,n,a,o=this.chart,r=o.data.datasets[this.index],s=t.custom||{},l=o.options.elements.point,d=r.data[e],u={},h={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},c=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"];for(i=0,n=c.length;i<n;++i)u[a=c[i]]=Xt([s[a],r[a],l[a]],h,e);return u.radius=Xt([s.radius,d?d.r:void 0,r.radius,l.radius],h,e),u}}),Gt=ut.options.resolve,Zt=ut.valueOrDefault;st._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var i=t.data,n=i.datasets,a=i.labels;if(n.length)for(var o=0;o<n[0].data.length;++o)e.push('<li><span style="background-color:'+n[0].backgroundColor[o]+'"></span>'),a[o]&&e.push(a[o]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map(function(i,n){var a=t.getDatasetMeta(0),o=e.datasets[0],r=a.data[n],s=r&&r.custom||{},l=t.options.elements.arc;return{text:i,fillStyle:Gt([s.backgroundColor,o.backgroundColor,l.backgroundColor],void 0,n),strokeStyle:Gt([s.borderColor,o.borderColor,l.borderColor],void 0,n),lineWidth:Gt([s.borderWidth,o.borderWidth,l.borderWidth],void 0,n),hidden:isNaN(o.data[n])||a.data[n].hidden,index:n}}):[]}},onClick:function(t,e){var i,n,a,o=e.index,r=this.chart;for(i=0,n=(r.data.datasets||[]).length;i<n;++i)(a=r.getDatasetMeta(i)).data[o]&&(a.data[o].hidden=!a.data[o].hidden);r.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.labels[t.index],n=": "+e.datasets[t.datasetIndex].data[t.index];return ut.isArray(i)?(i=i.slice())[0]+=n:i+=n,i}}}});var $t=Mt.extend({dataElementType:Wt.Arc,linkScales:ut.noop,getRingIndex:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&++e;return e},update:function(t){var e,i,n=this,a=n.chart,o=a.chartArea,r=a.options,s=o.right-o.left,l=o.bottom-o.top,d=Math.min(s,l),u={x:0,y:0},h=n.getMeta(),c=h.data,f=r.cutoutPercentage,g=r.circumference,p=n._getRingWeight(n.index);if(g<2*Math.PI){var m=r.rotation%(2*Math.PI),v=(m+=2*Math.PI*(m>=Math.PI?-1:m<-Math.PI?1:0))+g,b={x:Math.cos(m),y:Math.sin(m)},x={x:Math.cos(v),y:Math.sin(v)},y=m<=0&&v>=0||m<=2*Math.PI&&2*Math.PI<=v,k=m<=.5*Math.PI&&.5*Math.PI<=v||m<=2.5*Math.PI&&2.5*Math.PI<=v,w=m<=-Math.PI&&-Math.PI<=v||m<=Math.PI&&Math.PI<=v,M=m<=.5*-Math.PI&&.5*-Math.PI<=v||m<=1.5*Math.PI&&1.5*Math.PI<=v,_=f/100,C={x:w?-1:Math.min(b.x*(b.x<0?1:_),x.x*(x.x<0?1:_)),y:M?-1:Math.min(b.y*(b.y<0?1:_),x.y*(x.y<0?1:_))},S={x:y?1:Math.max(b.x*(b.x>0?1:_),x.x*(x.x>0?1:_)),y:k?1:Math.max(b.y*(b.y>0?1:_),x.y*(x.y>0?1:_))},P={width:.5*(S.x-C.x),height:.5*(S.y-C.y)};d=Math.min(s/P.width,l/P.height),u={x:-.5*(S.x+C.x),y:-.5*(S.y+C.y)}}for(e=0,i=c.length;e<i;++e)c[e]._options=n._resolveElementOptions(c[e],e);for(a.borderWidth=n.getMaxBorderWidth(),a.outerRadius=Math.max((d-a.borderWidth)/2,0),a.innerRadius=Math.max(f?a.outerRadius/100*f:0,0),a.radiusLength=(a.outerRadius-a.innerRadius)/(n._getVisibleDatasetWeightTotal()||1),a.offsetX=u.x*a.outerRadius,a.offsetY=u.y*a.outerRadius,h.total=n.calculateTotal(),n.outerRadius=a.outerRadius-a.radiusLength*n._getRingWeightOffset(n.index),n.innerRadius=Math.max(n.outerRadius-a.radiusLength*p,0),e=0,i=c.length;e<i;++e)n.updateElement(c[e],e,t)},updateElement:function(t,e,i){var n=this,a=n.chart,o=a.chartArea,r=a.options,s=r.animation,l=(o.left+o.right)/2,d=(o.top+o.bottom)/2,u=r.rotation,h=r.rotation,c=n.getDataset(),f=i&&s.animateRotate?0:t.hidden?0:n.calculateCircumference(c.data[e])*(r.circumference/(2*Math.PI)),g=i&&s.animateScale?0:n.innerRadius,p=i&&s.animateScale?0:n.outerRadius,m=t._options||{};ut.extend(t,{_datasetIndex:n.index,_index:e,_model:{backgroundColor:m.backgroundColor,borderColor:m.borderColor,borderWidth:m.borderWidth,borderAlign:m.borderAlign,x:l+a.offsetX,y:d+a.offsetY,startAngle:u,endAngle:h,circumference:f,outerRadius:p,innerRadius:g,label:ut.valueAtIndexOrDefault(c.label,e,a.data.labels[e])}});var v=t._model;i&&s.animateRotate||(v.startAngle=0===e?r.rotation:n.getMeta().data[e-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),t.pivot()},calculateTotal:function(){var t,e=this.getDataset(),i=this.getMeta(),n=0;return ut.each(i.data,function(i,a){t=e.data[a],isNaN(t)||i.hidden||(n+=Math.abs(t))}),n},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?2*Math.PI*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,i,n,a,o,r,s,l,d=0,u=this.chart;if(!t)for(e=0,i=u.data.datasets.length;e<i;++e)if(u.isDatasetVisible(e)){t=(n=u.getDatasetMeta(e)).data,e!==this.index&&(o=n.controller);break}if(!t)return 0;for(e=0,i=t.length;e<i;++e)a=t[e],"inner"!==(r=o?o._resolveElementOptions(a,e):a._options).borderAlign&&(s=r.borderWidth,d=(l=r.hoverBorderWidth)>(d=s>d?s:d)?l:d);return d},setHoverStyle:function(t){var e=t._model,i=t._options,n=ut.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Zt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Zt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Zt(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(t,e){var i,n,a,o=this.chart,r=this.getDataset(),s=t.custom||{},l=o.options.elements.arc,d={},u={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=h.length;i<n;++i)d[a=h[i]]=Gt([s[a],r[a],l[a]],u,e);return d},_getRingWeightOffset:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e},_getRingWeight:function(t){return Math.max(Zt(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});st._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}});var Jt=Yt.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Qt=ut.valueOrDefault,te=ut.options.resolve,ee=ut.canvas._isPointInArea;function ie(t,e){return Qt(t.showLine,e.showLines)}st._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var ne=Mt.extend({datasetElementType:Wt.Line,dataElementType:Wt.Point,update:function(t){var e,i,n=this,a=n.getMeta(),o=a.dataset,r=a.data||[],s=n.getScaleForId(a.yAxisID),l=n.getDataset(),d=ie(l,n.chart.options);for(d&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),o._scale=s,o._datasetIndex=n.index,o._children=r,o._model=n._resolveLineOptions(o),o.pivot()),e=0,i=r.length;e<i;++e)n.updateElement(r[e],e,t);for(d&&0!==o._model.tension&&n.updateBezierControlPoints(),e=0,i=r.length;e<i;++e)r[e].pivot()},updateElement:function(t,e,i){var n,a,o=this,r=o.getMeta(),s=t.custom||{},l=o.getDataset(),d=o.index,u=l.data[e],h=o.getScaleForId(r.yAxisID),c=o.getScaleForId(r.xAxisID),f=r.dataset._model,g=o._resolvePointOptions(t,e);n=c.getPixelForValue("object"==typeof u?u:NaN,e,d),a=i?h.getBasePixel():o.calculatePointY(u,e,d),t._xScale=c,t._yScale=h,t._options=g,t._datasetIndex=d,t._index=e,t._model={x:n,y:a,skip:s.skip||isNaN(n)||isNaN(a),radius:g.radius,pointStyle:g.pointStyle,rotation:g.rotation,backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,tension:Qt(s.tension,f?f.tension:0),steppedLine:!!f&&f.steppedLine,hitRadius:g.hitRadius}},_resolvePointOptions:function(t,e){var i,n,a,o=this.chart,r=o.data.datasets[this.index],s=t.custom||{},l=o.options.elements.point,d={},u={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},h={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},c=Object.keys(h);for(i=0,n=c.length;i<n;++i)d[a=c[i]]=te([s[a],r[h[a]],r[a],l[a]],u,e);return d},_resolveLineOptions:function(t){var e,i,n,a=this.chart,o=a.data.datasets[this.index],r=t.custom||{},s=a.options,l=s.elements.line,d={},u=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill","cubicInterpolationMode"];for(e=0,i=u.length;e<i;++e)d[n=u[e]]=te([r[n],o[n],l[n]]);return d.spanGaps=Qt(o.spanGaps,s.spanGaps),d.tension=Qt(o.lineTension,l.tension),d.steppedLine=te([r.steppedLine,o.steppedLine,l.stepped]),d},calculatePointY:function(t,e,i){var n,a,o,r=this.chart,s=this.getMeta(),l=this.getScaleForId(s.yAxisID),d=0,u=0;if(l.options.stacked){for(n=0;n<i;n++)if(a=r.data.datasets[n],"line"===(o=r.getDatasetMeta(n)).type&&o.yAxisID===l.id&&r.isDatasetVisible(n)){var h=Number(l.getRightValue(a.data[e]));h<0?u+=h||0:d+=h||0}var c=Number(l.getRightValue(t));return c<0?l.getPixelForValue(u+c):l.getPixelForValue(d+c)}return l.getPixelForValue(t)},updateBezierControlPoints:function(){var t,e,i,n,a=this.chart,o=this.getMeta(),r=o.dataset._model,s=a.chartArea,l=o.data||[];function d(t,e,i){return Math.max(Math.min(t,i),e)}if(r.spanGaps&&(l=l.filter(function(t){return!t._model.skip})),"monotone"===r.cubicInterpolationMode)ut.splineCurveMonotone(l);else for(t=0,e=l.length;t<e;++t)i=l[t]._model,n=ut.splineCurve(ut.previousItem(l,t)._model,i,ut.nextItem(l,t)._model,r.tension),i.controlPointPreviousX=n.previous.x,i.controlPointPreviousY=n.previous.y,i.controlPointNextX=n.next.x,i.controlPointNextY=n.next.y;if(a.options.elements.line.capBezierPoints)for(t=0,e=l.length;t<e;++t)i=l[t]._model,ee(i,s)&&(t>0&&ee(l[t-1]._model,s)&&(i.controlPointPreviousX=d(i.controlPointPreviousX,s.left,s.right),i.controlPointPreviousY=d(i.controlPointPreviousY,s.top,s.bottom)),t<l.length-1&&ee(l[t+1]._model,s)&&(i.controlPointNextX=d(i.controlPointNextX,s.left,s.right),i.controlPointNextY=d(i.controlPointNextY,s.top,s.bottom)))},draw:function(){var t,e=this.chart,i=this.getMeta(),n=i.data||[],a=e.chartArea,o=n.length,r=0;for(ie(this.getDataset(),e.options)&&(t=(i.dataset._model.borderWidth||0)/2,ut.canvas.clipArea(e.ctx,{left:a.left,right:a.right,top:a.top-t,bottom:a.bottom+t}),i.dataset.draw(),ut.canvas.unclipArea(e.ctx));r<o;++r)n[r].draw(a)},setHoverStyle:function(t){var e=t._model,i=t._options,n=ut.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Qt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Qt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Qt(i.hoverBorderWidth,i.borderWidth),e.radius=Qt(i.hoverRadius,i.radius)}}),ae=ut.options.resolve;st._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var i=t.data,n=i.datasets,a=i.labels;if(n.length)for(var o=0;o<n[0].data.length;++o)e.push('<li><span style="background-color:'+n[0].backgroundColor[o]+'"></span>'),a[o]&&e.push(a[o]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map(function(i,n){var a=t.getDatasetMeta(0),o=e.datasets[0],r=a.data[n].custom||{},s=t.options.elements.arc;return{text:i,fillStyle:ae([r.backgroundColor,o.backgroundColor,s.backgroundColor],void 0,n),strokeStyle:ae([r.borderColor,o.borderColor,s.borderColor],void 0,n),lineWidth:ae([r.borderWidth,o.borderWidth,s.borderWidth],void 0,n),hidden:isNaN(o.data[n])||a.data[n].hidden,index:n}}):[]}},onClick:function(t,e){var i,n,a,o=e.index,r=this.chart;for(i=0,n=(r.data.datasets||[]).length;i<n;++i)(a=r.getDatasetMeta(i)).data[o].hidden=!a.data[o].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var oe=Mt.extend({dataElementType:Wt.Arc,linkScales:ut.noop,update:function(t){var e,i,n,a=this,o=a.getDataset(),r=a.getMeta(),s=a.chart.options.startAngle||0,l=a._starts=[],d=a._angles=[],u=r.data;for(a._updateRadius(),r.count=a.countVisibleElements(),e=0,i=o.data.length;e<i;e++)l[e]=s,n=a._computeAngle(e),d[e]=n,s+=n;for(e=0,i=u.length;e<i;++e)u[e]._options=a._resolveElementOptions(u[e],e),a.updateElement(u[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,i=e.chartArea,n=e.options,a=Math.min(i.right-i.left,i.bottom-i.top);e.outerRadius=Math.max(a/2,0),e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,i){var n=this,a=n.chart,o=n.getDataset(),r=a.options,s=r.animation,l=a.scale,d=a.data.labels,u=l.xCenter,h=l.yCenter,c=r.startAngle,f=t.hidden?0:l.getDistanceFromCenterForValue(o.data[e]),g=n._starts[e],p=g+(t.hidden?0:n._angles[e]),m=s.animateScale?0:l.getDistanceFromCenterForValue(o.data[e]),v=t._options||{};ut.extend(t,{_datasetIndex:n.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:u,y:h,innerRadius:0,outerRadius:i?m:f,startAngle:i&&s.animateRotate?c:g,endAngle:i&&s.animateRotate?c:p,label:ut.valueAtIndexOrDefault(d,e,d[e])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),i=0;return ut.each(e.data,function(e,n){isNaN(t.data[n])||e.hidden||i++}),i},setHoverStyle:function(t){var e=t._model,i=t._options,n=ut.getHoverColor,a=ut.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=a(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=a(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=a(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(t,e){var i,n,a,o=this.chart,r=this.getDataset(),s=t.custom||{},l=o.options.elements.arc,d={},u={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=h.length;i<n;++i)d[a=h[i]]=ae([s[a],r[a],l[a]],u,e);return d},_computeAngle:function(t){var e=this,i=this.getMeta().count,n=e.getDataset(),a=e.getMeta();if(isNaN(n.data[t])||a.data[t].hidden)return 0;var o={chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index};return ae([e.chart.options.elements.arc.angle,2*Math.PI/i],o,t)}});st._set("pie",ut.clone(st.doughnut)),st._set("pie",{cutoutPercentage:0});var re=$t,se=ut.valueOrDefault,le=ut.options.resolve;st._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}});var de=Mt.extend({datasetElementType:Wt.Line,dataElementType:Wt.Point,linkScales:ut.noop,update:function(t){var e,i,n=this,a=n.getMeta(),o=a.dataset,r=a.data||[],s=n.chart.scale,l=n.getDataset();for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),o._scale=s,o._datasetIndex=n.index,o._children=r,o._loop=!0,o._model=n._resolveLineOptions(o),o.pivot(),e=0,i=r.length;e<i;++e)n.updateElement(r[e],e,t);for(n.updateBezierControlPoints(),e=0,i=r.length;e<i;++e)r[e].pivot()},updateElement:function(t,e,i){var n=this,a=t.custom||{},o=n.getDataset(),r=n.chart.scale,s=r.getPointPositionForValue(e,o.data[e]),l=n._resolvePointOptions(t,e),d=n.getMeta().dataset._model,u=i?r.xCenter:s.x,h=i?r.yCenter:s.y;t._scale=r,t._options=l,t._datasetIndex=n.index,t._index=e,t._model={x:u,y:h,skip:a.skip||isNaN(u)||isNaN(h),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:se(a.tension,d?d.tension:0),hitRadius:l.hitRadius}},_resolvePointOptions:function(t,e){var i,n,a,o=this.chart,r=o.data.datasets[this.index],s=t.custom||{},l=o.options.elements.point,d={},u={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},h={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},c=Object.keys(h);for(i=0,n=c.length;i<n;++i)d[a=c[i]]=le([s[a],r[h[a]],r[a],l[a]],u,e);return d},_resolveLineOptions:function(t){var e,i,n,a=this.chart,o=a.data.datasets[this.index],r=t.custom||{},s=a.options.elements.line,l={},d=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"];for(e=0,i=d.length;e<i;++e)l[n=d[e]]=le([r[n],o[n],s[n]]);return l.tension=se(o.lineTension,s.tension),l},updateBezierControlPoints:function(){var t,e,i,n,a=this.getMeta(),o=this.chart.chartArea,r=a.data||[];function s(t,e,i){return Math.max(Math.min(t,i),e)}for(t=0,e=r.length;t<e;++t)i=r[t]._model,n=ut.splineCurve(ut.previousItem(r,t,!0)._model,i,ut.nextItem(r,t,!0)._model,i.tension),i.controlPointPreviousX=s(n.previous.x,o.left,o.right),i.controlPointPreviousY=s(n.previous.y,o.top,o.bottom),i.controlPointNextX=s(n.next.x,o.left,o.right),i.controlPointNextY=s(n.next.y,o.top,o.bottom)},setHoverStyle:function(t){var e=t._model,i=t._options,n=ut.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=se(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=se(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=se(i.hoverBorderWidth,i.borderWidth),e.radius=se(i.hoverRadius,i.radius)}});st._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}});var ue={bar:Yt,bubble:Kt,doughnut:$t,horizontalBar:Jt,line:ne,polarArea:oe,pie:re,radar:de,scatter:ne};function he(t,e){return t.native?{x:t.x,y:t.y}:ut.getRelativePosition(t,e)}function ce(t,e){var i,n,a,o,r;for(n=0,o=t.data.datasets.length;n<o;++n)if(t.isDatasetVisible(n))for(a=0,r=(i=t.getDatasetMeta(n)).data.length;a<r;++a){var s=i.data[a];s._view.skip||e(s)}}function fe(t,e){var i=[];return ce(t,function(t){t.inRange(e.x,e.y)&&i.push(t)}),i}function ge(t,e,i,n){var a=Number.POSITIVE_INFINITY,o=[];return ce(t,function(t){if(!i||t.inRange(e.x,e.y)){var r=t.getCenterPoint(),s=n(e,r);s<a?(o=[t],a=s):s===a&&o.push(t)}}),o}function pe(t){var e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){var a=e?Math.abs(t.x-n.x):0,o=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function me(t,e,i){var n=he(e,t);i.axis=i.axis||"x";var a=pe(i.axis),o=i.intersect?fe(t,n):ge(t,n,!1,a),r=[];return o.length?(t.data.datasets.forEach(function(e,i){if(t.isDatasetVisible(i)){var n=t.getDatasetMeta(i).data[o[0]._index];n&&!n._view.skip&&r.push(n)}}),r):[]}var ve={modes:{single:function(t,e){var i=he(e,t),n=[];return ce(t,function(t){if(t.inRange(i.x,i.y))return n.push(t),n}),n.slice(0,1)},label:me,index:me,dataset:function(t,e,i){var n=he(e,t);i.axis=i.axis||"xy";var a=pe(i.axis),o=i.intersect?fe(t,n):ge(t,n,!1,a);return o.length>0&&(o=t.getDatasetMeta(o[0]._datasetIndex).data),o},"x-axis":function(t,e){return me(t,e,{intersect:!1})},point:function(t,e){return fe(t,he(e,t))},nearest:function(t,e,i){var n=he(e,t);i.axis=i.axis||"xy";var a=pe(i.axis);return ge(t,n,i.intersect,a)},x:function(t,e,i){var n=he(e,t),a=[],o=!1;return ce(t,function(t){t.inXRange(n.x)&&a.push(t),t.inRange(n.x,n.y)&&(o=!0)}),i.intersect&&!o&&(a=[]),a},y:function(t,e,i){var n=he(e,t),a=[],o=!1;return ce(t,function(t){t.inYRange(n.y)&&a.push(t),t.inRange(n.x,n.y)&&(o=!0)}),i.intersect&&!o&&(a=[]),a}}};function be(t,e){return ut.where(t,function(t){return t.position===e})}function xe(t,e){t.forEach(function(t,e){return t._tmpIndex_=e,t}),t.sort(function(t,i){var n=e?i:t,a=e?t:i;return n.weight===a.weight?n._tmpIndex_-a._tmpIndex_:n.weight-a.weight}),t.forEach(function(t){delete t._tmpIndex_})}function ye(t,e){ut.each(t,function(t){e[t.position]+=t.isHorizontal()?t.height:t.width})}st._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var ke={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,t.boxes.push(e)},removeBox:function(t,e){var i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure:function(t,e,i){for(var n,a=["fullWidth","position","weight"],o=a.length,r=0;r<o;++r)n=a[r],i.hasOwnProperty(n)&&(e[n]=i[n])},update:function(t,e,i){if(t){var n=t.options.layout||{},a=ut.options.toPadding(n.padding),o=a.left,r=a.right,s=a.top,l=a.bottom,d=be(t.boxes,"left"),u=be(t.boxes,"right"),h=be(t.boxes,"top"),c=be(t.boxes,"bottom"),f=be(t.boxes,"chartArea");xe(d,!0),xe(u,!1),xe(h,!0),xe(c,!1);var g,p=d.concat(u),m=h.concat(c),v=p.concat(m),b=e-o-r,x=i-s-l,y=(e-b/2)/p.length,k=b,w=x,M={top:s,left:o,bottom:l,right:r},_=[];ut.each(v,function(t){var e,i=t.isHorizontal();i?(e=t.update(t.fullWidth?b:k,x/2),w-=e.height):(e=t.update(y,w),k-=e.width),_.push({horizontal:i,width:e.width,box:t})}),g=function(t){var e=0,i=0,n=0,a=0;return ut.each(t,function(t){if(t.getPadding){var o=t.getPadding();e=Math.max(e,o.top),i=Math.max(i,o.left),n=Math.max(n,o.bottom),a=Math.max(a,o.right)}}),{top:e,left:i,bottom:n,right:a}}(v),ut.each(p,T),ye(p,M),ut.each(m,T),ye(m,M),ut.each(p,function(t){var e=ut.findNextWhere(_,function(e){return e.box===t}),i={left:0,right:0,top:M.top,bottom:M.bottom};e&&t.update(e.width,w,i)}),ye(v,M={top:s,left:o,bottom:l,right:r});var C=Math.max(g.left-M.left,0);M.left+=C,M.right+=Math.max(g.right-M.right,0);var S=Math.max(g.top-M.top,0);M.top+=S,M.bottom+=Math.max(g.bottom-M.bottom,0);var P=i-M.top-M.bottom,I=e-M.left-M.right;I===k&&P===w||(ut.each(p,function(t){t.height=P}),ut.each(m,function(t){t.fullWidth||(t.width=I)}),w=P,k=I);var A=o+C,D=s+S;ut.each(d.concat(h),F),A+=k,D+=w,ut.each(u,F),ut.each(c,F),t.chartArea={left:M.left,top:M.top,right:M.left+k,bottom:M.top+w},ut.each(f,function(e){e.left=t.chartArea.left,e.top=t.chartArea.top,e.right=t.chartArea.right,e.bottom=t.chartArea.bottom,e.update(k,w)})}function T(t){var e=ut.findNextWhere(_,function(e){return e.box===t});if(e)if(e.horizontal){var i={left:Math.max(M.left,g.left),right:Math.max(M.right,g.right),top:0,bottom:0};t.update(t.fullWidth?b:k,x/2,i)}else t.update(e.width,w)}function F(t){t.isHorizontal()?(t.left=t.fullWidth?o:M.left,t.right=t.fullWidth?e-r:M.left+k,t.top=D,t.bottom=D+t.height,D=t.bottom):(t.left=A,t.right=A+t.width,t.top=M.top,t.bottom=M.top+w,A=t.right)}}};var we,Me=(we=Object.freeze({default:"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&we.default||we,_e="$chartjs",Ce="chartjs-size-monitor",Se="chartjs-render-monitor",Pe="chartjs-render-animation",Ie=["animationstart","webkitAnimationStart"],Ae={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function De(t,e){var i=ut.getStyle(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}var Te=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0};function Fe(t,e,i){t.addEventListener(e,i,Te)}function Le(t,e,i){t.removeEventListener(e,i,Te)}function Re(t,e,i,n,a){return{type:t,chart:e,native:a||null,x:void 0!==i?i:null,y:void 0!==n?n:null}}function Oe(t){var e=document.createElement("div");return e.className=t||"",e}function ze(t,e,i){var n,a,o,r,s=t[_e]||(t[_e]={}),l=s.resizer=function(t){var e=Oe(Ce),i=Oe(Ce+"-expand"),n=Oe(Ce+"-shrink");i.appendChild(Oe()),n.appendChild(Oe()),e.appendChild(i),e.appendChild(n),e._reset=function(){i.scrollLeft=1e6,i.scrollTop=1e6,n.scrollLeft=1e6,n.scrollTop=1e6};var a=function(){e._reset(),t()};return Fe(i,"scroll",a.bind(i,"expand")),Fe(n,"scroll",a.bind(n,"shrink")),e}((n=function(){if(s.resizer){var n=i.options.maintainAspectRatio&&t.parentNode,a=n?n.clientWidth:0;e(Re("resize",i)),n&&n.clientWidth<a&&i.canvas&&e(Re("resize",i))}},o=!1,r=[],function(){r=Array.prototype.slice.call(arguments),a=a||this,o||(o=!0,ut.requestAnimFrame.call(window,function(){o=!1,n.apply(a,r)}))}));!function(t,e){var i=t[_e]||(t[_e]={}),n=i.renderProxy=function(t){t.animationName===Pe&&e()};ut.each(Ie,function(e){Fe(t,e,n)}),i.reflow=!!t.offsetParent,t.classList.add(Se)}(t,function(){if(s.resizer){var e=t.parentNode;e&&e!==l.parentNode&&e.insertBefore(l,e.firstChild),l._reset()}})}function Be(t){var e=t[_e]||{},i=e.resizer;delete e.resizer,function(t){var e=t[_e]||{},i=e.renderProxy;i&&(ut.each(Ie,function(e){Le(t,e,i)}),delete e.renderProxy),t.classList.remove(Se)}(t),i&&i.parentNode&&i.parentNode.removeChild(i)}var Ne={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(){var t,e,i;this._loaded||(this._loaded=!0,this.disableCSSInjection||(e=Me,i=(t=this)._style||document.createElement("style"),t._style||(t._style=i,e="/* Chart.js */\n"+e,i.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(i)),i.appendChild(document.createTextNode(e))))},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var i=t&&t.getContext&&t.getContext("2d");return this._ensureLoaded(),i&&i.canvas===t?(function(t,e){var i=t.style,n=t.getAttribute("height"),a=t.getAttribute("width");if(t[_e]={initial:{height:n,width:a,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===a||""===a){var o=De(t,"width");void 0!==o&&(t.width=o)}if(null===n||""===n)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var r=De(t,"height");void 0!==o&&(t.height=r)}}(t,e),i):null},releaseContext:function(t){var e=t.canvas;if(e[_e]){var i=e[_e].initial;["height","width"].forEach(function(t){var n=i[t];ut.isNullOrUndef(n)?e.removeAttribute(t):e.setAttribute(t,n)}),ut.each(i.style||{},function(t,i){e.style[i]=t}),e.width=e.width,delete e[_e]}},addEventListener:function(t,e,i){var n=t.canvas;if("resize"!==e){var a=i[_e]||(i[_e]={});Fe(n,e,(a.proxies||(a.proxies={}))[t.id+"_"+e]=function(e){i(function(t,e){var i=Ae[t.type]||t.type,n=ut.getRelativePosition(t,e);return Re(i,e,n.x,n.y,t)}(e,t))})}else ze(n,i,t)},removeEventListener:function(t,e,i){var n=t.canvas;if("resize"!==e){var a=((i[_e]||{}).proxies||{})[t.id+"_"+e];a&&Le(n,e,a)}else Be(n)}};ut.addEvent=Fe,ut.removeEvent=Le;var We=Ne._enabled?Ne:{acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}},Ve=ut.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},We);st._set("global",{plugins:{}});var Ee={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach(function(t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,i){var n,a,o,r,s,l=this.descriptors(t),d=l.length;for(n=0;n<d;++n)if("function"==typeof(s=(o=(a=l[n]).plugin)[e])&&((r=[t].concat(i||[])).push(a.options),!1===s.apply(o,r)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var i=[],n=[],a=t&&t.config||{},o=a.options&&a.options.plugins||{};return this._plugins.concat(a.plugins||[]).forEach(function(t){if(-1===i.indexOf(t)){var e=t.id,a=o[e];!1!==a&&(!0===a&&(a=ut.clone(st.global.plugins[e])),i.push(t),n.push({plugin:t,options:a||{}}))}}),e.descriptors=n,e.id=this._cacheId,n},_invalidate:function(t){delete t.$plugins}},He={constructors:{},defaults:{},registerScaleType:function(t,e,i){this.constructors[t]=e,this.defaults[t]=ut.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?ut.merge({},[st.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){this.defaults.hasOwnProperty(t)&&(this.defaults[t]=ut.extend(this.defaults[t],e))},addScalesToLayout:function(t){ut.each(t.scales,function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,ke.addBox(t,e)})}},je=ut.valueOrDefault;st._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ut.noop,title:function(t,e){var i="",n=e.labels,a=n?n.length:0;if(t.length>0){var o=t[0];o.label?i=o.label:o.xLabel?i=o.xLabel:a>0&&o.index<a&&(i=n[o.index])}return i},afterTitle:ut.noop,beforeBody:ut.noop,beforeLabel:ut.noop,label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";return i&&(i+=": "),ut.isNullOrUndef(t.value)?i+=t.yLabel:i+=t.value,i},labelColor:function(t,e){var i=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ut.noop,afterBody:ut.noop,beforeFooter:ut.noop,footer:ut.noop,afterFooter:ut.noop}}});var qe={average:function(t){if(!t.length)return!1;var e,i,n=0,a=0,o=0;for(e=0,i=t.length;e<i;++e){var r=t[e];if(r&&r.hasValue()){var s=r.tooltipPosition();n+=s.x,a+=s.y,++o}}return{x:n/o,y:a/o}},nearest:function(t,e){var i,n,a,o=e.x,r=e.y,s=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){var l=t[i];if(l&&l.hasValue()){var d=l.getCenterPoint(),u=ut.distanceBetweenPoints(e,d);u<s&&(s=u,a=l)}}if(a){var h=a.tooltipPosition();o=h.x,r=h.y}return{x:o,y:r}}};function Ye(t,e){return e&&(ut.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ue(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Xe(t){var e=st.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,bodyFontColor:t.bodyFontColor,_bodyFontFamily:je(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:je(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:je(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:je(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:je(t.titleFontStyle,e.defaultFontStyle),titleFontSize:je(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:je(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:je(t.footerFontStyle,e.defaultFontStyle),footerFontSize:je(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Ke(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function Ge(t){return Ye([],Ue(t))}var Ze=pt.extend({initialize:function(){this._model=Xe(this._options),this._lastActive=[]},getTitle:function(){var t=this._options.callbacks,e=t.beforeTitle.apply(this,arguments),i=t.title.apply(this,arguments),n=t.afterTitle.apply(this,arguments),a=[];return a=Ye(a,Ue(e)),a=Ye(a,Ue(i)),a=Ye(a,Ue(n))},getBeforeBody:function(){return Ge(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,e){var i=this,n=i._options.callbacks,a=[];return ut.each(t,function(t){var o={before:[],lines:[],after:[]};Ye(o.before,Ue(n.beforeLabel.call(i,t,e))),Ye(o.lines,n.label.call(i,t,e)),Ye(o.after,Ue(n.afterLabel.call(i,t,e))),a.push(o)}),a},getAfterBody:function(){return Ge(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this._options.callbacks,e=t.beforeFooter.apply(this,arguments),i=t.footer.apply(this,arguments),n=t.afterFooter.apply(this,arguments),a=[];return a=Ye(a,Ue(e)),a=Ye(a,Ue(i)),a=Ye(a,Ue(n))},update:function(t){var e,i,n,a,o,r,s,l,d,u,h=this,c=h._options,f=h._model,g=h._model=Xe(c),p=h._active,m=h._data,v={xAlign:f.xAlign,yAlign:f.yAlign},b={x:f.x,y:f.y},x={width:f.width,height:f.height},y={x:f.caretX,y:f.caretY};if(p.length){g.opacity=1;var k=[],w=[];y=qe[c.position].call(h,p,h._eventPosition);var M=[];for(e=0,i=p.length;e<i;++e)M.push((n=p[e],a=void 0,o=void 0,r=void 0,s=void 0,l=void 0,d=void 0,u=void 0,a=n._xScale,o=n._yScale||n._scale,r=n._index,s=n._datasetIndex,l=n._chart.getDatasetMeta(s).controller,d=l._getIndexScale(),u=l._getValueScale(),{xLabel:a?a.getLabelForIndex(r,s):"",yLabel:o?o.getLabelForIndex(r,s):"",label:d?""+d.getLabelForIndex(r,s):"",value:u?""+u.getLabelForIndex(r,s):"",index:r,datasetIndex:s,x:n._model.x,y:n._model.y}));c.filter&&(M=M.filter(function(t){return c.filter(t,m)})),c.itemSort&&(M=M.sort(function(t,e){return c.itemSort(t,e,m)})),ut.each(M,function(t){k.push(c.callbacks.labelColor.call(h,t,h._chart)),w.push(c.callbacks.labelTextColor.call(h,t,h._chart))}),g.title=h.getTitle(M,m),g.beforeBody=h.getBeforeBody(M,m),g.body=h.getBody(M,m),g.afterBody=h.getAfterBody(M,m),g.footer=h.getFooter(M,m),g.x=y.x,g.y=y.y,g.caretPadding=c.caretPadding,g.labelColors=k,g.labelTextColors=w,g.dataPoints=M,x=function(t,e){var i=t._chart.ctx,n=2*e.yPadding,a=0,o=e.body,r=o.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);r+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,l=e.footer.length,d=e.titleFontSize,u=e.bodyFontSize,h=e.footerFontSize;n+=s*d,n+=s?(s-1)*e.titleSpacing:0,n+=s?e.titleMarginBottom:0,n+=r*u,n+=r?(r-1)*e.bodySpacing:0,n+=l?e.footerMarginTop:0,n+=l*h,n+=l?(l-1)*e.footerSpacing:0;var c=0,f=function(t){a=Math.max(a,i.measureText(t).width+c)};return i.font=ut.fontString(d,e._titleFontStyle,e._titleFontFamily),ut.each(e.title,f),i.font=ut.fontString(u,e._bodyFontStyle,e._bodyFontFamily),ut.each(e.beforeBody.concat(e.afterBody),f),c=e.displayColors?u+2:0,ut.each(o,function(t){ut.each(t.before,f),ut.each(t.lines,f),ut.each(t.after,f)}),c=0,i.font=ut.fontString(h,e._footerFontStyle,e._footerFontFamily),ut.each(e.footer,f),{width:a+=2*e.xPadding,height:n}}(this,g),b=function(t,e,i,n){var a=t.x,o=t.y,r=t.caretSize,s=t.caretPadding,l=t.cornerRadius,d=i.xAlign,u=i.yAlign,h=r+s,c=l+s;return"right"===d?a-=e.width:"center"===d&&((a-=e.width/2)+e.width>n.width&&(a=n.width-e.width),a<0&&(a=0)),"top"===u?o+=h:o-="bottom"===u?e.height+h:e.height/2,"center"===u?"left"===d?a+=h:"right"===d&&(a-=h):"left"===d?a-=c:"right"===d&&(a+=c),{x:a,y:o}}(g,x,v=function(t,e){var i,n,a,o,r,s=t._model,l=t._chart,d=t._chart.chartArea,u="center",h="center";s.y<e.height?h="top":s.y>l.height-e.height&&(h="bottom");var c=(d.left+d.right)/2,f=(d.top+d.bottom)/2;"center"===h?(i=function(t){return t<=c},n=function(t){return t>c}):(i=function(t){return t<=e.width/2},n=function(t){return t>=l.width-e.width/2}),a=function(t){return t+e.width+s.caretSize+s.caretPadding>l.width},o=function(t){return t-e.width-s.caretSize-s.caretPadding<0},r=function(t){return t<=f?"top":"bottom"},i(s.x)?(u="left",a(s.x)&&(u="center",h=r(s.y))):n(s.x)&&(u="right",o(s.x)&&(u="center",h=r(s.y)));var g=t._options;return{xAlign:g.xAlign?g.xAlign:u,yAlign:g.yAlign?g.yAlign:h}}(this,x),h._chart)}else g.opacity=0;return g.xAlign=v.xAlign,g.yAlign=v.yAlign,g.x=b.x,g.y=b.y,g.width=x.width,g.height=x.height,g.caretX=y.x,g.caretY=y.y,h._model=g,t&&c.custom&&c.custom.call(h,g),h},drawCaret:function(t,e){var i=this._chart.ctx,n=this._view,a=this.getCaretPosition(t,e,n);i.lineTo(a.x1,a.y1),i.lineTo(a.x2,a.y2),i.lineTo(a.x3,a.y3)},getCaretPosition:function(t,e,i){var n,a,o,r,s,l,d=i.caretSize,u=i.cornerRadius,h=i.xAlign,c=i.yAlign,f=t.x,g=t.y,p=e.width,m=e.height;if("center"===c)s=g+m/2,"left"===h?(a=(n=f)-d,o=n,r=s+d,l=s-d):(a=(n=f+p)+d,o=n,r=s-d,l=s+d);else if("left"===h?(n=(a=f+u+d)-d,o=a+d):"right"===h?(n=(a=f+p-u-d)-d,o=a+d):(n=(a=i.caretX)-d,o=a+d),"top"===c)s=(r=g)-d,l=r;else{s=(r=g+m)+d,l=r;var v=o;o=n,n=v}return{x1:n,x2:a,x3:o,y1:r,y2:s,y3:l}},drawTitle:function(t,e,i){var n=e.title;if(n.length){t.x=Ke(e,e._titleAlign),i.textAlign=e._titleAlign,i.textBaseline="top";var a,o,r=e.titleFontSize,s=e.titleSpacing;for(i.fillStyle=e.titleFontColor,i.font=ut.fontString(r,e._titleFontStyle,e._titleFontFamily),a=0,o=n.length;a<o;++a)i.fillText(n[a],t.x,t.y),t.y+=r+s,a+1===n.length&&(t.y+=e.titleMarginBottom-s)}},drawBody:function(t,e,i){var n,a=e.bodyFontSize,o=e.bodySpacing,r=e._bodyAlign,s=e.body,l=e.displayColors,d=e.labelColors,u=0,h=l?Ke(e,"left"):0;i.textAlign=r,i.textBaseline="top",i.font=ut.fontString(a,e._bodyFontStyle,e._bodyFontFamily),t.x=Ke(e,r);var c=function(e){i.fillText(e,t.x+u,t.y),t.y+=a+o};i.fillStyle=e.bodyFontColor,ut.each(e.beforeBody,c),u=l&&"right"!==r?"center"===r?a/2+1:a+2:0,ut.each(s,function(o,r){n=e.labelTextColors[r],i.fillStyle=n,ut.each(o.before,c),ut.each(o.lines,function(o){l&&(i.fillStyle=e.legendColorBackground,i.fillRect(h,t.y,a,a),i.lineWidth=1,i.strokeStyle=d[r].borderColor,i.strokeRect(h,t.y,a,a),i.fillStyle=d[r].backgroundColor,i.fillRect(h+1,t.y+1,a-2,a-2),i.fillStyle=n),c(o)}),ut.each(o.after,c)}),u=0,ut.each(e.afterBody,c),t.y-=o},drawFooter:function(t,e,i){var n=e.footer;n.length&&(t.x=Ke(e,e._footerAlign),t.y+=e.footerMarginTop,i.textAlign=e._footerAlign,i.textBaseline="top",i.fillStyle=e.footerFontColor,i.font=ut.fontString(e.footerFontSize,e._footerFontStyle,e._footerFontFamily),ut.each(n,function(n){i.fillText(n,t.x,t.y),t.y+=e.footerFontSize+e.footerSpacing}))},drawBackground:function(t,e,i,n){i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,i.lineWidth=e.borderWidth;var a=e.xAlign,o=e.yAlign,r=t.x,s=t.y,l=n.width,d=n.height,u=e.cornerRadius;i.beginPath(),i.moveTo(r+u,s),"top"===o&&this.drawCaret(t,n),i.lineTo(r+l-u,s),i.quadraticCurveTo(r+l,s,r+l,s+u),"center"===o&&"right"===a&&this.drawCaret(t,n),i.lineTo(r+l,s+d-u),i.quadraticCurveTo(r+l,s+d,r+l-u,s+d),"bottom"===o&&this.drawCaret(t,n),i.lineTo(r+u,s+d),i.quadraticCurveTo(r,s+d,r,s+d-u),"center"===o&&"left"===a&&this.drawCaret(t,n),i.lineTo(r,s+u),i.quadraticCurveTo(r,s,r+u,s),i.closePath(),i.fill(),e.borderWidth>0&&i.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var i={width:e.width,height:e.height},n={x:e.x,y:e.y},a=Math.abs(e.opacity<.001)?0:e.opacity,o=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&o&&(t.save(),t.globalAlpha=a,this.drawBackground(n,e,t,i),n.y+=e.yPadding,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),t.restore())}},handleEvent:function(t){var e,i=this,n=i._options;return i._lastActive=i._lastActive||[],"mouseout"===t.type?i._active=[]:i._active=i._chart.getElementsAtEventForMode(t,n.mode,n),(e=!ut.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(n.enabled||n.custom)&&(i._eventPosition={x:t.x,y:t.y},i.update(!0),i.pivot())),e}}),$e=qe,Je=Ze;Je.positioners=$e;var Qe=ut.valueOrDefault;function ti(){return ut.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){if("xAxes"===t||"yAxes"===t){var a,o,r,s=i[t].length;for(e[t]||(e[t]=[]),a=0;a<s;++a)r=i[t][a],o=Qe(r.type,"xAxes"===t?"category":"linear"),a>=e[t].length&&e[t].push({}),!e[t][a].type||r.type&&r.type!==e[t][a].type?ut.merge(e[t][a],[He.getScaleDefaults(o),r]):ut.merge(e[t][a],r)}else ut._merger(t,e,i,n)}})}function ei(){return ut.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){var a=e[t]||{},o=i[t];"scales"===t?e[t]=ti(a,o):"scale"===t?e[t]=ut.merge(a,[He.getScaleDefaults(o.type),o]):ut._merger(t,e,i,n)}})}function ii(t){return"top"===t||"bottom"===t}st._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var ni=function(t,e){return this.construct(t,e),this};ut.extend(ni.prototype,{construct:function(t,e){var i=this;e=function(t){var e=(t=t||{}).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=ei(st.global,st[t.type],t.options||{}),t}(e);var n=Ve.acquireContext(t,e),a=n&&n.canvas,o=a&&a.height,r=a&&a.width;i.id=ut.uid(),i.ctx=n,i.canvas=a,i.config=e,i.width=r,i.height=o,i.aspectRatio=o?r/o:null,i.options=e.options,i._bufferedRender=!1,i.chart=i,i.controller=i,ni.instances[i.id]=i,Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(t){i.config.data=t}}),n&&a?(i.initialize(),i.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return Ee.notify(t,"beforeInit"),ut.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.initToolTip(),Ee.notify(t,"afterInit"),t},clear:function(){return ut.canvas.clear(this),this},stop:function(){return bt.cancelAnimation(this),this},resize:function(t){var e=this,i=e.options,n=e.canvas,a=i.maintainAspectRatio&&e.aspectRatio||null,o=Math.max(0,Math.floor(ut.getMaximumWidth(n))),r=Math.max(0,Math.floor(a?o/a:ut.getMaximumHeight(n)));if((e.width!==o||e.height!==r)&&(n.width=e.width=o,n.height=e.height=r,n.style.width=o+"px",n.style.height=r+"px",ut.retinaScale(e,i.devicePixelRatio),!t)){var s={width:o,height:r};Ee.notify(e,"resize",[s]),i.onResize&&i.onResize(e,s),e.stop(),e.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},i=t.scale;ut.each(e.xAxes,function(t,e){t.id=t.id||"x-axis-"+e}),ut.each(e.yAxes,function(t,e){t.id=t.id||"y-axis-"+e}),i&&(i.id=i.id||"scale")},buildOrUpdateScales:function(){var t=this,e=t.options,i=t.scales||{},n=[],a=Object.keys(i).reduce(function(t,e){return t[e]=!1,t},{});e.scales&&(n=n.concat((e.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category",dposition:"bottom"}}),(e.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear",dposition:"left"}}))),e.scale&&n.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ut.each(n,function(e){var n=e.options,o=n.id,r=Qe(n.type,e.dtype);ii(n.position)!==ii(e.dposition)&&(n.position=e.dposition),a[o]=!0;var s=null;if(o in i&&i[o].type===r)(s=i[o]).options=n,s.ctx=t.ctx,s.chart=t;else{var l=He.getScaleConstructor(r);if(!l)return;s=new l({id:o,type:r,options:n,ctx:t.ctx,chart:t}),i[s.id]=s}s.mergeTicksOptions(),e.isDefault&&(t.scale=s)}),ut.each(a,function(t,e){t||delete i[e]}),t.scales=i,He.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t=this,e=[];return ut.each(t.data.datasets,function(i,n){var a=t.getDatasetMeta(n),o=i.type||t.config.type;if(a.type&&a.type!==o&&(t.destroyDatasetMeta(n),a=t.getDatasetMeta(n)),a.type=o,a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{var r=ue[a.type];if(void 0===r)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new r(t,n),e.push(a.controller)}},t),e},resetElements:function(){var t=this;ut.each(t.data.datasets,function(e,i){t.getDatasetMeta(i).controller.reset()},t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,i,n=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),i=(e=n).options,ut.each(e.scales,function(t){ke.removeBox(e,t)}),i=ei(st.global,st[e.config.type],i),e.options=e.config.options=i,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=i.tooltips,e.tooltip.initialize(),Ee._invalidate(n),!1!==Ee.notify(n,"beforeUpdate")){n.tooltip._data=n.data;var a=n.buildOrUpdateControllers();ut.each(n.data.datasets,function(t,e){n.getDatasetMeta(e).controller.buildOrUpdateElements()},n),n.updateLayout(),n.options.animation&&n.options.animation.duration&&ut.each(a,function(t){t.reset()}),n.updateDatasets(),n.tooltip.initialize(),n.lastActive=[],Ee.notify(n,"afterUpdate"),n._bufferedRender?n._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:n.render(t)}},updateLayout:function(){!1!==Ee.notify(this,"beforeLayout")&&(ke.update(this,this.width,this.height),Ee.notify(this,"afterScaleUpdate"),Ee.notify(this,"afterLayout"))},updateDatasets:function(){if(!1!==Ee.notify(this,"beforeDatasetsUpdate")){for(var t=0,e=this.data.datasets.length;t<e;++t)this.updateDataset(t);Ee.notify(this,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this.getDatasetMeta(t),i={meta:e,index:t};!1!==Ee.notify(this,"beforeDatasetUpdate",[i])&&(e.controller.update(),Ee.notify(this,"afterDatasetUpdate",[i]))},render:function(t){var e=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var i=e.options.animation,n=Qe(t.duration,i&&i.duration),a=t.lazy;if(!1!==Ee.notify(e,"beforeRender")){var o=function(t){Ee.notify(e,"afterRender"),ut.callback(i&&i.onComplete,[t],e)};if(i&&n){var r=new vt({numSteps:n/16.66,easing:t.easing||i.easing,render:function(t,e){var i=ut.easing.effects[e.easing],n=e.currentStep,a=n/e.numSteps;t.draw(i(a),a,n)},onAnimationProgress:i.onProgress,onAnimationComplete:o});bt.addAnimation(e,r,n,a)}else e.draw(),o(new vt({numSteps:0,chart:e}));return e}},draw:function(t){var e=this;e.clear(),ut.isNullOrUndef(t)&&(t=1),e.transition(t),e.width<=0||e.height<=0||!1!==Ee.notify(e,"beforeDraw",[t])&&(ut.each(e.boxes,function(t){t.draw(e.chartArea)},e),e.drawDatasets(t),e._drawTooltip(t),Ee.notify(e,"afterDraw",[t]))},transition:function(t){for(var e=0,i=(this.data.datasets||[]).length;e<i;++e)this.isDatasetVisible(e)&&this.getDatasetMeta(e).controller.transition(t);this.tooltip.transition(t)},drawDatasets:function(t){var e=this;if(!1!==Ee.notify(e,"beforeDatasetsDraw",[t])){for(var i=(e.data.datasets||[]).length-1;i>=0;--i)e.isDatasetVisible(i)&&e.drawDataset(i,t);Ee.notify(e,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var i=this.getDatasetMeta(t),n={meta:i,index:t,easingValue:e};!1!==Ee.notify(this,"beforeDatasetDraw",[n])&&(i.controller.draw(e),Ee.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(t){var e=this.tooltip,i={tooltip:e,easingValue:t};!1!==Ee.notify(this,"beforeTooltipDraw",[i])&&(e.draw(),Ee.notify(this,"afterTooltipDraw",[i]))},getElementAtEvent:function(t){return ve.modes.single(this,t)},getElementsAtEvent:function(t){return ve.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return ve.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,i){var n=ve.modes[e];return"function"==typeof n?n(this,t,i):[]},getDatasetAtEvent:function(t){return ve.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this.data.datasets[t];e._meta||(e._meta={});var i=e._meta[this.id];return i||(i=e._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var t=0,e=0,i=this.data.datasets.length;e<i;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,i=this.data.datasets[t],n=i._meta&&i._meta[e];n&&(n.controller.destroy(),delete i._meta[e])},destroy:function(){var t,e,i=this,n=i.canvas;for(i.stop(),t=0,e=i.data.datasets.length;t<e;++t)i.destroyDatasetMeta(t);n&&(i.unbindEvents(),ut.canvas.clear(i),Ve.releaseContext(i.ctx),i.canvas=null,i.ctx=null),Ee.notify(i,"destroy"),delete ni.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Je({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,e=t._listeners={},i=function(){t.eventHandler.apply(t,arguments)};ut.each(t.options.events,function(n){Ve.addEventListener(t,n,i),e[n]=i}),t.options.responsive&&(i=function(){t.resize()},Ve.addEventListener(t,"resize",i),e.resize=i)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,ut.each(e,function(e,i){Ve.removeEventListener(t,i,e)}))},updateHoverStyle:function(t,e,i){var n,a,o,r=i?"setHoverStyle":"removeHoverStyle";for(a=0,o=t.length;a<o;++a)(n=t[a])&&this.getDatasetMeta(n._datasetIndex).controller[r](n)},eventHandler:function(t){var e=this,i=e.tooltip;if(!1!==Ee.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var n=e.handleEvent(t);i&&(n=i._start?i.handleEvent(t):n|i.handleEvent(t)),Ee.notify(e,"afterEvent",[t]);var a=e._bufferedRequest;return a?e.render(a):n&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e,i=this,n=i.options||{},a=n.hover;return i.lastActive=i.lastActive||[],"mouseout"===t.type?i.active=[]:i.active=i.getElementsAtEventForMode(t,a.mode,a),ut.callback(n.onHover||n.hover.onHover,[t.native,i.active],i),"mouseup"!==t.type&&"click"!==t.type||n.onClick&&n.onClick.call(i,t.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,a.mode,!1),i.active.length&&a.mode&&i.updateHoverStyle(i.active,a.mode,!0),e=!ut.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,e}}),ni.instances={};var ai=ni;ni.Controller=ni,ni.types={},ut.configMerge=ei,ut.scaleMerge=ti;function oi(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function ri(t){this.options=t||{}}ut.extend(ri.prototype,{formats:oi,parse:oi,format:oi,add:oi,diff:oi,startOf:oi,endOf:oi,_create:function(t){return t}}),ri.override=function(t){ut.extend(ri.prototype,t)};var si={_date:ri},li={formatters:{values:function(t){return ut.isArray(t)?t:""+t},linear:function(t,e,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(n)>1&&t!==Math.floor(t)&&(n=t-Math.floor(t));var a=ut.log10(Math.abs(n)),o="";if(0!==t)if(Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]))<1e-4){var r=ut.log10(Math.abs(t));o=t.toExponential(Math.floor(r)-Math.floor(a))}else{var s=-1*Math.floor(a);s=Math.max(Math.min(s,20),0),o=t.toFixed(s)}else o="0";return o},logarithmic:function(t,e,i){var n=t/Math.pow(10,Math.floor(ut.log10(t)));return 0===t?"0":1===n||2===n||5===n||0===e||e===i.length-1?t.toExponential():""}}},di=ut.valueOrDefault,ui=ut.valueAtIndexOrDefault;function hi(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(t[e].label);return n}function ci(t,e,i){return ut.isArray(e)?ut.longestText(t,i,e):t.measureText(e).width}st._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:li.formatters.values,minor:{},major:{}}});var fi=pt.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var t=this.options.ticks;for(var e in!1===t.minor&&(t.minor={display:!1}),!1===t.major&&(t.major={display:!1}),t)"major"!==e&&"minor"!==e&&(void 0===t.minor[e]&&(t.minor[e]=t[e]),void 0===t.major[e]&&(t.major[e]=t[e]))},beforeUpdate:function(){ut.callback(this.options.beforeUpdate,[this])},update:function(t,e,i){var n,a,o,r,s,l,d=this;for(d.beforeUpdate(),d.maxWidth=t,d.maxHeight=e,d.margins=ut.extend({left:0,right:0,top:0,bottom:0},i),d._maxLabelLines=0,d.longestLabelWidth=0,d.longestTextCache=d.longestTextCache||{},d.beforeSetDimensions(),d.setDimensions(),d.afterSetDimensions(),d.beforeDataLimits(),d.determineDataLimits(),d.afterDataLimits(),d.beforeBuildTicks(),s=d.buildTicks()||[],s=d.afterBuildTicks(s)||s,d.beforeTickToLabelConversion(),o=d.convertTicksToLabels(s)||d.ticks,d.afterTickToLabelConversion(),d.ticks=o,n=0,a=o.length;n<a;++n)r=o[n],(l=s[n])?l.label=r:s.push(l={label:r,major:!1});return d._ticks=s,d.beforeCalculateTickRotation(),d.calculateTickRotation(),d.afterCalculateTickRotation(),d.beforeFit(),d.fit(),d.afterFit(),d.afterUpdate(),d.minSize},afterUpdate:function(){ut.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){ut.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){ut.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){ut.callback(this.options.beforeDataLimits,[this])},determineDataLimits:ut.noop,afterDataLimits:function(){ut.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){ut.callback(this.options.beforeBuildTicks,[this])},buildTicks:ut.noop,afterBuildTicks:function(t){var e=this;return ut.isArray(t)&&t.length?ut.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=ut.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){ut.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){ut.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){ut.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t=this,e=t.ctx,i=t.options.ticks,n=hi(t._ticks),a=ut.options._parseFont(i);e.font=a.string;var o=i.minRotation||0;if(n.length&&t.options.display&&t.isHorizontal())for(var r,s=ut.longestText(e,a.string,n,t.longestTextCache),l=s,d=t.getPixelForTick(1)-t.getPixelForTick(0)-6;l>d&&o<i.maxRotation;){var u=ut.toRadians(o);if(r=Math.cos(u),Math.sin(u)*s>t.maxHeight){o--;break}o++,l=r*s}t.labelRotation=o},afterCalculateTickRotation:function(){ut.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){ut.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},i=hi(t._ticks),n=t.options,a=n.ticks,o=n.scaleLabel,r=n.gridLines,s=t._isVisible(),l=n.position,d=t.isHorizontal(),u=ut.options._parseFont,h=u(a),c=n.gridLines.tickMarkLength;if(e.width=d?t.isFullWidth()?t.maxWidth-t.margins.left-t.margins.right:t.maxWidth:s&&r.drawTicks?c:0,e.height=d?s&&r.drawTicks?c:0:t.maxHeight,o.display&&s){var f=u(o),g=ut.options.toPadding(o.padding),p=f.lineHeight+g.height;d?e.height+=p:e.width+=p}if(a.display&&s){var m=ut.longestText(t.ctx,h.string,i,t.longestTextCache),v=ut.numberOfLabelLines(i),b=.5*h.size,x=t.options.ticks.padding;if(t._maxLabelLines=v,t.longestLabelWidth=m,d){var y=ut.toRadians(t.labelRotation),k=Math.cos(y),w=Math.sin(y)*m+h.lineHeight*v+b;e.height=Math.min(t.maxHeight,e.height+w+x),t.ctx.font=h.string;var M,_,C=ci(t.ctx,i[0],h.string),S=ci(t.ctx,i[i.length-1],h.string),P=t.getPixelForTick(0)-t.left,I=t.right-t.getPixelForTick(i.length-1);0!==t.labelRotation?(M="bottom"===l?k*C:k*b,_="bottom"===l?k*b:k*S):(M=C/2,_=S/2),t.paddingLeft=Math.max(M-P,0)+3,t.paddingRight=Math.max(_-I,0)+3}else a.mirror?m=0:m+=x+b,e.width=Math.min(t.maxWidth,e.width+m),t.paddingTop=h.size/2,t.paddingBottom=h.size/2}t.handleMargins(),t.width=e.width,t.height=e.height},handleMargins:function(){var t=this;t.margins&&(t.paddingLeft=Math.max(t.paddingLeft-t.margins.left,0),t.paddingTop=Math.max(t.paddingTop-t.margins.top,0),t.paddingRight=Math.max(t.paddingRight-t.margins.right,0),t.paddingBottom=Math.max(t.paddingBottom-t.margins.bottom,0))},afterFit:function(){ut.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(ut.isNullOrUndef(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},getLabelForIndex:ut.noop,getPixelForValue:ut.noop,getValueForPixel:ut.noop,getPixelForTick:function(t){var e=this,i=e.options.offset;if(e.isHorizontal()){var n=(e.width-(e.paddingLeft+e.paddingRight))/Math.max(e._ticks.length-(i?0:1),1),a=n*t+e.paddingLeft;i&&(a+=n/2);var o=e.left+a;return o+=e.isFullWidth()?e.margins.left:0}var r=e.height-(e.paddingTop+e.paddingBottom);return e.top+t*(r/(e._ticks.length-1))},getPixelForDecimal:function(t){var e=this;if(e.isHorizontal()){var i=(e.width-(e.paddingLeft+e.paddingRight))*t+e.paddingLeft,n=e.left+i;return n+=e.isFullWidth()?e.margins.left:0}return e.top+t*e.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,e=this.max;return this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0},_autoSkip:function(t){var e,i,n=this,a=n.isHorizontal(),o=n.options.ticks.minor,r=t.length,s=!1,l=o.maxTicksLimit,d=n._tickSize()*(r-1),u=a?n.width-(n.paddingLeft+n.paddingRight):n.height-(n.paddingTop+n.PaddingBottom),h=[];for(d>u&&(s=1+Math.floor(d/u)),r>l&&(s=Math.max(s,1+Math.floor(r/l))),e=0;e<r;e++)i=t[e],s>1&&e%s>0&&delete i.label,h.push(i);return h},_tickSize:function(){var t=this,e=t.isHorizontal(),i=t.options.ticks.minor,n=ut.toRadians(t.labelRotation),a=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),r=i.autoSkipPadding||0,s=t.longestLabelWidth+r||0,l=ut.options._parseFont(i),d=t._maxLabelLines*l.lineHeight+r||0;return e?d*a>s*o?s/a:d/o:d*o<s*a?d/a:s/o},_isVisible:function(){var t,e,i,n=this.chart,a=this.options.display;if("auto"!==a)return!!a;for(t=0,e=n.data.datasets.length;t<e;++t)if(n.isDatasetVisible(t)&&((i=n.getDatasetMeta(t)).xAxisID===this.id||i.yAxisID===this.id))return!0;return!1},draw:function(t){var e=this,i=e.options;if(e._isVisible()){var n,a,o,r=e.chart,s=e.ctx,l=st.global.defaultFontColor,d=i.ticks.minor,u=i.ticks.major||d,h=i.gridLines,c=i.scaleLabel,f=i.position,g=0!==e.labelRotation,p=d.mirror,m=e.isHorizontal(),v=ut.options._parseFont,b=d.display&&d.autoSkip?e._autoSkip(e.getTicks()):e.getTicks(),x=di(d.fontColor,l),y=v(d),k=y.lineHeight,w=di(u.fontColor,l),M=v(u),_=d.padding,C=d.labelOffset,S=h.drawTicks?h.tickMarkLength:0,P=di(c.fontColor,l),I=v(c),A=ut.options.toPadding(c.padding),D=ut.toRadians(e.labelRotation),T=[],F=h.drawBorder?ui(h.lineWidth,0,0):0,L=ut._alignPixel;"top"===f?(n=L(r,e.bottom,F),a=e.bottom-S,o=n-F/2):"bottom"===f?(n=L(r,e.top,F),a=n+F/2,o=e.top+S):"left"===f?(n=L(r,e.right,F),a=e.right-S,o=n-F/2):(n=L(r,e.left,F),a=n+F/2,o=e.left+S);if(ut.each(b,function(n,s){if(!ut.isNullOrUndef(n.label)){var l,d,u,c,v,b,x,y,w,M,P,I,A,R,O,z,B=n.label;s===e.zeroLineIndex&&i.offset===h.offsetGridLines?(l=h.zeroLineWidth,d=h.zeroLineColor,u=h.zeroLineBorderDash||[],c=h.zeroLineBorderDashOffset||0):(l=ui(h.lineWidth,s),d=ui(h.color,s),u=h.borderDash||[],c=h.borderDashOffset||0);var N=ut.isArray(B)?B.length:1,W=function(t,e,i){var n=t.getPixelForTick(e);return i&&(1===t.getTicks().length?n-=t.isHorizontal()?Math.max(n-t.left,t.right-n):Math.max(n-t.top,t.bottom-n):n-=0===e?(t.getPixelForTick(1)-n)/2:(n-t.getPixelForTick(e-1))/2),n}(e,s,h.offsetGridLines);if(m){var V=S+_;W<e.left-1e-7&&(d="rgba(0,0,0,0)"),v=x=w=P=L(r,W,l),b=a,y=o,A=e.getPixelForTick(s)+C,"top"===f?(M=L(r,t.top,F)+F/2,I=t.bottom,O=((g?1:.5)-N)*k,z=g?"left":"center",R=e.bottom-V):(M=t.top,I=L(r,t.bottom,F)-F/2,O=(g?0:.5)*k,z=g?"right":"center",R=e.top+V)}else{var E=(p?0:S)+_;W<e.top-1e-7&&(d="rgba(0,0,0,0)"),v=a,x=o,b=y=M=I=L(r,W,l),R=e.getPixelForTick(s)+C,O=(1-N)*k/2,"left"===f?(w=L(r,t.left,F)+F/2,P=t.right,z=p?"left":"right",A=e.right-E):(w=t.left,P=L(r,t.right,F)-F/2,z=p?"right":"left",A=e.left+E)}T.push({tx1:v,ty1:b,tx2:x,ty2:y,x1:w,y1:M,x2:P,y2:I,labelX:A,labelY:R,glWidth:l,glColor:d,glBorderDash:u,glBorderDashOffset:c,rotation:-1*D,label:B,major:n.major,textOffset:O,textAlign:z})}}),ut.each(T,function(t){var e=t.glWidth,i=t.glColor;if(h.display&&e&&i&&(s.save(),s.lineWidth=e,s.strokeStyle=i,s.setLineDash&&(s.setLineDash(t.glBorderDash),s.lineDashOffset=t.glBorderDashOffset),s.beginPath(),h.drawTicks&&(s.moveTo(t.tx1,t.ty1),s.lineTo(t.tx2,t.ty2)),h.drawOnChartArea&&(s.moveTo(t.x1,t.y1),s.lineTo(t.x2,t.y2)),s.stroke(),s.restore()),d.display){s.save(),s.translate(t.labelX,t.labelY),s.rotate(t.rotation),s.font=t.major?M.string:y.string,s.fillStyle=t.major?w:x,s.textBaseline="middle",s.textAlign=t.textAlign;var n=t.label,a=t.textOffset;if(ut.isArray(n))for(var o=0;o<n.length;++o)s.fillText(""+n[o],0,a),a+=k;else s.fillText(n,0,a);s.restore()}}),c.display){var R,O,z=0,B=I.lineHeight/2;if(m)R=e.left+(e.right-e.left)/2,O="bottom"===f?e.bottom-B-A.bottom:e.top+B+A.top;else{var N="left"===f;R=N?e.left+B+A.top:e.right-B-A.top,O=e.top+(e.bottom-e.top)/2,z=N?-.5*Math.PI:.5*Math.PI}s.save(),s.translate(R,O),s.rotate(z),s.textAlign="center",s.textBaseline="middle",s.fillStyle=P,s.font=I.string,s.fillText(c.labelString,0,0),s.restore()}if(F){var W,V,E,H,j=F,q=ui(h.lineWidth,b.length-1,0);m?(W=L(r,e.left,j)-j/2,V=L(r,e.right,q)+q/2,E=H=n):(E=L(r,e.top,j)-j/2,H=L(r,e.bottom,q)+q/2,W=V=n),s.lineWidth=F,s.strokeStyle=ui(h.color,0),s.beginPath(),s.moveTo(W,E),s.lineTo(V,H),s.stroke()}}}}),gi=fi.extend({getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels},determineDataLimits:function(){var t,e=this,i=e.getLabels();e.minIndex=0,e.maxIndex=i.length-1,void 0!==e.options.ticks.min&&(t=i.indexOf(e.options.ticks.min),e.minIndex=-1!==t?t:e.minIndex),void 0!==e.options.ticks.max&&(t=i.indexOf(e.options.ticks.max),e.maxIndex=-1!==t?t:e.maxIndex),e.min=i[e.minIndex],e.max=i[e.maxIndex]},buildTicks:function(){var t=this,e=t.getLabels();t.ticks=0===t.minIndex&&t.maxIndex===e.length-1?e:e.slice(t.minIndex,t.maxIndex+1)},getLabelForIndex:function(t,e){var i=this,n=i.chart;return n.getDatasetMeta(e).controller._getValueScaleId()===i.id?i.getRightValue(n.data.datasets[e].data[t]):i.ticks[t-i.minIndex]},getPixelForValue:function(t,e){var i,n=this,a=n.options.offset,o=Math.max(n.maxIndex+1-n.minIndex-(a?0:1),1);if(null!=t&&(i=n.isHorizontal()?t.x:t.y),void 0!==i||void 0!==t&&isNaN(e)){t=i||t;var r=n.getLabels().indexOf(t);e=-1!==r?r:e}if(n.isHorizontal()){var s=n.width/o,l=s*(e-n.minIndex);return a&&(l+=s/2),n.left+l}var d=n.height/o,u=d*(e-n.minIndex);return a&&(u+=d/2),n.top+u},getPixelForTick:function(t){return this.getPixelForValue(this.ticks[t],t+this.minIndex,null)},getValueForPixel:function(t){var e=this,i=e.options.offset,n=Math.max(e._ticks.length-(i?0:1),1),a=e.isHorizontal(),o=(a?e.width:e.height)/n;return t-=a?e.left:e.top,i&&(t-=o/2),(t<=0?0:Math.round(t/o))+e.minIndex},getBasePixel:function(){return this.bottom}}),pi={position:"bottom"};gi._defaults=pi;var mi=ut.noop,vi=ut.isNullOrUndef;var bi=fi.extend({getRightValue:function(t){return"string"==typeof t?+t:fi.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var i=ut.sign(t.min),n=ut.sign(t.max);i<0&&n<0?t.max=0:i>0&&n>0&&(t.min=0)}var a=void 0!==e.min||void 0!==e.suggestedMin,o=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),a!==o&&t.min>=t.max&&(a?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this.options.ticks,i=e.stepSize,n=e.maxTicksLimit;return i?t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1:(t=this._computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:mi,buildTicks:function(){var t=this,e=t.options.ticks,i=t.getTickLimit(),n={maxTicks:i=Math.max(2,i),min:e.min,max:e.max,precision:e.precision,stepSize:ut.valueOrDefault(e.fixedStepSize,e.stepSize)},a=t.ticks=function(t,e){var i,n,a,o,r=[],s=t.stepSize,l=s||1,d=t.maxTicks-1,u=t.min,h=t.max,c=t.precision,f=e.min,g=e.max,p=ut.niceNum((g-f)/d/l)*l;if(p<1e-14&&vi(u)&&vi(h))return[f,g];(o=Math.ceil(g/p)-Math.floor(f/p))>d&&(p=ut.niceNum(o*p/d/l)*l),s||vi(c)?i=Math.pow(10,ut._decimalPlaces(p)):(i=Math.pow(10,c),p=Math.ceil(p*i)/i),n=Math.floor(f/p)*p,a=Math.ceil(g/p)*p,s&&(!vi(u)&&ut.almostWhole(u/p,p/1e3)&&(n=u),!vi(h)&&ut.almostWhole(h/p,p/1e3)&&(a=h)),o=(a-n)/p,o=ut.almostEquals(o,Math.round(o),p/1e3)?Math.round(o):Math.ceil(o),n=Math.round(n*i)/i,a=Math.round(a*i)/i,r.push(vi(u)?n:u);for(var m=1;m<o;++m)r.push(Math.round((n+m*p)*i)/i);return r.push(vi(h)?a:h),r}(n,t);t.handleDirectionalChanges(),t.max=ut.max(a),t.min=ut.min(a),e.reverse?(a.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),fi.prototype.convertTicksToLabels.call(t)}}),xi={position:"left",ticks:{callback:li.formatters.linear}},yi=bi.extend({determineDataLimits:function(){var t=this,e=t.options,i=t.chart,n=i.data.datasets,a=t.isHorizontal();function o(e){return a?e.xAxisID===t.id:e.yAxisID===t.id}t.min=null,t.max=null;var r=e.stacked;if(void 0===r&&ut.each(n,function(t,e){if(!r){var n=i.getDatasetMeta(e);i.isDatasetVisible(e)&&o(n)&&void 0!==n.stack&&(r=!0)}}),e.stacked||r){var s={};ut.each(n,function(n,a){var r=i.getDatasetMeta(a),l=[r.type,void 0===e.stacked&&void 0===r.stack?a:"",r.stack].join(".");void 0===s[l]&&(s[l]={positiveValues:[],negativeValues:[]});var d=s[l].positiveValues,u=s[l].negativeValues;i.isDatasetVisible(a)&&o(r)&&ut.each(n.data,function(i,n){var a=+t.getRightValue(i);isNaN(a)||r.data[n].hidden||(d[n]=d[n]||0,u[n]=u[n]||0,e.relativePoints?d[n]=100:a<0?u[n]+=a:d[n]+=a)})}),ut.each(s,function(e){var i=e.positiveValues.concat(e.negativeValues),n=ut.min(i),a=ut.max(i);t.min=null===t.min?n:Math.min(t.min,n),t.max=null===t.max?a:Math.max(t.max,a)})}else ut.each(n,function(e,n){var a=i.getDatasetMeta(n);i.isDatasetVisible(n)&&o(a)&&ut.each(e.data,function(e,i){var n=+t.getRightValue(e);isNaN(n)||a.data[i].hidden||(null===t.min?t.min=n:n<t.min&&(t.min=n),null===t.max?t.max=n:n>t.max&&(t.max=n))})});t.min=isFinite(t.min)&&!isNaN(t.min)?t.min:0,t.max=isFinite(t.max)&&!isNaN(t.max)?t.max:1,this.handleTickRangeOptions()},_computeTickLimit:function(){var t;return this.isHorizontal()?Math.ceil(this.width/40):(t=ut.options._parseFont(this.options.ticks),Math.ceil(this.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e=this,i=e.start,n=+e.getRightValue(t),a=e.end-i;return e.isHorizontal()?e.left+e.width/a*(n-i):e.bottom-e.height/a*(n-i)},getValueForPixel:function(t){var e=this,i=e.isHorizontal(),n=i?e.width:e.height,a=(i?t-e.left:e.bottom-t)/n;return e.start+(e.end-e.start)*a},getPixelForTick:function(t){return this.getPixelForValue(this.ticksAsNumbers[t])}}),ki=xi;yi._defaults=ki;var wi=ut.valueOrDefault;var Mi={position:"left",ticks:{callback:li.formatters.logarithmic}};function _i(t,e){return ut.isFinite(t)&&t>=0?t:e}var Ci=fi.extend({determineDataLimits:function(){var t=this,e=t.options,i=t.chart,n=i.data.datasets,a=t.isHorizontal();function o(e){return a?e.xAxisID===t.id:e.yAxisID===t.id}t.min=null,t.max=null,t.minNotZero=null;var r=e.stacked;if(void 0===r&&ut.each(n,function(t,e){if(!r){var n=i.getDatasetMeta(e);i.isDatasetVisible(e)&&o(n)&&void 0!==n.stack&&(r=!0)}}),e.stacked||r){var s={};ut.each(n,function(n,a){var r=i.getDatasetMeta(a),l=[r.type,void 0===e.stacked&&void 0===r.stack?a:"",r.stack].join(".");i.isDatasetVisible(a)&&o(r)&&(void 0===s[l]&&(s[l]=[]),ut.each(n.data,function(e,i){var n=s[l],a=+t.getRightValue(e);isNaN(a)||r.data[i].hidden||a<0||(n[i]=n[i]||0,n[i]+=a)}))}),ut.each(s,function(e){if(e.length>0){var i=ut.min(e),n=ut.max(e);t.min=null===t.min?i:Math.min(t.min,i),t.max=null===t.max?n:Math.max(t.max,n)}})}else ut.each(n,function(e,n){var a=i.getDatasetMeta(n);i.isDatasetVisible(n)&&o(a)&&ut.each(e.data,function(e,i){var n=+t.getRightValue(e);isNaN(n)||a.data[i].hidden||n<0||(null===t.min?t.min=n:n<t.min&&(t.min=n),null===t.max?t.max=n:n>t.max&&(t.max=n),0!==n&&(null===t.minNotZero||n<t.minNotZero)&&(t.minNotZero=n))})});this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;t.min=_i(e.min,t.min),t.max=_i(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(ut.log10(t.min))-1),t.max=Math.pow(10,Math.floor(ut.log10(t.max))+1)):(t.min=1,t.max=10)),null===t.min&&(t.min=Math.pow(10,Math.floor(ut.log10(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(ut.log10(t.min))+1):10),null===t.minNotZero&&(t.min>0?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(ut.log10(t.max))):t.minNotZero=1)},buildTicks:function(){var t=this,e=t.options.ticks,i=!t.isHorizontal(),n={min:_i(e.min),max:_i(e.max)},a=t.ticks=function(t,e){var i,n,a=[],o=wi(t.min,Math.pow(10,Math.floor(ut.log10(e.min)))),r=Math.floor(ut.log10(e.max)),s=Math.ceil(e.max/Math.pow(10,r));0===o?(i=Math.floor(ut.log10(e.minNotZero)),n=Math.floor(e.minNotZero/Math.pow(10,i)),a.push(o),o=n*Math.pow(10,i)):(i=Math.floor(ut.log10(o)),n=Math.floor(o/Math.pow(10,i)));var l=i<0?Math.pow(10,Math.abs(i)):1;do{a.push(o),10==++n&&(n=1,l=++i>=0?1:l),o=Math.round(n*Math.pow(10,i)*l)/l}while(i<r||i===r&&n<s);var d=wi(t.max,o);return a.push(d),a}(n,t);t.max=ut.max(a),t.min=ut.min(a),e.reverse?(i=!i,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),i&&a.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),fi.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){return this.getPixelForValue(this.tickValues[t])},_getFirstTickValue:function(t){var e=Math.floor(ut.log10(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},getPixelForValue:function(t){var e,i,n,a,o,r=this,s=r.options.ticks,l=s.reverse,d=ut.log10,u=r._getFirstTickValue(r.minNotZero),h=0;return t=+r.getRightValue(t),l?(n=r.end,a=r.start,o=-1):(n=r.start,a=r.end,o=1),r.isHorizontal()?(e=r.width,i=l?r.right:r.left):(e=r.height,o*=-1,i=l?r.top:r.bottom),t!==n&&(0===n&&(e-=h=wi(s.fontSize,st.global.defaultFontSize),n=u),0!==t&&(h+=e/(d(a)-d(n))*(d(t)-d(n))),i+=o*h),i},getValueForPixel:function(t){var e,i,n,a,o=this,r=o.options.ticks,s=r.reverse,l=ut.log10,d=o._getFirstTickValue(o.minNotZero);if(s?(i=o.end,n=o.start):(i=o.start,n=o.end),o.isHorizontal()?(e=o.width,a=s?o.right-t:t-o.left):(e=o.height,a=s?t-o.top:o.bottom-t),a!==i){if(0===i){var u=wi(r.fontSize,st.global.defaultFontSize);a-=u,e-=u,i=d}a*=l(n)-l(i),a/=e,a=Math.pow(10,l(i)+a)}return a}}),Si=Mi;Ci._defaults=Si;var Pi=ut.valueOrDefault,Ii=ut.valueAtIndexOrDefault,Ai=ut.options.resolve,Di={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:li.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function Ti(t){var e=t.options;return e.angleLines.display||e.pointLabels.display?t.chart.data.labels.length:0}function Fi(t){var e=t.ticks;return e.display&&t.display?Pi(e.fontSize,st.global.defaultFontSize)+2*e.backdropPaddingY:0}function Li(t,e,i,n,a){return t===n||t===a?{start:e-i/2,end:e+i/2}:t<n||t>a?{start:e-i,end:e}:{start:e,end:e+i}}function Ri(t){return 0===t||180===t?"center":t<180?"left":"right"}function Oi(t,e,i,n){var a,o,r=i.y+n/2;if(ut.isArray(e))for(a=0,o=e.length;a<o;++a)t.fillText(e[a],i.x,r),r+=n;else t.fillText(e,i.x,r)}function zi(t,e,i){90===t||270===t?i.y-=e.h/2:(t>270||t<90)&&(i.y-=e.h)}function Bi(t){return ut.isNumber(t)?t:0}var Ni=bi.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=Fi(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,e=t.chart,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;ut.each(e.data.datasets,function(a,o){if(e.isDatasetVisible(o)){var r=e.getDatasetMeta(o);ut.each(a.data,function(e,a){var o=+t.getRightValue(e);isNaN(o)||r.data[a].hidden||(i=Math.min(o,i),n=Math.max(o,n))})}}),t.min=i===Number.POSITIVE_INFINITY?0:i,t.max=n===Number.NEGATIVE_INFINITY?0:n,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Fi(this.options))},convertTicksToLabels:function(){var t=this;bi.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map(t.options.pointLabels.callback,t)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this.options;t.display&&t.pointLabels.display?function(t){var e,i,n,a=ut.options._parseFont(t.options.pointLabels),o={l:0,r:t.width,t:0,b:t.height-t.paddingTop},r={};t.ctx.font=a.string,t._pointLabelSizes=[];var s,l,d,u=Ti(t);for(e=0;e<u;e++){n=t.getPointPosition(e,t.drawingArea+5),s=t.ctx,l=a.lineHeight,d=t.pointLabels[e]||"",i=ut.isArray(d)?{w:ut.longestText(s,s.font,d),h:d.length*l}:{w:s.measureText(d).width,h:l},t._pointLabelSizes[e]=i;var h=t.getIndexAngle(e),c=ut.toDegrees(h)%360,f=Li(c,n.x,i.w,0,180),g=Li(c,n.y,i.h,90,270);f.start<o.l&&(o.l=f.start,r.l=h),f.end>o.r&&(o.r=f.end,r.r=h),g.start<o.t&&(o.t=g.start,r.t=h),g.end>o.b&&(o.b=g.end,r.b=h)}t.setReductions(t.drawingArea,o,r)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(t,e,i){var n=this,a=e.l/Math.sin(i.l),o=Math.max(e.r-n.width,0)/Math.sin(i.r),r=-e.t/Math.cos(i.t),s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);a=Bi(a),o=Bi(o),r=Bi(r),s=Bi(s),n.drawingArea=Math.min(Math.floor(t-(a+o)/2),Math.floor(t-(r+s)/2)),n.setCenterPoint(a,o,r,s)},setCenterPoint:function(t,e,i,n){var a=this,o=a.width-e-a.drawingArea,r=t+a.drawingArea,s=i+a.drawingArea,l=a.height-a.paddingTop-n-a.drawingArea;a.xCenter=Math.floor((r+o)/2+a.left),a.yCenter=Math.floor((s+l)/2+a.top+a.paddingTop)},getIndexAngle:function(t){return t*(2*Math.PI/Ti(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(null===t)return 0;var i=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*i:(t-e.min)*i},getPointPosition:function(t,e){var i=this.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(){var t=this.min,e=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0)},draw:function(){var t=this,e=t.options,i=e.gridLines,n=e.ticks;if(e.display){var a=t.ctx,o=this.getIndexAngle(0),r=ut.options._parseFont(n);(e.angleLines.display||e.pointLabels.display)&&function(t){var e=t.ctx,i=t.options,n=i.angleLines,a=i.gridLines,o=i.pointLabels,r=Pi(n.lineWidth,a.lineWidth),s=Pi(n.color,a.color),l=Fi(i);e.save(),e.lineWidth=r,e.strokeStyle=s,e.setLineDash&&(e.setLineDash(Ai([n.borderDash,a.borderDash,[]])),e.lineDashOffset=Ai([n.borderDashOffset,a.borderDashOffset,0]));var d=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max),u=ut.options._parseFont(o);e.font=u.string,e.textBaseline="middle";for(var h=Ti(t)-1;h>=0;h--){if(n.display&&r&&s){var c=t.getPointPosition(h,d);e.beginPath(),e.moveTo(t.xCenter,t.yCenter),e.lineTo(c.x,c.y),e.stroke()}if(o.display){var f=0===h?l/2:0,g=t.getPointPosition(h,d+f+5),p=Ii(o.fontColor,h,st.global.defaultFontColor);e.fillStyle=p;var m=t.getIndexAngle(h),v=ut.toDegrees(m);e.textAlign=Ri(v),zi(v,t._pointLabelSizes[h],g),Oi(e,t.pointLabels[h]||"",g,u.lineHeight)}}e.restore()}(t),ut.each(t.ticks,function(e,s){if(s>0||n.reverse){var l=t.getDistanceFromCenterForValue(t.ticksAsNumbers[s]);if(i.display&&0!==s&&function(t,e,i,n){var a,o=t.ctx,r=e.circular,s=Ti(t),l=Ii(e.color,n-1),d=Ii(e.lineWidth,n-1);if((r||s)&&l&&d){if(o.save(),o.strokeStyle=l,o.lineWidth=d,o.setLineDash&&(o.setLineDash(e.borderDash||[]),o.lineDashOffset=e.borderDashOffset||0),o.beginPath(),r)o.arc(t.xCenter,t.yCenter,i,0,2*Math.PI);else{a=t.getPointPosition(0,i),o.moveTo(a.x,a.y);for(var u=1;u<s;u++)a=t.getPointPosition(u,i),o.lineTo(a.x,a.y)}o.closePath(),o.stroke(),o.restore()}}(t,i,l,s),n.display){var d=Pi(n.fontColor,st.global.defaultFontColor);if(a.font=r.string,a.save(),a.translate(t.xCenter,t.yCenter),a.rotate(o),n.showLabelBackdrop){var u=a.measureText(e).width;a.fillStyle=n.backdropColor,a.fillRect(-u/2-n.backdropPaddingX,-l-r.size/2-n.backdropPaddingY,u+2*n.backdropPaddingX,r.size+2*n.backdropPaddingY)}a.textAlign="center",a.textBaseline="middle",a.fillStyle=d,a.fillText(e,0,-l),a.restore()}}})}}}),Wi=Di;Ni._defaults=Wi;var Vi=ut.valueOrDefault,Ei=Number.MIN_SAFE_INTEGER||-9007199254740991,Hi=Number.MAX_SAFE_INTEGER||9007199254740991,ji={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},qi=Object.keys(ji);function Yi(t,e){return t-e}function Ui(t){var e,i,n,a={},o=[];for(e=0,i=t.length;e<i;++e)a[n=t[e]]||(a[n]=!0,o.push(n));return o}function Xi(t,e,i,n){var a=function(t,e,i){for(var n,a,o,r=0,s=t.length-1;r>=0&&r<=s;){if(a=t[(n=r+s>>1)-1]||null,o=t[n],!a)return{lo:null,hi:o};if(o[e]<i)r=n+1;else{if(!(a[e]>i))return{lo:a,hi:o};s=n-1}}return{lo:o,hi:null}}(t,e,i),o=a.lo?a.hi?a.lo:t[t.length-2]:t[0],r=a.lo?a.hi?a.hi:t[t.length-1]:t[1],s=r[e]-o[e],l=s?(i-o[e])/s:0,d=(r[n]-o[n])*l;return o[n]+d}function Ki(t,e){var i=t._adapter,n=t.options.time,a=n.parser,o=a||n.format,r=e;return"function"==typeof a&&(r=a(r)),ut.isFinite(r)||(r="string"==typeof o?i.parse(r,o):i.parse(r)),null!==r?+r:(a||"function"!=typeof o||(r=o(e),ut.isFinite(r)||(r=i.parse(r))),r)}function Gi(t,e){if(ut.isNullOrUndef(e))return null;var i=t.options.time,n=Ki(t,t.getRightValue(e));return null===n?n:(i.round&&(n=+t._adapter.startOf(n,i.round)),n)}function Zi(t){for(var e=qi.indexOf(t)+1,i=qi.length;e<i;++e)if(ji[qi[e]].common)return qi[e]}function $i(t,e,i,n){var a,o=t._adapter,r=t.options,s=r.time,l=s.unit||function(t,e,i,n){var a,o,r,s=qi.length;for(a=qi.indexOf(t);a<s-1;++a)if(r=(o=ji[qi[a]]).steps?o.steps[o.steps.length-1]:Hi,o.common&&Math.ceil((i-e)/(r*o.size))<=n)return qi[a];return qi[s-1]}(s.minUnit,e,i,n),d=Zi(l),u=Vi(s.stepSize,s.unitStepSize),h="week"===l&&s.isoWeekday,c=r.ticks.major.enabled,f=ji[l],g=e,p=i,m=[];for(u||(u=function(t,e,i,n){var a,o,r,s=e-t,l=ji[i],d=l.size,u=l.steps;if(!u)return Math.ceil(s/(n*d));for(a=0,o=u.length;a<o&&(r=u[a],!(Math.ceil(s/(d*r))<=n));++a);return r}(e,i,l,n)),h&&(g=+o.startOf(g,"isoWeek",h),p=+o.startOf(p,"isoWeek",h)),g=+o.startOf(g,h?"day":l),(p=+o.startOf(p,h?"day":l))<i&&(p=+o.add(p,1,l)),a=g,c&&d&&!h&&!s.round&&(a=+o.startOf(a,d),a=+o.add(a,~~((g-a)/(f.size*u))*u,l));a<p;a=+o.add(a,u,l))m.push(+a);return m.push(+a),m}var Ji=fi.extend({initialize:function(){this.mergeTicksOptions(),fi.prototype.initialize.call(this)},update:function(){var t=this.options,e=t.time||(t.time={}),i=this._adapter=new si._date(t.adapters.date);return e.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),ut.mergeIf(e.displayFormats,i.formats()),fi.prototype.update.apply(this,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),fi.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,i,n,a,o,r=this,s=r.chart,l=r._adapter,d=r.options.time,u=d.unit||"day",h=Hi,c=Ei,f=[],g=[],p=[],m=s.data.labels||[];for(t=0,i=m.length;t<i;++t)p.push(Gi(r,m[t]));for(t=0,i=(s.data.datasets||[]).length;t<i;++t)if(s.isDatasetVisible(t))if(a=s.data.datasets[t].data,ut.isObject(a[0]))for(g[t]=[],e=0,n=a.length;e<n;++e)o=Gi(r,a[e]),f.push(o),g[t][e]=o;else{for(e=0,n=p.length;e<n;++e)f.push(p[e]);g[t]=p.slice(0)}else g[t]=[];p.length&&(p=Ui(p).sort(Yi),h=Math.min(h,p[0]),c=Math.max(c,p[p.length-1])),f.length&&(f=Ui(f).sort(Yi),h=Math.min(h,f[0]),c=Math.max(c,f[f.length-1])),h=Gi(r,d.min)||h,c=Gi(r,d.max)||c,h=h===Hi?+l.startOf(Date.now(),u):h,c=c===Ei?+l.endOf(Date.now(),u)+1:c,r.min=Math.min(h,c),r.max=Math.max(h+1,c),r._horizontal=r.isHorizontal(),r._table=[],r._timestamps={data:f,datasets:g,labels:p}},buildTicks:function(){var t,e,i,n=this,a=n.min,o=n.max,r=n.options,s=r.time,l=[],d=[];switch(r.ticks.source){case"data":l=n._timestamps.data;break;case"labels":l=n._timestamps.labels;break;case"auto":default:l=$i(n,a,o,n.getLabelCapacity(a))}for("ticks"===r.bounds&&l.length&&(a=l[0],o=l[l.length-1]),a=Gi(n,s.min)||a,o=Gi(n,s.max)||o,t=0,e=l.length;t<e;++t)(i=l[t])>=a&&i<=o&&d.push(i);return n.min=a,n.max=o,n._unit=s.unit||function(t,e,i,n,a){var o,r;for(o=qi.length-1;o>=qi.indexOf(i);o--)if(r=qi[o],ji[r].common&&t._adapter.diff(a,n,r)>=e.length)return r;return qi[i?qi.indexOf(i):0]}(n,d,s.minUnit,n.min,n.max),n._majorUnit=Zi(n._unit),n._table=function(t,e,i,n){if("linear"===n||!t.length)return[{time:e,pos:0},{time:i,pos:1}];var a,o,r,s,l,d=[],u=[e];for(a=0,o=t.length;a<o;++a)(s=t[a])>e&&s<i&&u.push(s);for(u.push(i),a=0,o=u.length;a<o;++a)l=u[a+1],r=u[a-1],s=u[a],void 0!==r&&void 0!==l&&Math.round((l+r)/2)===s||d.push({time:s,pos:a/(o-1)});return d}(n._timestamps.data,a,o,r.distribution),n._offsets=function(t,e,i,n,a){var o,r,s=0,l=0;return a.offset&&e.length&&(a.time.min||(o=Xi(t,"time",e[0],"pos"),s=1===e.length?1-o:(Xi(t,"time",e[1],"pos")-o)/2),a.time.max||(r=Xi(t,"time",e[e.length-1],"pos"),l=1===e.length?r:(r-Xi(t,"time",e[e.length-2],"pos"))/2)),{start:s,end:l}}(n._table,d,0,0,r),r.ticks.reverse&&d.reverse(),function(t,e,i){var n,a,o,r,s=[];for(n=0,a=e.length;n<a;++n)o=e[n],r=!!i&&o===+t._adapter.startOf(o,i),s.push({value:o,major:r});return s}(n,d,n._majorUnit)},getLabelForIndex:function(t,e){var i=this,n=i._adapter,a=i.chart.data,o=i.options.time,r=a.labels&&t<a.labels.length?a.labels[t]:"",s=a.datasets[e].data[t];return ut.isObject(s)&&(r=i.getRightValue(s)),o.tooltipFormat?n.format(Ki(i,r),o.tooltipFormat):"string"==typeof r?r:n.format(Ki(i,r),o.displayFormats.datetime)},tickFormatFunction:function(t,e,i,n){var a=this._adapter,o=this.options,r=o.time.displayFormats,s=r[this._unit],l=this._majorUnit,d=r[l],u=+a.startOf(t,l),h=o.ticks.major,c=h.enabled&&l&&d&&t===u,f=a.format(t,n||(c?d:s)),g=c?h:o.ticks.minor,p=Vi(g.callback,g.userCallback);return p?p(f,e,i):f},convertTicksToLabels:function(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(this.tickFormatFunction(t[e].value,e,t));return n},getPixelForOffset:function(t){var e=this,i=e.options.ticks.reverse,n=e._horizontal?e.width:e.height,a=e._horizontal?i?e.right:e.left:i?e.bottom:e.top,o=Xi(e._table,"time",t,"pos"),r=n*(e._offsets.start+o)/(e._offsets.start+1+e._offsets.end);return i?a-r:a+r},getPixelForValue:function(t,e,i){var n=null;if(void 0!==e&&void 0!==i&&(n=this._timestamps.datasets[i][e]),null===n&&(n=Gi(this,t)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this,i=e._horizontal?e.width:e.height,n=e._horizontal?e.left:e.top,a=(i?(t-n)/i:0)*(e._offsets.start+1+e._offsets.start)-e._offsets.end,o=Xi(e._table,"pos",a,"time");return e._adapter._create(o)},getLabelWidth:function(t){var e=this.options.ticks,i=this.ctx.measureText(t).width,n=ut.toRadians(e.maxRotation),a=Math.cos(n),o=Math.sin(n);return i*a+Vi(e.fontSize,st.global.defaultFontSize)*o},getLabelCapacity:function(t){var e=this,i=e.options.time.displayFormats.millisecond,n=e.tickFormatFunction(t,0,[],i),a=e.getLabelWidth(n),o=e.isHorizontal()?e.width:e.height,r=Math.floor(o/a);return r>0?r:1}}),Qi={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};Ji._defaults=Qi;var tn={category:gi,linear:yi,logarithmic:Ci,radialLinear:Ni,time:Ji},en={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};si._date.override("function"==typeof t?{_id:"moment",formats:function(){return en},parse:function(e,i){return"string"==typeof e&&"string"==typeof i?e=t(e,i):e instanceof t||(e=t(e)),e.isValid()?e.valueOf():null},format:function(e,i){return t(e).format(i)},add:function(e,i,n){return t(e).add(i,n).valueOf()},diff:function(e,i,n){return t.duration(t(e).diff(t(i))).as(n)},startOf:function(e,i,n){return e=t(e),"isoWeek"===i?e.isoWeekday(n).valueOf():e.startOf(i).valueOf()},endOf:function(e,i){return t(e).endOf(i).valueOf()},_create:function(e){return t(e)}}:{}),st._set("global",{plugins:{filler:{propagate:!0}}});var nn={dataset:function(t){var e=t.fill,i=t.chart,n=i.getDatasetMeta(e),a=n&&i.isDatasetVisible(e)&&n.dataset._children||[],o=a.length||0;return o?function(t,e){return e<o&&a[e]._view||null}:null},boundary:function(t){var e=t.boundary,i=e?e.x:null,n=e?e.y:null;return function(t){return{x:null===i?t.x:i,y:null===n?t.y:n}}}};function an(t,e,i){var n,a=t._model||{},o=a.fill;if(void 0===o&&(o=!!a.backgroundColor),!1===o||null===o)return!1;if(!0===o)return"origin";if(n=parseFloat(o,10),isFinite(n)&&Math.floor(n)===n)return"-"!==o[0]&&"+"!==o[0]||(n=e+n),!(n===e||n<0||n>=i)&&n;switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return!1}}function on(t){var e,i=t.el._model||{},n=t.el._scale||{},a=t.fill,o=null;if(isFinite(a))return null;if("start"===a?o=void 0===i.scaleBottom?n.bottom:i.scaleBottom:"end"===a?o=void 0===i.scaleTop?n.top:i.scaleTop:void 0!==i.scaleZero?o=i.scaleZero:n.getBasePosition?o=n.getBasePosition():n.getBasePixel&&(o=n.getBasePixel()),null!=o){if(void 0!==o.x&&void 0!==o.y)return o;if(ut.isFinite(o))return{x:(e=n.isHorizontal())?o:null,y:e?null:o}}return null}function rn(t,e,i){var n,a=t[e].fill,o=[e];if(!i)return a;for(;!1!==a&&-1===o.indexOf(a);){if(!isFinite(a))return a;if(!(n=t[a]))return!1;if(n.visible)return a;o.push(a),a=n.fill}return!1}function sn(t){var e=t.fill,i="dataset";return!1===e?null:(isFinite(e)||(i="boundary"),nn[i](t))}function ln(t){return t&&!t.skip}function dn(t,e,i,n,a){var o;if(n&&a){for(t.moveTo(e[0].x,e[0].y),o=1;o<n;++o)ut.canvas.lineTo(t,e[o-1],e[o]);for(t.lineTo(i[a-1].x,i[a-1].y),o=a-1;o>0;--o)ut.canvas.lineTo(t,i[o],i[o-1],!0)}}var un={id:"filler",afterDatasetsUpdate:function(t,e){var i,n,a,o,r=(t.data.datasets||[]).length,s=e.propagate,l=[];for(n=0;n<r;++n)o=null,(a=(i=t.getDatasetMeta(n)).dataset)&&a._model&&a instanceof Wt.Line&&(o={visible:t.isDatasetVisible(n),fill:an(a,n,r),chart:t,el:a}),i.$filler=o,l.push(o);for(n=0;n<r;++n)(o=l[n])&&(o.fill=rn(l,n,s),o.boundary=on(o),o.mapper=sn(o))},beforeDatasetDraw:function(t,e){var i=e.meta.$filler;if(i){var n=t.ctx,a=i.el,o=a._view,r=a._children||[],s=i.mapper,l=o.backgroundColor||st.global.defaultColor;s&&l&&r.length&&(ut.canvas.clipArea(n,t.chartArea),function(t,e,i,n,a,o){var r,s,l,d,u,h,c,f=e.length,g=n.spanGaps,p=[],m=[],v=0,b=0;for(t.beginPath(),r=0,s=f+!!o;r<s;++r)u=i(d=e[l=r%f]._view,l,n),h=ln(d),c=ln(u),h&&c?(v=p.push(d),b=m.push(u)):v&&b&&(g?(h&&p.push(d),c&&m.push(u)):(dn(t,p,m,v,b),v=b=0,p=[],m=[]));dn(t,p,m,v,b),t.closePath(),t.fillStyle=a,t.fill()}(n,r,s,o,l,a._loop),ut.canvas.unclipArea(n))}}},hn=ut.noop,cn=ut.valueOrDefault;function fn(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}st._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var i=e.datasetIndex,n=this.chart,a=n.getDatasetMeta(i);a.hidden=null===a.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data;return ut.isArray(e.datasets)?e.datasets.map(function(e,i){return{text:e.label,fillStyle:ut.isArray(e.backgroundColor)?e.backgroundColor[0]:e.backgroundColor,hidden:!t.isDatasetVisible(i),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,datasetIndex:i}},this):[]}}},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');for(var i=0;i<t.data.datasets.length;i++)e.push('<li><span style="background-color:'+t.data.datasets[i].backgroundColor+'"></span>'),t.data.datasets[i].label&&e.push(t.data.datasets[i].label),e.push("</li>");return e.push("</ul>"),e.join("")}});var gn=pt.extend({initialize:function(t){ut.extend(this,t),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:hn,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:hn,beforeSetDimensions:hn,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:hn,beforeBuildLabels:hn,buildLabels:function(){var t=this,e=t.options.labels||{},i=ut.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(i=i.filter(function(i){return e.filter(i,t.chart.data)})),t.options.reverse&&i.reverse(),t.legendItems=i},afterBuildLabels:hn,beforeFit:hn,fit:function(){var t=this,e=t.options,i=e.labels,n=e.display,a=t.ctx,o=ut.options._parseFont(i),r=o.size,s=t.legendHitBoxes=[],l=t.minSize,d=t.isHorizontal();if(d?(l.width=t.maxWidth,l.height=n?10:0):(l.width=n?10:0,l.height=t.maxHeight),n)if(a.font=o.string,d){var u=t.lineWidths=[0],h=0;a.textAlign="left",a.textBaseline="top",ut.each(t.legendItems,function(t,e){var n=fn(i,r)+r/2+a.measureText(t.text).width;(0===e||u[u.length-1]+n+i.padding>l.width)&&(h+=r+i.padding,u[u.length-(e>0?0:1)]=i.padding),s[e]={left:0,top:0,width:n,height:r},u[u.length-1]+=n+i.padding}),l.height+=h}else{var c=i.padding,f=t.columnWidths=[],g=i.padding,p=0,m=0,v=r+c;ut.each(t.legendItems,function(t,e){var n=fn(i,r)+r/2+a.measureText(t.text).width;e>0&&m+v>l.height-c&&(g+=p+i.padding,f.push(p),p=0,m=0),p=Math.max(p,n),m+=v,s[e]={left:0,top:0,width:n,height:r}}),g+=p,f.push(p),l.width+=g}t.width=l.width,t.height=l.height},afterFit:hn,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,e=t.options,i=e.labels,n=st.global,a=n.defaultColor,o=n.elements.line,r=t.width,s=t.lineWidths;if(e.display){var l,d=t.ctx,u=cn(i.fontColor,n.defaultFontColor),h=ut.options._parseFont(i),c=h.size;d.textAlign="left",d.textBaseline="middle",d.lineWidth=.5,d.strokeStyle=u,d.fillStyle=u,d.font=h.string;var f=fn(i,c),g=t.legendHitBoxes,p=t.isHorizontal();l=p?{x:t.left+(r-s[0])/2+i.padding,y:t.top+i.padding,line:0}:{x:t.left+i.padding,y:t.top+i.padding,line:0};var m=c+i.padding;ut.each(t.legendItems,function(n,u){var h=d.measureText(n.text).width,v=f+c/2+h,b=l.x,x=l.y;p?u>0&&b+v+i.padding>t.left+t.minSize.width&&(x=l.y+=m,l.line++,b=l.x=t.left+(r-s[l.line])/2+i.padding):u>0&&x+m>t.top+t.minSize.height&&(b=l.x=b+t.columnWidths[l.line]+i.padding,x=l.y=t.top+i.padding,l.line++),function(t,i,n){if(!(isNaN(f)||f<=0)){d.save();var r=cn(n.lineWidth,o.borderWidth);if(d.fillStyle=cn(n.fillStyle,a),d.lineCap=cn(n.lineCap,o.borderCapStyle),d.lineDashOffset=cn(n.lineDashOffset,o.borderDashOffset),d.lineJoin=cn(n.lineJoin,o.borderJoinStyle),d.lineWidth=r,d.strokeStyle=cn(n.strokeStyle,a),d.setLineDash&&d.setLineDash(cn(n.lineDash,o.borderDash)),e.labels&&e.labels.usePointStyle){var s=f*Math.SQRT2/2,l=t+f/2,u=i+c/2;ut.canvas.drawPoint(d,n.pointStyle,s,l,u)}else 0!==r&&d.strokeRect(t,i,f,c),d.fillRect(t,i,f,c);d.restore()}}(b,x,n),g[u].left=b,g[u].top=x,function(t,e,i,n){var a=c/2,o=f+a+t,r=e+a;d.fillText(i.text,o,r),i.hidden&&(d.beginPath(),d.lineWidth=2,d.moveTo(o,r),d.lineTo(o+n,r),d.stroke())}(b,x,n,h),p?l.x+=v+i.padding:l.y+=m})}},_getLegendItemAt:function(t,e){var i,n,a,o=this;if(t>=o.left&&t<=o.right&&e>=o.top&&e<=o.bottom)for(a=o.legendHitBoxes,i=0;i<a.length;++i)if(t>=(n=a[i]).left&&t<=n.left+n.width&&e>=n.top&&e<=n.top+n.height)return o.legendItems[i];return null},handleEvent:function(t){var e,i=this,n=i.options,a="mouseup"===t.type?"click":t.type;if("mousemove"===a){if(!n.onHover&&!n.onLeave)return}else{if("click"!==a)return;if(!n.onClick)return}e=i._getLegendItemAt(t.x,t.y),"click"===a?e&&n.onClick&&n.onClick.call(i,t.native,e):(n.onLeave&&e!==i._hoveredItem&&(i._hoveredItem&&n.onLeave.call(i,t.native,i._hoveredItem),i._hoveredItem=e),n.onHover&&e&&n.onHover.call(i,t.native,e))}});function pn(t,e){var i=new gn({ctx:t.ctx,options:e,chart:t});ke.configure(t,i,e),ke.addBox(t,i),t.legend=i}var mn={id:"legend",_element:gn,beforeInit:function(t){var e=t.options.legend;e&&pn(t,e)},beforeUpdate:function(t){var e=t.options.legend,i=t.legend;e?(ut.mergeIf(e,st.global.legend),i?(ke.configure(t,i,e),i.options=e):pn(t,e)):i&&(ke.removeBox(t,i),delete t.legend)},afterEvent:function(t,e){var i=t.legend;i&&i.handleEvent(e)}},vn=ut.noop;st._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var bn=pt.extend({initialize:function(t){ut.extend(this,t),this.legendHitBoxes=[]},beforeUpdate:vn,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:vn,beforeSetDimensions:vn,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:vn,beforeBuildLabels:vn,buildLabels:vn,afterBuildLabels:vn,beforeFit:vn,fit:function(){var t=this,e=t.options,i=e.display,n=t.minSize,a=ut.isArray(e.text)?e.text.length:1,o=ut.options._parseFont(e),r=i?a*o.lineHeight+2*e.padding:0;t.isHorizontal()?(n.width=t.maxWidth,n.height=r):(n.width=r,n.height=t.maxHeight),t.width=n.width,t.height=n.height},afterFit:vn,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,i=t.options;if(i.display){var n,a,o,r=ut.options._parseFont(i),s=r.lineHeight,l=s/2+i.padding,d=0,u=t.top,h=t.left,c=t.bottom,f=t.right;e.fillStyle=ut.valueOrDefault(i.fontColor,st.global.defaultFontColor),e.font=r.string,t.isHorizontal()?(a=h+(f-h)/2,o=u+l,n=f-h):(a="left"===i.position?h+l:f-l,o=u+(c-u)/2,n=c-u,d=Math.PI*("left"===i.position?-.5:.5)),e.save(),e.translate(a,o),e.rotate(d),e.textAlign="center",e.textBaseline="middle";var g=i.text;if(ut.isArray(g))for(var p=0,m=0;m<g.length;++m)e.fillText(g[m],0,p,n),p+=s;else e.fillText(g,0,0,n);e.restore()}}});function xn(t,e){var i=new bn({ctx:t.ctx,options:e,chart:t});ke.configure(t,i,e),ke.addBox(t,i),t.titleBlock=i}var yn={},kn=un,wn=mn,Mn={id:"title",_element:bn,beforeInit:function(t){var e=t.options.title;e&&xn(t,e)},beforeUpdate:function(t){var e=t.options.title,i=t.titleBlock;e?(ut.mergeIf(e,st.global.title),i?(ke.configure(t,i,e),i.options=e):xn(t,e)):i&&(ke.removeBox(t,i),delete t.titleBlock)}};for(var _n in yn.filler=kn,yn.legend=wn,yn.title=Mn,ai.helpers=ut,function(){function t(t,e,i){var n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}function e(t){return null!=t&&"none"!==t}function i(i,n,a){var o=document.defaultView,r=ut._getParentNode(i),s=o.getComputedStyle(i)[n],l=o.getComputedStyle(r)[n],d=e(s),u=e(l),h=Number.POSITIVE_INFINITY;return d||u?Math.min(d?t(s,i,a):h,u?t(l,r,a):h):"none"}ut.where=function(t,e){if(ut.isArray(t)&&Array.prototype.filter)return t.filter(e);var i=[];return ut.each(t,function(t){e(t)&&i.push(t)}),i},ut.findIndex=Array.prototype.findIndex?function(t,e,i){return t.findIndex(e,i)}:function(t,e,i){i=void 0===i?t:i;for(var n=0,a=t.length;n<a;++n)if(e.call(i,t[n],n,t))return n;return-1},ut.findNextWhere=function(t,e,i){ut.isNullOrUndef(i)&&(i=-1);for(var n=i+1;n<t.length;n++){var a=t[n];if(e(a))return a}},ut.findPreviousWhere=function(t,e,i){ut.isNullOrUndef(i)&&(i=t.length);for(var n=i-1;n>=0;n--){var a=t[n];if(e(a))return a}},ut.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},ut.almostEquals=function(t,e,i){return Math.abs(t-e)<i},ut.almostWhole=function(t,e){var i=Math.round(t);return i-e<t&&i+e>t},ut.max=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.max(t,e)},Number.NEGATIVE_INFINITY)},ut.min=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.min(t,e)},Number.POSITIVE_INFINITY)},ut.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},ut.log10=Math.log10?function(t){return Math.log10(t)}:function(t){var e=Math.log(t)*Math.LOG10E,i=Math.round(e);return t===Math.pow(10,i)?i:e},ut.toRadians=function(t){return t*(Math.PI/180)},ut.toDegrees=function(t){return t*(180/Math.PI)},ut._decimalPlaces=function(t){if(ut.isFinite(t)){for(var e=1,i=0;Math.round(t*e)/e!==t;)e*=10,i++;return i}},ut.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,a=Math.sqrt(i*i+n*n),o=Math.atan2(n,i);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:a}},ut.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},ut.aliasPixel=function(t){return t%2==0?0:.5},ut._alignPixel=function(t,e,i){var n=t.currentDevicePixelRatio,a=i/2;return Math.round((e-a)*n)/n+a},ut.splineCurve=function(t,e,i,n){var a=t.skip?e:t,o=e,r=i.skip?e:i,s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),l=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),d=s/(s+l),u=l/(s+l),h=n*(d=isNaN(d)?0:d),c=n*(u=isNaN(u)?0:u);return{previous:{x:o.x-h*(r.x-a.x),y:o.y-h*(r.y-a.y)},next:{x:o.x+c*(r.x-a.x),y:o.y+c*(r.y-a.y)}}},ut.EPSILON=Number.EPSILON||1e-14,ut.splineCurveMonotone=function(t){var e,i,n,a,o,r,s,l,d,u=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}}),h=u.length;for(e=0;e<h;++e)if(!(n=u[e]).model.skip){if(i=e>0?u[e-1]:null,(a=e<h-1?u[e+1]:null)&&!a.model.skip){var c=a.model.x-n.model.x;n.deltaK=0!==c?(a.model.y-n.model.y)/c:0}!i||i.model.skip?n.mK=n.deltaK:!a||a.model.skip?n.mK=i.deltaK:this.sign(i.deltaK)!==this.sign(n.deltaK)?n.mK=0:n.mK=(i.deltaK+n.deltaK)/2}for(e=0;e<h-1;++e)n=u[e],a=u[e+1],n.model.skip||a.model.skip||(ut.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=a.mK=0:(o=n.mK/n.deltaK,r=a.mK/n.deltaK,(l=Math.pow(o,2)+Math.pow(r,2))<=9||(s=3/Math.sqrt(l),n.mK=o*s*n.deltaK,a.mK=r*s*n.deltaK)));for(e=0;e<h;++e)(n=u[e]).model.skip||(i=e>0?u[e-1]:null,a=e<h-1?u[e+1]:null,i&&!i.model.skip&&(d=(n.model.x-i.model.x)/3,n.model.controlPointPreviousX=n.model.x-d,n.model.controlPointPreviousY=n.model.y-d*n.mK),a&&!a.model.skip&&(d=(a.model.x-n.model.x)/3,n.model.controlPointNextX=n.model.x+d,n.model.controlPointNextY=n.model.y+d*n.mK))},ut.nextItem=function(t,e,i){return i?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},ut.previousItem=function(t,e,i){return i?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},ut.niceNum=function(t,e){var i=Math.floor(ut.log10(t)),n=t/Math.pow(10,i);return(e?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,i)},ut.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},ut.getRelativePosition=function(t,e){var i,n,a=t.originalEvent||t,o=t.target||t.srcElement,r=o.getBoundingClientRect(),s=a.touches;s&&s.length>0?(i=s[0].clientX,n=s[0].clientY):(i=a.clientX,n=a.clientY);var l=parseFloat(ut.getStyle(o,"padding-left")),d=parseFloat(ut.getStyle(o,"padding-top")),u=parseFloat(ut.getStyle(o,"padding-right")),h=parseFloat(ut.getStyle(o,"padding-bottom")),c=r.right-r.left-l-u,f=r.bottom-r.top-d-h;return{x:i=Math.round((i-r.left-l)/c*o.width/e.currentDevicePixelRatio),y:n=Math.round((n-r.top-d)/f*o.height/e.currentDevicePixelRatio)}},ut.getConstraintWidth=function(t){return i(t,"max-width","clientWidth")},ut.getConstraintHeight=function(t){return i(t,"max-height","clientHeight")},ut._calculatePadding=function(t,e,i){return(e=ut.getStyle(t,e)).indexOf("%")>-1?i*parseInt(e,10)/100:parseInt(e,10)},ut._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},ut.getMaximumWidth=function(t){var e=ut._getParentNode(t);if(!e)return t.clientWidth;var i=e.clientWidth,n=i-ut._calculatePadding(e,"padding-left",i)-ut._calculatePadding(e,"padding-right",i),a=ut.getConstraintWidth(t);return isNaN(a)?n:Math.min(n,a)},ut.getMaximumHeight=function(t){var e=ut._getParentNode(t);if(!e)return t.clientHeight;var i=e.clientHeight,n=i-ut._calculatePadding(e,"padding-top",i)-ut._calculatePadding(e,"padding-bottom",i),a=ut.getConstraintHeight(t);return isNaN(a)?n:Math.min(n,a)},ut.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},ut.retinaScale=function(t,e){var i=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==i){var n=t.canvas,a=t.height,o=t.width;n.height=a*i,n.width=o*i,t.ctx.scale(i,i),n.style.height||n.style.width||(n.style.height=a+"px",n.style.width=o+"px")}},ut.fontString=function(t,e,i){return e+" "+t+"px "+i},ut.longestText=function(t,e,i,n){var a=(n=n||{}).data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(a=n.data={},o=n.garbageCollect=[],n.font=e),t.font=e;var r=0;ut.each(i,function(e){null!=e&&!0!==ut.isArray(e)?r=ut.measureText(t,a,o,r,e):ut.isArray(e)&&ut.each(e,function(e){null==e||ut.isArray(e)||(r=ut.measureText(t,a,o,r,e))})});var s=o.length/2;if(s>i.length){for(var l=0;l<s;l++)delete a[o[l]];o.splice(0,s)}return r},ut.measureText=function(t,e,i,n,a){var o=e[a];return o||(o=e[a]=t.measureText(a).width,i.push(a)),o>n&&(n=o),n},ut.numberOfLabelLines=function(t){var e=1;return ut.each(t,function(t){ut.isArray(t)&&t.length>e&&(e=t.length)}),e},ut.color=X?function(t){return t instanceof CanvasGradient&&(t=st.global.defaultColor),X(t)}:function(t){return console.error("Color.js not found!"),t},ut.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:ut.color(t).saturate(.5).darken(.1).rgbString()}}(),ai._adapters=si,ai.Animation=vt,ai.animationService=bt,ai.controllers=ue,ai.DatasetController=Mt,ai.defaults=st,ai.Element=pt,ai.elements=Wt,ai.Interaction=ve,ai.layouts=ke,ai.platform=Ve,ai.plugins=Ee,ai.Scale=fi,ai.scaleService=He,ai.Ticks=li,ai.Tooltip=Je,ai.helpers.each(tn,function(t,e){ai.scaleService.registerScaleType(e,t,t._defaults)}),yn)yn.hasOwnProperty(_n)&&ai.plugins.register(yn[_n]);ai.platform.initialize();var Cn=ai;return"undefined"!=typeof window&&(window.Chart=ai),ai.Chart=ai,ai.Legend=yn.legend._element,ai.Title=yn.title._element,ai.pluginService=ai.plugins,ai.PluginBase=ai.Element.extend({}),ai.canvasHelpers=ai.helpers.canvas,ai.layoutService=ai.layouts,ai.LinearScaleBase=bi,ai.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(t){ai[t]=function(e,i){return new ai(e,ai.helpers.merge(i||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}}),Cn});var FA=(function(FA,FAConfig){if(typeof(FA)!=="undefined"){return FA;}
FA={};FA.Modules={};FA.faConfig=FAConfig?FAConfig:{};if(typeof(FA.faConfig.fa_config)==="undefined"){FA.faConfig.fa_config=function(key,fallbackValue){if(typeof(FA.faConfig[key])!=='undefined'){return FA.faConfig[key];}else{console.warn('FA.faConfig.'+key+' was not initialized');return fallbackValue;}}};return FA;})(FA,typeof(FAConfig)==="object"?FAConfig:null);var console=console||{};['log','error','warn'].forEach(function(fn){if(typeof console[fn]=='undefined'){console[fn]=function(){};}});(function(c,a){"object"===typeof exports&&"object"===typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):"object"===typeof exports?exports.Handlebars=a():c.Handlebars=a()})(this,function(){return function(c){function a(e){if(b[e])return b[e].exports;var d=b[e]={exports:{},id:e,loaded:!1};c[e].call(d.exports,d,d.exports,a);d.loaded=!0;return d.exports}var b={};a.m=c;a.c=b;a.p="";return a(0)}([function(c,a,b){function e(){var a=new p.HandlebarsEnvironment;m.extend(a,p);a.SafeString=h["default"];a.Exception=g["default"];a.Utils=m;a.escapeExpression=m.escapeExpression;a.VM=w;a.template=function(b){return w.template(b,a)};return a}var d=b(1)["default"],k=b(2)["default"];a.__esModule=!0;var f=b(3),p=d(f),f=b(17),h=k(f),f=b(5),g=k(f),f=b(4),m=d(f),f=b(18),w=d(f);b=b(19);k=k(b);b=e();b.create=e;k["default"](b);b["default"]=b;a["default"]=b;c.exports=a["default"]},function(c,a){a["default"]=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(e[d]=a[d]);e["default"]=a;return e};a.__esModule=!0},function(c,a){a["default"]=function(a){return a&&a.__esModule?a:{"default":a}};a.__esModule=!0},function(c,a,b){function e(a,b,w){this.helpers=a||{};this.partials=b||{};this.decorators=w||{};p.registerDefaultHelpers(this);h.registerDefaultDecorators(this)}c=b(2)["default"];a.__esModule=!0;a.HandlebarsEnvironment=e;var d=b(4),k=b(5),f=c(k),p=b(6),h=b(14);b=b(16);b=c(b);a.VERSION="4.0.5";a.COMPILER_REVISION=7;a.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.prototype={constructor:e,logger:b["default"],log:b["default"].log,registerHelper:function(a,b){if("[object Object]"===d.toString.call(a)){if(b)throw new f["default"]("Arg not supported with multiple helpers");d.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if("[object Object]"===d.toString.call(a))d.extend(this.partials,a);else{if("undefined"===typeof b)throw new f["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if("[object Object]"===d.toString.call(a)){if(b)throw new f["default"]("Arg not supported with multiple decorators");d.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};a.log=b["default"].log;a.createFrame=d.createFrame;a.logger=b["default"]},function(c,a){function b(a){return d[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var d in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],d)&&(a[d]=arguments[b][d]);return a}a.__esModule=!0;a.extend=e;a.indexOf=function(a,b){for(var d=0,f=a.length;d<f;d++)if(a[d]===b)return d;return-1};a.escapeExpression=function(a){if("string"!==typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return f.test(a)?a.replace(k,b):a};a.isEmpty=function(a){return a||0===a?g(a)&&0===a.length?!0:!1:!0};a.createFrame=function(a){var b=e({},a);b._parent=a;return b};a.blockParams=function(a,b){a.path=b;return a};a.appendContextPath=function(a,b){return(a?a+".":"")+b};var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},k=/[&<>"'`=]/g,f=/[&<>"'`=]/,p=Object.prototype.toString;a.toString=p;var h=function(a){return"function"===typeof a};h(/x/)&&(a.isFunction=h=function(a){return"function"===typeof a&&"[object Function]"===p.call(a)});a.isFunction=h;var g=Array.isArray||function(a){return a&&"object"===typeof a?"[object Array]"===p.call(a):!1};a.isArray=g},function(c,a){function b(a,k){var f=k&&k.loc,c=void 0,h=void 0;f&&(c=f.start.line,h=f.start.column,a+=" - "+c+":"+h);for(var g=Error.prototype.constructor.call(this,a),m=0;m<e.length;m++)this[e[m]]=g[e[m]];Error.captureStackTrace&&Error.captureStackTrace(this,b);f&&(this.lineNumber=c,this.column=h)}a.__esModule=!0;var e="description fileName lineNumber message name number stack".split(" ");b.prototype=Error();a["default"]=b;c.exports=a["default"]},function(c,a,b){c=b(2)["default"];a.__esModule=!0;a.registerDefaultHelpers=function(a){e["default"](a);d["default"](a);k["default"](a);f["default"](a);p["default"](a);h["default"](a);g["default"](a)};a=b(7);var e=c(a);a=b(8);var d=c(a);a=b(9);var k=c(a);a=b(10);var f=c(a);a=b(11);var p=c(a);a=b(12);var h=c(a);b=b(13);var g=c(b)},function(c,a,b){a.__esModule=!0;var e=b(4);a["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,f){var c=f.inverse,h=f.fn;if(!0===b)return h(this);if(!1===b||null==b)return c(this);if(e.isArray(b))return 0<b.length?(f.ids&&(f.ids=[f.name]),a.helpers.each(b,f)):c(this);f.data&&f.ids&&(c=e.createFrame(f.data),c.contextPath=e.appendContextPath(f.data.contextPath,f.name),f={data:c});return h(b,f)})};c.exports=a["default"]},function(c,a,b){var e=b(2)["default"];a.__esModule=!0;var d=b(4);b=b(5);var k=e(b);a["default"]=function(a){a.registerHelper("each",function(a,b){function f(b,c,k){u&&(u.key=b,u.index=c,u.first=0===c,u.last=!!k,t&&(u.contextPath=t+b));q+=e(a[b],{data:u,blockParams:d.blockParams([a[b],b],[t+b,null])})}if(!b)throw new k["default"]("Must pass iterator to #each");var e=b.fn,c=b.inverse,n=0,q="",u=void 0,t=void 0;b.data&&b.ids&&(t=d.appendContextPath(b.data.contextPath,b.ids[0])+".");d.isFunction(a)&&(a=a.call(this));b.data&&(u=d.createFrame(b.data));if(a&&"object"===typeof a)if(d.isArray(a))for(var v=a.length;n<v;n++)n in a&&f(n,n,n===a.length-1);else{var v=void 0,l;for(l in a)a.hasOwnProperty(l)&&(void 0!==v&&f(v,n-1),v=l,n++);void 0!==v&&f(v,n-1,!0)}0===n&&(q=c(this));return q})};c.exports=a["default"]},function(c,a,b){var e=b(2)["default"];a.__esModule=!0;b=b(5);var d=e(b);a["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new d["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"');})};c.exports=a["default"]},function(c,a,b){a.__esModule=!0;var e=b(4);a["default"]=function(a){a.registerHelper("if",function(a,b){e.isFunction(a)&&(a=a.call(this));return!b.hash.includeZero&&!a||e.isEmpty(a)?b.inverse(this):b.fn(this)});a.registerHelper("unless",function(b,f){return a.helpers["if"].call(this,b,{fn:f.inverse,inverse:f.fn,hash:f.hash})})};c.exports=a["default"]},function(c,a){a.__esModule=!0;a["default"]=function(a){a.registerHelper("log",function(){for(var e=[void 0],d=arguments[arguments.length-1],c=0;c<arguments.length-1;c++)e.push(arguments[c]);c=1;null!=d.hash.level?c=d.hash.level:d.data&&null!=d.data.level&&(c=d.data.level);e[0]=c;a.log.apply(a,e)})};c.exports=a["default"]},function(c,a){a.__esModule=!0;a["default"]=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})};c.exports=a["default"]},function(c,a,b){a.__esModule=!0;var e=b(4);a["default"]=function(a){a.registerHelper("with",function(a,b){e.isFunction(a)&&(a=a.call(this));var c=b.fn;if(e.isEmpty(a))return b.inverse(this);var d=b.data;b.data&&b.ids&&(d=e.createFrame(b.data),d.contextPath=e.appendContextPath(b.data.contextPath,b.ids[0]));return c(a,{data:d,blockParams:e.blockParams([a],[d&&d.contextPath])})})};c.exports=a["default"]},function(c,a,b){c=b(2)["default"];a.__esModule=!0;a.registerDefaultDecorators=function(a){e["default"](a)};a=b(15);var e=c(a)},function(c,a,b){a.__esModule=!0;var e=b(4);a["default"]=function(a){a.registerDecorator("inline",function(a,b,c,d){var g=a;b.partials||(b.partials={},g=function(d,w){var n=c.partials;c.partials=e.extend({},n,b.partials);var q=a(d,w);c.partials=n;return q});b.partials[d.args[0]]=d.fn;return g})};c.exports=a["default"]},function(c,a,b){a.__esModule=!0;var e=b(4),d={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"===typeof a){var b=e.indexOf(d.methodMap,a.toLowerCase());a=0<=b?b:parseInt(a,10)}return a},log:function(a){a=d.lookupLevel(a);if("undefined"!==typeof console&&d.lookupLevel(d.level)<=a){var b=d.methodMap[a];console[b]||(b="log");for(var c=arguments.length,e=Array(1<c?c-1:0),g=1;g<c;g++)e[g-1]=arguments[g];console[b].apply(console,e)}}};a["default"]=d;c.exports=a["default"]},function(c,a){function b(a){this.string=a}a.__esModule=!0;b.prototype.toString=b.prototype.toHTML=function(){return""+this.string};a["default"]=b;c.exports=a["default"]},function(c,a,b){function e(a,b,c,d,t,e,l){function r(b){var t=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],f=l;l&&b!==l[0]&&(f=[b].concat(l));return c(a,b,a.helpers,a.partials,t.data||d,e&&[t.blockParams].concat(e),f)}r=f(c,r,a,l,d,e);r.program=b;r.depth=l?l.length:0;r.blockParams=t||0;return r}
function d(){return""}function k(a,b){b&&"root"in b||(b=b?m.createFrame(b):{},b.root=a);return b}function f(a,b,c,d,t,e){if(a.decorator){var f={};b=a.decorator(b,f,c,d&&d[0],t,e,d);h.extend(b,f)}return b}var p=b(1)["default"];c=b(2)["default"];a.__esModule=!0;a.checkRevision=function(a){var b=a&&a[0]||1,c=m.COMPILER_REVISION;if(b!==c){if(b<c)throw new g["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+
m.REVISION_CHANGES[c]+") or downgrade your runtime to an older version ("+m.REVISION_CHANGES[b]+").");throw new g["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").");}};a.template=function(a,b){function c(b){function e(b){return""+a.main(d,b,d.helpers,d.partials,r,h,g)}var l=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],r=l.data;c._setup(l);!l.partial&&a.useData&&(r=k(b,r));var g=void 0,h=a.useBlockParams?[]:void 0;a.useDepths&&(g=l.depths?b!==l.depths[0]?[b].concat(l.depths):l.depths:[b]);e=f(a.main,e,d,l.depths||[],r,h);return e(b,l)}if(!b)throw new g["default"]("No environment passed to template");if(!a||!a.main)throw new g["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d;b.VM.checkRevision(a.compiler);var d={strict:function(a,b){if(!(b in a))throw new g["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"===typeof a?a.call(b):a},escapeExpression:h.escapeExpression,invokePartial:function(c,d,e){e.hash&&(d=h.extend({},d,e.hash),e.ids&&(e.ids[0]=!0));c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e));if(null!=f){if(e.indent){c=f.split("\n");d=0;for(f=c.length;d<f&&(c[d]||d+1!==f);d++)c[d]=e.indent+c[d];f=c.join("\n")}return f}throw new g["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode");},fn:function(b){var d=a[b];d.decorator=a[b+"_d"];return d},programs:[],program:function(a,b,d,c,f){var g=this.programs[a],q=this.fn(a);b||f||c||d?g=e(this,a,q,b,d,c,f):g||(g=this.programs[a]=e(this,a,q));return g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var d=a||b;a&&b&&a!==b&&(d=h.extend({},b,a));return d},noop:b.VM.noop,compilerInfo:a.compiler};c.isTop=!0;c._setup=function(c){if(c.partial)d.helpers=c.helpers,d.partials=c.partials,d.decorators=c.decorators;else if(d.helpers=d.merge(c.helpers,b.helpers),a.usePartial&&(d.partials=d.merge(c.partials,b.partials)),a.usePartial||a.useDecorators)d.decorators=d.merge(c.decorators,b.decorators)};c._child=function(b,c,f,q){if(a.useBlockParams&&!f)throw new g["default"]("must pass block params");if(a.useDepths&&!q)throw new g["default"]("must pass parent depths");return e(d,b,a[b],c,0,f,q)};return c};a.wrapProgram=e;a.resolvePartial=function(a,b,c){a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name];return a};a.invokePartial=function(a,b,c){c.partial=!0;c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var e=void 0;c.fn&&c.fn!==d&&(c.data=m.createFrame(c.data),e=c.data["partial-block"]=c.fn,e.partials&&(c.partials=h.extend({},c.partials,e.partials)));void 0===a&&e&&(a=e);if(void 0===a)throw new g["default"]("The partial "+
c.name+" could not be found");if(a instanceof Function)return a(b,c)};a.noop=d;a=b(4);var h=p(a);a=b(5);var g=c(a),m=b(3)},function(c,a){(function(b){a.__esModule=!0;a["default"]=function(a){var c="undefined"!==typeof b?b:window,k=c.Handlebars;a.noConflict=function(){c.Handlebars===a&&(c.Handlebars=k);return a}};c.exports=a["default"]}).call(a,function(){return this}())}])});var arincAbbrevs=[{input:"-CONTINUOUS",output:"--CONTINUOUS"},{input:"AND",output:"&"},{input:"4 ENGINE",output:"4-ENGINE"},{input:"ARRESTING GEAR",output:"A-GEAR"},{input:"ABATEMENT",output:"ABTMT"},{input:"ABOVE",output:"ABV"},{input:"AIRCRAFT",output:"ACFT"},{input:"AIR CARRIER",output:"ACR"},{input:"ACTIVATE",output:"ACTVT"},{input:"ADJACENT",output:"ADJ"},{input:"ADVISORY",output:"ADVSY"},{input:"ADVISORIES",output:"ADZYS"},{input:"APPROACH END RUNWAY",output:"AER"},{input:"AIRFIELD",output:"AFLD"},{input:"AFTER",output:"AFT"},{input:"ALTITUDE",output:"ALT"},{input:"AIRPORT MANAGER",output:"AMGR"},{input:"ANTENNA",output:"ANT"},{input:"APPROACH",output:"APCH"},{input:"APPROACH AND DEPARTURE",output:"APCH-DEP"},{input:"APPROACHES",output:"APCHS"},{input:"APPROXIMATELY",output:"APRXLY"},{input:"AIRPORT RESCUE AND FIRE FIGHTING",output:"ARFF"},{input:"AIRPORT",output:"ARPT"},{input:"ARRIVAL",output:"ARR"},{input:"ARRIVALS",output:"ARRS"},{input:"ASSIGNED",output:"ASGND"},{input:"ASPHALT",output:"ASPH"},{input:"ASSISTANT",output:"ASST"},{input:"AIR TRAFFIC CONTROL",output:"ATC"},{input:"AIR TRAFFIC CONTROL TOWER",output:"ATCT"},{input:"AUTHORIZED",output:"AUTH"},{input:"AVAILABLE",output:"AVBL"},{input:"AVIATION",output:"AVN"},{input:"BEACON",output:"BCN"},{input:"BUILDING",output:"BLDG"},{input:"BELOW",output:"BLO"},{input:"BETWEEN",output:"BTWN"},{input:"BUSINESS",output:"BUS"},{input:"BEYOND",output:"BYD"},{input:"CAPACITY",output:"CAP"},{input:"CATEGORY",output:"CAT"},{input:"CLEARANCE",output:"CD"},{input:"CERTIFIED",output:"CERT"},{input:"CHANNEL",output:"CHNL"},{input:"CLOSED",output:"CLSD"},{input:"CLEARANCE",output:"CLNC"},{input:"CLEARANCES",output:"CLNCS"},{input:"CLOSED",output:"CLSD"},{input:"COMPLEX",output:"CMPLX"},{input:"CENTERLINE",output:"CNTRLN"},{input:"CONTINENTAL",output:"COA"},{input:"COMMAND",output:"COMD"},{input:"COMMERCIAL",output:"COML"},{input:"CONTROL",output:"CON"},{input:"COURSE",output:"CRS"},{input:"CONTACT",output:"CTC"},{input:"CONTROL",output:"CTL"},{input:"CONTROLLED",output:"CTLD"},{input:"CONTROLLING",output:"CTLG"},{input:"CONTROL ZONE",output:"CTZL"},{input:"ATIS",output:"D-ATIS"},{input:"DAYLIGHT",output:"DALGT"},{input:"DEGREES",output:"DEGS"},{input:"DEPARTURE",output:"DEP"},{input:"DEPARTURES",output:"DEPS"},{input:"DEPARTMENT",output:"DEPT"},{input:"DIRECTOR",output:"DIR"},{input:"DESIGNATED",output:"DISIGNATED"},{input:"DAILY",output:"DLY"},{input:"DIRECTOR",output:"DRCTR"},{input:"DISPLACED",output:"DSPLCD"},{input:"DISTANCE",output:"DSTC"},{input:"DURING",output:"DURG"},{input:"EAST",output:"E"},{input:"EMERGENCY",output:"EMERG"},{input:"ENVIRONMENT",output:"ENVI"},{input:"END OF RUNWAY",output:"EOR"},{input:"EQUIPMENT",output:"EQUIP"},{input:"EXCEPT",output:"EXCP"},{input:"EXTENDED",output:"EXTDD"},{input:"EXTENSIVE",output:"EXTV"},{input:"FACILITY",output:"FAC"},{input:"FIELD",output:"FLD"},{input:"FLIGHT",output:"FLT"},{input:"FOLLOWING",output:"FLWG"},{input:"FLIGHT PLAN",output:"FP"},{input:"FREQUENCY",output:"FREQ"},{input:"FLIGHT SERVICE STATION",output:"FSS"},{input:"FT WIDE",output:"FTWIDE"},{input:"FROM",output:"FM"},{input:"GALAXY C-5",output:"GALAXY-5"},{input:"GENERAL",output:"GEN"},{input:"GROUND",output:"GND"},{input:"GOVERNMENT",output:"GOVT"},{input:"GROOVED",output:"GRVD"},{input:"GREATER",output:"GTR"},{input:"GROSS WEIGHT",output:"GWT"},{input:"HELICOPTERS",output:"HELS"},{input:"HELICOPTER",output:"HEL"},{input:"HEADING",output:"HDG"},{input:"HOLIDAY",output:"HOL"},{input:"HIGH PRESSURE OXYGEN",output:"HPOX"},{input:"HOURS",output:"HRS"},{input:"INITIAL CONTACT",output:"IC"},{input:"IDENTIFICATION",output:"IDENT"},{input:"INBOUND",output:"INBD"},{input:"INDEFINITELY",output:"INDEFLY"},{input:"INSTRUCTION",output:"INSTR"},{input:"INTERNATIONAL",output:"INTL"},{input:"INTENSITY",output:"INTST"},{input:"INTERSECTION",output:"INTXN"},{input:"IN VICINITY OF",output:"INVOF"},{input:"JET AIR START UNIT",output:"JASU"},{input:"TOWER",output:"LCL"},{input:"LOCATED",output:"LCTD"},{input:"LOCATION",output:"LCTN"},{input:"LOCALIZER",output:"LCZR"},{input:"LANDING",output:"LDG"},{input:"LEAD-IN LIGHTING SYSTEM",output:"LDIN"},{input:"LIGHT",output:"LGT"},{input:"LIGHTED",output:"LGTD"},{input:"LIGHTS",output:"LGTS"},{input:"LOW AND HIGH PRESSURE OXYGEN",output:"LHOX"},{input:"LOW AND HIGH PRESSURE OXYGEN REPLACEMENT BOTTLES",output:"LHOXRB"},{input:"LIMITED",output:"LMTD"},{input:"LAND",output:"LND"},{input:"LANDING",output:"LNDG"},{input:"LANDINGS",output:"LNDGS"},{input:"LOCALIZER",output:"LOC"},{input:"LARGE",output:"LRG"},{input:"LIMITED",output:"LTD"},{input:"MAINTENANCE",output:"MAINT"},{input:"MEDIUM",output:"MED"},{input:"MANUFACTURER",output:"MFG"},{input:"MANAGER",output:"MGR"},{input:"MILITARY",output:"MIL"},{input:"MINIMUM",output:"MIN"},{input:"MARKED",output:"MKD"},{input:"MARKINGS",output:"MKGS"},{input:"MONDAY - FRIDAY",output:"MON-FRI"},{input:"MULTI-ENGINE",output:"MULTI"},{input:"MULTI-ENGINE",output:"MULTI-ENGINE"},{input:"NORTH",output:"N"},{input:"NORTHEAST",output:"NE"},{input:"NIGHT",output:"NGT"},{input:"NUMBER",output:"NMBR"},{input:"NUMEROUS",output:"NMRS"},{input:"NON-SCHEDULED",output:"NON-SKED"},{input:"NON-STANDARD",output:"NON-STD"},{input:"NORTH COMPLEX",output:"NORTH-CMPLX"},{input:"NOISE",output:"NS"},{input:"NON-STANDARD",output:"NSTD"},{input:"NORTHWEST",output:"NW"},{input:"OFFICIAL",output:"OFFL"},{input:"OPERATING",output:"OPNG"},{input:"OPERATIONS",output:"OPNS"},{input:"OPERATIONAL",output:"OPR"},{input:"OUT OF SERVICE",output:"OTS"},{input:"OVER OCEAN",output:"OVER-OCEAN"},{input:"OVERHEAD",output:"OVHD"},{input:"PERSONNEL AND EQUIPMENT WORKING",output:"PAEW"},{input:"PARASAIL",output:"PARA-SAIL"},{input:"PATTERN",output:"PAT"},{input:"PHONE NUMBER",output:"PH#"},{input:"PRIOR PERMISSION REQUIRED",output:"PPR"},{input:"PRE-",output:"PRE"},{input:"PARKING",output:"PRK"},{input:"PROCEDURE",output:"PRO"},{input:"PROCEED",output:"PROCD"},{input:"PRIOR",output:"PROR"},{input:"PROVIDE",output:"PRVD"},{input:"PROVIDES",output:"PRVDS"},{input:"PASSENGER",output:"PSGR"},{input:"POSITIONS",output:"PSNS"},{input:"PRE-TAXI CLEARANCE",output:"PTC"},{input:"POWER",output:"PWR"},{input:"QUARTERS",output:"QTRS"},{input:"REQUEST",output:"RQ"},{input:"REQUIRED",output:"RQRD"},{input:"ROAD",output:"RD"},{input:"RADIO",output:"RDO"},{input:"REQUIRED",output:"REQD"},{input:"REMARK",output:"RMK"},{input:"REMAIN OVERNIGHT",output:"RON"},{input:"ROTATING",output:"ROTG"},{input:"RAILROAD",output:"RR"},{input:"RESTRICTED",output:"RSTRD"},{input:"RIGHT",output:"RT"},{input:"RUNWAY",output:"RWY"},{input:"RUNWAYS",output:"RWYS"},{input:"RUNWAYS",output:"RYS"},{input:"SOUTH",output:"S"},{input:"SOUTHEAST",output:"SE"},{input:"SURFACE",output:"SFC"},{input:"SEQUENCED FLASHING LIGHTS",output:"SFL"},{input:"SIMULTANEOUS",output:"SIMUL"},{input:"SCHEDULED",output:"SKED"},{input:"STANDARD",output:"STD"},{input:"STRAIGHT-IN",output:"STR-IN"},{input:"SUNDAY",output:"SUN"},{input:"SERIVCE",output:"SVC"},{input:"SERVICES-AIRFIELD",output:"SVCS-AIRFIELD"},{input:"SOUTHWEST",output:"SW"},{input:"TRAFFIC",output:"TFC"},{input:"THRESHOLD",output:"THLD"},{input:"THRESHOLDS",output:"THRS"},{input:"TIEDOWN",output:"TIEDOW"},{input:"TAKEOFF",output:"TKOF"},{input:"TAKEOFFS",output:"TKOFS"},{input:"TRAFFIC PATTERN ALTITUDE",output:"TPA"},{input:"TRANSIENT",output:"TRAN"},{input:"TERMINAL",output:"TRML"},{input:"TRAINING",output:"TRNG"},{input:"TRANSPORT",output:"TRNSP"},{input:"TRANSPORTING",output:"TRNSPG"},{input:"TURBOPROP",output:"TURBO-PROP"},{input:"TOWER",output:"TWR"},{input:"TAXIWAY",output:"TWY"},{input:"TAXIWAYS",output:"TWYS"},{input:"TAXIWAY",output:"TXY"},{input:"UNLIGHTED",output:"UNLGTD"},{input:"UNMARKED",output:"UNMKD"},{input:"UNUSABLE",output:"UNUSBL"},{input:"VICINITY",output:"VCNTY"},{input:"VISIBLE",output:"VSB"},{input:"VISIBILITY",output:"VSBY"},{input:"WEST",output:"W"},{input:"WEATHER",output:"WX"},{input:"WEIGHT",output:"WGT"},{input:"WEEKDAY",output:"WKD"},{input:"WEEKEND",output:"WKEND"},{input:"WEST-SOUTHWEST",output:"WSW"}];(function(){var preppedArincAbbrevs=[];var i,previousInput="";for(i=0;i<arincAbbrevs.length;i++){var result={input:$.trim(arincAbbrevs[i].input.toUpperCase()),output:$.trim(arincAbbrevs[i].output.toUpperCase())};if(result.input!==previousInput&&result.input!==result.output)
preppedArincAbbrevs.push(result);previousInput=result.input;}
preppedArincAbbrevs.sort(function(a,b){if(a.input.length!==b.input.length){return b.input.length-a.input.length;}
return a.input.localeCompare(b.input);});arincAbbrevs=preppedArincAbbrevs;preppedArincAbbrevs=undefined;})();var Message=(function(){var textProcessors=[];textProcessors.push(function(text){return text.toUpperCase();});var smartCharSubstitution=function(text){var substitutions=[{input:"",output:"--"},{input:"",output:"-"},{input:"",output:"'"},{input:"",output:"'"},{input:"",output:"\""},{input:"",output:"\""},{input:"[\t ]",output:" "}];var i,result=text||"";for(i=0;i<substitutions.length;i++){var sub=substitutions[i];result=result.replace(new RegExp(sub.input,"g"),sub.output);}
return result;};textProcessors.push(smartCharSubstitution);var acarsChars=function(text,message){text=text||"";var illegalCharsString=text.replace(/[\x20-\x7F\x0D\x0A]/g,"");message.illegalChars=$.grep(illegalCharsString,function(c,i){return(i===$.inArray(c,illegalCharsString));}).sort();return text.replace(/[^\x20-\x7F\x0D\x0A]/g,"");};textProcessors.push(acarsChars);var subAbbrevs=function(text){var i,result=text||"";for(i=0;i<arincAbbrevs.length;i++){var abbrev=arincAbbrevs[i];while(result.indexOf(abbrev.input)>-1){result=result.replace(abbrev.input,abbrev.output);}}
return result;};textProcessors.push(function(text,message){return message.subAbbrevs?subAbbrevs(text):text;});var Message=function(ident){this.maxMessageLength=3440;this.maxSalutationLength=24;this.ident=ident;this.message="";this.processedMessage="";this.illegalChars=[];this.to="";this.from="";this.via=[ident];this.timeToLive=24;this.length=0;this.remaining=this.maxMessageLength;this.subAbbrevs=true;this.sent=false;this.valid=false;};Message.prototype.setMessage=function(message){this.set("message",message);var result=message;var that=this;$.each(textProcessors,function(i,func){result=func(result,that);});this.processedMessage=result;this.length=this.processedMessage.length;this.remaining=this.maxMessageLength-this.length;};Message.prototype.set=function(name,value){this[name]=value;$(window).trigger("change:"+name,value);this.validate();};Message.prototype.validate=function(){this.valid=this.length!==0&&this.remaining>=0&&this.to.length<=this.maxSalutationLength&&this.from.length<=this.maxSalutationLength&&this.via!==null&&this.via.length>0;};Message.prototype.send=function(){var message=this;return $.post("/ajax/integrated/arinc/send_message.rvt",{ident:this.ident,via:this.via.join(" "),timeToLive:this.timeToLive,message:this.processedMessage,to:this.to,from:this.from}).done(function(){message.sent=true;});};return Message;})();(function(B,n){"object"===typeof exports?n(exports):"function"===typeof define&&define.amd?define(["exports"],n):n(B)})(this,function(B){function n(a){this._targetElement=a;this._introItems=[];this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",hidePrev:!0,hideNext:!0,tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,overlayOpacity:.45,scrollPadding:30,positionPrecedence:["right","top","bottom","left"],disableInteraction:!1,hintPosition:"top-middle",hintButtonLabel:"Got it",hintAnimation:!0}}function O(a){a=document.querySelectorAll(a);if(1<a.length)for(var b=0;b<a.length;b++){if("offsetWidth"in a[b]&&a[b].offsetWidth&&"offsetHeight"in a[b]&&a[b].offsetHeight&&"offsetParent"in a[b]&&a[b].offsetParent)return a[b]}else return a[0]}function T(a){var b=[],c=this;if(this._options.steps)for(var d=0,f=this._options.steps.length;d<f;d++){var e=x(this._options.steps[d]);e.step=b.length+1;"string"===typeof e.element&&(e.selector=e.element,e.element=O.call(c,e.selector));if("undefined"===typeof e.element||null==e.element){var g=document.querySelector(".introjsFloatingElement");null==g&&(g=document.createElement("div"),g.className="introjsFloatingElement",document.body.appendChild(g));e.element=g;e.position="floating"}null!=e.element&&b.push(e)}else{f=a.querySelectorAll("*[data-intro]");if(1>f.length)return!1;d=0;for(e=f.length;d<e;d++)if(g=f[d],"none"!=g.style.display){var k=parseInt(g.getAttribute("data-step"),10);0<k&&(b[k-1]={element:g,intro:g.getAttribute("data-intro"),step:parseInt(g.getAttribute("data-step"),10),tooltipClass:g.getAttribute("data-tooltipClass"),highlightClass:g.getAttribute("data-highlightClass"),position:g.getAttribute("data-position")||this._options.tooltipPosition})}d=k=0;for(e=f.length;d<e;d++)if(g=f[d],null==g.getAttribute("data-step")){for(;"undefined"!=typeof b[k];)k++;b[k]={element:g,intro:g.getAttribute("data-intro"),step:k+1,tooltipClass:g.getAttribute("data-tooltipClass"),highlightClass:g.getAttribute("data-highlightClass"),position:g.getAttribute("data-position")||this._options.tooltipPosition}}}d=[];for(f=0;f<b.length;f++)b[f]&&d.push(b[f]);b=d;b.sort(function(a,b){return a.step-b.step});c._introItems=b;U.call(c,a)&&(y.call(c),a.querySelector(".introjs-skipbutton"),a.querySelector(".introjs-nextbutton"),c._onKeyDown=function(b){if(27===b.keyCode&&1==c._options.exitOnEsc)void 0!=c._introExitCallback&&c._introExitCallback.call(c),z.call(c,a);else if(37===b.keyCode)G.call(c);else if(39===b.keyCode)y.call(c);else if(13===b.keyCode){var d=b.target||b.srcElement;d&&0<d.className.indexOf("introjs-prevbutton")?G.call(c):d&&0<d.className.indexOf("introjs-skipbutton")?(c._introItems.length-1==c._currentStep&&"function"===typeof c._introCompleteCallback&&c._introCompleteCallback.call(c),void 0!=c._introExitCallback&&c._introExitCallback.call(c),z.call(c,a)):y.call(c);b.preventDefault?b.preventDefault():b.returnValue=!1}},c._onResize=function(a){r.call(c,document.querySelector(".introjs-helperLayer"));r.call(c,document.querySelector(".introjs-tooltipReferenceLayer"))},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener("keydown",c._onKeyDown,!0),window.addEventListener("resize",c._onResize,!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent("onkeydown",c._onKeyDown),document.attachEvent("onresize",c._onResize)));return!1}function x(a){if(null==a||"object"!=typeof a||"undefined"!=typeof a.nodeType)return a;var b={},c;for(c in a)b[c]="undefined"!=typeof jQuery&&a[c]instanceof jQuery?a[c]:x(a[c]);return b}function y(){this._direction="forward";"undefined"===typeof this._currentStep?this._currentStep=0:++this._currentStep;if(this._introItems.length<=this._currentStep)"function"===typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),z.call(this,this._targetElement);else{var a=this._introItems[this._currentStep];"undefined"!==typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element);P.call(this,a)}}function G(){this._direction="backward";if(0===this._currentStep)return!1;var a=this._introItems[--this._currentStep];"undefined"!==typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element);P.call(this,a)}function z(a){var b=a.querySelector(".introjs-overlay");if(null!=b){b.style.opacity=0;setTimeout(function(){b.parentNode&&b.parentNode.removeChild(b)},500);var c=a.querySelector(".introjs-helperLayer");c&&c.parentNode.removeChild(c);(c=a.querySelector(".introjs-tooltipReferenceLayer"))&&c.parentNode.removeChild(c);(a=a.querySelector(".introjs-disableInteraction"))&&a.parentNode.removeChild(a);(a=document.querySelector(".introjsFloatingElement"))&&a.parentNode.removeChild(a);if(a=document.querySelector(".introjs-showElement"))a.className=a.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"");if((a=document.querySelectorAll(".introjs-fixParent"))&&0<a.length)for(c=a.length-1;0<=c;c--)a[c].className=a[c].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown);this._currentStep=void 0;void 0!=this._introExitCallback&&this._introExitCallback.call(this)}}function H(a,b,c,d,f){var e,g,k;f=f||!1;b.style.top=null;b.style.right=null;b.style.bottom=null;b.style.left=null;b.style.marginLeft=null;b.style.marginTop=null;c.style.display="inherit";"undefined"!=typeof d&&null!=d&&(d.style.top=null,d.style.left=null);if(this._introItems[this._currentStep]){e=this._introItems[this._currentStep];e="string"===typeof e.tooltipClass?e.tooltipClass:this._options.tooltipClass;b.className=("introjs-tooltip "+e).replace(/^\s+|\s+$/g,"");k=this._introItems[this._currentStep].position;if(("auto"==k||"auto"==this._options.tooltipPosition)&&"floating"!=k){e=k;g=this._options.positionPrecedence.slice();k=I();var D=u(b).height+10,q=u(b).width+20,l=u(a),m="floating";l.left+q>k.width||0>l.left+l.width/2-q?(t(g,"bottom"),t(g,"top")):(l.height+l.top+D>k.height&&t(g,"bottom"),0>l.top-D&&t(g,"top"));l.width+l.left+q>k.width&&t(g,"right");0>l.left-q&&t(g,"left");0<g.length&&(m=g[0]);e&&"auto"!=e&&-1<g.indexOf(e)&&(m=e);k=m}e=u(a);a=u(b);g=I();switch(k){case"top":c.className="introjs-arrow bottom";J(e,f?0:15,a,g,b);b.style.bottom=e.height+20+"px";break;case"right":b.style.left=e.width+20+"px";e.top+a.height>g.height?(c.className="introjs-arrow left-bottom",b.style.top="-"+(a.height-e.height-20)+"px"):c.className="introjs-arrow left";break;case"left":f||1!=this._options.showStepNumbers||(b.style.top="15px");e.top+a.height>g.height?(b.style.top="-"+(a.height-e.height-20)+"px",c.className="introjs-arrow right-bottom"):c.className="introjs-arrow right";b.style.right=e.width+20+"px";break;case"floating":c.style.display="none";b.style.left="50%";b.style.top="50%";b.style.marginLeft="-"+a.width/2+"px";b.style.marginTop="-"+a.height/2+"px";"undefined"!=typeof d&&null!=d&&(d.style.left="-"+(a.width/2+18)+"px",d.style.top="-"+(a.height/2+18)+"px");break;case"bottom-right-aligned":c.className="introjs-arrow top-right";Q(e,0,a,b);b.style.top=e.height+20+"px";break;case"bottom-middle-aligned":c.className="introjs-arrow top-middle";c=e.width/2-a.width/2;f&&(c+=5);Q(e,c,a,b)&&(b.style.right=null,J(e,c,a,g,b));b.style.top=e.height+20+"px";break;default:c.className="introjs-arrow top",J(e,0,a,g,b),b.style.top=e.height+20+"px"}}}function J(a,b,c,d,f){if(a.left+b+c.width>d.width)return f.style.left=d.width-c.width-a.left+"px",!1;f.style.left=b+"px";return!0}function Q(a,b,c,d){if(0>a.left+a.width-b-c.width)return d.style.left=-a.left+"px",!1;d.style.right=b+"px";return!0}function t(a,b){-1<a.indexOf(b)&&a.splice(a.indexOf(b),1)}function r(a){if(a&&this._introItems[this._currentStep]){var b=this._introItems[this._currentStep],c=u(b.element),d=10;K(b.element)?a.className+=" introjs-fixedTooltip":a.className=a.className.replace(" introjs-fixedTooltip","");"floating"==b.position&&(d=0);a.setAttribute("style","width: "+(c.width+d)+"px; height:"+(c.height+d)+"px; top:"+(c.top-5)+"px;left: "+(c.left-5)+"px;")}}function V(){var a=document.querySelector(".introjs-disableInteraction");null===a&&(a=document.createElement("div"),a.className="introjs-disableInteraction",this._targetElement.appendChild(a));r.call(this,a)}function E(a){a.setAttribute("role","button");a.tabIndex=0}function P(a){"undefined"!==typeof this._introChangeCallback&&this._introChangeCallback.call(this,a.element);a.selector&&(a.element=O.call(this,a.selector));var b=this,c=document.querySelector(".introjs-helperLayer"),d=document.querySelector(".introjs-tooltipReferenceLayer"),f="introjs-helperLayer";u(a.element);var e=document.querySelector(".introjs-overlay");e.style.opacity="undefined"!==typeof a.overlayOpacity&&e&&"object"===typeof e.style?a.overlayOpacity:b._options.overlayOpacity.toString();"string"===typeof a.highlightClass&&(f+=" "+a.highlightClass);"string"===typeof this._options.highlightClass&&(f+=" "+this._options.highlightClass);if(null!=c){var g=d.querySelector(".introjs-helperNumberLayer"),k=d.querySelector(".introjs-tooltiptext"),D=d.querySelector(".introjs-arrow"),q=d.querySelector(".introjs-tooltip"),l=d.querySelector(".introjs-skipbutton");d.querySelector(".introjs-prevbutton");var m=d.querySelector(".introjs-nextbutton");c.className=f;q.style.opacity=0;q.style.display="none";if(null!=g){var h=this._introItems[0<=a.step-2?a.step-2:0];if(null!=h&&"forward"==this._direction&&"floating"==h.position||"backward"==this._direction&&"floating"==a.position)g.style.opacity=0}r.call(b,c);r.call(b,d);if((h=document.querySelectorAll(".introjs-fixParent"))&&0<h.length)for(f=h.length-1;0<=f;f--)h[f].className=h[f].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");if(h=document.querySelector(".introjs-showElement"))h.className=h.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"");b._lastShowElementTimer&&clearTimeout(b._lastShowElementTimer);b._lastShowElementTimer=setTimeout(function(){null!=g&&(g.innerHTML=a.step);k.innerHTML="function"===typeof a.intro?a.intro.call(b):a.intro;q.style.display="block";H.call(b,a.element,q,D,g);b._options.showBullets&&(d.querySelector(".introjs-bullets li > a.active").className="",d.querySelector('.introjs-bullets li > a[data-stepnumber="'+a.step+'"]').className="active");d.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+R.call(b)+"%;");q.style.opacity=1;g&&(g.style.opacity=1);-1===m.tabIndex?l.focus():m.focus()},350)}else{var n=document.createElement("div"),c=document.createElement("div"),e=document.createElement("div"),p=document.createElement("div"),t=document.createElement("div"),w=document.createElement("div"),F=document.createElement("div"),C=document.createElement("div");n.className=f;c.className="introjs-tooltipReferenceLayer";r.call(b,n);r.call(b,c);this._targetElement.appendChild(n);this._targetElement.appendChild(c);e.className="introjs-arrow";t.className="introjs-tooltiptext";t.innerHTML="function"===typeof a.intro?a.intro.call(b):a.intro;w.className="introjs-bullets";!1===this._options.showBullets&&(w.style.display="none");for(var n=document.createElement("ul"),f=0,B=this._introItems.length;f<B;f++){var x=document.createElement("li"),A=document.createElement("a");A.onclick=function(){b.goToStep(this.getAttribute("data-stepnumber"))};f===a.step-1&&(A.className="active");E(A);A.innerHTML="&nbsp;";A.setAttribute("data-stepnumber",this._introItems[f].step);x.appendChild(A);n.appendChild(x)}w.appendChild(n);F.className="introjs-progress";!1===this._options.showProgress&&(F.style.display="none");f=document.createElement("div");f.className="introjs-progressbar";f.setAttribute("style","width:"+R.call(this)+"%;");F.appendChild(f);C.className="introjs-tooltipbuttons";!1===this._options.showButtons&&(C.style.display="none");p.className="introjs-tooltip";p.appendChild(t);p.appendChild(w);p.appendChild(F);1==this._options.showStepNumbers&&(h=document.createElement("span"),h.className="introjs-helperNumberLayer",h.innerHTML=a.step,c.appendChild(h));p.appendChild(e);c.appendChild(p);m=document.createElement("a");m.onclick=function(){b._introItems.length-1!=b._currentStep&&y.call(b)};E(m);m.innerHTML=this._options.nextLabel;l=document.createElement("a");l.className="introjs-button introjs-skipbutton";E(l);l.innerHTML=this._options.skipLabel;l.onclick=function(){b._introItems.length-1==b._currentStep&&"function"===typeof b._introCompleteCallback&&b._introCompleteCallback.call(b);b._introItems.length-1!=b._currentStep&&"function"===typeof b._introExitCallback&&b._introExitCallback.call(b);z.call(b,b._targetElement)};C.appendChild(l);1<this._introItems.length&&C.appendChild(m);p.appendChild(C);H.call(b,a.element,p,e,h)}!0===this._options.disableInteraction&&V.call(b);m.removeAttribute("tabIndex");0==this._currentStep&&1<this._introItems.length?(m.className="introjs-button introjs-nextbutton",1==this._options.hidePrev&&(m.className+=" introjs-fullbutton"),l.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep||1==this._introItems.length?(l.innerHTML=this._options.doneLabel,m.className=1==this._options.hideNext?"introjs-button introjs-nextbutton introjs-hidden":"introjs-button introjs-nextbutton introjs-disabled",m.tabIndex="-1"):(m.className="introjs-button introjs-nextbutton",l.innerHTML=this._options.skipLabel);m.focus();a.element.className+=" introjs-showElement";h=v(a.element,"position");"absolute"!==h&&"relative"!==h&&"fixed"!==h&&(a.element.className+=" introjs-relativePosition");for(h=a.element.parentNode;null!=h&&h.tagName&&"body"!==h.tagName.toLowerCase();){c=v(h,"z-index");e=parseFloat(v(h,"opacity"));p=v(h,"transform")||v(h,"-webkit-transform")||v(h,"-moz-transform")||v(h,"-ms-transform")||v(h,"-o-transform");if(/[0-9]+/.test(c)||1>e||"none"!==p&&void 0!==p)h.className+=" introjs-fixParent";h=h.parentNode}W(a.element)||!0!==this._options.scrollToElement||(e=a.element.getBoundingClientRect(),h=I().height,c=e.bottom-(e.bottom-e.top),e=e.bottom-
h,0>c||a.element.clientHeight>h?window.scrollBy(0,c-this._options.scrollPadding):window.scrollBy(0,e+70+this._options.scrollPadding));"undefined"!==typeof this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,a.element)}function v(a,b){var c="";a.currentStyle?c=a.currentStyle[b]:document.defaultView&&document.defaultView.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(b));return c&&c.toLowerCase?c.toLowerCase():c}function K(a){var b=a.parentNode;return b&&"HTML"!==b.nodeName?"fixed"==v(a,"position")?!0:K(b):!1}function I(){if(void 0!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var a=document.documentElement;return{width:a.clientWidth,height:a.clientHeight}}function W(a){a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom+80<=window.innerHeight&&a.right<=window.innerWidth}function U(a){var b=document.createElement("div"),c="",d=this;b.className="introjs-overlay";if(a.tagName&&"body"!==a.tagName.toLowerCase()){var f=u(a);f&&(c+="width: "+f.width+"px; height:"+f.height+"px; top:"+f.top+"px;left: "+f.left+"px;",b.setAttribute("style",c))}else c+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",b.setAttribute("style",c);a.appendChild(b);b.onclick=function(){1==d._options.exitOnOverlayClick&&(void 0!=d._introExitCallback&&d._introExitCallback.call(d),z.call(d,a))};setTimeout(function(){c+="opacity: "+d._options.overlayOpacity.toString()+";";b.setAttribute("style",c)},10);return!0}function w(){var a=this._targetElement.querySelector(".introjs-hintReference");if(a){var b=a.getAttribute("data-step");a.parentNode.removeChild(a);return b}}function L(){for(var a=0,b=this._introItems.length;a<b;a++){var c=this._introItems[a];"undefined"!=typeof c.targetElement&&S.call(this,c.hintPosition,c.element,c.targetElement)}}function M(a){w.call(this);var b=this._targetElement.querySelector('.introjs-hint[data-step="'+a+'"]');b&&(b.className+=" introjs-hidehint");"undefined"!==typeof this._hintCloseCallback&&this._hintCloseCallback.call(this,a)}function X(){var a=this,b=document.querySelector(".introjs-hints");null==b&&(b=document.createElement("div"),b.className="introjs-hints");for(var c=0,d=this._introItems.length;c<d;c++){var f=this._introItems[c];if(!document.querySelector('.introjs-hint[data-step="'+c+'"]')){var e=document.createElement("a");E(e);(function(b,c,d){b.onclick=function(e){e=e?e:window.event;e.stopPropagation&&e.stopPropagation();null!=e.cancelBubble&&(e.cancelBubble=!0);Y.call(a,b,c,d)}})(e,f,c);e.className="introjs-hint";f.hintAnimation||(e.className+=" introjs-hint-no-anim");K(f.element)&&(e.className+=" introjs-fixedhint");var g=document.createElement("div");g.className="introjs-hint-dot";var k=document.createElement("div");k.className="introjs-hint-pulse";e.appendChild(g);e.appendChild(k);e.setAttribute("data-step",c);f.targetElement=f.element;f.element=e;S.call(this,f.hintPosition,e,f.targetElement);b.appendChild(e)}}document.body.appendChild(b);"undefined"!==typeof this._hintsAddedCallback&&this._hintsAddedCallback.call(this)}function S(a,b,c){c=u.call(this,c);switch(a){default:case"top-left":b.style.left=c.left+"px";b.style.top=c.top+"px";break;case"top-right":b.style.left=c.left+c.width+"px";b.style.top=c.top+"px";break;case"bottom-left":b.style.left=c.left+"px";b.style.top=c.top+c.height+"px";break;case"bottom-right":b.style.left=c.left+c.width+"px";b.style.top=c.top+c.height+"px";break;case"bottom-middle":b.style.left=c.left+c.width/2+"px";b.style.top=c.top+c.height+"px";break;case"top-middle":b.style.left=c.left+c.width/2+"px",b.style.top=c.top+"px"}}function Y(a,b,c){"undefined"!==typeof this._hintClickCallback&&this._hintClickCallback.call(this,a,b,c);var d=w.call(this);if(parseInt(d,10)!=c){var d=document.createElement("div"),f=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div");d.className="introjs-tooltip";d.onclick=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0};f.className="introjs-tooltiptext";var k=document.createElement("p");k.innerHTML=b.hint;b=document.createElement("a");b.className="introjs-button";b.innerHTML=this._options.hintButtonLabel;b.onclick=M.bind(this,c);f.appendChild(k);f.appendChild(b);e.className="introjs-arrow";d.appendChild(e);d.appendChild(f);this._currentStep=a.getAttribute("data-step");g.className="introjs-tooltipReferenceLayer introjs-hintReference";g.setAttribute("data-step",a.getAttribute("data-step"));r.call(this,g);g.appendChild(d);document.body.appendChild(g);H.call(this,a,d,e,null,!0)}}function u(a){var b={};b.width=a.offsetWidth;b.height=a.offsetHeight;for(var c=0,d=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c+=a.offsetLeft,d+=a.offsetTop,a=a.offsetParent;b.top=d;b.left=c;return b}function R(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}var N=function(a){if("object"===typeof a)return new n(a);if("string"===typeof a){if(a=document.querySelector(a))return new n(a);throw Error("There is no element with given selector.");}return new n(document.body)};N.version="2.3.0";N.fn=n.prototype={clone:function(){return new n(this)},setOption:function(a,b){this._options[a]=b;return this},setOptions:function(a){var b=this._options,c={},d;for(d in b)c[d]=b[d];for(d in a)c[d]=a[d];this._options=c;return this},start:function(){T.call(this,this._targetElement);return this},goToStep:function(a){this._currentStep=a-2;"undefined"!==typeof this._introItems&&y.call(this);return this},nextStep:function(){y.call(this);return this},previousStep:function(){G.call(this);return this},exit:function(){z.call(this,this._targetElement);return this},refresh:function(){r.call(this,document.querySelector(".introjs-helperLayer"));r.call(this,document.querySelector(".introjs-tooltipReferenceLayer"));L.call(this);return this},onbeforechange:function(a){if("function"===typeof a)this._introBeforeChangeCallback=a;else throw Error("Provided callback for onbeforechange was not a function");return this},onchange:function(a){if("function"===typeof a)this._introChangeCallback=a;else throw Error("Provided callback for onchange was not a function.");return this},onafterchange:function(a){if("function"===typeof a)this._introAfterChangeCallback=a;else throw Error("Provided callback for onafterchange was not a function");return this},oncomplete:function(a){if("function"===typeof a)this._introCompleteCallback=a;else throw Error("Provided callback for oncomplete was not a function.");return this},onhintsadded:function(a){if("function"===typeof a)this._hintsAddedCallback=a;else throw Error("Provided callback for onhintsadded was not a function.");return this},onhintclick:function(a){if("function"===typeof a)this._hintClickCallback=a;else throw Error("Provided callback for onhintclick was not a function.");return this},onhintclose:function(a){if("function"===typeof a)this._hintCloseCallback=a;else throw Error("Provided callback for onhintclose was not a function.");return this},onexit:function(a){if("function"===typeof a)this._introExitCallback=a;else throw Error("Provided callback for onexit was not a function.");return this},addHints:function(){a:{var a=this._targetElement;this._introItems=[];if(this._options.hints)for(var a=0,b=this._options.hints.length;a<b;a++){var c=x(this._options.hints[a]);"string"===typeof c.element&&(c.element=document.querySelector(c.element));c.hintPosition=c.hintPosition||this._options.hintPosition;c.hintAnimation=c.hintAnimation||this._options.hintAnimation;null!=c.element&&this._introItems.push(c)}else{c=a.querySelectorAll("*[data-hint]");if(1>c.length)break a;a=0;for(b=c.length;a<b;a++){var d=c[a],f=d.getAttribute("data-hintAnimation"),f=f?"true"==f:this._options.hintAnimation;this._introItems.push({element:d,hint:d.getAttribute("data-hint"),hintPosition:d.getAttribute("data-hintPosition")||this._options.hintPosition,hintAnimation:f,tooltipClass:d.getAttribute("data-tooltipClass"),position:d.getAttribute("data-position")||this._options.tooltipPosition})}}X.call(this);document.addEventListener?(document.addEventListener("click",w.bind(this),!1),window.addEventListener("resize",L.bind(this),!0)):document.attachEvent&&(document.attachEvent("onclick",w.bind(this)),document.attachEvent("onresize",L.bind(this)))}return this},hideHint:function(a){M.call(this,a);return this},hideHints:function(){var a=this._targetElement.querySelectorAll(".introjs-hint");if(a&&0<a.length)for(var b=0;b<a.length;b++)M.call(this,a[b].getAttribute("data-step"));return this}};return B.introJs=N});!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function c(c,d){var f,e=this;e.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(c),appendDots:a(c),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(b,c){return a('<button type="button" data-role="none" role="button" tabindex="0" />').text(c+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},e.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(e,e.initials),e.activeBreakpoint=null,e.animType=null,e.animProp=null,e.breakpoints=[],e.breakpointSettings=[],e.cssTransitions=!1,e.focussed=!1,e.interrupted=!1,e.hidden="hidden",e.paused=!0,e.positionProp=null,e.respondTo=null,e.rowCount=1,e.shouldClick=!0,e.$slider=a(c),e.$slidesCache=null,e.transformType=null,e.transitionType=null,e.visibilityChange="visibilitychange",e.windowWidth=0,e.windowTimer=null,f=a(c).data("slick")||{},e.options=a.extend({},e.defaults,d,f),e.currentSlide=e.options.initialSlide,e.originalSettings=e.options,"undefined"!=typeof document.mozHidden?(e.hidden="mozHidden",e.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e.autoPlay=a.proxy(e.autoPlay,e),e.autoPlayClear=a.proxy(e.autoPlayClear,e),e.autoPlayIterator=a.proxy(e.autoPlayIterator,e),e.changeSlide=a.proxy(e.changeSlide,e),e.clickHandler=a.proxy(e.clickHandler,e),e.selectHandler=a.proxy(e.selectHandler,e),e.setPosition=a.proxy(e.setPosition,e),e.swipeHandler=a.proxy(e.swipeHandler,e),e.dragHandler=a.proxy(e.dragHandler,e),e.keyHandler=a.proxy(e.keyHandler,e),e.instanceUid=b++,e.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,e.registerBreakpoints(),e.init(!0)}var b=0;return c}(),b.prototype.activateADA=function(){var a=this;a.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),e.options.vertical===!1?d[e.animType]="translate3d("+b+"px, 0px, 0px)":d[e.animType]="translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.getNavTarget=function(){var b=this,c=b.options.asNavFor;return c&&null!==c&&(c=a(c).not(b.$slider)),c},b.prototype.asNavFor=function(b){var c=this,d=c.getNavTarget();null!==d&&"object"==typeof d&&d.each(function(){var c=a(this).slick("getSlick");c.unslicked||c.slideHandler(b,!0)})},b.prototype.applyTransition=function(a){var b=this,c={};b.options.fade===!1?c[b.transitionType]=b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:c[b.transitionType]="opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayClear(),a.slideCount>a.options.slidesToShow&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this,b=a.currentSlide+a.options.slidesToScroll;a.paused||a.interrupted||a.focussed||(a.options.infinite===!1&&(1===a.direction&&a.currentSlide+1===a.slideCount-1?a.direction=0:0===a.direction&&(b=a.currentSlide-a.options.slidesToScroll,a.currentSlide-1===0&&(a.direction=1))),a.slideHandler(b))},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&(b.$prevArrow=a(b.options.prevArrow).addClass("slick-arrow"),b.$nextArrow=a(b.options.nextArrow).addClass("slick-arrow"),b.slideCount>b.options.slidesToShow?(b.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.prependTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):b.$prevArrow.add(b.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},b.prototype.buildDots=function(){var c,d,b=this;if(b.options.dots===!0&&b.slideCount>b.options.slidesToShow){for(b.$slider.addClass("slick-dotted"),d=a("<ul />").addClass(b.options.dotsClass),c=0;c<=b.getDotCount();c+=1)d.append(a("<li />").append(b.options.customPaging.call(this,b,c)));b.$dots=d.appendTo(b.options.appendDots),b.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b).data("originalStyling",a(c).attr("style")||"")}),b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),(b.options.centerMode===!0||b.options.swipeToSlide===!0)&&(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var b,c,d,e,f,g,h,a=this;if(e=document.createDocumentFragment(),g=a.$slider.children(),a.options.rows>1){for(h=a.options.slidesPerRow*a.options.rows,f=Math.ceil(g.length/h),b=0;f>b;b++){var i=document.createElement("div");for(c=0;c<a.options.rows;c++){var j=document.createElement("div");for(d=0;d<a.options.slidesPerRow;d++){var k=b*h+(c*a.options.slidesPerRow+d);g.get(k)&&j.appendChild(g.get(k))}i.appendChild(j)}e.appendChild(i)}a.$slider.empty().append(e),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},b.prototype.checkResponsive=function(b,c){var e,f,g,d=this,h=!1,i=d.$slider.width(),j=window.innerWidth||a(window).width();if("window"===d.respondTo?g=j:"slider"===d.respondTo?g=i:"min"===d.respondTo&&(g=Math.min(j,i)),d.options.responsive&&d.options.responsive.length&&null!==d.options.responsive){f=null;for(e in d.breakpoints)d.breakpoints.hasOwnProperty(e)&&(d.originalSettings.mobileFirst===!1?g<d.breakpoints[e]&&(f=d.breakpoints[e]):g>d.breakpoints[e]&&(f=d.breakpoints[e]));null!==f?null!==d.activeBreakpoint?(f!==d.activeBreakpoint||c)&&(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):null!==d.activeBreakpoint&&(d.activeBreakpoint=null,d.options=d.originalSettings,b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b),h=f),b||h===!1||d.$slider.trigger("breakpoint",[d,h])}},b.prototype.changeSlide=function(b,c){var f,g,h,d=this,e=a(b.currentTarget);switch(e.is("a")&&b.preventDefault(),e.is("li")||(e=e.closest("li")),h=d.slideCount%d.options.slidesToScroll!==0,f=h?0:(d.slideCount-d.currentSlide)%d.options.slidesToScroll,b.data.message){case"previous":g=0===f?d.options.slidesToScroll:d.options.slidesToShow-f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide-g,!1,c);break;case"next":g=0===f?d.options.slidesToScroll:f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide+g,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||e.index()*d.options.slidesToScroll;d.slideHandler(d.checkNavigable(i),!1,c),e.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(a){var c,d,b=this;if(c=b.getNavigableIndexes(),d=0,a>c[c.length-1])a=c[c.length-1];else for(var e in c){if(a<c[e]){a=d;break}d=c[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots&&null!==b.$dots&&a("li",b.$dots).off("click.slick",b.changeSlide).off("mouseenter.slick",a.proxy(b.interrupt,b,!0)).off("mouseleave.slick",a.proxy(b.interrupt,b,!1)),b.$slider.off("focus.slick blur.slick"),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),a(document).off(b.visibilityChange,b.visibility),b.cleanUpSlideEvents(),b.options.accessibility===!0&&b.$list.off("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpSlideEvents=function(){var b=this;b.$list.off("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.off("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.cleanUpRows=function(){var b,a=this;a.options.rows>1&&(b=a.$slides.children().children(),b.removeAttr("style"),a.$slider.empty().append(b))},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(b){var c=this;c.autoPlayClear(),c.touchObject={},c.cleanUpEvents(),a(".slick-cloned",c.$slider).detach(),c.$dots&&c.$dots.remove(),c.$prevArrow&&c.$prevArrow.length&&(c.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.prevArrow)&&c.$prevArrow.remove()),c.$nextArrow&&c.$nextArrow.length&&(c.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.nextArrow)&&c.$nextArrow.remove()),c.$slides&&(c.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))}),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.detach(),c.$list.detach(),c.$slider.append(c.$slides)),c.cleanUpRows(),c.$slider.removeClass("slick-slider"),c.$slider.removeClass("slick-initialized"),c.$slider.removeClass("slick-dotted"),c.unslicked=!0,b||c.$slider.trigger("destroy",[c])},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:c.options.zIndex}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.fadeSlideOut=function(a){var b=this;b.cssTransitions===!1?b.$slides.eq(a).animate({opacity:0,zIndex:b.options.zIndex-2},b.options.speed,b.options.easing):(b.applyTransition(a),b.$slides.eq(a).css({opacity:0,zIndex:b.options.zIndex-2}))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.$slidesCache=b.$slides,b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.focusHandler=function(){var b=this;b.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(c){c.stopImmediatePropagation();var d=a(this);setTimeout(function(){b.options.pauseOnFocus&&(b.focussed=d.is(":focus"),b.autoPlay())},0)})},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else if(a.options.centerMode===!0)d=a.slideCount;else if(a.options.asNavFor)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else d=1+Math.ceil((a.slideCount-a.options.slidesToShow)/a.options.slidesToScroll);return d-1},b.prototype.getLeft=function(a){var c,d,f,b=this,e=0;return b.slideOffset=0,d=b.$slides.first().outerHeight(!0),b.options.infinite===!0?(b.slideCount>b.options.slidesToShow&&(b.slideOffset=b.slideWidth*b.options.slidesToShow*-1,e=d*b.options.slidesToShow*-1),b.slideCount%b.options.slidesToScroll!==0&&a+b.options.slidesToScroll>b.slideCount&&b.slideCount>b.options.slidesToShow&&(a>b.slideCount?(b.slideOffset=(b.options.slidesToShow-(a-b.slideCount))*b.slideWidth*-1,e=(b.options.slidesToShow-(a-b.slideCount))*d*-1):(b.slideOffset=b.slideCount%b.options.slidesToScroll*b.slideWidth*-1,e=b.slideCount%b.options.slidesToScroll*d*-1))):a+b.options.slidesToShow>b.slideCount&&(b.slideOffset=(a+b.options.slidesToShow-b.slideCount)*b.slideWidth,e=(a+b.options.slidesToShow-b.slideCount)*d),b.slideCount<=b.options.slidesToShow&&(b.slideOffset=0,e=0),b.options.centerMode===!0&&b.options.infinite===!0?b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)-b.slideWidth:b.options.centerMode===!0&&(b.slideOffset=0,b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)),c=b.options.vertical===!1?a*b.slideWidth*-1+b.slideOffset:a*d*-1+e,b.options.variableWidth===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow),c=b.options.rtl===!0?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,b.options.centerMode===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow+1),c=b.options.rtl===!0?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,c+=(b.$list.width()-f.outerWidth())/2)),c},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var e,a=this,b=0,c=0,d=[];for(a.options.infinite===!1?e=a.slideCount:(b=-1*a.options.slidesToScroll,c=-1*a.options.slidesToScroll,e=2*a.slideCount);e>b;)d.push(b),b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var c,d,e,b=this;return e=b.options.centerMode===!0?b.slideWidth*Math.floor(b.options.slidesToShow/2):0,b.options.swipeToSlide===!0?(b.$slideTrack.find(".slick-slide").each(function(c,f){return f.offsetLeft-e+a(f).outerWidth()/2>-1*b.swipeLeft?(d=f,!1):void 0}),c=Math.abs(a(d).attr("data-slick-index")-b.currentSlide)||1):b.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(b){var c=this;a(c.$slider).hasClass("slick-initialized")||(a(c.$slider).addClass("slick-initialized"),c.buildRows(),c.buildOut(),c.setProps(),c.startLoad(),c.loadSlider(),c.initializeEvents(),c.updateArrows(),c.updateDots(),c.checkResponsive(!0),c.focusHandler()),b&&c.$slider.trigger("init",[c]),c.options.accessibility===!0&&c.initADA(),c.options.autoplay&&(c.paused=!1,c.autoPlay())},b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),b.$slideTrack.attr("role","listbox"),b.$slides.not(b.$slideTrack.find(".slick-cloned")).each(function(c){a(this).attr({role:"option","aria-describedby":"slick-slide"+b.instanceUid+c})}),null!==b.$dots&&b.$dots.attr("role","tablist").find("li").each(function(c){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+b.instanceUid+c,id:"slick-slide"+b.instanceUid+c})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),b.activateADA()},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.off("click.slick").on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&a("li",b.$dots).on("mouseenter.slick",a.proxy(b.interrupt,b,!0)).on("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.initSlideEvents=function(){var b=this;b.options.pauseOnHover&&(b.$list.on("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.on("mouseleave.slick",a.proxy(b.interrupt,b,!1)))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.initSlideEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),a(document).on(b.visibilityChange,a.proxy(b.visibility,b)),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,a.proxy(b.orientationChange,b)),a(window).on("resize.slick.slick-"+b.instanceUid,a.proxy(b.resize,b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show()},b.prototype.keyHandler=function(a){var b=this;a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:b.options.rtl===!0?"next":"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:b.options.rtl===!0?"previous":"next"}}))},b.prototype.lazyLoad=function(){function g(c){a("img[data-lazy]",c).each(function(){var c=a(this),d=a(this).attr("data-lazy"),e=document.createElement("img");e.onload=function(){c.animate({opacity:0},100,function(){c.attr("src",d).animate({opacity:1},200,function(){c.removeAttr("data-lazy").removeClass("slick-loading")}),b.$slider.trigger("lazyLoaded",[b,c,d])})},e.onerror=function(){c.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),b.$slider.trigger("lazyLoadError",[b,c,d])},e.src=d})}var c,d,e,f,b=this;b.options.centerMode===!0?b.options.infinite===!0?(e=b.currentSlide+(b.options.slidesToShow/2+1),f=e+b.options.slidesToShow+2):(e=Math.max(0,b.currentSlide-(b.options.slidesToShow/2+1)),f=2+(b.options.slidesToShow/2+1)+b.currentSlide):(e=b.options.infinite?b.options.slidesToShow+b.currentSlide:b.currentSlide,f=Math.ceil(e+b.options.slidesToShow),b.options.fade===!0&&(e>0&&e--,f<=b.slideCount&&f++)),c=b.$slider.find(".slick-slide").slice(e,f),g(c),b.slideCount<=b.options.slidesToShow?(d=b.$slider.find(".slick-slide"),g(d)):b.currentSlide>=b.slideCount-b.options.slidesToShow?(d=b.$slider.find(".slick-cloned").slice(0,b.options.slidesToShow),g(d)):0===b.currentSlide&&(d=b.$slider.find(".slick-cloned").slice(-1*b.options.slidesToShow),g(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){var a=this;a.checkResponsive(),a.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.autoPlay(),a.options.autoplay=!0,a.paused=!1,a.focussed=!1,a.interrupted=!1},b.prototype.postSlide=function(a){var b=this;b.unslicked||(b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay&&b.autoPlay(),b.options.accessibility===!0&&b.initADA())},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(b){b=b||1;var e,f,g,c=this,d=a("img[data-lazy]",c.$slider);d.length?(e=d.first(),f=e.attr("data-lazy"),g=document.createElement("img"),g.onload=function(){e.attr("src",f).removeAttr("data-lazy").removeClass("slick-loading"),c.options.adaptiveHeight===!0&&c.setPosition(),c.$slider.trigger("lazyLoaded",[c,e,f]),c.progressiveLazyLoad()},g.onerror=function(){3>b?setTimeout(function(){c.progressiveLazyLoad(b+1)},500):(e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),c.$slider.trigger("lazyLoadError",[c,e,f]),c.progressiveLazyLoad())},g.src=f):c.$slider.trigger("allImagesLoaded",[c])},b.prototype.refresh=function(b){var d,e,c=this;e=c.slideCount-c.options.slidesToShow,!c.options.infinite&&c.currentSlide>e&&(c.currentSlide=e),c.slideCount<=c.options.slidesToShow&&(c.currentSlide=0),d=c.currentSlide,c.destroy(!0),a.extend(c,c.initials,{currentSlide:d}),c.init(),b||c.changeSlide({data:{message:"index",index:d}},!1)},b.prototype.registerBreakpoints=function(){var c,d,e,b=this,f=b.options.responsive||null;if("array"===a.type(f)&&f.length){b.respondTo=b.options.respondTo||"window";for(c in f)if(e=b.breakpoints.length-1,d=f[c].breakpoint,f.hasOwnProperty(c)){for(;e>=0;)b.breakpoints[e]&&b.breakpoints[e]===d&&b.breakpoints.splice(e,1),e--;b.breakpoints.push(d),b.breakpointSettings[d]=f[c].settings}b.breakpoints.sort(function(a,c){return b.options.mobileFirst?a-c:c-a})}},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.registerBreakpoints(),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.cleanUpSlideEvents(),b.initSlideEvents(),b.checkResponsive(!1,!0),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.setPosition(),b.focusHandler(),b.paused=!b.options.autoplay,b.autoPlay(),b.$slider.trigger("reInit",[b])},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.unslicked||b.setPosition()},50))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,d.slideCount<1||0>a||a>d.slideCount-1?!1:(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,void d.reinit())},b.prototype.setCSS=function(a){var d,e,b=this,c={};b.options.rtl===!0&&(a=-a),d="left"==b.positionProp?Math.ceil(a)+"px":"0px",e="top"==b.positionProp?Math.ceil(a)+"px":"0px",c[b.positionProp]=a,b.transformsEnabled===!1?b.$slideTrack.css(c):(c={},b.cssTransitions===!1?(c[b.animType]="translate("+d+", "+e+")",b.$slideTrack.css(c)):(c[b.animType]="translate3d("+d+", "+e+", 0px)",b.$slideTrack.css(c)))},b.prototype.setDimensions=function(){var a=this;a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):a.options.variableWidth===!0?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var c,b=this;b.$slides.each(function(d,e){c=b.slideWidth*d*-1,b.options.rtl===!0?a(e).css({position:"relative",right:c,top:0,zIndex:b.options.zIndex-2,opacity:0}):a(e).css({position:"relative",left:c,top:0,zIndex:b.options.zIndex-2,opacity:0})}),b.$slides.eq(b.currentSlide).css({zIndex:b.options.zIndex-1,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(){var c,d,e,f,h,b=this,g=!1;if("object"===a.type(arguments[0])?(e=arguments[0],g=arguments[1],h="multiple"):"string"===a.type(arguments[0])&&(e=arguments[0],f=arguments[1],g=arguments[2],"responsive"===arguments[0]&&"array"===a.type(arguments[1])?h="responsive":"undefined"!=typeof arguments[1]&&(h="single")),"single"===h)b.options[e]=f;else if("multiple"===h)a.each(e,function(a,c){b.options[a]=c});else if("responsive"===h)for(d in f)if("array"!==a.type(b.options.responsive))b.options.responsive=[f[d]];else{for(c=b.options.responsive.length-1;c>=0;)b.options.responsive[c].breakpoint===f[d].breakpoint&&b.options.responsive.splice(c,1),c--;b.options.responsive.push(f[d])}g&&(b.unload(),b.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),(void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.msTransition)&&a.options.useCSS===!0&&(a.cssTransitions=!0),a.options.fade&&("number"==typeof a.options.zIndex?a.options.zIndex<3&&(a.options.zIndex=3):a.options.zIndex=a.defaults.zIndex),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=a.options.useTransform&&null!==a.animType&&a.animType!==!1},b.prototype.setSlideClasses=function(a){var c,d,e,f,b=this;d=b.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),b.$slides.eq(a).addClass("slick-current"),b.options.centerMode===!0?(c=Math.floor(b.options.slidesToShow/2),b.options.infinite===!0&&(a>=c&&a<=b.slideCount-1-c?b.$slides.slice(a-c,a+c+1).addClass("slick-active").attr("aria-hidden","false"):(e=b.options.slidesToShow+a,d.slice(e-c+1,e+c+2).addClass("slick-active").attr("aria-hidden","false")),0===a?d.eq(d.length-1-b.options.slidesToShow).addClass("slick-center"):a===b.slideCount-1&&d.eq(b.options.slidesToShow).addClass("slick-center")),b.$slides.eq(a).addClass("slick-center")):a>=0&&a<=b.slideCount-b.options.slidesToShow?b.$slides.slice(a,a+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):d.length<=b.options.slidesToShow?d.addClass("slick-active").attr("aria-hidden","false"):(f=b.slideCount%b.options.slidesToShow,e=b.options.infinite===!0?b.options.slidesToShow+a:a,b.options.slidesToShow==b.options.slidesToScroll&&b.slideCount-a<b.options.slidesToShow?d.slice(e-(b.options.slidesToShow-f),e+f).addClass("slick-active").attr("aria-hidden","false"):d.slice(e,e+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===b.options.lazyLoad&&b.lazyLoad()},b.prototype.setupInfinite=function(){var c,d,e,b=this;if(b.options.fade===!0&&(b.options.centerMode=!1),b.options.infinite===!0&&b.options.fade===!1&&(d=null,b.slideCount>b.options.slidesToShow)){for(e=b.options.centerMode===!0?b.options.slidesToShow+1:b.options.slidesToShow,c=b.slideCount;c>b.slideCount-e;c-=1)d=c-1,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d-b.slideCount).prependTo(b.$slideTrack).addClass("slick-cloned");for(c=0;e>c;c+=1)d=c,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d+b.slideCount).appendTo(b.$slideTrack).addClass("slick-cloned");b.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.interrupt=function(a){var b=this;a||b.autoPlay(),b.interrupted=a},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.setSlideClasses(e),void c.asNavFor(e)):void c.slideHandler(e)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,j,h=null,i=this;return b=b||!1,i.animating===!0&&i.options.waitForAnimate===!0||i.options.fade===!0&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow?void 0:(b===!1&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,i.options.infinite===!1&&i.options.centerMode===!1&&(0>a||a>i.getDotCount()*i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):i.options.infinite===!1&&i.options.centerMode===!0&&(0>a||a>i.slideCount-i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):(i.options.autoplay&&clearInterval(i.autoPlayTimer),e=0>d?i.slideCount%i.options.slidesToScroll!==0?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?i.slideCount%i.options.slidesToScroll!==0?0:d-i.slideCount:d,i.animating=!0,i.$slider.trigger("beforeChange",[i,i.currentSlide,e]),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.options.asNavFor&&(j=i.getNavTarget(),j=j.slick("getSlick"),j.slideCount<=j.options.slidesToShow&&j.setSlideClasses(i.currentSlide)),i.updateDots(),i.updateArrows(),i.options.fade===!0?(c!==!0?(i.fadeSlideOut(f),i.fadeSlide(e,function(){i.postSlide(e)})):i.postSlide(e),void i.animateHeight()):void(c!==!0?i.animateSlide(h,function(){i.postSlide(e)}):i.postSlide(e))))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),0>d&&(d=360-Math.abs(d)),45>=d&&d>=0?e.options.rtl===!1?"left":"right":360>=d&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&225>=d?e.options.rtl===!1?"right":"left":e.options.verticalSwiping===!0?d>=35&&135>=d?"down":"up":"vertical"},b.prototype.swipeEnd=function(a){var c,d,b=this;if(b.dragging=!1,b.interrupted=!1,b.shouldClick=b.touchObject.swipeLength>10?!1:!0,void 0===b.touchObject.curX)return!1;if(b.touchObject.edgeHit===!0&&b.$slider.trigger("edge",[b,b.swipeDirection()]),b.touchObject.swipeLength>=b.touchObject.minSwipe){switch(d=b.swipeDirection()){case"left":case"down":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide+b.getSlideCount()):b.currentSlide+b.getSlideCount(),b.currentDirection=0;break;case"right":case"up":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide-b.getSlideCount()):b.currentSlide-b.getSlideCount(),b.currentDirection=1}"vertical"!=d&&(b.slideHandler(c),b.touchObject={},b.$slider.trigger("swipe",[b,d]))}else b.touchObject.startX!==b.touchObject.curX&&(b.slideHandler(b.currentSlide),b.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,b.options.verticalSwiping===!0&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var d,e,f,g,h,b=this;return h=void 0!==a.originalEvent?a.originalEvent.touches:null,!b.dragging||h&&1!==h.length?!1:(d=b.getLeft(b.currentSlide),b.touchObject.curX=void 0!==h?h[0].pageX:a.clientX,b.touchObject.curY=void 0!==h?h[0].pageY:a.clientY,b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curX-b.touchObject.startX,2))),b.options.verticalSwiping===!0&&(b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curY-b.touchObject.startY,2)))),e=b.swipeDirection(),"vertical"!==e?(void 0!==a.originalEvent&&b.touchObject.swipeLength>4&&a.preventDefault(),g=(b.options.rtl===!1?1:-1)*(b.touchObject.curX>b.touchObject.startX?1:-1),b.options.verticalSwiping===!0&&(g=b.touchObject.curY>b.touchObject.startY?1:-1),f=b.touchObject.swipeLength,b.touchObject.edgeHit=!1,b.options.infinite===!1&&(0===b.currentSlide&&"right"===e||b.currentSlide>=b.getDotCount()&&"left"===e)&&(f=b.touchObject.swipeLength*b.options.edgeFriction,b.touchObject.edgeHit=!0),b.options.vertical===!1?b.swipeLeft=d+f*g:b.swipeLeft=d+f*(b.$list.height()/b.listWidth)*g,b.options.verticalSwiping===!0&&(b.swipeLeft=d+f*g),b.options.fade===!0||b.options.touchMove===!1?!1:b.animating===!0?(b.swipeLeft=null,!1):void b.setCSS(b.swipeLeft)):void 0)},b.prototype.swipeStart=function(a){var c,b=this;return b.interrupted=!0,1!==b.touchObject.fingerCount||b.slideCount<=b.options.slidesToShow?(b.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(c=a.originalEvent.touches[0]),b.touchObject.startX=b.touchObject.curX=void 0!==c?c.pageX:a.clientX,b.touchObject.startY=b.touchObject.curY=void 0!==c?c.pageY:a.clientY,void(b.dragging=!0))},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.remove(),b.$nextArrow&&b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(a){var b=this;b.$slider.trigger("unslick",[b,a]),b.destroy()},b.prototype.updateArrows=function(){var b,a=this;b=Math.floor(a.options.slidesToShow/2),a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&!a.options.infinite&&(a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===a.currentSlide?(a.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-a.options.slidesToShow&&a.options.centerMode===!1?(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-1&&a.options.centerMode===!0&&(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;a.options.autoplay&&(document[a.hidden]?a.interrupted=!0:a.interrupted=!1)},a.fn.slick=function(){var f,g,a=this,c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=a.length;for(f=0;e>f;f++)if("object"==typeof c||"undefined"==typeof c?a[f].slick=new b(a[f],c):g=a[f].slick[c].apply(a[f].slick,d),"undefined"!=typeof g)return g;return a}});!function(e){"use strict";function t(){var e=arguments[0],r=t.cache;return r[e]&&r.hasOwnProperty(e)||(r[e]=t.parse(e)),t.format.call(null,r[e],arguments)}function r(e){return"number"==typeof e?"number":"string"==typeof e?"string":Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,t){return t>=0&&7>=t&&i[e]?i[e][t]:Array(t+1).join(e)}var s={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/bcdiefguxX/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};t.format=function(e,a){var i,o,l,c,p,f,u,g=1,_=e.length,d="",b=[],h=!0,x="";for(o=0;_>o;o++)if(d=r(e[o]),"string"===d)b[b.length]=e[o];else if("array"===d){if(c=e[o],c[2])for(i=a[g],l=0;l<c[2].length;l++){if(!i.hasOwnProperty(c[2][l]))throw new Error(t('[sprintf] property "%s" does not exist',c[2][l]));i=i[c[2][l]]}else i=c[1]?a[c[1]]:a[g++];if(s.not_type.test(c[8])&&s.not_primitive.test(c[8])&&"function"==r(i)&&(i=i()),s.numeric_arg.test(c[8])&&"number"!=r(i)&&isNaN(i))throw new TypeError(t("[sprintf] expecting number but found %s",r(i)));switch(s.number.test(c[8])&&(h=i>=0),c[8]){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,c[6]?parseInt(c[6]):0);break;case"e":i=c[7]?parseFloat(i).toExponential(c[7]):parseFloat(i).toExponential();break;case"f":i=c[7]?parseFloat(i).toFixed(c[7]):parseFloat(i);break;case"g":i=c[7]?parseFloat(i).toPrecision(c[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=String(i),i=c[7]?i.substring(0,c[7]):i;break;case"t":i=String(!!i),i=c[7]?i.substring(0,c[7]):i;break;case"T":i=r(i),i=c[7]?i.substring(0,c[7]):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=c[7]?i.substring(0,c[7]):i;break;case"x":i=parseInt(i,10).toString(16);break;case"X":i=parseInt(i,10).toString(16).toUpperCase()}s.json.test(c[8])?b[b.length]=i:(!s.number.test(c[8])||h&&!c[3]?x="":(x=h?"+":"-",i=i.toString().replace(s.sign,"")),f=c[4]?"0"===c[4]?"0":c[4].charAt(1):" ",u=c[6]-(x+i).length,p=c[6]&&u>0?n(f,u):"",b[b.length]=c[5]?x+i+p:"0"===f?x+p+i:p+x+i)}return b.join("")},t.cache={},t.parse=function(e){for(var t=e,r=[],n=[],a=0;t;){if(null!==(r=s.text.exec(t)))n[n.length]=r[0];else if(null!==(r=s.modulo.exec(t)))n[n.length]="%";else{if(null===(r=s.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){a|=1;var i=[],o=r[2],l=[];if(null===(l=s.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i[i.length]=l[1];""!==(o=o.substring(l[0].length));)if(null!==(l=s.key_access.exec(o)))i[i.length]=l[1];else{if(null===(l=s.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");i[i.length]=l[1]}r[2]=i}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n[n.length]=r}t=t.substring(r[0].length)}return n};var a=function(e,r,n){return n=(r||[]).slice(0),n.splice(0,0,e),t.apply(null,n)},i={0:["","0","00","000","0000","00000","000000","0000000"]," ":[""," ","  ","   ","    ","     ","      ","       "],_:["","_","__","___","____","_____","______","_______"]};"undefined"!=typeof exports?(exports.sprintf=t,exports.vsprintf=a):(e.sprintf=t,e.vsprintf=a,"function"==typeof define&&define.amd&&define(function(){return{sprintf:t,vsprintf:a}}))}("undefined"==typeof window?this:window);!function(t,e,i,s){"use strict";function n(t){return("string"==typeof t||t instanceof String)&&(t=t.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),t}function a(t){this.selector=t,this.query=""}var o=function(e){var i=t("head");i.prepend(t.map(e,function(t){return 0===i.has("."+t).length?'<meta class="'+t+'" />':void 0}))};o(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),t(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof i.body&&FastClick.attach(i.body)});var r=function(e,s){if("string"==typeof e){if(s){var n;if(s.jquery){if(n=s[0],!n)return s}else n=s;return t(n.querySelectorAll(e))}return t(i.querySelectorAll(e))}return t(e,s)},l=function(t){var e=[];return t||e.push("data"),this.namespace.length>0&&e.push(this.namespace),e.push(this.name),e.join("-")},d=function(t){for(var e=t.split("-"),i=e.length,s=[];i--;)0!==i?s.push(e[i]):this.namespace.length>0?s.push(this.namespace,e[i]):s.push(e[i]);return s.reverse().join("-")},c=function(e,i){var s=this,n=function(){var n=r(this),a=!n.data(s.attr_name(!0)+"-init");n.data(s.attr_name(!0)+"-init",t.extend({},s.settings,i||e,s.data_options(n))),a&&s.events(this)};return r(this.scope).is("["+this.attr_name()+"]")?n.call(this.scope):r("["+this.attr_name()+"]",this.scope).each(n),"string"==typeof e?this[e].call(this,i):void 0},h=function(t,e){function i(){e(t[0])}function s(){if(this.one("load",i),/MSIE(\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?void(t[0].complete||4===t[0].readyState?i():s.call(t)):void i()};e.matchMedia||(e.matchMedia=function(){var t=e.styleMedia||e.media;if(!t){var s=i.createElement("style"),n=i.getElementsByTagName("script")[0],a=null;s.type="text/css",s.id="matchmediajs-test",n.parentNode.insertBefore(s,n),a="getComputedStyle"in e&&e.getComputedStyle(s,null)||s.currentStyle,t={matchMedium:function(t){var e="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return s.styleSheet?s.styleSheet.cssText=e:s.textContent=e,"1px"===a.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t){function i(){s&&(o(i),l&&t.fx.tick())}for(var s,n=0,a=["webkit","moz"],o=e.requestAnimationFrame,r=e.cancelAnimationFrame,l="undefined"!=typeof t.fx;n<a.length&&!o;n++)o=e[a[n]+"RequestAnimationFrame"],r=r||e[a[n]+"CancelAnimationFrame"]||e[a[n]+"CancelRequestAnimationFrame"];o?(e.requestAnimationFrame=o,e.cancelAnimationFrame=r,l&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!s&&(s=!0,i())},t.fx.stop=function(){s=!1})):(e.requestAnimationFrame=function(t){var i=(new Date).getTime(),s=Math.max(0,16-(i-n)),a=e.setTimeout(function(){t(i+s)},s);return n=i+s,a},e.cancelAnimationFrame=function(t){clearTimeout(t)})}(t),a.prototype.toString=function(){return this.query||(this.query=r(this.selector).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""))},e.Foundation={name:"Foundation",version:"5.5.3",media_queries:{small:new a(".foundation-mq-small"),"small-only":new a(".foundation-mq-small-only"),medium:new a(".foundation-mq-medium"),"medium-only":new a(".foundation-mq-medium-only"),large:new a(".foundation-mq-large"),"large-only":new a(".foundation-mq-large-only"),xlarge:new a(".foundation-mq-xlarge"),"xlarge-only":new a(".foundation-mq-xlarge-only"),xxlarge:new a(".foundation-mq-xxlarge")},stylesheet:t("<style></style>").appendTo("head")[0].sheet,global:{namespace:s},init:function(t,i,s,n,a){var o=[t,s,n,a],l=[];if(this.rtl=/rtl/i.test(r("html").attr("dir")),this.scope=t||this.scope,this.set_namespace(),i&&"string"==typeof i&&!/reflow/i.test(i))this.libs.hasOwnProperty(i)&&l.push(this.init_lib(i,o));else for(var d in this.libs)l.push(this.init_lib(d,i));return r(e).load(function(){r(e).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),t},init_lib:function(e,i){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),i&&i.hasOwnProperty(e)?("undefined"!=typeof this.libs[e].settings?t.extend(!0,this.libs[e].settings,i[e]):"undefined"!=typeof this.libs[e].defaults&&t.extend(!0,this.libs[e].defaults,i[e]),this.libs[e].init.apply(this.libs[e],[this.scope,i[e]])):(i=i instanceof Array?i:new Array(i),this.libs[e].init.apply(this.libs[e],i))):function(){}},patch:function(t){t.scope=this.scope,t.namespace=this.global.namespace,t.rtl=this.rtl,t.data_options=this.utils.data_options,t.attr_name=l,t.add_namespace=d,t.bindings=c,t.S=this.utils.S},inherit:function(t,e){for(var i=e.split(" "),s=i.length;s--;)this.utils.hasOwnProperty(i[s])&&(t[i[s]]=this.utils[i[s]])},set_namespace:function(){var e=this.global.namespace===s?t(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===s||/false/i.test(e)?"":e},libs:{},utils:{S:r,throttle:function(t,e){var i=null;return function(){var s=this,n=arguments;null==i&&(i=setTimeout(function(){t.apply(s,n),i=null},e))}},debounce:function(t,e,i){var s,n;return function(){var a=this,o=arguments,r=function(){s=null,i||(n=t.apply(a,o))},l=i&&!s;return clearTimeout(s),s=setTimeout(r,e),l&&(n=t.apply(a,o)),n}},data_options:function(e,i){function s(t){return!isNaN(t-0)&&null!==t&&""!==t&&t!==!1&&t!==!0}function n(e){return"string"==typeof e?t.trim(e):e}i=i||"options";var a,o,r,l={},d=function(t){var e=Foundation.global.namespace;return t.data(e.length>0?e+"-"+i:i)},c=d(e);if("object"==typeof c)return c;for(r=(c||":").split(";"),a=r.length;a--;)o=r[a].split(":"),o=[o[0],o.slice(1).join(":")],/true/i.test(o[1])&&(o[1]=!0),/false/i.test(o[1])&&(o[1]=!1),s(o[1])&&(o[1]=-1===o[1].indexOf(".")?parseInt(o[1],10):parseFloat(o[1])),2===o.length&&o[0].length>0&&(l[n(o[0])]=n(o[1]));return l},register_media:function(e,i){Foundation.media_queries[e]===s&&(t("head").append('<meta class="'+i+'"/>'),Foundation.media_queries[e]=n(t("."+i).css("font-family")))},add_custom_rule:function(t,e){if(e===s&&Foundation.stylesheet)Foundation.stylesheet.insertRule(t,Foundation.stylesheet.cssRules.length);else{var i=Foundation.media_queries[e];i!==s&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[e]+"{ "+t+" }",Foundation.stylesheet.cssRules.length)}},image_loaded:function(t,e){function i(t){for(var e=t.length,i=e-1;i>=0;i--)if(t.attr("height")===s)return!1;return!0}var n=this,a=t.length;(0===a||i(t))&&e(t),t.each(function(){h(n.S(this),function(){a-=1,0===a&&e(t)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(t){return e.matchMedia(t).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},t.fn.foundation=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(t)),this})}}(jQuery,window,window.document),function(t,e){"use strict";Foundation.libs.slider={name:"slider",version:"5.5.3",settings:{start:0,end:100,step:1,precision:2,initial:null,display_selector:"",vertical:!1,trigger_input_change:!1,on_change:function(){}},cache:{},init:function(t,e,i){Foundation.inherit(this,"throttle"),this.bindings(e,i),this.reflow()},events:function(){var i=this;t(this.scope).off(".slider").on("mousedown.fndtn.slider touchstart.fndtn.slider pointerdown.fndtn.slider","["+i.attr_name()+"]:not(.disabled, [disabled]) .range-slider-handle",function(e){i.cache.active||(e.preventDefault(),i.set_active_slider(t(e.target)))}).on("mousemove.fndtn.slider touchmove.fndtn.slider pointermove.fndtn.slider",function(s){if(i.cache.active)if(s.preventDefault(),t.data(i.cache.active[0],"settings").vertical){var n=0;s.pageY||(n=e.scrollY),i.calculate_position(i.cache.active,i.get_cursor_position(s,"y")+n)}else i.calculate_position(i.cache.active,i.get_cursor_position(s,"x"))}).on("mouseup.fndtn.slider touchend.fndtn.slider pointerup.fndtn.slider",function(s){if(!i.cache.active){var n="slider"===t(s.target).attr("role")?t(s.target):t(s.target).closest(".range-slider").find("[role='slider']");if(n.length&&!n.parent().hasClass("disabled")&&!n.parent().attr("disabled"))if(i.set_active_slider(n),t.data(i.cache.active[0],"settings").vertical){var a=0;s.pageY||(a=e.scrollY),i.calculate_position(i.cache.active,i.get_cursor_position(s,"y")+a)}else i.calculate_position(i.cache.active,i.get_cursor_position(s,"x"))}i.remove_active_slider()}).on("change.fndtn.slider",function(){i.settings.on_change()}),i.S(e).on("resize.fndtn.slider",i.throttle(function(){i.reflow()},300)),this.S("["+this.attr_name()+"]").each(function(){var e=t(this),s=e.children(".range-slider-handle")[0],n=i.initialize_settings(s);""!=n.display_selector&&t(n.display_selector).each(function(){t(this).attr("value")&&t(this).off("change").on("change",function(){e.foundation("slider","set_value",t(this).val())})})})},get_cursor_position:function(t,e){var i,s="page"+e.toUpperCase(),n="client"+e.toUpperCase();return"undefined"!=typeof t[s]?i=t[s]:"undefined"!=typeof t.originalEvent[n]?i=t.originalEvent[n]:t.originalEvent.touches&&t.originalEvent.touches[0]&&"undefined"!=typeof t.originalEvent.touches[0][n]?i=t.originalEvent.touches[0][n]:t.currentPoint&&"undefined"!=typeof t.currentPoint[e]&&(i=t.currentPoint[e]),i},set_active_slider:function(t){this.cache.active=t},remove_active_slider:function(){this.cache.active=null},calculate_position:function(e,i){var s=this,n=t.data(e[0],"settings"),a=(t.data(e[0],"handle_l"),t.data(e[0],"handle_o"),t.data(e[0],"bar_l")),o=t.data(e[0],"bar_o");requestAnimationFrame(function(){var t;t=Foundation.rtl&&!n.vertical?s.limit_to((o+a-i)/a,0,1):s.limit_to((i-o)/a,0,1),t=n.vertical?1-t:t;var r=s.normalized_value(t,n.start,n.end,n.step,n.precision);s.set_ui(e,r)})},set_ui:function(e,i){var s=t.data(e[0],"settings"),n=t.data(e[0],"handle_l"),a=t.data(e[0],"bar_l"),o=this.normalized_percentage(i,s.start,s.end),r=o*(a-n)-1,l=100*o,d=e.parent(),c=e.parent().children("input[type=hidden]");Foundation.rtl&&!s.vertical&&(r=-r),r=s.vertical?-r+a-n+1:r,this.set_translate(e,r,s.vertical),s.vertical?e.siblings(".range-slider-active-segment").css("height",l+"%"):e.siblings(".range-slider-active-segment").css("width",l+"%"),d.attr(this.attr_name(),i).trigger("change.fndtn.slider"),c.val(i),s.trigger_input_change&&c.trigger("change.fndtn.slider"),e[0].hasAttribute("aria-valuemin")||e.attr({"aria-valuemin":s.start,"aria-valuemax":s.end}),e.attr("aria-valuenow",i),""!=s.display_selector&&t(s.display_selector).each(function(){this.hasAttribute("value")?t(this).val(i):t(this).text(i)})},normalized_percentage:function(t,e,i){return Math.min(1,(t-e)/(i-e))},normalized_value:function(t,e,i,s,n){var a=i-e,o=t*a,r=(o-o%s)/s,l=o%s,d=l>=.5*s?s:0;return(r*s+d+e).toFixed(n)},set_translate:function(e,i,s){s?t(e).css("-webkit-transform","translateY("+i+"px)").css("-moz-transform","translateY("+i+"px)").css("-ms-transform","translateY("+i+"px)").css("-o-transform","translateY("+i+"px)").css("transform","translateY("+i+"px)"):t(e).css("-webkit-transform","translateX("+i+"px)").css("-moz-transform","translateX("+i+"px)").css("-ms-transform","translateX("+i+"px)").css("-o-transform","translateX("+i+"px)").css("transform","translateX("+i+"px)")},limit_to:function(t,e,i){return Math.min(Math.max(t,e),i)},initialize_settings:function(e){var i,s=t.extend({},this.settings,this.data_options(t(e).parent()));return null===s.precision&&(i=(""+s.step).match(/\.([\d]*)/),s.precision=i&&i[1]?i[1].length:0),s.vertical?(t.data(e,"bar_o",t(e).parent().offset().top),t.data(e,"bar_l",t(e).parent().outerHeight()),t.data(e,"handle_o",t(e).offset().top),t.data(e,"handle_l",t(e).outerHeight())):(t.data(e,"bar_o",t(e).parent().offset().left),t.data(e,"bar_l",t(e).parent().outerWidth()),t.data(e,"handle_o",t(e).offset().left),t.data(e,"handle_l",t(e).outerWidth())),t.data(e,"bar",t(e).parent()),t.data(e,"settings",s)},set_initial_position:function(e){var i=t.data(e.children(".range-slider-handle")[0],"settings"),s="number"!=typeof i.initial||isNaN(i.initial)?Math.floor(.5*(i.end-i.start)/i.step)*i.step+i.start:i.initial,n=e.children(".range-slider-handle");this.set_ui(n,s)},set_value:function(e){var i=this;t("["+i.attr_name()+"]",this.scope).each(function(){t(this).attr(i.attr_name(),e)}),t(this.scope).attr(i.attr_name())&&t(this.scope).attr(i.attr_name(),e),i.reflow()},reflow:function(){var e=this;e.S("["+this.attr_name()+"]").each(function(){var i=t(this).children(".range-slider-handle")[0],s=t(this).attr(e.attr_name());e.initialize_settings(i),s?e.set_ui(t(i),parseFloat(s)):e.set_initial_position(t(this))})}}}(jQuery,window,window.document),function(t,e,i,s){"use strict";Foundation.libs.joyride={name:"joyride",version:"5.5.3",defaults:{expose:!1,modal:!0,keyboard:!0,tip_location:"bottom",nub_position:"auto",scroll_speed:1500,scroll_animation:"linear",timer:0,start_timer_on_click:!0,start_offset:0,next_button:!0,prev_button:!0,tip_animation:"fade",pause_after:[],exposed:[],tip_animation_fade_speed:300,cookie_monster:!1,cookie_name:"joyride",cookie_domain:!1,cookie_expires:365,tip_container:"body",abort_on_close:!0,tip_location_patterns:{top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},post_ride_callback:function(){},post_step_callback:function(){},pre_step_callback:function(){},pre_ride_callback:function(){},post_expose_callback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',prev_button:'<a href="#" class="small button joyride-prev-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',expose_cover:'<div class="joyride-expose-cover"></div>'},expose_add_class:""},init:function(e,i,s){Foundation.inherit(this,"throttle random_str"),this.settings=this.settings||t.extend({},this.defaults,s||i),this.bindings(i,s)},go_next:function(){this.settings.$li.next().length<1?this.end():this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(),this.startTimer()):(this.hide(),this.show())},go_prev:function(){this.settings.$li.prev().length<1||(this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(null,!0),this.startTimer()):(this.hide(),this.show(null,!0)))},events:function(){var i=this;t(this.scope).off(".joyride").on("click.fndtn.joyride",".joyride-next-tip, .joyride-modal-bg",function(t){t.preventDefault(),this.go_next()}.bind(this)).on("click.fndtn.joyride",".joyride-prev-tip",function(t){t.preventDefault(),this.go_prev()}.bind(this)).on("click.fndtn.joyride",".joyride-close-tip",function(t){t.preventDefault(),this.end(this.settings.abort_on_close)}.bind(this)).on("keyup.fndtn.joyride",function(t){if(this.settings.keyboard&&this.settings.riding)switch(t.which){case 39:t.preventDefault(),this.go_next();break;case 37:t.preventDefault(),this.go_prev();break;case 27:t.preventDefault(),this.end(this.settings.abort_on_close)}}.bind(this)),t(e).off(".joyride").on("resize.fndtn.joyride",i.throttle(function(){if(t("["+i.attr_name()+"]").length>0&&i.settings.$next_tip&&i.settings.riding){if(i.settings.exposed.length>0){var e=t(i.settings.exposed);e.each(function(){var e=t(this);i.un_expose(e),i.expose(e)})}i.is_phone()?i.pos_phone():i.pos_default(!1)}},100))},start:function(){var e=this,i=t("["+this.attr_name()+"]",this.scope),s=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],n=s.length;!i.length>0||(this.settings.init||this.events(),this.settings=i.data(this.attr_name(!0)+"-init"),this.settings.$content_el=i,this.settings.$body=t(this.settings.tip_container),this.settings.body_offset=t(this.settings.tip_container).position(),this.settings.$tip_content=this.settings.$content_el.find("> li"),this.settings.paused=!1,this.settings.attempts=0,this.settings.riding=!0,"function"!=typeof t.cookie&&(this.settings.cookie_monster=!1),(!this.settings.cookie_monster||this.settings.cookie_monster&&!t.cookie(this.settings.cookie_name))&&(this.settings.$tip_content.each(function(i){var a=t(this);this.settings=t.extend({},e.defaults,e.data_options(a));for(var o=n;o--;)e.settings[s[o]]=parseInt(e.settings[s[o]],10);e.create({$li:a,index:i})}),!this.settings.start_timer_on_click&&this.settings.timer>0?(this.show("init"),this.startTimer()):this.show("init")))},resume:function(){this.set_li(),this.show()},tip_template:function(e){var i,s;return e.tip_class=e.tip_class||"",i=t(this.settings.template.tip).addClass(e.tip_class),s=t.trim(t(e.li).html())+this.prev_button_text(e.prev_button_text,e.index)+this.button_text(e.button_text)+this.settings.template.link+this.timer_instance(e.index),i.append(t(this.settings.template.wrapper)),i.first().attr(this.add_namespace("data-index"),e.index),t(".joyride-content-wrapper",i).append(s),i[0]},timer_instance:function(e){var i;return i=0===e&&this.settings.start_timer_on_click&&this.settings.timer>0||0===this.settings.timer?"":t(this.settings.template.timer)[0].outerHTML},button_text:function(e){return this.settings.tip_settings.next_button?(e=t.trim(e)||"Next",e=t(this.settings.template.button).append(e)[0].outerHTML):e="",e},prev_button_text:function(e,i){return this.settings.tip_settings.prev_button?(e=t.trim(e)||"Previous",e=0==i?t(this.settings.template.prev_button).append(e).addClass("disabled")[0].outerHTML:t(this.settings.template.prev_button).append(e)[0].outerHTML):e="",e},create:function(e){this.settings.tip_settings=t.extend({},this.settings,this.data_options(e.$li));var i=e.$li.attr(this.add_namespace("data-button"))||e.$li.attr(this.add_namespace("data-text")),s=e.$li.attr(this.add_namespace("data-button-prev"))||e.$li.attr(this.add_namespace("data-prev-text")),n=e.$li.attr("class"),a=t(this.tip_template({tip_class:n,index:e.index,button_text:i,prev_button_text:s,li:e.$li}));t(this.settings.tip_container).append(a)},show:function(e,i){var n=null;if(this.settings.$li===s||-1===t.inArray(this.settings.$li.index(),this.settings.pause_after))if(this.settings.paused?this.settings.paused=!1:this.set_li(e,i),this.settings.attempts=0,this.settings.$li.length&&this.settings.$target.length>0){if(e&&(this.settings.pre_ride_callback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.show_modal()),this.settings.pre_step_callback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.settings.expose&&this.expose(),this.settings.tip_settings=t.extend({},this.settings,this.data_options(this.settings.$li)),this.settings.timer=parseInt(this.settings.timer,10),this.settings.tip_settings.tip_location_pattern=this.settings.tip_location_patterns[this.settings.tip_settings.tip_location],!/body/i.test(this.settings.$target.selector)&&!this.settings.expose){var a=t(".joyride-modal-bg");/pop/i.test(this.settings.tipAnimation)?a.hide():a.fadeOut(this.settings.tipAnimationFadeSpeed),this.scroll_to()}this.is_phone()?this.pos_phone(!0):this.pos_default(!0),n=this.settings.$next_tip.find(".joyride-timer-indicator"),/pop/i.test(this.settings.tip_animation)?(n.width(0),this.settings.timer>0?(this.settings.$next_tip.show(),setTimeout(function(){n.animate({width:n.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)):this.settings.$next_tip.show()):/fade/i.test(this.settings.tip_animation)&&(n.width(0),this.settings.timer>0?(this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed).show(),setTimeout(function(){n.animate({width:n.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)):this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed)),this.settings.$current_tip=this.settings.$next_tip}else this.settings.$li&&this.settings.$target.length<1?this.show(e,i):this.end();else this.settings.paused=!0},is_phone:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},hide:function(){this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.modal||t(".joyride-modal-bg").hide(),this.settings.$current_tip.css("visibility","hidden"),setTimeout(t.proxy(function(){this.hide(),this.css("visibility","visible")},this.settings.$current_tip),0),this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(t,e){t?(this.settings.$li=this.settings.$tip_content.eq(this.settings.start_offset),this.set_next_tip(),this.settings.$current_tip=this.settings.$next_tip):(this.settings.$li=e?this.settings.$li.prev():this.settings.$li.next(),this.set_next_tip()),this.set_target()},set_next_tip:function(){this.settings.$next_tip=t(".joyride-tip-guide").eq(this.settings.$li.index()),this.settings.$next_tip.data("closed","")},set_target:function(){var e=this.settings.$li.attr(this.add_namespace("data-class")),s=this.settings.$li.attr(this.add_namespace("data-id")),n=function(){return s?t(i.getElementById(s)):e?t("."+e).first():t("body")};this.settings.$target=n()},scroll_to:function(){var i,s;i=t(e).height()/2,s=Math.ceil(this.settings.$target.offset().top-i+this.settings.$next_tip.outerHeight()),0!=s&&t("html, body").stop().animate({scrollTop:s},this.settings.scroll_speed,"swing")},paused:function(){return-1===t.inArray(this.settings.$li.index()+1,this.settings.pause_after)},restart:function(){this.hide(),this.settings.$li=s,this.show("init")},pos_default:function(t){var e=this.settings.$next_tip.find(".joyride-nub"),i=Math.ceil(e.outerWidth()/2),s=Math.ceil(e.outerHeight()/2),n=t||!1;if(n&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector))this.settings.$li.length&&this.pos_modal(e);else{var a=this.settings.tip_settings.tipAdjustmentY?parseInt(this.settings.tip_settings.tipAdjustmentY):0,o=this.settings.tip_settings.tipAdjustmentX?parseInt(this.settings.tip_settings.tipAdjustmentX):0;this.bottom()?(this.settings.$next_tip.css(this.rtl?{top:this.settings.$target.offset().top+s+this.settings.$target.outerHeight()+a,left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()+o}:{top:this.settings.$target.offset().top+s+this.settings.$target.outerHeight()+a,left:this.settings.$target.offset().left+o}),this.nub_position(e,this.settings.tip_settings.nub_position,"top")):this.top()?(this.settings.$next_tip.css(this.rtl?{top:this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-s+a,left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()}:{top:this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-s+a,left:this.settings.$target.offset().left+o}),this.nub_position(e,this.settings.tip_settings.nub_position,"bottom")):this.right()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top+a,left:this.settings.$target.outerWidth()+this.settings.$target.offset().left+i+o}),this.nub_position(e,this.settings.tip_settings.nub_position,"left")):this.left()&&(this.settings.$next_tip.css({top:this.settings.$target.offset().top+a,left:this.settings.$target.offset().left-this.settings.$next_tip.outerWidth()-i+o}),this.nub_position(e,this.settings.tip_settings.nub_position,"right")),!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tip_settings.tip_location_pattern.length&&(e.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),this.settings.tip_settings.tip_location=this.settings.tip_settings.tip_location_pattern[this.settings.attempts],this.settings.attempts++,this.pos_default())}n&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_phone:function(e){var i=this.settings.$next_tip.outerHeight(),s=(this.settings.$next_tip.offset(),this.settings.$target.outerHeight()),n=t(".joyride-nub",this.settings.$next_tip),a=Math.ceil(n.outerHeight()/2),o=e||!1;n.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),o&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(n):this.top()?(this.settings.$next_tip.offset({top:this.settings.$target.offset().top-i-a}),n.addClass("bottom")):(this.settings.$next_tip.offset({top:this.settings.$target.offset().top+s+a}),n.addClass("top")),o&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_modal:function(t){this.center(),t.hide(),this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var e=t(".joyride-modal-bg");if(e.length<1){var e=t(this.settings.template.modal);e.appendTo("body")}/pop/i.test(this.settings.tip_animation)?e.show():e.fadeIn(this.settings.tip_animation_fade_speed)}},expose:function(){var i,s,n,a,o,r="expose-"+this.random_str(6);if(arguments.length>0&&arguments[0]instanceof t)n=arguments[0];else{if(!this.settings.$target||/body/i.test(this.settings.$target.selector))return!1;n=this.settings.$target}return n.length<1?(e.console&&console.error("element not valid",n),!1):(i=t(this.settings.template.expose),this.settings.$body.append(i),i.css({top:n.offset().top,left:n.offset().left,width:n.outerWidth(!0),height:n.outerHeight(!0)}),s=t(this.settings.template.expose_cover),a={zIndex:n.css("z-index"),position:n.css("position")},o=null==n.attr("class")?"":n.attr("class"),n.css("z-index",parseInt(i.css("z-index"))+1),"static"==a.position&&n.css("position","relative"),n.data("expose-css",a),n.data("orig-class",o),n.attr("class",o+" "+this.settings.expose_add_class),s.css({top:n.offset().top,left:n.offset().left,width:n.outerWidth(!0),height:n.outerHeight(!0)}),this.settings.modal&&this.show_modal(),this.settings.$body.append(s),i.addClass(r),s.addClass(r),n.data("expose",r),this.settings.post_expose_callback(this.settings.$li.index(),this.settings.$next_tip,n),void this.add_exposed(n))},un_expose:function(){var i,s,n,a,o,r=!1;if(arguments.length>0&&arguments[0]instanceof t)s=arguments[0];else{if(!this.settings.$target||/body/i.test(this.settings.$target.selector))return!1;s=this.settings.$target}return s.length<1?(e.console&&console.error("element not valid",s),!1):(i=s.data("expose"),n=t("."+i),arguments.length>1&&(r=arguments[1]),r===!0?t(".joyride-expose-wrapper,.joyride-expose-cover").remove():n.remove(),a=s.data("expose-css"),"auto"==a.zIndex?s.css("z-index",""):s.css("z-index",a.zIndex),a.position!=s.css("position")&&("static"==a.position?s.css("position",""):s.css("position",a.position)),o=s.data("orig-class"),s.attr("class",o),s.removeData("orig-classes"),s.removeData("expose"),s.removeData("expose-z-index"),void this.remove_exposed(s))},add_exposed:function(e){this.settings.exposed=this.settings.exposed||[],e instanceof t||"object"==typeof e?this.settings.exposed.push(e[0]):"string"==typeof e&&this.settings.exposed.push(e)},remove_exposed:function(e){var i,s;for(e instanceof t?i=e[0]:"string"==typeof e&&(i=e),this.settings.exposed=this.settings.exposed||[],s=this.settings.exposed.length;s--;)if(this.settings.exposed[s]==i)return void this.settings.exposed.splice(s,1)},center:function(){var i=t(e);return this.settings.$next_tip.css({top:(i.height()-this.settings.$next_tip.outerHeight())/2+i.scrollTop(),left:(i.width()-this.settings.$next_tip.outerWidth())/2+i.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(this.settings.tip_settings.tip_location)},top:function(){return/top/i.test(this.settings.tip_settings.tip_location)},right:function(){return/right/i.test(this.settings.tip_settings.tip_location)},left:function(){return/left/i.test(this.settings.tip_settings.tip_location)},corners:function(i){if(0===i.length)return[!1,!1,!1,!1];var s=t(e),n=s.height()/2,a=Math.ceil(this.settings.$target.offset().top-n+this.settings.$next_tip.outerHeight()),o=s.width()+s.scrollLeft(),r=s.height()+a,l=s.height()+s.scrollTop(),d=s.scrollTop();return d>a&&(d=0>a?0:a),r>l&&(l=r),[i.offset().top<d,o<i.offset().left+i.outerWidth(),l<i.offset().top+i.outerHeight(),s.scrollLeft()>i.offset().left]},visible:function(t){for(var e=t.length;e--;)if(t[e])return!1;return!0},nub_position:function(t,e,i){t.addClass("auto"===e?i:e)},startTimer:function(){this.settings.$li.length?this.settings.automate=setTimeout(function(){this.hide(),this.show(),this.startTimer()}.bind(this),this.settings.timer):clearTimeout(this.settings.automate)},end:function(e){this.settings.cookie_monster&&t.cookie(this.settings.cookie_name,"ridden",{expires:this.settings.cookie_expires,domain:this.settings.cookie_domain}),this.settings.timer>0&&clearTimeout(this.settings.automate),this.settings.modal&&this.settings.expose&&this.un_expose(),t(this.scope).off("keyup.joyride"),this.settings.$next_tip.data("closed",!0),this.settings.riding=!1,t(".joyride-modal-bg").hide(),this.settings.$current_tip.hide(),("undefined"==typeof e||e===!1)&&(this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip),this.settings.post_ride_callback(this.settings.$li.index(),this.settings.$current_tip)),t(".joyride-tip-guide").remove()},off:function(){t(this.scope).off(".joyride"),t(e).off(".joyride"),t(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),t(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(this.settings.automate)},reflow:function(){}}}(jQuery,window,window.document),function(t,e){"use strict";Foundation.libs.equalizer={name:"equalizer",version:"5.5.3",settings:{use_tallest:!0,before_height_change:t.noop,after_height_change:t.noop,equalize_on_stack:!1,act_on_hidden_el:!1},init:function(t,e,i){Foundation.inherit(this,"image_loaded"),this.bindings(e,i),this.reflow()},events:function(){this.S(e).off(".equalizer").on("resize.fndtn.equalizer",function(){this.reflow()}.bind(this))},equalize:function(e){var i,s,n=!1,a=e.data("equalizer"),o=e.data(this.attr_name(!0)+"-init")||this.settings;if(i=e.find(o.act_on_hidden_el?a?"["+this.attr_name()+'-watch="'+a+'"]':"["+this.attr_name()+"-watch]":a?"["+this.attr_name()+'-watch="'+a+'"]:visible':"["+this.attr_name()+"-watch]:visible"),0!==i.length&&(o.before_height_change(),e.trigger("before-height-change.fndth.equalizer"),i.height("inherit"),o.equalize_on_stack!==!1||(s=i.first().offset().top,i.each(function(){return t(this).offset().top!==s?(n=!0,!1):void 0}),!n))){var r=i.map(function(){return t(this).outerHeight(!1)}).get();if(o.use_tallest){var l=Math.max.apply(null,r);i.css("height",l)}else{var d=Math.min.apply(null,r);i.css("height",d)}o.after_height_change(),e.trigger("after-height-change.fndtn.equalizer")}},reflow:function(){var e=this;this.S("["+this.attr_name()+"]",this.scope).each(function(){var i=t(this),s=i.data("equalizer-mq"),n=!0;s&&(s="is_"+s.replace(/-/g,"_"),Foundation.utils.hasOwnProperty(s)&&(n=!1)),e.image_loaded(e.S("img",this),function(){if(n||Foundation.utils[s]())e.equalize(i);else{var t=i.find("["+e.attr_name()+"-watch]:visible");t.css("height","auto")}})})}}}(jQuery,window,window.document),function(t,e,i){"use strict";Foundation.libs.dropdown={name:"dropdown",version:"5.5.3",settings:{active_class:"open",disabled_class:"disabled",mega_class:"mega",align:"bottom",is_hover:!1,hover_timeout:150,opened:function(){},closed:function(){}},init:function(e,i,s){Foundation.inherit(this,"throttle"),t.extend(!0,this.settings,i,s),this.bindings(i,s)},events:function(){var s=this,n=s.S;n(this.scope).off(".dropdown").on("click.fndtn.dropdown","["+this.attr_name()+"]",function(e){var i=n(this).data(s.attr_name(!0)+"-init")||s.settings;(!i.is_hover||Modernizr.touch)&&(e.preventDefault(),n(this).parent("[data-reveal-id]").length&&e.stopPropagation(),s.toggle(t(this)))}).on("mouseenter.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(t){var e,i,a=n(this);clearTimeout(s.timeout),a.data(s.data_attr())?(e=n("#"+a.data(s.data_attr())),i=a):(e=a,i=n("["+s.attr_name()+'="'+e.attr("id")+'"]'));var o=i.data(s.attr_name(!0)+"-init")||s.settings;n(t.currentTarget).data(s.data_attr())&&o.is_hover&&s.closeall.call(s),o.is_hover&&s.open.apply(s,[e,i])}).on("mouseleave.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(){var t,e=n(this);if(e.data(s.data_attr()))t=e.data(s.data_attr(!0)+"-init")||s.settings;else var i=n("["+s.attr_name()+'="'+n(this).attr("id")+'"]'),t=i.data(s.attr_name(!0)+"-init")||s.settings;s.timeout=setTimeout(function(){e.data(s.data_attr())?t.is_hover&&s.close.call(s,n("#"+e.data(s.data_attr()))):t.is_hover&&s.close.call(s,e)}.bind(this),t.hover_timeout)}).on("click.fndtn.dropdown",function(e){var a=n(e.target).closest("["+s.attr_name()+"-content]"),o=a.find("a");return o.length>0&&"false"!==a.attr("aria-autoclose")&&s.close.call(s,n("["+s.attr_name()+"-content]")),e.target!==i&&!t.contains(i.documentElement,e.target)||n(e.target).closest("["+s.attr_name()+"]").length>0?void 0:!n(e.target).data("revealId")&&a.length>0&&(n(e.target).is("["+s.attr_name()+"-content]")||t.contains(a.first()[0],e.target))?void e.stopPropagation():void s.close.call(s,n("["+s.attr_name()+"-content]"))}).on("opened.fndtn.dropdown","["+s.attr_name()+"-content]",function(){s.settings.opened.call(this)}).on("closed.fndtn.dropdown","["+s.attr_name()+"-content]",function(){s.settings.closed.call(this)}),n(e).off(".dropdown").on("resize.fndtn.dropdown",s.throttle(function(){s.resize.call(s)},50)),this.resize()},close:function(e){var i=this;e.each(function(s){var n=t("["+i.attr_name()+"="+e[s].id+"]")||t("aria-controls="+e[s].id+"]");n.attr("aria-expanded","false"),i.S(this).hasClass(i.settings.active_class)&&(i.S(this).css(Foundation.rtl?"right":"left","-99999px").attr("aria-hidden","true").removeClass(i.settings.active_class).prev("["+i.attr_name()+"]").removeClass(i.settings.active_class).removeData("target"),i.S(this).trigger("closed.fndtn.dropdown",[e]))}),e.removeClass("f-open-"+this.attr_name(!0))},closeall:function(){var e=this;t.each(e.S(".f-open-"+this.attr_name(!0)),function(){e.close.call(e,e.S(this))})},open:function(t,e){this.css(t.addClass(this.settings.active_class),e),t.prev("["+this.attr_name()+"]").addClass(this.settings.active_class),t.data("target",e.get(0)).trigger("opened.fndtn.dropdown",[t,e]),t.attr("aria-hidden","false"),e.attr("aria-expanded","true"),t.focus(),t.addClass("f-open-"+this.attr_name(!0))},data_attr:function(){return this.namespace.length>0?this.namespace+"-"+this.name:this.name},toggle:function(t){if(!t.hasClass(this.settings.disabled_class)){var e=this.S("#"+t.data(this.data_attr()));0!==e.length&&(this.close.call(this,this.S("["+this.attr_name()+"-content]").not(e)),e.hasClass(this.settings.active_class)?(this.close.call(this,e),e.data("target")!==t.get(0)&&this.open.call(this,e,t)):this.open.call(this,e,t))}},resize:function(){var e=this.S("["+this.attr_name()+"-content].open"),i=t(e.data("target"));e.length&&i.length&&this.css(e,i)},css:function(t,e){var i=Math.max((e.width()-t.width())/2,8),s=e.data(this.attr_name(!0)+"-init")||this.settings,n=t.parent().css("overflow-y")||t.parent().css("overflow");if(this.clear_idx(),this.small()){var a=this.dirs.bottom.call(t,e,s);t.attr("style","").removeClass("drop-left drop-right drop-top").css({position:"absolute",width:"95%","max-width":"none",top:a.top}),t.css(Foundation.rtl?"right":"left",i)}else if("visible"!==n){var o=e[0].offsetTop+e[0].offsetHeight;t.attr("style","").css({position:"absolute",top:o}),t.css(Foundation.rtl?"right":"left",i)}else this.style(t,e,s);return t},style:function(e,i,s){var n=t.extend({position:"absolute"},this.dirs[s.align].call(e,i,s));e.attr("style","").css(n)},dirs:{_base:function(t,s){var n=this.offsetParent(),a=n.offset(),o=t.offset();o.top-=a.top,o.left-=a.left,o.missRight=!1,o.missTop=!1,o.missLeft=!1,o.leftRightFlag=!1;var r,l=e.innerWidth;r=i.getElementsByClassName("row")[0]?i.getElementsByClassName("row")[0].clientWidth:l;var d=(l-r)/2,c=r;if(!this.hasClass("mega")&&!s.ignore_repositioning){var h=this.outerWidth(),u=t.offset().left;t.offset().top<=this.outerHeight()&&(o.missTop=!0,c=l-d,o.leftRightFlag=!0),u+h>u+d&&u-d>h&&(o.missRight=!0,o.missLeft=!1),0>=u-h&&(o.missLeft=!0,o.missRight=!1)}return o},top:function(t,e){var i=Foundation.libs.dropdown,s=i.dirs._base.call(this,t,e);return this.addClass("drop-top"),1==s.missTop&&(s.top=s.top+t.outerHeight()+this.outerHeight(),this.removeClass("drop-top")),1==s.missRight&&(s.left=s.left-this.outerWidth()+t.outerWidth()),(t.outerWidth()<this.outerWidth()||i.small()||this.hasClass(e.mega_menu))&&i.adjust_pip(this,t,e,s),Foundation.rtl?{left:s.left-this.outerWidth()+t.outerWidth(),top:s.top-this.outerHeight()}:{left:s.left,top:s.top-this.outerHeight()}},bottom:function(t,e){var i=Foundation.libs.dropdown,s=i.dirs._base.call(this,t,e);return 1==s.missRight&&(s.left=s.left-this.outerWidth()+t.outerWidth()),(t.outerWidth()<this.outerWidth()||i.small()||this.hasClass(e.mega_menu))&&i.adjust_pip(this,t,e,s),i.rtl?{left:s.left-this.outerWidth()+t.outerWidth(),top:s.top+t.outerHeight()}:{left:s.left,top:s.top+t.outerHeight()}},left:function(t,e){var i=Foundation.libs.dropdown.dirs._base.call(this,t,e);return this.addClass("drop-left"),1==i.missLeft&&(i.left=i.left+this.outerWidth(),i.top=i.top+t.outerHeight(),this.removeClass("drop-left")),{left:i.left-this.outerWidth(),top:i.top}},right:function(t,e){var i=Foundation.libs.dropdown.dirs._base.call(this,t,e);this.addClass("drop-right"),1==i.missRight?(i.left=i.left-this.outerWidth(),i.top=i.top+t.outerHeight(),this.removeClass("drop-right")):i.triggeredRight=!0;var s=Foundation.libs.dropdown;return(t.outerWidth()<this.outerWidth()||s.small()||this.hasClass(e.mega_menu))&&s.adjust_pip(this,t,e,i),{left:i.left+t.outerWidth(),top:i.top}}},adjust_pip:function(t,e,i,s){var n=Foundation.stylesheet,a=8;t.hasClass(i.mega_class)?a=s.left+e.outerWidth()/2-8:this.small()&&(a+=s.left-8),this.rule_idx=n.cssRules.length;var o=".f-dropdown.open:before",r=".f-dropdown.open:after",l="left: "+a+"px;",d="left: "+(a-1)+"px;";1==s.missRight&&(a=t.outerWidth()-23,o=".f-dropdown.open:before",r=".f-dropdown.open:after",l="left: "+a+"px;",d="left: "+(a-1)+"px;"),1==s.triggeredRight&&(o=".f-dropdown.open:before",r=".f-dropdown.open:after",l="left:-12px;",d="left:-14px;"),n.insertRule?(n.insertRule([o,"{",l,"}"].join(" "),this.rule_idx),n.insertRule([r,"{",d,"}"].join(" "),this.rule_idx+1)):(n.addRule(o,l,this.rule_idx),n.addRule(r,d,this.rule_idx+1))},clear_idx:function(){var t=Foundation.stylesheet;"undefined"!=typeof this.rule_idx&&(t.deleteRule(this.rule_idx),t.deleteRule(this.rule_idx),delete this.rule_idx)},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},off:function(){this.S(this.scope).off(".fndtn.dropdown"),this.S("html, body").off(".fndtn.dropdown"),this.S(e).off(".fndtn.dropdown"),this.S("[data-dropdown-content]").off(".fndtn.dropdown")},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,s){"use strict";Foundation.libs.clearing={name:"clearing",version:"5.5.3",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><div class="clearing-touch-label"></div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div><img class="clearing-preload-next" style="display: none" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><img class="clearing-preload-prev" style="display: none" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" />'},close_selectors:".clearing-close, div.clearing-blackout",open_selectors:"",skip_selector:"",touch_label:"",init:!1,locked:!1},init:function(t,e,i){var s=this;Foundation.inherit(this,"throttle image_loaded"),this.bindings(e,i),s.S(this.scope).is("["+this.attr_name()+"]")?this.assemble(s.S("li",this.scope)):s.S("["+this.attr_name()+"]",this.scope).each(function(){s.assemble(s.S("li",this))})},events:function(s){var n=this,a=n.S,o=t(".scroll-container");o.length>0&&(this.scope=o),a(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li "+this.settings.open_selectors,function(t,e,i){var e=e||a(this),i=i||e,s=e.next("li"),o=e.closest("["+n.attr_name()+"]").data(n.attr_name(!0)+"-init"),r=a(t.target);t.preventDefault(),o||(n.init(),o=e.closest("["+n.attr_name()+"]").data(n.attr_name(!0)+"-init")),i.hasClass("visible")&&e[0]===i[0]&&s.length>0&&n.is_open(e)&&(i=s,r=a("img",i)),n.open(r,e,i),n.update_paddles(i)}).on("click.fndtn.clearing",".clearing-main-next",function(t){n.nav(t,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(t){n.nav(t,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(t){Foundation.libs.clearing.close(t,this)}),t(i).on("keydown.fndtn.clearing",function(t){n.keydown(t)}),a(e).off(".clearing").on("resize.fndtn.clearing",function(){n.resize()}),this.swipe_events(s)},swipe_events:function(){var t=this,e=t.S;e(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(t){t.touches||(t=t.originalEvent);var i={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:s};e(this).data("swipe-transition",i),t.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(i){if(i.touches||(i=i.originalEvent),!(i.touches.length>1||i.scale&&1!==i.scale)){var s=e(this).data("swipe-transition");if("undefined"==typeof s&&(s={}),s.delta_x=i.touches[0].pageX-s.start_page_x,Foundation.rtl&&(s.delta_x=-s.delta_x),"undefined"==typeof s.is_scrolling&&(s.is_scrolling=!!(s.is_scrolling||Math.abs(s.delta_x)<Math.abs(i.touches[0].pageY-s.start_page_y))),!s.is_scrolling&&!s.active){i.preventDefault();var n=s.delta_x<0?"next":"prev";s.active=!0,t.nav(i,n)}}}).on("touchend.fndtn.clearing",".visible-img",function(t){e(this).data("swipe-transition",{}),t.stopPropagation()})},assemble:function(e){var i=e.parent();if(!i.parent().hasClass("carousel")){i.after('<div id="foundationClearingHolder"></div>');var s=i.detach(),n="";if(null!=s[0]){n=s[0].outerHTML;var a=this.S("#foundationClearingHolder"),o=i.data(this.attr_name(!0)+"-init"),r={grid:'<div class="carousel">'+n+"</div>",viewing:o.templates.viewing},l='<div class="clearing-assembled"><div>'+r.viewing+r.grid+"</div></div>",d=this.settings.touch_label;Modernizr.touch&&(l=t(l).find(".clearing-touch-label").html(d).end()),a.after(l).remove()}}},open:function(e,s,n){function a(){setTimeout(function(){this.image_loaded(u,function(){1!==u.outerWidth()||p?o.call(this,u):a.call(this)}.bind(this))}.bind(this),100)}function o(e){var i=t(e);i.css("visibility","visible"),i.trigger("imageVisible"),l.css("overflow","hidden"),d.addClass("clearing-blackout"),c.addClass("clearing-container"),h.show(),this.fix_height(n).caption(r.S(".clearing-caption",h),r.S("img",n)).center_and_label(e,f).shift(s,n,function(){n.closest("li").siblings().removeClass("visible"),n.closest("li").addClass("visible")}),h.trigger("opened.fndtn.clearing")}var r=this,l=t(i.body),d=n.closest(".clearing-assembled"),c=r.S("div",d).first(),h=r.S(".visible-img",c),u=r.S("img",h).not(e),f=r.S(".clearing-touch-label",c),p=!1,g={};t("body").on("touchmove",function(t){t.preventDefault()}),u.error(function(){p=!0}),this.locked()||(h.trigger("open.fndtn.clearing"),g=this.load(e),g.interchange?u.attr("data-interchange",g.interchange).foundation("interchange","reflow"):u.attr("src",g.src).attr("data-interchange",""),u.css("visibility","hidden"),a.call(this))},close:function(e,s){e.preventDefault();var n,a,o=function(t){return/blackout/.test(t.selector)?t:t.closest(".clearing-blackout")}(t(s)),r=t(i.body);return s===e.target&&o&&(r.css("overflow",""),n=t("div",o).first(),a=t(".visible-img",n),a.trigger("close.fndtn.clearing"),this.settings.prev_index=0,t("ul["+this.attr_name()+"]",o).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),n.removeClass("clearing-container"),a.hide(),a.trigger("closed.fndtn.clearing")),t("body").off("touchmove"),!1},is_open:function(t){return t.parent().prop("style").length>0},keydown:function(e){var i=t(".clearing-blackout ul["+this.attr_name()+"]"),s=this.rtl?37:39,n=this.rtl?39:37,a=27;e.which===s&&this.go(i,"next"),e.which===n&&this.go(i,"prev"),e.which===a&&this.S("a.clearing-close").trigger("click.fndtn.clearing")},nav:function(e,i){var s=t("ul["+this.attr_name()+"]",".clearing-blackout");e.preventDefault(),this.go(s,i)},resize:function(){var e=t("img",".clearing-blackout .visible-img"),i=t(".clearing-touch-label",".clearing-blackout");e.length&&(this.center_and_label(e,i),e.trigger("resized.fndtn.clearing"))},fix_height:function(t){var e=t.parent().children(),i=this;return e.each(function(){var t=i.S(this),e=t.find("img");t.height()>e.outerHeight()&&t.addClass("fix-height")}).closest("ul").width(100*e.length+"%"),this},update_paddles:function(t){t=t.closest("li");var e=t.closest(".carousel").siblings(".visible-img");t.next().length>0?this.S(".clearing-main-next",e).removeClass("disabled"):this.S(".clearing-main-next",e).addClass("disabled"),t.prev().length>0?this.S(".clearing-main-prev",e).removeClass("disabled"):this.S(".clearing-main-prev",e).addClass("disabled")},center_and_label:function(t,e){return e.css(!this.rtl&&e.length>0?{marginLeft:-(e.outerWidth()/2),marginTop:-(t.outerHeight()/2)-e.outerHeight()-10}:{marginRight:-(e.outerWidth()/2),marginTop:-(t.outerHeight()/2)-e.outerHeight()-10,left:"auto",right:"50%"}),this},load:function(t){var e,i,s;return"A"===t[0].nodeName?(e=t.attr("href"),i=t.data("clearing-interchange")):(s=t.closest("a"),e=s.attr("href"),i=s.data("clearing-interchange")),this.preload(t),{src:e?e:t.attr("src"),interchange:e?i:t.data("clearing-interchange")}},preload:function(t){this.img(t.closest("li").next(),"next").img(t.closest("li").prev(),"prev")},img:function(e,i){if(e.length){var s,n,a,o=t(".clearing-preload-"+i),r=this.S("a",e);r.length?(s=r.attr("href"),n=r.data("clearing-interchange")):(a=this.S("img",e),s=a.attr("src"),n=a.data("clearing-interchange")),n?o.attr("data-interchange",n):(o.attr("src",s),o.attr("data-interchange",""))}return this},caption:function(t,e){var i=e.attr("data-caption");if(i){var s=t.get(0);s.innerHTML=i,t.show()}else t.text("").hide();return this},go:function(t,e){var i=this.S(".visible",t),s=i[e]();this.settings.skip_selector&&0!=s.find(this.settings.skip_selector).length&&(s=s[e]()),s.length&&this.S("img",s).trigger("click.fndtn.clearing",[i,s]).trigger("change.fndtn.clearing")},shift:function(t,e,i){var s,n=e.parent(),a=this.settings.prev_index||e.index(),o=this.direction(n,t,e),r=this.rtl?"right":"left",l=parseInt(n.css("left"),10),d=e.outerWidth(),c={};e.index()===a||/skip/.test(o)?/skip/.test(o)&&(s=e.index()-this.settings.up_count,this.lock(),s>0?(c[r]=-(s*d),n.animate(c,300,this.unlock())):(c[r]=0,n.animate(c,300,this.unlock()))):/left/.test(o)?(this.lock(),c[r]=l+d,n.animate(c,300,this.unlock())):/right/.test(o)&&(this.lock(),c[r]=l-d,n.animate(c,300,this.unlock())),i()},direction:function(t,e,i){var s,n=this.S("li",t),a=n.outerWidth()+n.outerWidth()/4,o=Math.floor(this.S(".clearing-container").outerWidth()/a)-1,r=n.index(i);return this.settings.up_count=o,s=this.adjacent(this.settings.prev_index,r)?r>o&&r>this.settings.prev_index?"right":r>o-1&&r<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=r,s},adjacent:function(t,e){for(var i=e+1;i>=e-1;i--)if(i===t)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing"),this.S(e).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,window,window.document),function(t,e,i,s){"use strict";var n=function(){},a=function(n,a){if(n.hasClass(a.slides_container_class))return this;var d,c,h,u,f,p,g=this,_=n,m=0,v=!1;g.slides=function(){return _.children(a.slide_selector)},g.slides().first().addClass(a.active_slide_class),g.update_slide_number=function(e){a.slide_number&&(c.find("span:first").text(parseInt(e)+1),c.find("span:last").text(g.slides().length)),a.bullets&&(h.children().removeClass(a.bullets_active_class),t(h.children().get(e)).addClass(a.bullets_active_class))},g.update_active_link=function(e){var i=t('[data-orbit-link="'+g.slides().eq(e).attr("data-orbit-slide")+'"]');i.siblings().removeClass(a.bullets_active_class),i.addClass(a.bullets_active_class)},g.build_markup=function(){_.wrap('<div class="'+a.container_class+'"></div>'),d=_.parent(),_.addClass(a.slides_container_class),a.stack_on_small&&d.addClass(a.stack_on_small_class),a.navigation_arrows&&(d.append(t('<a href="#"><span></span></a>').addClass(a.prev_class)),d.append(t('<a href="#"><span></span></a>').addClass(a.next_class))),a.timer&&(u=t("<div>").addClass(a.timer_container_class),u.append("<span>"),u.append(t("<div>").addClass(a.timer_progress_class)),u.addClass(a.timer_paused_class),d.append(u)),a.slide_number&&(c=t("<div>").addClass(a.slide_number_class),c.append("<span></span> "+a.slide_number_text+" <span></span>"),d.append(c)),a.bullets&&(h=t("<ol>").addClass(a.bullets_container_class),d.append(h),h.wrap('<div class="orbit-bullets-container"></div>'),g.slides().each(function(e){var i=t("<li>").attr("data-orbit-slide",e).on("click",g.link_bullet);h.append(i)}))},g._goto=function(e,i){if(e===m)return!1;"object"==typeof p&&p.restart();var s=g.slides(),n="next";if(v=!0,m>e&&(n="prev"),e>=s.length){if(!a.circular)return!1;e=0}else if(0>e){if(!a.circular)return!1;e=s.length-1}var o=t(s.get(m)),r=t(s.get(e));o.css("zIndex",2),o.removeClass(a.active_slide_class),r.css("zIndex",4).addClass(a.active_slide_class),_.trigger("before-slide-change.fndtn.orbit"),a.before_slide_change(),g.update_active_link(e);var l=function(){var t=function(){m=e,v=!1,i===!0&&(p=g.create_timer(),p.start()),g.update_slide_number(m),_.trigger("after-slide-change.fndtn.orbit",[{slide_number:m,total_slides:s.length}]),a.after_slide_change(m,s.length)};_.outerHeight()!=r.outerHeight()&&a.variable_height?_.animate({height:r.outerHeight()},250,"linear",t):t()};if(1===s.length)return l(),!1;var d=function(){"next"===n&&f.next(o,r,l),"prev"===n&&f.prev(o,r,l)};r.outerHeight()>_.outerHeight()&&a.variable_height?_.animate({height:r.outerHeight()},250,"linear",d):d()},g.next=function(t){t.stopImmediatePropagation(),t.preventDefault(),g._goto(m+1)},g.prev=function(t){t.stopImmediatePropagation(),t.preventDefault(),g._goto(m-1)},g.link_custom=function(e){e.preventDefault();var i=t(this).attr("data-orbit-link");if("string"==typeof i&&""!=(i=t.trim(i))){var s=d.find("[data-orbit-slide="+i+"]");-1!=s.index()&&g._goto(s.index())}},g.link_bullet=function(){var e=t(this).attr("data-orbit-slide");if("string"==typeof e&&""!=(e=t.trim(e)))if(isNaN(parseInt(e))){var i=d.find("[data-orbit-slide="+e+"]");-1!=i.index()&&g._goto(i.index()+1)}else g._goto(parseInt(e))},g.timer_callback=function(){g._goto(m+1,!0)},g.compute_dimensions=function(){var e=t(g.slides().get(m)),i=e.outerHeight();a.variable_height||g.slides().each(function(){t(this).outerHeight()>i&&(i=t(this).outerHeight())}),_.height(i)},g.create_timer=function(){var t=new o(d.find("."+a.timer_container_class),a,g.timer_callback);return t},g.stop_timer=function(){"object"==typeof p&&p.stop()},g.toggle_timer=function(){var t=d.find("."+a.timer_container_class);t.hasClass(a.timer_paused_class)?("undefined"==typeof p&&(p=g.create_timer()),p.start()):"object"==typeof p&&p.stop()},g.init=function(){g.build_markup(),a.timer&&(p=g.create_timer(),Foundation.utils.image_loaded(this.slides().children("img"),p.start)),f=new l(a,_),"slide"===a.animation&&(f=new r(a,_)),d.on("click","."+a.next_class,g.next),d.on("click","."+a.prev_class,g.prev),a.next_on_click&&d.on("click","."+a.slides_container_class+" [data-orbit-slide]",g.link_bullet),d.on("click",g.toggle_timer),a.swipe&&d.on("touchstart.fndtn.orbit",function(t){t.touches||(t=t.originalEvent);var e={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:s};d.data("swipe-transition",e),t.stopPropagation()}).on("touchmove.fndtn.orbit",function(t){if(t.touches||(t=t.originalEvent),!(t.touches.length>1||t.scale&&1!==t.scale)){var e=d.data("swipe-transition");if("undefined"==typeof e&&(e={}),e.delta_x=t.touches[0].pageX-e.start_page_x,"undefined"==typeof e.is_scrolling&&(e.is_scrolling=!!(e.is_scrolling||Math.abs(e.delta_x)<Math.abs(t.touches[0].pageY-e.start_page_y))),!e.is_scrolling&&!e.active){t.preventDefault();var i=e.delta_x<0?m+1:m-1;e.active=!0,g._goto(i)}}}).on("touchend.fndtn.orbit",function(t){d.data("swipe-transition",{}),t.stopPropagation()}),d.on("mouseenter.fndtn.orbit",function(){a.timer&&a.pause_on_hover&&g.stop_timer()}).on("mouseleave.fndtn.orbit",function(){a.timer&&a.resume_on_mouseout&&p.start()}),t(i).on("click","[data-orbit-link]",g.link_custom),t(e).on("load resize",g.compute_dimensions),Foundation.utils.image_loaded(this.slides().children("img"),g.compute_dimensions),Foundation.utils.image_loaded(this.slides().children("img"),function(){d.prev("."+a.preloader_class).css("display","none"),g.update_slide_number(0),g.update_active_link(0),_.trigger("ready.fndtn.orbit")})},g.init()},o=function(t,e,i){var s,n,a=this,o=e.timer_speed,r=t.find("."+e.timer_progress_class),l=-1;this.update_progress=function(t){var e=r.clone();e.attr("style",""),e.css("width",t+"%"),r.replaceWith(e),r=e},this.restart=function(){clearTimeout(n),t.addClass(e.timer_paused_class),l=-1,a.update_progress(0)},this.start=function(){return t.hasClass(e.timer_paused_class)?(l=-1===l?o:l,t.removeClass(e.timer_paused_class),s=(new Date).getTime(),r.animate({width:"100%"},l,"linear"),n=setTimeout(function(){a.restart(),i()},l),void t.trigger("timer-started.fndtn.orbit")):!0},this.stop=function(){if(t.hasClass(e.timer_paused_class))return!0;clearTimeout(n),t.addClass(e.timer_paused_class);var i=(new Date).getTime();l-=i-s;var r=100-l/o*100;a.update_progress(r),t.trigger("timer-stopped.fndtn.orbit")}},r=function(e){var i=e.animation_speed,s=1===t("html[dir=rtl]").length,n=s?"marginRight":"marginLeft",a={};a[n]="0%",this.next=function(t,e,s){t.animate({marginLeft:"-100%"},i),e.animate(a,i,function(){t.css(n,"100%"),s()})},this.prev=function(t,e,s){t.animate({marginLeft:"100%"},i),e.css(n,"-100%"),e.animate(a,i,function(){t.css(n,"100%"),s()})}},l=function(e){{var i=e.animation_speed;1===t("html[dir=rtl]").length}this.next=function(t,e,s){e.css({margin:"0%",opacity:"0.01"}),e.animate({opacity:"1"},i,"linear",function(){t.css("margin","100%"),s()})},this.prev=function(t,e,s){e.css({margin:"0%",opacity:"0.01"}),e.animate({opacity:"1"},i,"linear",function(){t.css("margin","100%"),s()})}};Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={name:"orbit",version:"5.5.3",settings:{animation:"slide",timer_speed:1e4,pause_on_hover:!0,resume_on_mouseout:!1,next_on_click:!0,animation_speed:500,stack_on_small:!1,navigation_arrows:!0,slide_number:!0,slide_number_text:"of",container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",preloader_class:"preloader",slide_selector:"*",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning",bullets:!0,circular:!0,timer:!0,variable_height:!1,swipe:!0,before_slide_change:n,after_slide_change:n},init:function(t,e,i){this.bindings(e,i)},events:function(t){var e=new a(this.S(t),this.S(t).data("orbit-init"));this.S(t).data(this.name+"-instance",e)},reflow:function(){var t=this;if(t.S(t.scope).is("[data-orbit]")){var e=t.S(t.scope),i=e.data(t.name+"-instance");i.compute_dimensions()}else t.S("[data-orbit]",t.scope).each(function(e,i){var s=t.S(i),n=(t.data_options(s),s.data(t.name+"-instance"));n.compute_dimensions()})}}}(jQuery,window,window.document),function(t){"use strict";Foundation.libs.offcanvas={name:"offcanvas",version:"5.5.3",settings:{open_method:"move",close_on_click:!1},init:function(t,e,i){this.bindings(e,i)},events:function(){var e=this,i=e.S,s="",n="",a="",o="",r="";"move"===this.settings.open_method?(s="move-",n="right",a="left",o="top",r="bottom"):"overlap_single"===this.settings.open_method?(s="offcanvas-overlap-",n="right",a="left",o="top",r="bottom"):"overlap"===this.settings.open_method&&(s="offcanvas-overlap"),i(this.scope).off(".offcanvas").on("click.fndtn.offcanvas",".left-off-canvas-toggle",function(a){e.click_toggle_class(a,s+n),"overlap"!==e.settings.open_method&&i(".left-submenu").removeClass(s+n),t(".left-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".left-off-canvas-menu a",function(a){var o=e.get_settings(a),r=i(this).parent();!o.close_on_click||r.hasClass("has-submenu")||r.hasClass("back")?i(this).parent().hasClass("has-submenu")?(a.preventDefault(),i(this).siblings(".left-submenu").toggleClass(s+n)):r.hasClass("back")&&(a.preventDefault(),r.parent().removeClass(s+n)):(e.hide.call(e,s+n,e.get_wrapper(a)),r.parent().removeClass(s+n)),t(".left-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".right-off-canvas-toggle",function(n){e.click_toggle_class(n,s+a),"overlap"!==e.settings.open_method&&i(".right-submenu").removeClass(s+a),t(".right-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".right-off-canvas-menu a",function(n){var o=e.get_settings(n),r=i(this).parent();!o.close_on_click||r.hasClass("has-submenu")||r.hasClass("back")?i(this).parent().hasClass("has-submenu")?(n.preventDefault(),i(this).siblings(".right-submenu").toggleClass(s+a)):r.hasClass("back")&&(n.preventDefault(),r.parent().removeClass(s+a)):(e.hide.call(e,s+a,e.get_wrapper(n)),r.parent().removeClass(s+a)),t(".right-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".top-off-canvas-toggle",function(n){e.click_toggle_class(n,s+r),"overlap"!==e.settings.open_method&&i(".top-submenu").removeClass(s+r),t(".top-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".top-off-canvas-menu a",function(n){var a=e.get_settings(n),o=i(this).parent();!a.close_on_click||o.hasClass("has-submenu")||o.hasClass("back")?i(this).parent().hasClass("has-submenu")?(n.preventDefault(),i(this).siblings(".top-submenu").toggleClass(s+r)):o.hasClass("back")&&(n.preventDefault(),o.parent().removeClass(s+r)):(e.hide.call(e,s+r,e.get_wrapper(n)),o.parent().removeClass(s+r)),t(".top-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".bottom-off-canvas-toggle",function(n){e.click_toggle_class(n,s+o),"overlap"!==e.settings.open_method&&i(".bottom-submenu").removeClass(s+o),t(".bottom-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".bottom-off-canvas-menu a",function(n){var a=e.get_settings(n),r=i(this).parent();!a.close_on_click||r.hasClass("has-submenu")||r.hasClass("back")?i(this).parent().hasClass("has-submenu")?(n.preventDefault(),i(this).siblings(".bottom-submenu").toggleClass(s+o)):r.hasClass("back")&&(n.preventDefault(),r.parent().removeClass(s+o)):(e.hide.call(e,s+o,e.get_wrapper(n)),r.parent().removeClass(s+o)),t(".bottom-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".exit-off-canvas",function(o){e.click_remove_class(o,s+a),i(".right-submenu").removeClass(s+a),n&&(e.click_remove_class(o,s+n),i(".left-submenu").removeClass(s+a)),t(".right-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".exit-off-canvas",function(i){e.click_remove_class(i,s+a),t(".left-off-canvas-toggle").attr("aria-expanded","false"),n&&(e.click_remove_class(i,s+n),t(".right-off-canvas-toggle").attr("aria-expanded","false"))}).on("click.fndtn.offcanvas",".exit-off-canvas",function(n){e.click_remove_class(n,s+o),i(".bottom-submenu").removeClass(s+o),r&&(e.click_remove_class(n,s+r),i(".top-submenu").removeClass(s+o)),t(".bottom-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".exit-off-canvas",function(i){e.click_remove_class(i,s+o),t(".top-off-canvas-toggle").attr("aria-expanded","false"),r&&(e.click_remove_class(i,s+r),t(".bottom-off-canvas-toggle").attr("aria-expanded","false"))})},toggle:function(t,e){e=e||this.get_wrapper(),e.is("."+t)?this.hide(t,e):this.show(t,e)},show:function(t,e){e=e||this.get_wrapper(),e.trigger("open.fndtn.offcanvas"),e.addClass(t)},hide:function(t,e){e=e||this.get_wrapper(),e.trigger("close.fndtn.offcanvas"),e.removeClass(t)},click_toggle_class:function(t,e){t.preventDefault();var i=this.get_wrapper(t);this.toggle(e,i)},click_remove_class:function(t,e){t.preventDefault();var i=this.get_wrapper(t);this.hide(e,i)},get_settings:function(t){var e=this.S(t.target).closest("["+this.attr_name()+"]");return e.data(this.attr_name(!0)+"-init")||this.settings},get_wrapper:function(t){var e=this.S(t?t.target:this.scope).closest(".off-canvas-wrap");return 0===e.length&&(e=this.S(".off-canvas-wrap")),e},reflow:function(){}}}(jQuery,window,window.document),function(t){"use strict";Foundation.libs.alert={name:"alert",version:"5.5.3",settings:{callback:function(){}},init:function(t,e,i){this.bindings(e,i)},events:function(){var e=this,i=this.S;t(this.scope).off(".alert").on("click.fndtn.alert","["+this.attr_name()+"] .close",function(t){var s=i(this).closest("["+e.attr_name()+"]"),n=s.data(e.attr_name(!0)+"-init")||e.settings;t.preventDefault(),Modernizr.csstransitions?(s.addClass("alert-close"),s.on("transitionend webkitTransitionEnd oTransitionEnd",function(){i(this).trigger("close.fndtn.alert").remove(),n.callback()})):s.fadeOut(300,function(){i(this).trigger("close.fndtn.alert").remove(),n.callback()})})},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,s){"use strict";function n(t){var e=/fade/i.test(t),i=/pop/i.test(t);return{animate:e||i,pop:i,fade:e}}var a=[];Foundation.libs.reveal={name:"reveal",version:"5.5.3",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:t.noop,bg:t(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,i,s){t.extend(!0,this.settings,i,s),this.bindings(i,s)},events:function(){var t=this,e=t.S;return e(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(i){if(i.preventDefault(),!t.locked){var s=e(this),n=s.data(t.data_attr("reveal-ajax")),a=s.data(t.data_attr("reveal-replace-content"));if(t.locked=!0,"undefined"==typeof n)t.open.call(t,s);else{var o=n===!0?s.attr("href"):n;t.open.call(t,s,{url:o},{replaceContentSel:a})}}}),e(i).on("click.fndtn.reveal",this.close_targets(),function(i){if(i.preventDefault(),!t.locked){var s=e("["+t.attr_name()+"].open").data(t.attr_name(!0)+"-init")||t.settings,n=e(i.target)[0]===e("."+s.bg_class)[0];if(n){if(!s.close_on_background_click)return;i.stopPropagation()}t.locked=!0,t.close.call(t,n?e("["+t.attr_name()+"].open:not(.toback)"):e(this).closest("["+t.attr_name()+"]"))}}),e("["+t.attr_name()+"]",this.scope).length>0?e(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):e(this.scope).on("open.fndtn.reveal","["+t.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+t.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+t.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+t.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+t.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+t.attr_name()+"]",this.close_video),!0},key_up_on:function(){var t=this;return t.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(e){var i=t.S("["+t.attr_name()+"].open"),s=i.data(t.attr_name(!0)+"-init")||t.settings;s&&27===e.which&&s.close_on_esc&&!t.locked&&t.close.call(t,i)}),!0},key_up_off:function(){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(i,n){var o,r=this;i?"undefined"!=typeof i.selector?o=r.S("#"+i.data(r.data_attr("reveal-id"))).first():(o=r.S(this.scope),n=i):o=r.S(this.scope);var l=o.data(r.attr_name(!0)+"-init");if(l=l||this.settings,o.hasClass("open")&&i!==s&&i.attr("data-reveal-id")==o.attr("id"))return r.close(o);if(!o.hasClass("open")){var d=r.S("["+r.attr_name()+"].open");"undefined"==typeof o.data("css-top")&&o.data("css-top",parseInt(o.css("top"),10)).data("offset",this.cache_offset(o)),o.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(o),o.on("open.fndtn.reveal",function(t){"fndtn.reveal"!==t.namespace}),o.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),d.length<1&&this.toggle_bg(o,!0),"string"==typeof n&&(n={url:n});var c=function(){d.length>0&&(l.multiple_opened?r.to_back(d):r.hide(d,l.css.close)),l.multiple_opened&&a.push(o),r.show(o,l.css.open)};if("undefined"!=typeof n&&n.url){var h="undefined"!=typeof n.success?n.success:null;t.extend(n,{success:function(e,i,s){if(t.isFunction(h)){var n=h(e,i,s);"string"==typeof n&&(e=n)}"undefined"!=typeof options&&"undefined"!=typeof options.replaceContentSel?o.find(options.replaceContentSel).html(e):o.html(e),r.S(o).foundation("section","reflow"),r.S(o).children().foundation(),c()}}),l.on_ajax_error!==t.noop&&t.extend(n,{error:l.on_ajax_error}),t.ajax(n)}else c()}r.S(e).trigger("resize")},close:function(e){var e=e&&e.length?e:this.S(this.scope),i=this.S("["+this.attr_name()+"].open"),s=e.data(this.attr_name(!0)+"-init")||this.settings,n=this;if(i.length>0)if(e.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(e),e.trigger("close.fndtn.reveal"),(s.multiple_opened&&1===i.length||!s.multiple_opened||e.length>1)&&(n.toggle_bg(e,!1),n.to_front(e)),s.multiple_opened){var o=e.is(":not(.toback)");n.hide(e,s.css.close,s),o?a.pop():a=t.grep(a,function(t){var i=t[0]===e[0];return i&&n.to_front(e),!i}),a.length>0&&n.to_front(a[a.length-1])}else n.hide(i,s.css.close,s)},close_targets:function(){var t="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?t+", ."+this.settings.bg_class:t},toggle_bg:function(e,i){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=t("<div />",{"class":this.settings.bg_class}).appendTo("body").hide());var n=this.settings.bg.filter(":visible").length>0;i!=n&&((i==s?n:!i)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(i,s){if(s){var a=i.data(this.attr_name(!0)+"-init")||this.settings,o=a.root_element,r=this;if(0===i.parent(o).length){var l=i.wrap('<div style="display: none;" />').parent();i.on("closed.fndtn.reveal.wrapped",function(){i.detach().appendTo(l),i.unwrap().unbind("closed.fndtn.reveal.wrapped")}),i.detach().appendTo(o)}var d=n(a.animation);if(d.animate||(this.locked=!1),d.pop){s.top=t(e).scrollTop()-i.data("offset")+"px";var c={top:t(e).scrollTop()+i.data("css-top")+"px",opacity:1};return setTimeout(function(){return i.css(s).animate(c,a.animation_speed,"linear",function(){r.locked=!1,i.trigger("opened.fndtn.reveal")}).addClass("open")},a.animation_speed/2)}if(s.top=t(e).scrollTop()+i.data("css-top")+"px",d.fade){var c={opacity:1};return setTimeout(function(){return i.css(s).animate(c,a.animation_speed,"linear",function(){r.locked=!1,i.trigger("opened.fndtn.reveal")}).addClass("open")},a.animation_speed/2)}return i.css(s).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var a=this.settings;return n(a.animation).fade?i.fadeIn(a.animation_speed/2):(this.locked=!1,i.show())},to_back:function(t){t.addClass("toback")},to_front:function(t){t.removeClass("toback")},hide:function(i,s){if(s){var a=i.data(this.attr_name(!0)+"-init"),o=this;a=a||this.settings;var r=n(a.animation);if(r.animate||(this.locked=!1),r.pop){var l={top:-t(e).scrollTop()-i.data("offset")+"px",opacity:0};return setTimeout(function(){return i.animate(l,a.animation_speed,"linear",function(){o.locked=!1,i.css(s).trigger("closed.fndtn.reveal")}).removeClass("open")},a.animation_speed/2)}if(r.fade){var l={opacity:0};return setTimeout(function(){return i.animate(l,a.animation_speed,"linear",function(){o.locked=!1,i.css(s).trigger("closed.fndtn.reveal")}).removeClass("open")},a.animation_speed/2)}return i.hide().css(s).removeClass("open").trigger("closed.fndtn.reveal")}var a=this.settings;return n(a.animation).fade?i.fadeOut(a.animation_speed/2):i.hide()},close_video:function(e){var i=t(".flex-video",e.target),s=t("iframe",i);s.length>0&&(s.attr("data-src",s[0].src),s.attr("src",s.attr("src")),i.hide())},open_video:function(e){var i=t(".flex-video",e.target),n=i.find("iframe");if(n.length>0){var a=n.attr("data-src");if("string"==typeof a)n[0].src=n.attr("data-src");else{var o=n[0].src;n[0].src=s,n[0].src=o}i.show()}},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},cache_offset:function(t){var e=t.show().height()+parseInt(t.css("top"),10)+t.scrollY;return t.hide(),e},off:function(){t(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(t,e){"use strict";Foundation.libs.interchange={name:"interchange",version:"5.5.3",cache:{},images_loaded:!1,nodes_loaded:!1,settings:{load_attr:"interchange",named_queries:{"default":"only screen",small:Foundation.media_queries.small,"small-only":Foundation.media_queries["small-only"],medium:Foundation.media_queries.medium,"medium-only":Foundation.media_queries["medium-only"],large:Foundation.media_queries.large,"large-only":Foundation.media_queries["large-only"],xlarge:Foundation.media_queries.xlarge,"xlarge-only":Foundation.media_queries["xlarge-only"],xxlarge:Foundation.media_queries.xxlarge,landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(e,i,s){if(null!==e&&/IMG/.test(e[0].nodeName)){var n=t.each(e,function(){this.src=i});if(new RegExp(i,"i").test(n))return;return e.attr("src",i),s(e[0].src)}var a=e.data(this.data_attr+"-last-path"),o=this;if(a!=i)return/\.(gif|jpg|jpeg|tiff|png)([?#].*)?/i.test(i)?(t(e).css("background-image","url("+i+")"),e.data("interchange-last-path",i),s(i)):t.get(i,function(t){e.html(t),e.data(o.data_attr+"-last-path",i),s()})}}},init:function(e,i,s){Foundation.inherit(this,"throttle random_str"),this.data_attr=this.set_data_attr(),t.extend(!0,this.settings,i,s),this.bindings(i,s),this.reflow()},get_media_hash:function(){var t="";for(var e in this.settings.named_queries)t+=matchMedia(this.settings.named_queries[e]).matches.toString();return t},events:function(){var i,s=this;return t(e).off(".interchange").on("resize.fndtn.interchange",s.throttle(function(){var t=s.get_media_hash();t!==i&&s.resize(),i=t},50)),this},resize:function(){var e=this.cache;if(!this.images_loaded||!this.nodes_loaded)return void setTimeout(t.proxy(this.resize,this),50);for(var i in e)if(e.hasOwnProperty(i)){var s=this.results(i,e[i]);s&&this.settings.directives[s.scenario[1]].call(this,s.el,s.scenario[0],function(t){if(arguments[0]instanceof Array)var e=arguments[0];else var e=Array.prototype.slice.call(arguments,0);return function(){t.el.trigger(t.scenario[1],e)}}(s))}},results:function(t,e){var i=e.length;if(i>0)for(var s=this.S("["+this.add_namespace("data-uuid")+'="'+t+'"]');i--;){var n,a=e[i][2];if(n=matchMedia(this.settings.named_queries.hasOwnProperty(a)?this.settings.named_queries[a]:a),n.matches)return{el:s,scenario:e[i]}}return!1},load:function(t,e){return("undefined"==typeof this["cached_"+t]||e)&&this["update_"+t](),this["cached_"+t]},update_images:function(){var t=this.S("img["+this.data_attr+"]"),e=t.length,i=e,s=0,n=this.data_attr;for(this.cache={},this.cached_images=[],this.images_loaded=0===e;i--;){if(s++,t[i]){var a=t[i].getAttribute(n)||"";a.length>0&&this.cached_images.push(t[i])}s===e&&(this.images_loaded=!0,this.enhance("images"))}return this},update_nodes:function(){var t=this.S("["+this.data_attr+"]").not("img"),e=t.length,i=e,s=0,n=this.data_attr;for(this.cached_nodes=[],this.nodes_loaded=0===e;i--;){s++;var a=t[i].getAttribute(n)||"";a.length>0&&this.cached_nodes.push(t[i]),s===e&&(this.nodes_loaded=!0,this.enhance("nodes"))}return this},enhance:function(i){for(var s=this["cached_"+i].length;s--;)this.object(t(this["cached_"+i][s]));return t(e).trigger("resize.fndtn.interchange")},convert_directive:function(t){var e=this.trim(t);return e.length>0?e:"replace"},parse_scenario:function(t){var e=t[0].match(/(.+),\s*(\w+)\s*$/),i=t[1].match(/(.*)\)/);if(e)var s=e[1],n=e[2];else var a=t[0].split(/,\s*$/),s=a[0],n="";return[this.trim(s),this.convert_directive(n),this.trim(i[1])]},object:function(t){var e=this.parse_data_attr(t),i=[],s=e.length;if(s>0)for(;s--;){var n=e[s].split(/,\s?\(/);if(n.length>1){var a=this.parse_scenario(n);i.push(a)}}return this.store(t,i)},store:function(t,e){var i=this.random_str(),s=t.data(this.add_namespace("uuid",!0));return this.cache[s]?this.cache[s]:(t.attr(this.add_namespace("data-uuid"),i),this.cache[i]=e)},trim:function(e){return"string"==typeof e?t.trim(e):e},set_data_attr:function(t){return t?this.namespace.length>0?this.namespace+"-"+this.settings.load_attr:this.settings.load_attr:this.namespace.length>0?"data-"+this.namespace+"-"+this.settings.load_attr:"data-"+this.settings.load_attr},parse_data_attr:function(t){for(var e=t.attr(this.attr_name()).split(/\[(.*?)\]/),i=e.length,s=[];i--;)e[i].replace(/[\W\d]+/,"").length>4&&s.push(e[i]);return s},reflow:function(){this.load("images",!0),this.load("nodes",!0)}}}(jQuery,window,window.document),function(t,e){"use strict";Foundation.libs["magellan-expedition"]={name:"magellan-expedition",version:"5.5.3",settings:{active_class:"active",threshold:0,destination_threshold:20,throttle_delay:30,fixed_top:0,offset_by_height:!0,duration:700,easing:"swing"},init:function(t,e,i){Foundation.inherit(this,"throttle"),this.bindings(e,i)},events:function(){var e=this,i=e.S,s=e.settings;e.set_expedition_position(),i(e.scope).off(".magellan").on("click.fndtn.magellan","["+e.add_namespace("data-magellan-arrival")+"] a[href*=#]",function(i){var s=this.hostname===location.hostname||!this.hostname,n=e.filterPathname(location.pathname)===e.filterPathname(this.pathname),a=this.hash.replace(/(:|\.|\/)/g,"\\$1"),o=this;if(s&&n&&a){i.preventDefault();var r=t(this).closest("["+e.attr_name()+"]"),l=r.data("magellan-expedition-init"),d=this.hash.split("#").join(""),c=t('a[name="'+d+'"]');0===c.length&&(c=t("#"+d));var h=c.offset().top-l.destination_threshold+1;l.offset_by_height&&(h-=r.outerHeight()),t("html, body").stop().animate({scrollTop:h},l.duration,l.easing,function(){history.pushState?history.pushState(null,null,o.pathname+o.search+"#"+d):location.hash=o.pathname+o.search+"#"+d})}}).on("scroll.fndtn.magellan",e.throttle(this.check_for_arrivals.bind(this),s.throttle_delay))},check_for_arrivals:function(){var t=this;t.update_arrivals(),t.update_expedition_positions()},set_expedition_position:function(){var e=this;t("["+this.attr_name()+"=fixed]",e.scope).each(function(){var i,s,n=t(this),a=n.data("magellan-expedition-init"),o=n.attr("styles");n.attr("style",""),i=n.offset().top+a.threshold,s=parseInt(n.data("magellan-fixed-top")),isNaN(s)||(e.settings.fixed_top=s),n.data(e.data_attr("magellan-top-offset"),i),n.attr("style",o)})},update_expedition_positions:function(){var i=this,s=t(e).scrollTop();t("["+this.attr_name()+"=fixed]",i.scope).each(function(){var e=t(this),n=e.data("magellan-expedition-init"),a=e.attr("style"),o=e.data("magellan-top-offset");if(s+i.settings.fixed_top>=o){var r=e.prev("["+i.add_namespace("data-magellan-expedition-clone")+"]");0===r.length&&(r=e.clone(),r.removeAttr(i.attr_name()),r.attr(i.add_namespace("data-magellan-expedition-clone"),""),e.before(r)),e.css({position:"fixed",top:n.fixed_top}).addClass("fixed")}else e.prev("["+i.add_namespace("data-magellan-expedition-clone")+"]").remove(),e.attr("style",a).css("position","").css("top","").removeClass("fixed")})},update_arrivals:function(){var i=this,s=t(e).scrollTop();t("["+this.attr_name()+"]",i.scope).each(function(){var e=t(this),n=e.data(i.attr_name(!0)+"-init"),a=i.offsets(e,s),o=e.find("["+i.add_namespace("data-magellan-arrival")+"]"),r=!1;a.each(function(t,s){if(s.viewport_offset>=s.top_offset){var a=e.find("["+i.add_namespace("data-magellan-arrival")+"]");return a.not(s.arrival).removeClass(n.active_class),s.arrival.addClass(n.active_class),r=!0,!0}}),r||o.removeClass(n.active_class)})},offsets:function(e,i){var s=this,n=e.data(s.attr_name(!0)+"-init"),a=i;return e.find("["+s.add_namespace("data-magellan-arrival")+"]").map(function(){var i=t(this).data(s.data_attr("magellan-arrival")),o=t("["+s.add_namespace("data-magellan-destination")+"="+i+"]");if(o.length>0){var r=o.offset().top-n.destination_threshold;return n.offset_by_height&&(r-=e.outerHeight()),r=Math.floor(r),{destination:o,arrival:t(this),top_offset:r,viewport_offset:a}}}).sort(function(t,e){return t.top_offset<e.top_offset?-1:t.top_offset>e.top_offset?1:0})},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},off:function(){this.S(this.scope).off(".magellan"),this.S(e).off(".magellan")},filterPathname:function(t){return t=t||"",t.replace(/^\//,"").replace(/(?:index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},reflow:function(){var e=this;t("["+e.add_namespace("data-magellan-expedition-clone")+"]",e.scope).remove()}}}(jQuery,window,window.document),function(t,e){"use strict";Foundation.libs.accordion={name:"accordion",version:"5.5.3",settings:{content_class:"content",active_class:"active",multi_expand:!1,toggleable:!0,callback:function(){}},init:function(t,e,i){this.bindings(e,i)},events:function(e){var i=this,s=this.S;i.create(this.S(e)),s(this.scope).off(".fndtn.accordion").on("click.fndtn.accordion","["+this.attr_name()+"] > dd > a, ["+this.attr_name()+"] > li > a",function(e){var n=s(this).closest("["+i.attr_name()+"]"),a=i.attr_name()+"="+n.attr(i.attr_name()),o=n.data(i.attr_name(!0)+"-init")||i.settings,r=s("#"+this.href.split("#")[1]),l=t("> dd, > li",n),d=l.children("."+o.content_class),c=d.filter("."+o.active_class);return e.preventDefault(),n.attr(i.attr_name())&&(d=d.add("["+a+"] dd > ."+o.content_class+", ["+a+"] li > ."+o.content_class),l=l.add("["+a+"] dd, ["+a+"] li")),o.toggleable&&r.is(c)?(r.parent("dd, li").toggleClass(o.active_class,!1),r.toggleClass(o.active_class,!1),s(this).attr("aria-expanded",function(t,e){return"true"===e?"false":"true"}),o.callback(r),r.triggerHandler("toggled",[n]),void n.triggerHandler("toggled",[r])):(o.multi_expand||(d.removeClass(o.active_class),l.removeClass(o.active_class),l.children("a").attr("aria-expanded","false")),r.addClass(o.active_class).parent().addClass(o.active_class),o.callback(r),r.triggerHandler("toggled",[n]),n.triggerHandler("toggled",[r]),void s(this).attr("aria-expanded","true"))})},create:function(e){var i=this,s=e,n=t("> .accordion-navigation",s),a=s.data(i.attr_name(!0)+"-init")||i.settings;n.children("a").attr("aria-expanded","false"),n.has("."+a.content_class+"."+a.active_class).addClass(a.active_class).children("a").attr("aria-expanded","true"),a.multi_expand&&e.attr("aria-multiselectable","true")},toggle:function(t){var t="undefined"!=typeof t?t:{},i="undefined"!=typeof t.selector?t.selector:"",s="undefined"!=typeof t.toggle_state?t.toggle_state:"",n="undefined"!=typeof t.$accordion?t.$accordion:this.S(this.scope).closest("["+this.attr_name()+"]"),a=n.find("> dd"+i+", > li"+i);if(a.length<1)return e.console&&console.error("Selection not found.",i),!1;var o=this.S,r=this.settings.active_class;a.each(function(){var t=o(this),e=t.hasClass(r);(e&&"close"===s||!e&&"open"===s||""===s)&&t.find("> a").trigger("click.fndtn.accordion")})},open:function(t){var t="undefined"!=typeof t?t:{};t.toggle_state="open",this.toggle(t)},close:function(t){var t="undefined"!=typeof t?t:{};t.toggle_state="close",this.toggle(t)},off:function(){},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i){"use strict";Foundation.libs.topbar={name:"topbar",version:"5.5.3",settings:{index:0,start_offset:0,sticky_class:"sticky",custom_back_text:!0,back_text:"Back",mobile_show_parent_link:!0,is_hover:!0,scrolltop:!0,sticky_on:"all",dropdown_autoclose:!0},init:function(e,i,s){Foundation.inherit(this,"add_custom_rule register_media throttle");var n=this;n.register_media("topbar","foundation-mq-topbar"),this.bindings(i,s),n.S("["+this.attr_name()+"]",this.scope).each(function(){{var e=t(this),i=e.data(n.attr_name(!0)+"-init");n.S("section, .top-bar-section",this)}e.data("index",0);var s=e.parent();s.hasClass("fixed")||n.is_sticky(e,s,i)?(n.settings.sticky_class=i.sticky_class,n.settings.sticky_topbar=e,e.data("height",s.outerHeight()),e.data("stickyoffset",s.offset().top)):e.data("height",e.outerHeight()),i.assembled||n.assemble(e),i.is_hover?n.S(".has-dropdown",e).addClass("not-click"):n.S(".has-dropdown",e).removeClass("not-click"),n.add_custom_rule(".f-topbar-fixed { padding-top: "+e.data("height")+"px }"),s.hasClass("fixed")&&n.S("body").addClass("f-topbar-fixed")})},is_sticky:function(t,e,i){var s=e.hasClass(i.sticky_class),n=matchMedia(Foundation.media_queries.small).matches,a=matchMedia(Foundation.media_queries.medium).matches,o=matchMedia(Foundation.media_queries.large).matches;return s&&"all"===i.sticky_on?!0:s&&this.small()&&-1!==i.sticky_on.indexOf("small")&&n&&!a&&!o?!0:s&&this.medium()&&-1!==i.sticky_on.indexOf("medium")&&n&&a&&!o?!0:s&&this.large()&&-1!==i.sticky_on.indexOf("large")&&n&&a&&o?!0:!1},toggle:function(i){var s,n=this;s=i?n.S(i).closest("["+this.attr_name()+"]"):n.S("["+this.attr_name()+"]");var a=s.data(this.attr_name(!0)+"-init"),o=n.S("section, .top-bar-section",s);n.breakpoint()&&(n.rtl?(o.css({right:"0%"}),t(">.name",o).css({right:"100%"})):(o.css({left:"0%"}),t(">.name",o).css({left:"100%"})),n.S("li.moved",o).removeClass("moved"),s.data("index",0),s.toggleClass("expanded").css("height","")),a.scrolltop?s.hasClass("expanded")?s.parent().hasClass("fixed")&&(a.scrolltop?(s.parent().removeClass("fixed"),s.addClass("fixed"),n.S("body").removeClass("f-topbar-fixed"),e.scrollTo(0,0)):s.parent().removeClass("expanded")):s.hasClass("fixed")&&(s.parent().addClass("fixed"),s.removeClass("fixed"),n.S("body").addClass("f-topbar-fixed")):(n.is_sticky(s,s.parent(),a)&&s.parent().addClass("fixed"),s.parent().hasClass("fixed")&&(s.hasClass("expanded")?(s.addClass("fixed"),s.parent().addClass("expanded"),n.S("body").addClass("f-topbar-fixed")):(s.removeClass("fixed"),s.parent().removeClass("expanded"),n.update_sticky_positioning())))},timer:null,events:function(){var i=this,s=this.S;s(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(t){t.preventDefault(),i.toggle(this)}).on("click.fndtn.topbar contextmenu.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(){var e=t(this).closest("li"),s=e.closest("["+i.attr_name()+"]"),n=s.data(i.attr_name(!0)+"-init");if(n.dropdown_autoclose&&n.is_hover){var a=t(this).closest(".hover");a.removeClass("hover")}!i.breakpoint()||e.hasClass("back")||e.hasClass("has-dropdown")||i.toggle()}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(e){var n=s(this),a=s(e.target),o=n.closest("["+i.attr_name()+"]"),r=o.data(i.attr_name(!0)+"-init");return a.data("revealId")?void i.toggle():void(i.breakpoint()||(!r.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),n.hasClass("hover")?(n.removeClass("hover").find("li").removeClass("hover"),n.parents("li.hover").removeClass("hover")):(n.addClass("hover"),t(n).siblings().removeClass("hover"),"A"===a[0].nodeName&&a.parent().hasClass("has-dropdown")&&e.preventDefault())))}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(t){if(i.breakpoint()){t.preventDefault();var e=s(this),n=e.closest("["+i.attr_name()+"]"),a=n.find("section, .top-bar-section"),o=(e.next(".dropdown").outerHeight(),e.closest("li"));n.data("index",n.data("index")+1),o.addClass("moved"),i.rtl?(a.css({right:-(100*n.data("index"))+"%"}),a.find(">.name").css({right:100*n.data("index")+"%"})):(a.css({left:-(100*n.data("index"))+"%"}),a.find(">.name").css({left:100*n.data("index")+"%"})),n.css("height",e.siblings("ul").outerHeight(!0)+n.data("height"))}}),s(e).off(".topbar").on("resize.fndtn.topbar",i.throttle(function(){i.resize.call(i)},50)).trigger("resize.fndtn.topbar").load(function(){s(this).trigger("resize.fndtn.topbar")}),s("body").off(".topbar").on("click.fndtn.topbar",function(t){var e=s(t.target).closest("li").closest("li.hover");e.length>0||s("["+i.attr_name()+"] li.hover").removeClass("hover")}),s(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(t){t.preventDefault();var e=s(this),n=e.closest("["+i.attr_name()+"]"),a=n.find("section, .top-bar-section"),o=(n.data(i.attr_name(!0)+"-init"),e.closest("li.moved")),r=o.parent();n.data("index",n.data("index")-1),i.rtl?(a.css({right:-(100*n.data("index"))+"%"}),a.find(">.name").css({right:100*n.data("index")+"%"})):(a.css({left:-(100*n.data("index"))+"%"}),a.find(">.name").css({left:100*n.data("index")+"%"})),0===n.data("index")?n.css("height",""):n.css("height",r.outerHeight(!0)+n.data("height")),setTimeout(function(){o.removeClass("moved")},300)}),s(this.scope).find(".dropdown a").focus(function(){t(this).parents(".has-dropdown").addClass("hover")}).blur(function(){t(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var t=this;t.S("["+this.attr_name()+"]").each(function(){var e,s=t.S(this),n=s.data(t.attr_name(!0)+"-init"),a=s.parent("."+t.settings.sticky_class);if(!t.breakpoint()){var o=s.hasClass("expanded");s.css("height","").removeClass("expanded").find("li").removeClass("hover"),o&&t.toggle(s)}t.is_sticky(s,a,n)&&(a.hasClass("fixed")?(a.removeClass("fixed"),e=a.offset().top,t.S(i.body).hasClass("f-topbar-fixed")&&(e-=s.data("height")),s.data("stickyoffset",e),a.addClass("fixed")):(e=a.offset().top,s.data("stickyoffset",e)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(e){var i=this,s=e.data(this.attr_name(!0)+"-init"),n=i.S("section, .top-bar-section",e);n.detach(),i.S(".has-dropdown>a",n).each(function(){var e,n=i.S(this),a=n.siblings(".dropdown"),o=n.attr("href");a.find(".title.back").length||(e=t(1==s.mobile_show_parent_link&&o?'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link hide-for-medium-up"><a class="parent-link js-generated" href="'+o+'">'+n.html()+"</a></li>":'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>'),t("h5>a",e).html(1==s.custom_back_text?s.back_text:"&laquo; "+n.html()),a.prepend(e))}),n.appendTo(e),this.sticky(),this.assembled(e)},assembled:function(e){e.data(this.attr_name(!0),t.extend({},e.data(this.attr_name(!0)),{assembled:!0}))},height:function(e){var i=0,s=this;return t("> li",e).each(function(){i+=s.S(this).outerHeight(!0)}),i},sticky:function(){var t=this;this.S(e).on("scroll",function(){t.update_sticky_positioning()})},update_sticky_positioning:function(){var t="."+this.settings.sticky_class,i=this.S(e),s=this;if(s.settings.sticky_topbar&&s.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var n=this.settings.sticky_topbar.data("stickyoffset")+this.settings.start_offset;s.S(t).hasClass("expanded")||(i.scrollTop()>n?s.S(t).hasClass("fixed")||(s.S(t).addClass("fixed"),s.S("body").addClass("f-topbar-fixed")):i.scrollTop()<=n&&s.S(t).hasClass("fixed")&&(s.S(t).removeClass("fixed"),s.S("body").removeClass("f-topbar-fixed")))}},off:function(){this.S(this.scope).off(".fndtn.topbar"),this.S(e).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,s){"use strict";Foundation.libs.tab={name:"tab",version:"5.5.3",settings:{active_class:"active",callback:function(){},deep_linking:!1,scroll_to_content:!0,is_hover:!1},default_tab_hashes:[],init:function(t,e,i){var s=this,n=this.S;n("["+this.attr_name()+"] > .active > a",this.scope).each(function(){s.default_tab_hashes.push(this.hash)}),this.bindings(e,i),this.handle_location_hash_change()},events:function(){var t=this,i=this.S,s=function(e,s){var n=i(s).closest("["+t.attr_name()+"]").data(t.attr_name(!0)+"-init");if(!n.is_hover||Modernizr.touch){var a=e.keyCode||e.which;9!==a&&(e.preventDefault(),e.stopPropagation()),t.toggle_active_tab(i(s).parent())}};i(this.scope).off(".tab").on("keydown.fndtn.tab","["+this.attr_name()+"] > * > a",function(t){var e=t.keyCode||t.which;if(13===e||32===e){var i=this;s(t,i)}}).on("click.fndtn.tab","["+this.attr_name()+"] > * > a",function(t){var e=this;s(t,e)}).on("mouseenter.fndtn.tab","["+this.attr_name()+"] > * > a",function(){var e=i(this).closest("["+t.attr_name()+"]").data(t.attr_name(!0)+"-init");e.is_hover&&t.toggle_active_tab(i(this).parent())}),i(e).on("hashchange.fndtn.tab",function(e){e.preventDefault(),t.handle_location_hash_change()})},handle_location_hash_change:function(){var e=this,i=this.S;i("["+this.attr_name()+"]",this.scope).each(function(){var n=i(this).data(e.attr_name(!0)+"-init");if(n.deep_linking){var a;if(a=n.scroll_to_content?e.scope.location.hash:e.scope.location.hash.replace("fndtn-",""),""!=a){var o=i(a);if(o.hasClass("content")&&o.parent().hasClass("tabs-content"))e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href="+a+"]").parent());else{var r=o.closest(".content").attr("id");r!=s&&e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href=#"+r+"]").parent(),a)}}else for(var l=0;l<e.default_tab_hashes.length;l++)e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href="+e.default_tab_hashes[l]+"]").parent())}})},toggle_active_tab:function(n,a){var o=this,r=o.S,l=n.closest("["+this.attr_name()+"]"),d=n.find("a"),c=n.children("a").first(),h="#"+c.attr("href").split("#")[1],u=r(h),f=n.siblings(),p=l.data(this.attr_name(!0)+"-init"),g=function(e){var s,n=t(this),a=t(this).parents("li").prev().children('[role="tab"]'),o=t(this).parents("li").next().children('[role="tab"]');switch(e.keyCode){case 37:s=a;break;case 39:s=o;break;default:s=!1}s.length&&(n.attr({tabindex:"-1","aria-selected":null}),s.attr({tabindex:"0","aria-selected":!0}).focus()),t('[role="tabpanel"]').attr("aria-hidden","true"),t("#"+t(i.activeElement).attr("href").substring(1)).attr("aria-hidden",null)},_=function(t){var i=p.scroll_to_content?o.default_tab_hashes[0]:"fndtn-"+o.default_tab_hashes[0].replace("#","");(t!==i||e.location.hash)&&(e.location.hash=t)};c.data("tab-content")&&(h="#"+c.data("tab-content").split("#")[1],u=r(h)),p.deep_linking&&(p.scroll_to_content?(_(a||h),a==s||a==h?n.parent()[0].scrollIntoView():r(h)[0].scrollIntoView()):_(a!=s?"fndtn-"+a.replace("#",""):"fndtn-"+h.replace("#",""))),n.addClass(p.active_class).triggerHandler("opened"),d.attr({"aria-selected":"true",tabindex:0}),f.removeClass(p.active_class),f.find("a").attr({"aria-selected":"false"}),u.siblings().removeClass(p.active_class).attr({"aria-hidden":"true"}),u.addClass(p.active_class).attr("aria-hidden","false").removeAttr("tabindex"),p.callback(n),u.triggerHandler("toggled",[u]),l.triggerHandler("toggled",[n]),d.off("keydown").on("keydown",g)},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},off:function(){},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i){"use strict";Foundation.libs.abide={name:"abide",version:"5.5.3",settings:{live_validate:!0,validate_on_blur:!0,focus_on_invalid:!0,error_labels:!0,error_class:"error",timeout:1e3,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^(https?|ftp|file|ssh):\/\/([-;:&=\+\$,\w]+@{1})?([-A-Za-z0-9\.]+)+:?(\d+)?((\/[-\+~%\/\.\w]+)?\??([-\+=&;%@\.\w]+)?#?([\w]+)?)?/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(t){var e=i.getElementById(t.getAttribute(this.add_namespace("data-equalto"))).value,s=t.value,n=e===s;return n}}},timer:null,init:function(t,e,i){this.bindings(e,i)},events:function(e){function i(t,e){clearTimeout(s.timer),s.timer=setTimeout(function(){s.validate([t],e)}.bind(t),a.timeout)}var s=this,n=s.S(e).attr("novalidate","novalidate"),a=n.data(this.attr_name(!0)+"-init")||{};this.invalid_attr=this.add_namespace("data-invalid"),n.off(".abide").on("submit.fndtn.abide",function(t){var e=/ajax/i.test(s.S(this).attr(s.attr_name()));return s.validate(s.S(this).find("input, textarea, select").not(":hidden, [data-abide-ignore]").get(),t,e)}).on("validate.fndtn.abide",function(t){"manual"===a.validate_on&&s.validate([t.target],t)}).on("reset",function(e){return s.reset(t(this),e)}).find("input, textarea, select").not(":hidden, [data-abide-ignore]").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(t){var e=this.getAttribute("id"),s=n.find('[data-equalto="'+e+'"]');a.validate_on_blur&&a.validate_on_blur===!0&&i(this,t),"undefined"!=typeof s.get(0)&&s.val().length&&i(s.get(0),t),"change"===a.validate_on&&i(this,t)}).on("keydown.fndtn.abide",function(t){var e=this.getAttribute("id"),s=n.find('[data-equalto="'+e+'"]');a.live_validate&&a.live_validate===!0&&9!=t.which&&i(this,t),"undefined"!=typeof s.get(0)&&s.val().length&&i(s.get(0),t),"tab"===a.validate_on&&9===t.which?i(this,t):"change"===a.validate_on&&i(this,t)}).on("focus",function(e){navigator.userAgent.match(/iPad|iPhone|Android|BlackBerry|Windows Phone|webOS/i)&&t("html, body").animate({scrollTop:t(e.target).offset().top},100)})},reset:function(e){var i=this;e.removeAttr(i.invalid_attr),t("["+i.invalid_attr+"]",e).removeAttr(i.invalid_attr),t("."+i.settings.error_class,e).not("small").removeClass(i.settings.error_class),t(":input",e).not(":button, :submit, :reset, :hidden, [data-abide-ignore]").val("").removeAttr(i.invalid_attr)},validate:function(t,e,i){for(var s=this.parse_patterns(t),n=s.length,a=this.S(t[0]).closest("form"),o=/submit/.test(e.type),r=0;n>r;r++)if(!s[r]&&(o||i))return this.settings.focus_on_invalid&&t[r].focus(),a.trigger("invalid.fndtn.abide"),this.S(t[r]).closest("form").attr(this.invalid_attr,""),!1;return(o||i)&&a.trigger("valid.fndtn.abide"),a.removeAttr(this.invalid_attr),i?!1:!0},parse_patterns:function(t){for(var e=t.length,i=[];e--;)i.push(this.pattern(t[e]));return this.check_validation_and_apply_styles(i)},pattern:function(t){var e=t.getAttribute("type"),i="string"==typeof t.getAttribute("required"),s=t.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(s)&&s.length>0?[t,this.settings.patterns[s],i]:s.length>0?[t,new RegExp(s),i]:this.settings.patterns.hasOwnProperty(e)?[t,this.settings.patterns[e],i]:(s=/.*/,[t,s,i])},check_validation_and_apply_styles:function(e){var i=e.length,s=[];if(0==i)return s;var n=this.S(e[0][0]).closest("[data-"+this.attr_name(!0)+"]");for(n.data(this.attr_name(!0)+"-init")||{};i--;){var a,o,r=e[i][0],l=e[i][2],d=r.value.trim(),c=this.S(r).parent(),h=r.getAttribute(this.add_namespace("data-abide-validator")),u="radio"===r.type,f="checkbox"===r.type,p=this.S('label[for="'+r.getAttribute("id")+'"]'),g=l?r.value.length>0:!0,_=[];if(r.getAttribute(this.add_namespace("data-equalto"))&&(h="equalTo"),a=c.is("label")?c.parent():c,u&&l)_.push(this.valid_radio(r,l));else if(f&&l)_.push(this.valid_checkbox(r,l));else if(h){for(var m=h.split(" "),v=!0,b=!0,x=0;x<m.length;x++)o=this.settings.validators[m[x]].apply(this,[r,l,a]),_.push(o),b=o&&v,v=o;b?(this.S(r).removeAttr(this.invalid_attr),a.removeClass("error"),p.length>0&&this.settings.error_labels&&p.removeClass(this.settings.error_class).removeAttr("role"),t(r).triggerHandler("valid")):(this.S(r).attr(this.invalid_attr,""),a.addClass("error"),p.length>0&&this.settings.error_labels&&p.addClass(this.settings.error_class).attr("role","alert"),t(r).triggerHandler("invalid"))}else if(_.push(e[i][1].test(d)&&g||!l&&r.value.length<1||t(r).attr("disabled")?!0:!1),_=[_.every(function(t){return t})],_[0])this.S(r).removeAttr(this.invalid_attr),r.setAttribute("aria-invalid","false"),r.removeAttribute("aria-describedby"),a.removeClass(this.settings.error_class),p.length>0&&this.settings.error_labels&&p.removeClass(this.settings.error_class).removeAttr("role"),t(r).triggerHandler("valid");else{this.S(r).attr(this.invalid_attr,""),r.setAttribute("aria-invalid","true");var y=a.find("small."+this.settings.error_class,"span."+this.settings.error_class),w=y.length>0?y[0].id:"";w.length>0&&r.setAttribute("aria-describedby",w),a.addClass(this.settings.error_class),p.length>0&&this.settings.error_labels&&p.addClass(this.settings.error_class).attr("role","alert"),t(r).triggerHandler("invalid")}s=s.concat(_)}return s},valid_checkbox:function(e,i){var e=this.S(e),s=e.is(":checked")||!i||e.get(0).getAttribute("disabled");return s?(e.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class),t(e).triggerHandler("valid")):(e.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),t(e).triggerHandler("invalid")),s},valid_radio:function(e){for(var i=e.getAttribute("name"),s=this.S(e).closest("[data-"+this.attr_name(!0)+"]").find("[name='"+i+"']"),n=s.length,a=!1,o=!1,r=0;n>r;r++)s[r].getAttribute("disabled")?(o=!0,a=!0):s[r].checked?a=!0:o&&(a=!1);for(var r=0;n>r;r++)a?(this.S(s[r]).removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class),t(s[r]).triggerHandler("valid")):(this.S(s[r]).attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),t(s[r]).triggerHandler("invalid"));return a},valid_equal:function(t,e,s){var n=i.getElementById(t.getAttribute(this.add_namespace("data-equalto"))).value,a=t.value,o=n===a;return o?(this.S(t).removeAttr(this.invalid_attr),s.removeClass(this.settings.error_class),label.length>0&&settings.error_labels&&label.removeClass(this.settings.error_class)):(this.S(t).attr(this.invalid_attr,""),s.addClass(this.settings.error_class),label.length>0&&settings.error_labels&&label.addClass(this.settings.error_class)),o},valid_oneof:function(t,e,i,s){var t=this.S(t),n=this.S("["+this.add_namespace("data-oneof")+"]"),a=n.filter(":checked").length>0;if(a?t.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):t.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),!s){var o=this;n.each(function(){o.valid_oneof.call(o,this,null,null,!0)})}return a},reflow:function(){var t=this,e=t.S("["+this.attr_name()+"]").attr("novalidate","novalidate");t.S(e).each(function(e,i){t.events(i)})}}}(jQuery,window,window.document),function(t,e){"use strict";Foundation.libs.tooltip={name:"tooltip",version:"5.5.3",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:!1,hover_delay:200,fade_in_duration:150,fade_out_duration:150,show_on:"all",tip_template:function(t,e){return'<span data-selector="'+t+'" id="'+t+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'" role="tooltip">'+e+'<span class="nub"></span></span>'}},cache:{},init:function(t,e,i){Foundation.inherit(this,"random_str"),this.bindings(e,i)},should_show:function(e){var i=t.extend({},this.settings,this.data_options(e));return"all"===i.show_on?!0:this.small()&&"small"===i.show_on?!0:this.medium()&&"medium"===i.show_on?!0:this.large()&&"large"===i.show_on?!0:!1},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},events:function(e){function i(t,e,i){t.timer||(i?(t.timer=null,n.showTip(e)):t.timer=setTimeout(function(){t.timer=null,n.showTip(e)}.bind(t),n.settings.hover_delay))}function s(t,e){t.timer&&(clearTimeout(t.timer),t.timer=null),n.hide(e)}var n=this,a=n.S;n.create(this.S(e)),t(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"]",function(e){var o=a(this),r=t.extend({},n.settings,n.data_options(o)),l=!1;if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&a(e.target).is("a"))return!1;if(/mouse/i.test(e.type)&&n.ie_touch(e))return!1;if(o.hasClass("open"))Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&e.preventDefault(),n.hide(o);else{if(r.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type))return;if(!r.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&(e.preventDefault(),a(r.tooltip_class+".open").hide(),l=!0,t(".open["+n.attr_name()+"]").length>0)){var d=a(t(".open["+n.attr_name()+"]")[0]);n.hide(d)}/enter|over/i.test(e.type)?i(this,o):"mouseout"===e.type||"mouseleave"===e.type?s(this,o):i(this,o,!0)}}).on("mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"].open",function(e){return/mouse/i.test(e.type)&&n.ie_touch(e)?!1:void(("touch"!=t(this).data("tooltip-open-event-type")||"mouseleave"!=e.type)&&("mouse"==t(this).data("tooltip-open-event-type")&&/MSPointerDown|touchstart/i.test(e.type)?n.convert_to_touch(t(this)):s(this,t(this))))}).on("DOMNodeRemoved DOMAttrModified","["+this.attr_name()+"]:not(a)",function(){s(this,a(this))})},ie_touch:function(){return!1},showTip:function(t){var e=this.getTip(t);return this.should_show(t,e)?this.show(t):void 0},getTip:function(e){var i=this.selector(e),s=t.extend({},this.settings,this.data_options(e)),n=null;return i&&(n=this.S('span[data-selector="'+i+'"]'+s.tooltip_class)),"object"==typeof n?n:!1},selector:function(t){var e=t.attr(this.attr_name())||t.attr("data-selector");return"string"!=typeof e&&(e=this.random_str(6),t.attr("data-selector",e).attr("aria-describedby",e)),e},create:function(i){var s=this,n=t.extend({},this.settings,this.data_options(i)),a=this.settings.tip_template;"string"==typeof n.tip_template&&e.hasOwnProperty(n.tip_template)&&(a=e[n.tip_template]);var o=t(a(this.selector(i),t("<div></div>").html(i.attr("title")).html())),r=this.inheritable_classes(i);o.addClass(r).appendTo(n.append_to),Modernizr.touch&&(o.append('<span class="tap-to-close">'+n.touch_close_text+"</span>"),o.on("touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip",function(){s.hide(i)})),i.removeAttr("title").attr("title","")},reposition:function(e,i,s){var n,a,o,r,l;i.css("visibility","hidden").show(),n=e.data("width"),a=i.children(".nub"),o=a.outerHeight(),r=a.outerWidth(),i.css(this.small()?{width:"100%"}:{width:n?n:"auto"}),l=function(t,e,i,s,n){return t.css({top:e?e:"auto",bottom:s?s:"auto",left:n?n:"auto",right:i?i:"auto"}).end()};var d=e.offset().top,c=e.offset().left,h=e.outerHeight();if(l(i,d+h+10,"auto","auto",c),this.small())l(i,d+h+10,"auto","auto",12.5,t(this.scope).width()),i.addClass("tip-override"),l(a,-o,"auto","auto",c);else{Foundation.rtl&&(a.addClass("rtl"),c=c+e.outerWidth()-i.outerWidth()),l(i,d+h+10,"auto","auto",c),a.attr("style")&&a.removeAttr("style"),i.removeClass("tip-override");var u=i.outerHeight();s&&s.indexOf("tip-top")>-1?(Foundation.rtl&&a.addClass("rtl"),l(i,d-u,"auto","auto",c).removeClass("tip-override")):s&&s.indexOf("tip-left")>-1?(l(i,d+h/2-u/2,"auto","auto",c-i.outerWidth()-o).removeClass("tip-override"),a.removeClass("rtl")):s&&s.indexOf("tip-right")>-1&&(l(i,d+h/2-u/2,"auto","auto",c+e.outerWidth()+o).removeClass("tip-override"),a.removeClass("rtl"))}i.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},inheritable_classes:function(e){var i=t.extend({},this.settings,this.data_options(e)),s=["tip-top","tip-left","tip-bottom","tip-right","radius","round"].concat(i.additional_inheritable_classes),n=e.attr("class"),a=n?t.map(n.split(" "),function(e){return-1!==t.inArray(e,s)?e:void 0}).join(" "):"";return t.trim(a)},convert_to_touch:function(e){var i=this,s=i.getTip(e),n=t.extend({},i.settings,i.data_options(e));0===s.find(".tap-to-close").length&&(s.append('<span class="tap-to-close">'+n.touch_close_text+"</span>"),s.on("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose",function(){i.hide(e)})),e.data("tooltip-open-event-type","touch")},show:function(t){var e=this.getTip(t);"touch"==t.data("tooltip-open-event-type")&&this.convert_to_touch(t),this.reposition(t,e,t.attr("class")),t.addClass("open"),e.fadeIn(this.settings.fade_in_duration)},hide:function(t){var e=this.getTip(t);e.fadeOut(this.settings.fade_out_duration,function(){e.find(".tap-to-close").remove(),e.off("click.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose"),t.removeClass("open")})},off:function(){var e=this;this.S(this.scope).off(".fndtn.tooltip"),this.S(this.settings.tooltip_class).each(function(i){t("["+e.attr_name()+"]").eq(i).attr("title",t(this).text())}).remove()},reflow:function(){}}}(jQuery,window,window.document);(function(a){a.fn.mask=function(c,b){a(this).each(function(){if(b!==undefined&&b>0){var d=a(this);d.data("_mask_timeout",setTimeout(function(){a.maskElement(d,c)},b))}else{a.maskElement(a(this),c)}})};a.fn.unmask=function(){a(this).each(function(){a.unmaskElement(a(this))})};a.fn.isMasked=function(){return this.hasClass("masked")};a.maskElement=function(d,c){if(d.data("_mask_timeout")!==undefined){clearTimeout(d.data("_mask_timeout"));d.removeData("_mask_timeout")}if(d.isMasked()){a.unmaskElement(d)}if(d.css("position")=="static"){d.addClass("masked-relative")}d.addClass("masked");var e=a('<div class="loadmask"></div>');if(navigator.userAgent.toLowerCase().indexOf("msie")>-1){e.height(d.height()+parseInt(d.css("padding-top"))+parseInt(d.css("padding-bottom")));e.width(d.width()+parseInt(d.css("padding-left"))+parseInt(d.css("padding-right")))}if(navigator.userAgent.toLowerCase().indexOf("msie 6")>-1){d.find("select").addClass("masked-hidden")}d.append(e);if(c!==undefined){var b=a('<div class="loadmask-msg" style="display:none;"></div>');b.append("<div>"+c+"</div>");d.append(b);b.css("top",Math.round(d.height()/2-(b.height()-parseInt(b.css("padding-top"))-parseInt(b.css("padding-bottom")))/2)+"px");b.css("left",Math.round(d.width()/2-(b.width()-parseInt(b.css("padding-left"))-parseInt(b.css("padding-right")))/2)+"px");b.show()}};a.unmaskElement=function(b){if(b.data("_mask_timeout")!==undefined){clearTimeout(b.data("_mask_timeout"));b.removeData("_mask_timeout")}b.find(".loadmask-msg,.loadmask").remove();b.removeClass("masked");b.removeClass("masked-relative");b.find("select").removeClass("masked-hidden")}})(jQuery);(function(b){b.fn.appendAround=function(){return this.each(function(){function c(){if("none"===b(d).css("display")){var a=0;f.each(function(){"none"===b(this).css("display")||a||(e.appendTo(this),a++,d=this)})}}var e=b(this),a=e.parent(),d=a[0],a=a.attr("data-set"),f=b("[data-set='"+a+"']");c();b(window).bind("resize",c)})}})(jQuery);;(function(){function t(t,n){return t.set(n[0],n[1]),t}function n(t,n){return t.add(n),t}function e(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function r(t,n){for(var e=-1,r=null==t?0:t.length;++e<r&&false!==n(t[e],e,t););return t}function u(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(!n(t[e],e,t))return false;return true}function o(t,n){for(var e=-1,r=null==t?0:t.length,u=0,o=[];++e<r;){var i=t[e];n(i,e,t)&&(o[u++]=i)}return o}function i(t,n){return!(null==t||!t.length)&&-1<(n===n?A(t,n,0):s(t,_,0))}function c(t,n){for(var e=-1,r=null==t?0:t.length,u=Array(r);++e<r;)u[e]=n(t[e],e,t);return u}function a(t,n){for(var e=-1,r=n.length,u=t.length;++e<r;)t[u+e]=n[e];return t}function f(t,n,e,r){var u=-1,o=null==t?0:t.length;for(r&&o&&(e=t[++u]);++u<o;)e=n(e,t[u],u,t);return e}function l(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return true;return false}function s(t,n,e){var r=t.length;for(e+=-1;++e<r;)if(n(t[e],e,t))return e;return-1}function _(t){return t!==t}function h(t){return function(n){return null==n?Cn:n[t]}}function p(t,n,e,r,u){return u(t,function(t,u,o){e=r?(r=false,t):n(e,t,u,o)}),e}function b(t,n){var e=t.length;for(t.sort(n);e--;)t[e]=t[e].c;return t}function v(t){return function(n){return t(n)}}function y(t,n){return c(n,function(n){return t[n]})}function g(t,n){return t.has(n)}function d(t){var n=-1,e=Array(t.size);return t.forEach(function(t,r){e[++n]=[r,t]}),e}function j(t){var n=Object;return function(e){return t(n(e))}}function w(t,n){for(var e=-1,r=t.length,u=0,o=[];++e<r;){var i=t[e];i!==n&&"__lodash_placeholder__"!==i||(t[e]="__lodash_placeholder__",o[u++]=e)}return o}function m(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}function A(t,n,e){--e;for(var r=t.length;++e<r;)if(t[e]===n)return e;return-1}function k(t){if(mn(t)&&!Dr(t)&&!(t instanceof E)){if(t instanceof x)return t;if(ze.call(t,"__wrapped__")){if(t instanceof E)t=t.clone();else{var n=new x(t.__wrapped__,t.__chain__);n.__actions__=Ot(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,t=n}return t}}return new x(t)}function O(){}function x(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=Cn}function E(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=false,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function S(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function z(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function R(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function I(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new R;++n<e;)this.add(t[n])}function $(t){this.size=(this.__data__=new z(t)).size}function F(t,n){var e=Dr(t),r=!e&&Mr(t),u=!e&&!r&&Br(t),o=!e&&!r&&!u&&Nr(t);if(e=e||r||u||o){for(var r=t.length,i=String,c=-1,a=Array(r);++c<r;)a[c]=i(c);r=a}else r=[];var f,i=r.length;for(f in t)!n&&!ze.call(t,f)||e&&("length"==f||u&&("offset"==f||"parent"==f)||o&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Qt(f,i))||r.push(f);return r}function M(t,n,e){var r=t[n];ze.call(t,n)&&yn(r,e)&&(e!==Cn||n in t)||C(t,n,e)}function D(t,n){for(var e=t.length;e--;)if(yn(t[e][0],n))return e;return-1}function B(t,n){return t&&xt(n,zn(n),t)}function U(t,n){return t&&xt(n,Rn(n),t)}function C(t,n,e){"__proto__"==n&&Ge?Ge(t,n,{configurable:true,enumerable:true,value:e,writable:true}):t[n]=e}function N(t,n,e,u,o,i){var c,a=1&n,f=2&n,l=4&n;if(e&&(c=o?e(t,u,o,i):e(t)),c!==Cn)return c;if(!wn(t))return t;if(u=Dr(t)){if(c=Kt(t),!a)return Ot(t,c)}else{var s=Or(t),_="[object Function]"==s||"[object GeneratorFunction]"==s;if(Br(t))return wt(t,a);if("[object Object]"==s||"[object Arguments]"==s||_&&!o){if(c=f||_?{}:typeof t.constructor!="function"||Zt(t)?{}:vr(Ne(t)),!a)return f?St(t,U(c,t)):Et(t,B(c,t))}else{if(!le[s])return o?t:{};c=Ht(t,s,N,a)}}if(i||(i=new $),o=i.get(t))return o;i.set(t,c);var f=l?f?Pt:Tt:f?Rn:zn,h=u?Cn:f(t);return r(h||t,function(r,u){h&&(u=r,r=t[u]),M(c,u,N(r,n,e,u,t,i))}),c}function T(t,n,e){if(typeof t!="function")throw new TypeError("Expected a function");return setTimeout(function(){t.apply(Cn,e)},n)}function P(t,n){var e=true;return yr(t,function(t,r,u){return e=!!n(t,r,u)}),e}function W(t,n,e){for(var r=-1,u=t.length;++r<u;){var o=t[r],i=n(o);if(null!=i&&(c===Cn?i===i&&!On(i):e(i,c)))var c=i,a=o}return a}function L(t,n){var e=[];return yr(t,function(t,r,u){n(t,r,u)&&e.push(t)}),e}function V(t,n,e,r,u){var o=-1,i=t.length;for(e||(e=Jt),u||(u=[]);++o<i;){var c=t[o];0<n&&e(c)?1<n?V(c,n-1,e,r,u):a(u,c):r||(u[u.length]=c)}return u}function q(t,n){return t&&gr(t,n,zn)}function G(t,n){return o(n,function(n){return dn(t[n])})}function K(t,n){n=jt(n,t);for(var e=0,r=n.length;null!=t&&e<r;)t=t[un(n[e++])];return e&&e==r?t:Cn}function H(t,n,e){return n=n(t),Dr(t)?n:a(n,e(t))}function J(t){if(null==t)t=t===Cn?"[object Undefined]":"[object Null]";else if(qe&&qe in Object(t)){var n=ze.call(t,qe),e=t[qe];try{t[qe]=Cn;var r=true}catch(t){}var u=$e.call(t);r&&(n?t[qe]=e:delete t[qe]),t=u}else t=$e.call(t);return t}function Q(t,n){return t>n}function X(t,n){return null!=t&&ze.call(t,n)}function Y(t,n){return null!=t&&n in Object(t)}function Z(t){return mn(t)&&"[object Arguments]"==J(t)}function tt(t){return mn(t)&&"[object Date]"==J(t)}function nt(t,n,e,r,u){if(t===n)n=true;else if(null==t||null==n||!mn(t)&&!mn(n))n=t!==t&&n!==n;else t:{var o=Dr(t),i=Dr(n),c=o?"[object Array]":Or(t),a=i?"[object Array]":Or(n),c="[object Arguments]"==c?"[object Object]":c,a="[object Arguments]"==a?"[object Object]":a,f="[object Object]"==c,i="[object Object]"==a;if((a=c==a)&&Br(t)){if(!Br(n)){n=false;break t}o=true,f=false}if(a&&!f)u||(u=new $),n=o||Nr(t)?Ut(t,n,e,r,nt,u):Ct(t,n,c,e,r,nt,u);else{if(!(1&e)&&(o=f&&ze.call(t,"__wrapped__"),c=i&&ze.call(n,"__wrapped__"),o||c)){t=o?t.value():t,n=c?n.value():n,u||(u=new $),n=nt(t,n,e,r,u);break t}if(a)n:if(u||(u=new $),o=1&e,c=Tt(t),i=c.length,a=Tt(n).length,i==a||o){for(f=i;f--;){var l=c[f];if(!(o?l in n:ze.call(n,l))){n=false;break n}}if((a=u.get(t))&&u.get(n))n=a==n;else{a=true,u.set(t,n),u.set(n,t);for(var s=o;++f<i;){var l=c[f],_=t[l],h=n[l];if(r)var p=o?r(h,_,l,n,t,u):r(_,h,l,t,n,u);if(p===Cn?_!==h&&!nt(_,h,e,r,u):!p){a=false;break}s||(s="constructor"==l)}a&&!s&&(e=t.constructor,r=n.constructor,e!=r&&"constructor"in t&&"constructor"in n&&!(typeof e=="function"&&e instanceof e&&typeof r=="function"&&r instanceof r)&&(a=false)),u.delete(t),u.delete(n),n=a}}else n=false;else n=false}}return n}function et(t,n){var e=n.length,r=e;if(null==t)return!r;for(t=Object(t);e--;){var u=n[e];if(u[2]?u[1]!==t[u[0]]:!(u[0]in t))return false;}for(;++e<r;){var u=n[e],o=u[0],i=t[o],c=u[1];if(u[2]){if(i===Cn&&!(o in t))return false}else if(u=new $,void 0===Cn?!nt(c,i,3,void 0,u):1)return false}return true}function rt(t){return mn(t)&&"[object RegExp]"==J(t)}function ut(t){return mn(t)&&jn(t.length)&&!!fe[J(t)]}function ot(t){return typeof t=="function"?t:null==t?Fn:typeof t=="object"?Dr(t)?lt(t[0],t[1]):ft(t):Yt(t)?h(un(t)):pt(t)}function it(t){if(!Zt(t))return Qe(t);var n,e=[];for(n in Object(t))ze.call(t,n)&&"constructor"!=n&&e.push(n);return e}function ct(t,n){return t<n}function at(t,n){var e=-1,r=gn(t)?Array(t.length):[];return yr(t,function(t,u,o){r[++e]=n(t,u,o)}),r}function ft(t){var n=Vt(t);return 1==n.length&&n[0][2]?tn(n[0][0],n[0][1]):function(e){return e===t||et(e,n)}}function lt(t,n){return Yt(t)&&n===n&&!wn(n)?tn(un(t),n):function(e){var r=Sn(e,t);return r===Cn&&r===n?null!=e&&Gt(e,t,Y):nt(n,r,3)}}function st(t,n){var e=[],r=-1;return n=c(n.length?n:[Fn],v(ot)),b(at(t,function(t){return{a:c(n,function(n){return n(t)}),b:++r,c:t}}),function(t,n){var r;t:{r=-1;for(var u=t.a,o=n.a,i=u.length,c=e.length;++r<i;){var a;n:{a=u[r];var f=o[r];if(a!==f){var l=a!==Cn,s=null===a,_=a===a,h=On(a),p=f!==Cn,b=null===f,v=f===f,y=On(f);if(!b&&!y&&!h&&a>f||h&&p&&v&&!b&&!y||s&&p&&v||!l&&v||!_){a=1;break n}if(!s&&!h&&!y&&a<f||y&&l&&_&&!s&&!h||b&&l&&_||!p&&_||!v){a=-1;break n}}a=0}if(a){r=r>=c?a:a*("desc"==e[r]?-1:1);break t}}r=t.b-n.b}return r})}function _t(t,n){return ht(t,n,function(n,e){return null!=t&&Gt(t,e,Y)})}function ht(t,n,e){for(var r=-1,u=n.length,o={};++r<u;){var i=n[r],c=K(t,i);if(e(c,i)){var a=o,i=jt(i,t);if(wn(a))for(var i=jt(i,a),f=-1,l=i.length,s=l-1;null!=a&&++f<l;){var _=un(i[f]),h=c;if(f!=s){var p=a[_],h=Cn;h===Cn&&(h=wn(p)?p:Qt(i[f+1])?[]:{})}M(a,_,h),a=a[_]}}}return o}function pt(t){return function(n){return K(n,t)}}function bt(t){return Er(nn(t,void 0,Fn),t+"")}function vt(t,n,e){var r=-1,u=t.length;for(0>n&&(n=-n>u?0:u+n),e=e>u?u:e,0>e&&(e+=u),u=n>e?0:e-n>>>0,n>>>=0,e=Array(u);++r<u;)e[r]=t[r+n];return e}function yt(t,n){var e;return yr(t,function(t,r,u){return e=n(t,r,u),!e}),!!e}function gt(t){if(typeof t=="string")return t;if(Dr(t))return c(t,gt)+"";if(On(t))return br?br.call(t):"";var n=t+"";return"0"==n&&1/t==-Nn?"-0":n}function dt(t,n){var e=t;return e instanceof E&&(e=e.value()),f(n,function(t,n){return n.func.apply(n.thisArg,a([t],n.args))},e)}function jt(t,n){return Dr(t)?t:Yt(t,n)?[t]:Sr(null==t?"":gt(t))}function wt(t,n){if(n)return t.slice();var e=t.length,e=Ce?Ce(e):new t.constructor(e);return t.copy(e),e}function mt(t){var n=new t.constructor(t.byteLength);return new Ue(n).set(new Ue(t)),n}function At(t,n,e,r){var u=-1,o=t.length,i=e.length,c=-1,a=n.length,f=Xe(o-i,0),l=Array(a+f);for(r=!r;++c<a;)l[c]=n[c];for(;++u<i;)(r||u<o)&&(l[e[u]]=t[u]);for(;f--;)l[c++]=t[u++];return l}function kt(t,n,e,r){var u=-1,o=t.length,i=-1,c=e.length,a=-1,f=n.length,l=Xe(o-c,0),s=Array(l+f);for(r=!r;++u<l;)s[u]=t[u];for(l=u;++a<f;)s[l+a]=n[a];for(;++i<c;)(r||u<o)&&(s[l+e[i]]=t[u++]);return s}function Ot(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n;}function xt(t,n,e,r){var u=!e;e||(e={});for(var o=-1,i=n.length;++o<i;){var c=n[o],a=r?r(e[c],t[c],c,e,t):Cn;a===Cn&&(a=t[c]),u?C(e,c,a):M(e,c,a)}return e}function Et(t,n){return xt(t,Ar(t),n)}function St(t,n){return xt(t,kr(t),n)}function zt(t){return bt(function(n,e){var r=-1,u=e.length,o=1<u?e[u-1]:Cn,i=2<u?e[2]:Cn,o=3<t.length&&typeof o=="function"?(u--,o):Cn;for(i&&Xt(e[0],e[1],i)&&(o=3>u?Cn:o,u=1),n=Object(n);++r<u;)(i=e[r])&&t(n,i,r,o);return n})}function Rt(t,n,e){function r(){return(this&&this!==be&&this instanceof r?o:t).apply(u?e:this,arguments);}var u=1&n,o=It(t);return r}function It(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=vr(t.prototype),n=t.apply(e,n);return wn(n)?n:e}}function $t(t,n,r){function u(){for(var i=arguments.length,c=Array(i),a=i,f=Wt(u);a--;)c[a]=arguments[a];return a=3>i&&c[0]!==f&&c[i-1]!==f?[]:w(c,f),i-=a.length,i<r?Dt(t,n,Ft,u.placeholder,Cn,c,a,Cn,Cn,r-i):e(this&&this!==be&&this instanceof u?o:t,this,c)}var o=It(t);return u}function Ft(t,n,e,r,u,o,i,c,a,f){function l(){for(var y=arguments.length,g=Array(y),d=y;d--;)g[d]=arguments[d];if(p){var j,m=Wt(l),d=g.length;for(j=0;d--;)g[d]===m&&++j}if(r&&(g=At(g,r,u,p)),o&&(g=kt(g,o,i,p)),y-=j,p&&y<f)return m=w(g,m),Dt(t,n,Ft,l.placeholder,e,g,m,c,a,f-y);if(m=_?e:this,d=h?m[t]:t,y=g.length,c){j=g.length;for(var A=Ye(c.length,j),k=Ot(g);A--;){var O=c[A];g[A]=Qt(O,j)?k[O]:Cn}}else b&&1<y&&g.reverse();return s&&a<y&&(g.length=a),this&&this!==be&&this instanceof l&&(d=v||It(d)),d.apply(m,g)}var s=128&n,_=1&n,h=2&n,p=24&n,b=512&n,v=h?Cn:It(t);return l}function Mt(t,n,r,u){function o(){for(var n=-1,a=arguments.length,f=-1,l=u.length,s=Array(l+a),_=this&&this!==be&&this instanceof o?c:t;++f<l;)s[f]=u[f];for(;a--;)s[f++]=arguments[++n];return e(_,i?r:this,s)}var i=1&n,c=It(t);return o}function Dt(t,n,e,r,u,o,i,c,a,f){var l=8&n,s=l?i:Cn;i=l?Cn:i;var _=l?o:Cn;o=l?Cn:o,n=(n|(l?32:64))&~(l?64:32),4&n||(n&=-4),u=[t,n,u,_,s,o,i,c,a,f],e=e.apply(Cn,u);t:for(c=t.name+"",a=cr[c],f=ze.call(cr,c)?a.length:0;f--;)if(l=a[f],s=l.func,null==s||s==t){c=l.name;break t}return a=k[c],typeof a=="function"&&c in E.prototype?t===a?c=true:(c=mr(a),c=!!c&&t===c[0]):c=false,c&&xr(e,u),e.placeholder=r,en(e,t,n)}function Bt(t,n,e,r){return t===Cn||yn(t,xe[e])&&!ze.call(r,e)?n:t}function Ut(t,n,e,r,u,o){var i=1&e,c=t.length,a=n.length;if(c!=a&&!(i&&a>c))return false;if((a=o.get(t))&&o.get(n))return a==n;var a=-1,f=true,s=2&e?new I:Cn;for(o.set(t,n),o.set(n,t);++a<c;){var _=t[a],h=n[a];if(r)var p=i?r(h,_,a,n,t,o):r(_,h,a,t,n,o);if(p!==Cn){if(p)continue;f=false;break}if(s){if(!l(n,function(t,n){if(!g(s,n)&&(_===t||u(_,t,e,r,o)))return s.push(n)})){f=false;break}}else if(_!==h&&!u(_,h,e,r,o)){f=false;break}}return o.delete(t),o.delete(n),f}function Ct(t,n,e,r,u,o,i){switch(e){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)break;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":if(t.byteLength!=n.byteLength||!o(new Ue(t),new Ue(n)))break;return true;case"[object Boolean]":case"[object Date]":case"[object Number]":return yn(+t,+n);case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var c=d;case"[object Set]":if(c||(c=m),t.size!=n.size&&!(1&r))break;return(e=i.get(t))?e==n:(r|=2,i.set(t,n),n=Ut(c(t),c(n),r,u,o,i),i.delete(t),n);case"[object Symbol]":if(pr)return pr.call(t)==pr.call(n)}
return false}function Nt(t){return Er(nn(t,Cn,an),t+"")}function Tt(t){return H(t,zn,Ar)}function Pt(t){return H(t,Rn,kr)}function Wt(t){return(ze.call(k,"placeholder")?k:t).placeholder}function Lt(t,n){var e=t.__data__,r=typeof n;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?e[typeof n=="string"?"string":"hash"]:e.map}function Vt(t){for(var n=zn(t),e=n.length;e--;){var r=n[e],u=t[r];n[e]=[r,u,u===u&&!wn(u)]}return n}function qt(t,n){var e=null==t?Cn:t[n];return(!wn(e)||Ie&&Ie in e?0:(dn(e)?Me:ee).test(on(e)))?e:Cn;}function Gt(t,n,e){n=jt(n,t);for(var r=-1,u=n.length,o=false;++r<u;){var i=un(n[r]);if(!(o=null!=t&&e(t,i)))break;t=t[i]}return o||++r!=u?o:(u=null==t?0:t.length,!!u&&jn(u)&&Qt(i,u)&&(Dr(t)||Mr(t)))}function Kt(t){var n=t.length,e=t.constructor(n);return n&&"string"==typeof t[0]&&ze.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function Ht(e,r,u,o){var i=e.constructor;switch(r){case"[object ArrayBuffer]":return mt(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return r=o?mt(e.buffer):e.buffer,new e.constructor(r,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return r=o?mt(e.buffer):e.buffer,new e.constructor(r,e.byteOffset,e.length);case"[object Map]":return r=o?u(d(e),1):d(e),f(r,t,new e.constructor);case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return r=new e.constructor(e.source,Zn.exec(e)),r.lastIndex=e.lastIndex,r;case"[object Set]":return r=o?u(m(e),1):m(e),f(r,n,new e.constructor);case"[object Symbol]":return pr?Object(pr.call(e)):{}}}function Jt(t){return Dr(t)||Mr(t)||!!(Le&&t&&t[Le])}function Qt(t,n){return n=null==n?9007199254740991:n,!!n&&(typeof t=="number"||ue.test(t))&&-1<t&&0==t%1&&t<n}function Xt(t,n,e){if(!wn(e))return false;var r=typeof n;return!!("number"==r?gn(e)&&Qt(n,e.length):"string"==r&&n in e)&&yn(e[n],t);}function Yt(t,n){if(Dr(t))return false;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!On(t))||(qn.test(t)||!Vn.test(t)||null!=n&&t in Object(n))}function Zt(t){var n=t&&t.constructor;return t===(typeof n=="function"&&n.prototype||xe)}function tn(t,n){return function(e){return null!=e&&(e[t]===n&&(n!==Cn||t in Object(e)))}}function nn(t,n,r){return n=Xe(n===Cn?t.length-1:n,0),function(){for(var u=arguments,o=-1,i=Xe(u.length-n,0),c=Array(i);++o<i;)c[o]=u[n+o];for(o=-1,i=Array(n+1);++o<n;)i[o]=u[o];return i[n]=r(c),e(t,this,i)}}function en(t,n,e){var r=n+"";n=Er;var u,o=cn;return u=(u=r.match(Qn))?u[1].split(Xn):[],e=o(u,e),(o=e.length)&&(u=o-1,e[u]=(1<o?"& ":"")+e[u],e=e.join(2<o?", ":" "),r=r.replace(Jn,"{\n/* [wrapped with "+e+"] */\n")),n(t,r)}function rn(t){var n=0,e=0;return function(){var r=Ze(),u=16-(r-e);if(e=r,0<u){if(800<=++n)return arguments[0]}else n=0;return t.apply(Cn,arguments)}}function un(t){if(typeof t=="string"||On(t))return t;var n=t+"";return"0"==n&&1/t==-Nn?"-0":n}function on(t){if(null!=t){try{return Se.call(t)}catch(t){}return t+""}return""}function cn(t,n){return r(Pn,function(e){var r="_."+e[0];n&e[1]&&!i(t,r)&&t.push(r)}),t.sort()}function an(t){return(null==t?0:t.length)?V(t,1):[]}function fn(t){return t&&t.length?t[0]:Cn}function ln(t){var n=null==t?0:t.length;return n?t[n-1]:Cn}function sn(t,n){return n(t)}function _n(){return this}function hn(t,n){return(Dr(t)?r:yr)(t,ot(n))}function pn(t,n){var e;if(typeof n!="function")throw new TypeError("Expected a function");return t=xn(t),function(){return 0<--t&&(e=n.apply(this,arguments)),1>=t&&(n=Cn),e}}function bn(t,n){function e(){var r=arguments,u=n?n.apply(this,r):r[0],o=e.cache;return o.has(u)?o.get(u):(r=t.apply(this,r),e.cache=o.set(u,r)||o,r)}if(typeof t!="function"||null!=n&&typeof n!="function")throw new TypeError("Expected a function");return e.cache=new(bn.Cache||R),e}function vn(t){if(typeof t!="function")throw new TypeError("Expected a function");return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function yn(t,n){return t===n||t!==t&&n!==n}function gn(t){return null!=t&&jn(t.length)&&!dn(t)}function dn(t){return!!wn(t)&&(t=J(t),"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)}function jn(t){return typeof t=="number"&&-1<t&&0==t%1&&9007199254740991>=t}function wn(t){var n=typeof t;return null!=t&&("object"==n||"function"==n);}function mn(t){return null!=t&&typeof t=="object"}function An(t){return typeof t=="number"||mn(t)&&"[object Number]"==J(t)}function kn(t){return typeof t=="string"||!Dr(t)&&mn(t)&&"[object String]"==J(t)}function On(t){return typeof t=="symbol"||mn(t)&&"[object Symbol]"==J(t)}function xn(t){t?(t=En(t),t=t===Nn||t===-Nn?1.7976931348623157e308*(0>t?-1:1):t===t?t:0):t=0===t?t:0;var n=t%1;return t===t?n?t-n:t:0}function En(t){if(typeof t=="number")return t;if(On(t))return Tn;if(wn(t)&&(t=typeof t.valueOf=="function"?t.valueOf():t,t=wn(t)?t+"":t),typeof t!="string")return 0===t?t:+t;t=t.replace(Hn,"");var n=ne.test(t);return n||re.test(t)?_e(t.slice(2),n?2:8):te.test(t)?Tn:+t}function Sn(t,n){var e=null==t?Cn:K(t,n);return e===Cn?void 0:e}function zn(t){return gn(t)?F(t):it(t)}function Rn(t){if(gn(t))t=F(t,true);else if(wn(t)){var n,e=Zt(t),r=[];for(n in t)("constructor"!=n||!e&&ze.call(t,n))&&r.push(n);t=r}else{if(n=[],null!=t)for(e in Object(t))n.push(e);t=n}return t}function In(t){return null==t?[]:y(t,zn(t))}function $n(t){return function(){return t}}function Fn(t){return t}function Mn(t,n,e){var u=zn(n),o=G(n,u);null!=e||wn(n)&&(o.length||!u.length)||(e=n,n=t,t=this,o=G(n,zn(n)));var i=!(wn(e)&&"chain"in e&&!e.chain),c=dn(t);return r(o,function(e){var r=n[e];t[e]=r,c&&(t.prototype[e]=function(){var n=this.__chain__;if(i||n){var e=t(this.__wrapped__);return(e.__actions__=Ot(this.__actions__)).push({func:r,args:arguments,thisArg:t}),e.__chain__=n,e}return r.apply(t,a([this.value()],arguments))})}),t}function Dn(){}function Bn(){return[]}function Un(){return false}var Cn,Nn=1/0,Tn=NaN,Pn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Wn=/[&<>"']/g,Ln=RegExp(Wn.source),Vn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qn=/^\w*$/,Gn=/^\./,Kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hn=/^\s+|\s+$/g,Jn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qn=/\{\n\/\* \[wrapped with (.+)\] \*/,Xn=/,? & /,Yn=/\\(\\)?/g,Zn=/\w*$/,te=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,ee=/^\[object .+?Constructor\]$/,re=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,oe="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",ie="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",ce=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+ie+oe,"g"),ae=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),fe={};fe["[object Float32Array]"]=fe["[object Float64Array]"]=fe["[object Int8Array]"]=fe["[object Int16Array]"]=fe["[object Int32Array]"]=fe["[object Uint8Array]"]=fe["[object Uint8ClampedArray]"]=fe["[object Uint16Array]"]=fe["[object Uint32Array]"]=true,fe["[object Arguments]"]=fe["[object Array]"]=fe["[object ArrayBuffer]"]=fe["[object Boolean]"]=fe["[object DataView]"]=fe["[object Date]"]=fe["[object Error]"]=fe["[object Function]"]=fe["[object Map]"]=fe["[object Number]"]=fe["[object Object]"]=fe["[object RegExp]"]=fe["[object Set]"]=fe["[object String]"]=fe["[object WeakMap]"]=false;var le={};le["[object Arguments]"]=le["[object Array]"]=le["[object ArrayBuffer]"]=le["[object DataView]"]=le["[object Boolean]"]=le["[object Date]"]=le["[object Float32Array]"]=le["[object Float64Array]"]=le["[object Int8Array]"]=le["[object Int16Array]"]=le["[object Int32Array]"]=le["[object Map]"]=le["[object Number]"]=le["[object Object]"]=le["[object RegExp]"]=le["[object Set]"]=le["[object String]"]=le["[object Symbol]"]=le["[object Uint8Array]"]=le["[object Uint8ClampedArray]"]=le["[object Uint16Array]"]=le["[object Uint32Array]"]=true,le["[object Error]"]=le["[object Function]"]=le["[object WeakMap]"]=false;var se,_e=parseInt,he=typeof global=="object"&&global&&global.Object===Object&&global,pe=typeof self=="object"&&self&&self.Object===Object&&self,be=he||pe||Function("return this")(),ve=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ye=ve&&typeof module=="object"&&module&&!module.nodeType&&module,ge=ye&&ye.exports===ve,de=ge&&he.process;t:{try{se=de&&de.binding&&de.binding("util");break t}catch(t){}se=void 0}var je=se&&se.isDate,we=se&&se.isRegExp,me=se&&se.isTypedArray,Ae=h("length"),ke=function(t){return function(n){return null==t?Cn:t[n]}}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Oe=Array.prototype,xe=Object.prototype,Ee=be["__core-js_shared__"],Se=Function.prototype.toString,ze=xe.hasOwnProperty,Re=0,Ie=function(){var t=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),$e=xe.toString,Fe=be._,Me=RegExp("^"+Se.call(ze).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),De=ge?be.Buffer:Cn,Be=be.Symbol,Ue=be.Uint8Array,Ce=De?De.f:Cn,Ne=j(Object.getPrototypeOf),Te=Object.create,Pe=xe.propertyIsEnumerable,We=Oe.splice,Le=Be?Be.isConcatSpreadable:Cn,Ve=Be?Be.iterator:Cn,qe=Be?Be.toStringTag:Cn,Ge=function(){try{var t=qt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ke=Object.getOwnPropertySymbols,He=De?De.isBuffer:Cn,Je=be.isFinite,Qe=j(Object.keys),Xe=Math.max,Ye=Math.min,Ze=Date.now,tr=qt(be,"DataView"),nr=qt(be,"Map"),er=qt(be,"Promise"),rr=qt(be,"Set"),ur=qt(be,"WeakMap"),or=qt(Object,"create"),ir=ur&&new ur,cr={},ar=on(tr),fr=on(nr),lr=on(er),sr=on(rr),_r=on(ur),hr=Be?Be.prototype:Cn,pr=hr?hr.valueOf:Cn,br=hr?hr.toString:Cn,vr=function(){function t(){}return function(n){return wn(n)?Te?Te(n):(t.prototype=n,n=new t,t.prototype=Cn,n):{}}}();k.prototype=O.prototype,k.prototype.constructor=k,x.prototype=vr(O.prototype),x.prototype.constructor=x,E.prototype=vr(O.prototype),E.prototype.constructor=E,S.prototype.clear=function(){this.__data__=or?or(null):{},this.size=0},S.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},S.prototype.get=function(t){var n=this.__data__;return or?(t=n[t],"__lodash_hash_undefined__"===t?Cn:t):ze.call(n,t)?n[t]:Cn},S.prototype.has=function(t){var n=this.__data__;return or?n[t]!==Cn:ze.call(n,t)},S.prototype.set=function(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=or&&n===Cn?"__lodash_hash_undefined__":n,this},z.prototype.clear=function(){this.__data__=[],this.size=0},z.prototype.delete=function(t){var n=this.__data__;return t=D(n,t),!(0>t)&&(t==n.length-1?n.pop():We.call(n,t,1),--this.size,true)},z.prototype.get=function(t){var n=this.__data__;return t=D(n,t),0>t?Cn:n[t][1]},z.prototype.has=function(t){return-1<D(this.__data__,t);},z.prototype.set=function(t,n){var e=this.__data__,r=D(e,t);return 0>r?(++this.size,e.push([t,n])):e[r][1]=n,this},R.prototype.clear=function(){this.size=0,this.__data__={hash:new S,map:new(nr||z),string:new S}},R.prototype.delete=function(t){return t=Lt(this,t).delete(t),this.size-=t?1:0,t},R.prototype.get=function(t){return Lt(this,t).get(t)},R.prototype.has=function(t){return Lt(this,t).has(t)},R.prototype.set=function(t,n){var e=Lt(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this},I.prototype.add=I.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},I.prototype.has=function(t){return this.__data__.has(t)},$.prototype.clear=function(){this.__data__=new z,this.size=0},$.prototype.delete=function(t){var n=this.__data__;return t=n.delete(t),this.size=n.size,t},$.prototype.get=function(t){return this.__data__.get(t)},$.prototype.has=function(t){return this.__data__.has(t)},$.prototype.set=function(t,n){var e=this.__data__;if(e instanceof z){var r=e.__data__;if(!nr||199>r.length)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new R(r)}return e.set(t,n),this.size=e.size,this};var yr=function(t,n){return function(e,r){if(null==e)return e;if(!gn(e))return t(e,r);for(var u=e.length,o=n?u:-1,i=Object(e);(n?o--:++o<u)&&false!==r(i[o],o,i););return e}}(q),gr=function(t){return function(n,e,r){var u=-1,o=Object(n);r=r(n);for(var i=r.length;i--;){var c=r[t?i:++u];if(false===e(o[c],c,o))break}return n}}(),dr=ir?function(t,n){return ir.set(t,n),t}:Fn,jr=Ge?function(t,n){return Ge(t,"toString",{configurable:true,enumerable:false,value:$n(n),writable:true})}:Fn,wr=rr&&1/m(new rr([,-0]))[1]==Nn?function(t){return new rr(t)}:Dn,mr=ir?function(t){return ir.get(t)}:Dn,Ar=Ke?function(t){return null==t?[]:(t=Object(t),o(Ke(t),function(n){return Pe.call(t,n)}))}:Bn,kr=Ke?function(t){for(var n=[];t;)a(n,Ar(t)),t=Ne(t);return n}:Bn,Or=J;(tr&&"[object DataView]"!=Or(new tr(new ArrayBuffer(1)))||nr&&"[object Map]"!=Or(new nr)||er&&"[object Promise]"!=Or(er.resolve())||rr&&"[object Set]"!=Or(new rr)||ur&&"[object WeakMap]"!=Or(new ur))&&(Or=function(t){var n=J(t);if(t=(t="[object Object]"==n?t.constructor:Cn)?on(t):"")switch(t){case ar:return"[object DataView]";case fr:return"[object Map]";case lr:return"[object Promise]";case sr:return"[object Set]";case _r:return"[object WeakMap]"}return n});var xr=rn(dr),Er=rn(jr),Sr=function(t){t=bn(t,function(t){return 500===n.size&&n.clear(),t});var n=t.cache;return t}(function(t){var n=[];return Gn.test(t)&&n.push(""),t.replace(Kn,function(t,e,r,u){n.push(r?u.replace(Yn,"$1"):e||t)}),n});Nt(function(t){function n(n){for(var e=-1,r=t.length,u=Array(r),o=null==n;++e<r;)u[e]=o?Cn:Sn(n,t[e]);return u}var e=t.length,r=e?t[0]:0,u=this.__wrapped__;return!(1<e||this.__actions__.length)&&u instanceof E&&Qt(r)?(u=u.slice(r,+r+(e?1:0)),u.__actions__.push({func:sn,args:[n],thisArg:Cn}),new x(u,this.__chain__).thru(function(t){return e&&!t.length&&t.push(Cn),t})):this.thru(n)});var zr=function(t){return function(n,e,r){var u=Object(n);if(!gn(n)){var o=ot(e);n=zn(n),e=function(t){return o(u[t],t,u)}}return e=t(n,e,r),-1<e?u[o?n[e]:e]:Cn;}}(function(t,n,e){var r=null==t?0:t.length;return r?(e=null==e?0:xn(e),0>e&&(e=Xe(r+e,0)),s(t,ot(n),e)):-1}),Rr=bt(function(t,n){if(null==t)return[];var e=n.length;return 1<e&&Xt(t,n[0],n[1])?n=[]:2<e&&Xt(n[0],n[1],n[2])&&(n=[n[0]]),st(t,V(n,1))}),Ir=bt(function(t,n,e){var r=1;if(e.length)var u=w(e,Wt(Ir)),r=32|r;var o,i,c=n,a=e,f=u,u=2&r;if(!u&&typeof t!="function")throw new TypeError("Expected a function");if(e=a?a.length:0,e||(r&=-97,a=f=Cn),o=o===Cn?o:Xe(xn(o),0),i=i===Cn?i:xn(i),e-=f?f.length:0,64&r)var l=a,s=f,a=f=Cn;return n=u?Cn:mr(t),o=[t,r,c,a,f,l,s,void 0,o,i],n&&(l=o[1],i=n[1],t=l|i,s=128==i&&8==l||128==i&&256==l&&o[7].length<=n[8]||384==i&&n[7].length<=n[8]&&8==l,131>t||s)&&(1&i&&(o[2]=n[2],t|=1&l?0:4),(l=n[3])&&(s=o[3],o[3]=s?At(s,l,n[4]):l,o[4]=s?w(o[3],"__lodash_placeholder__"):n[4]),(l=n[5])&&(s=o[5],o[5]=s?kt(s,l,n[6]):l,o[6]=s?w(o[5],"__lodash_placeholder__"):n[6]),(l=n[7])&&(o[7]=l),128&i&&(o[8]=null==o[8]?n[8]:Ye(o[8],n[8])),null==o[9]&&(o[9]=n[9]),o[0]=n[0],o[1]=t),t=o[0],r=o[1],c=o[2],a=o[3],f=o[4],i=o[9]=o[9]===Cn?u?0:t.length:Xe(o[9]-e,0),!i&&24&r&&(r&=-25),en((n?dr:xr)(r&&1!=r?8==r||16==r?$t(t,r,i):32!=r&&33!=r||f.length?Ft.apply(Cn,o):Mt(t,r,c,a):Rt(t,r,c),o),t,r)}),$r=bt(function(t,n){return T(t,1,n)}),Fr=bt(function(t,n,e){return T(t,En(n)||0,e)});bn.Cache=R;var Mr=Z(function(){return arguments}())?Z:function(t){return mn(t)&&ze.call(t,"callee")&&!Pe.call(t,"callee")},Dr=Array.isArray,Br=He||Un,Ur=je?v(je):tt,Cr=we?v(we):rt,Nr=me?v(me):ut,Tr=zt(function(t,n){xt(n,Rn(n),t)}),Pr=zt(function(t,n,e,r){xt(n,Rn(n),t,r)}),Wr=bt(function(t){return t.push(Cn,Bt),e(Pr,Cn,t)}),Lr=Nt(function(t,n){return null==t?{}:_t(t,n)});k.assignIn=Tr,k.before=pn,k.bind=Ir,k.chain=function(t){return t=k(t),t.__chain__=true,t},k.compact=function(t){for(var n=-1,e=null==t?0:t.length,r=0,u=[];++n<e;){var o=t[n];o&&(u[r++]=o)}return u},k.concat=function(){var t=arguments.length;if(!t)return[];for(var n=Array(t-1),e=arguments[0];t--;)n[t-1]=arguments[t];return a(Dr(e)?Ot(e):[e],V(n,1));},k.create=function(t,n){var e=vr(t);return null==n?e:B(e,n)},k.defaults=Wr,k.defer=$r,k.delay=Fr,k.filter=function(t,n){return(Dr(t)?o:L)(t,ot(n))},k.flatten=an,k.flattenDeep=function(t){return(null==t?0:t.length)?V(t,Nn):[]},k.iteratee=function(t){return ot(typeof t=="function"?t:N(t,1))},k.keys=zn,k.map=function(t,n){return(Dr(t)?c:at)(t,ot(n))},k.matches=function(t){return ft(N(t,1))},k.mixin=Mn,k.negate=vn,k.once=function(t){return pn(2,t)},k.pick=Lr,k.slice=function(t,n,e){var r=null==t?0:t.length;return r?(e&&typeof e!="number"&&Xt(t,n,e)?(n=0,e=r):(n=null==n?0:xn(n),e=e===Cn?r:xn(e)),vt(t,n,e)):[]},k.sortBy=Rr,k.tap=function(t,n){return n(t),t},k.thru=sn,k.toArray=function(t){if(!t)return[];if(gn(t))return kn(t)?ae.test(t)?t.match(ce)||[]:t.split(""):Ot(t);if(Ve&&t[Ve]){t=t[Ve]();for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}return n=Or(t),("[object Map]"==n?d:"[object Set]"==n?m:In)(t)},k.uniqBy=function(t,n){var e;if(t&&t.length)t:{e=ot(n);var r=-1,u=i,o=t.length,c=true,a=[],f=a;if(200<=o){if(u=e?null:wr(t)){e=m(u);break t}c=false,u=g,f=new I}else f=e?[]:a;n:for(;++r<o;){var l=t[r],s=e?e(l):l,l=0!==l?l:0;if(c&&s===s){for(var _=f.length;_--;)if(f[_]===s)continue n;e&&f.push(s),a.push(l)}else u(f,s,void 0)||(f!==a&&f.push(s),a.push(l))}e=a}else e=[];return e},k.values=In,k.extend=Tr,Mn(k,k),k.clone=function(t){return N(t,4)},k.escape=function(t){return(t=null==t?"":gt(t))&&Ln.test(t)?t.replace(Wn,ke):t},k.every=function(t,n,e){var r=Dr(t)?u:P;return e&&Xt(t,n,e)&&(n=Cn),r(t,ot(n));},k.find=zr,k.forEach=hn,k.has=function(t,n){return null!=t&&Gt(t,n,X)},k.head=fn,k.identity=Fn,k.indexOf=function(t,n,e){var r=null==t?0:t.length;return r?(e=null==e?0:xn(e),0>e&&(e=Xe(r+e,0)),n===n?A(t,n,e):s(t,_,e)):-1},k.isArguments=Mr,k.isArray=Dr,k.isBoolean=function(t){return true===t||false===t||mn(t)&&"[object Boolean]"==J(t)},k.isDate=Ur,k.isEmpty=function(t){if(null==t)return true;if(gn(t)&&(Dr(t)||typeof t=="string"||typeof t.splice=="function"||Br(t)||Nr(t)||Mr(t)))return!t.length;var n=Or(t);if("[object Map]"==n||"[object Set]"==n)return!t.size;if(Zt(t))return!it(t).length;for(var e in t)if(ze.call(t,e))return false;return true},k.isEqual=function(t,n){return nt(t,n)},k.isFinite=function(t){return typeof t=="number"&&Je(t)},k.isFunction=dn,k.isNaN=function(t){return An(t)&&t!=+t},k.isNull=function(t){return null===t},k.isNumber=An,k.isObject=wn,k.isRegExp=Cr,k.isString=kn,k.isUndefined=function(t){return t===Cn},k.last=ln,k.max=function(t){return t&&t.length?W(t,Fn,Q):Cn},k.min=function(t){return t&&t.length?W(t,Fn,ct):Cn;},k.noConflict=function(){return be._===this&&(be._=Fe),this},k.noop=Dn,k.reduce=function(t,n,e){var r=Dr(t)?f:p,u=3>arguments.length;return r(t,ot(n),e,u,yr)},k.result=function(t,n,e){n=jt(n,t);var r=-1,u=n.length;for(u||(u=1,t=Cn);++r<u;){var o=null==t?Cn:t[un(n[r])];o===Cn&&(r=u,o=e),t=dn(o)?o.call(t):o}return t},k.size=function(t){if(null==t)return 0;if(gn(t)){if(kn(t))if(ae.test(t)){for(var n=ce.lastIndex=0;ce.test(t);)++n;t=n}else t=Ae(t);else t=t.length;return t}return n=Or(t),"[object Map]"==n||"[object Set]"==n?t.size:it(t).length;},k.some=function(t,n,e){var r=Dr(t)?l:yt;return e&&Xt(t,n,e)&&(n=Cn),r(t,ot(n))},k.uniqueId=function(t){var n=++Re;return(null==t?"":gt(t))+n},k.each=hn,k.first=fn,Mn(k,function(){var t={};return q(k,function(n,e){ze.call(k.prototype,e)||(t[e]=n)}),t}(),{chain:false}),k.VERSION="4.17.4",r(["drop","take"],function(t,n){E.prototype[t]=function(e){e=e===Cn?1:Xe(xn(e),0);var r=this.__filtered__&&!n?new E(this):this.clone();return r.__filtered__?r.__takeCount__=Ye(e,r.__takeCount__):r.__views__.push({size:Ye(e,4294967295),type:t+(0>r.__dir__?"Right":"")}),r},E.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),r(["filter","map","takeWhile"],function(t,n){var e=n+1,r=1==e||3==e;E.prototype[t]=function(t){var n=this.clone();return n.__iteratees__.push({iteratee:getIteratee(t,3),type:e}),n.__filtered__=n.__filtered__||r,n}}),r(["head","last"],function(t,n){var e="take"+(n?"Right":"");E.prototype[t]=function(){return this[e](1).value()[0]}}),r(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");E.prototype[t]=function(){return this.__filtered__?new E(this):this[e](1)}}),E.prototype.compact=function(){return this.filter(Fn)},E.prototype.find=function(t){return this.filter(t).head()},E.prototype.findLast=function(t){return this.reverse().find(t)},E.prototype.invokeMap=bt(function(t,n){return typeof t=="function"?new E(this):this.map(function(r){var u=t,u=jt(u,r);return r=2>u.length?r:K(r,vt(u,0,-1)),u=null==r?r:r[un(ln(u))],null==u?Cn:e(u,r,n)})}),E.prototype.reject=function(t){return this.filter(vn(getIteratee(t)));},E.prototype.slice=function(t,n){t=xn(t);var e=this;return e.__filtered__&&(0<t||0>n)?new E(e):(0>t?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==Cn&&(n=xn(n),e=0>n?e.dropRight(-n):e.take(n-t)),e)},E.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},E.prototype.toArray=function(){return this.take(4294967295)},q(E.prototype,function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),u=k[r?"take"+("last"==n?"Right":""):n],o=r||/^find/.test(n);u&&(k.prototype[n]=function(){function n(t){return t=u.apply(k,a([t],c)),r&&_?t[0]:t}var i=this.__wrapped__,c=r?[1]:arguments,f=i instanceof E,l=c[0],s=f||Dr(i);s&&e&&typeof l=="function"&&1!=l.length&&(f=s=false);var _=this.__chain__,h=!!this.__actions__.length,l=o&&!_,f=f&&!h;return!o&&s?(i=f?i:new E(this),i=t.apply(i,c),i.__actions__.push({func:sn,args:[n],thisArg:Cn}),new x(i,_)):l&&f?t.apply(this,c):(i=this.thru(n),l?r?i.value()[0]:i.value():i)})}),r("pop push shift sort splice unshift".split(" "),function(t){var n=Oe[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);k.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var u=this.value();return n.apply(Dr(u)?u:[],t)}return this[e](function(e){return n.apply(Dr(e)?e:[],t)})}}),q(E.prototype,function(t,n){var e=k[n];if(e){var r=e.name+"";(cr[r]||(cr[r]=[])).push({name:n,func:e})}}),cr[Ft(Cn,2).name]=[{name:"wrapper",func:Cn}],E.prototype.clone=function(){var t=new E(this.__wrapped__);return t.__actions__=Ot(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ot(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ot(this.__views__),t},E.prototype.reverse=function(){if(this.__filtered__){var t=new E(this);t.__dir__=-1,t.__filtered__=true}else t=this.clone(),t.__dir__*=-1;return t},E.prototype.value=function(){var t,n=this.__wrapped__.value(),e=this.__dir__,r=Dr(n),u=0>e,o=r?n.length:0;t=o;for(var i=this.__views__,c=0,a=-1,f=i.length;++a<f;){var l=i[a],s=l.size;switch(l.type){case"drop":c+=s;break;case"dropRight":t-=s;break;case"take":t=Ye(t,c+s);break;case"takeRight":c=Xe(c,t-s)}}if(t={start:c,end:t},i=t.start,c=t.end,t=c-i,i=u?c:i-1,c=this.__iteratees__,a=c.length,f=0,l=Ye(t,this.__takeCount__),!r||!u&&o==t&&l==t)return dt(n,this.__actions__);r=[];t:for(;t--&&f<l;){for(i+=e,u=-1,o=n[i];++u<a;){var _=c[u],s=_.type,_=(0,_.iteratee)(o);if(2==s)o=_;else if(!_){if(1==s)continue t;break t}}r[f++]=o}return r},k.prototype.first=k.prototype.head,Ve&&(k.prototype[Ve]=_n),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(be._=k,define(function(){return k})):ye?((ye.exports=k)._=k,ve._=k):be._=k}).call(this);(function(FA){if(typeof(FA.Lib)!=="undefined"){return;}
FA.Lib={};})(FA);if(typeof(module)!=="undefined"&&typeof(module.exports)!=="undefined"){module.exports=FA.Lib;}
var Ajax=(function(FA,console){if(FA&&typeof(FA.Lib)==="object"&&typeof(FA.Lib.Common)==="object"&&typeof(FA.Lib.Common.Ajax)==="object"){return FA.Lib.Common.Ajax;}
var Post=function(url,opt){var options=opt||{};options.success=options.success||(function(ajax){return function(){console.warn("success: status="+ajax.xhttp.status+":"+ajax.xhttp.statusText)};})(this);options.error=options.error||(function(ajax){return function(){console.warn("error: status="+ajax.xhttp.status+":"+ajax.xhttp.statusText)};})(this);options.statusCode=options.statusCode||{};options.params=options.params||{};var params=null;for(key in options.params){var value=key+"="+encodeURIComponent(options.params[key]);if(params){params=params+"&"+value;}else{params=value;}}
this.xhttp=new XMLHttpRequest();this.xhttp.open('POST',encodeURI(url));this.xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.xhttp.onload=(function(xhttp,options){return function(){if((xhttp.status>=200&&xhttp.status<300)||xhttp.status===304){options.success();}else{options.error();}
if(typeof(options.statusCode[xhttp.status])==="function"){options.statusCode[xhttp.status]();}};})(this.xhttp,options);this.xhttp.send(params);};return{"Post":Post};})(typeof(FA)==="object"?FA:null,console);if(typeof(module)!=="undefined"&&typeof(module.exports)!=="undefined"){module.exports=Ajax;}
(function(FA,Ajax){if(typeof(FA.Lib.Common)!=="undefined"){return;}
FA.Lib.Common={"version":"0.1"};FA.Lib.Common.debounce=function(func,wait){var immediate=typeof(wait)==="undefined"||wait===null||wait===0?true:false;var timeoutSet=null;return function(){var _func=function(){timeoutSet=null;func();};if(immediate&&!timeoutSet){func();}else{clearTimeout(timeoutSet);timeoutSet=setTimeout(_func,wait);}};};FA.Lib.Common.isCoordinate=function(value){return new RegExp('^L ([0-9\-\.]+) ([0-9\-\.]+)$').test(value);};FA.Lib.Common.hasLocalStorage=(function(){try{window.localStorage.setItem('test','test');window.localStorage.removeItem('test');return true;}catch(e){return false;}})();FA.Lib.Common.Ajax=Ajax;})(FA,Ajax);if(typeof(module)!=="undefined"&&typeof(module.exports)!=="undefined"){module.exports=FA.Lib.Common;}
(function(FA){"use strict"
var FlightData=function(data){this._flightData=data;};FlightData.prototype.isScheduled=function(){return this._flightData.takeoffTimes.estimated>FADate.getNow();};FlightData.prototype.getTakeoffTime=function(){return this._flightData.takeoffTimes.actual||this._flightData.takeoffTimes.scheduled;};FlightData.prototype.getLandingTime=function(){return this._flightData.landingTimes.actual||this._flightData.landingTimes.estimated||this._flightData.landingTimes.scheduled||this._flightData.timestamp;};FlightData.prototype.getTrackPositionCount=function(){if(this._flightData.track==null){return 0;}
return _.uniqBy(this._flightData.track,'timestamp').length;};FlightData.prototype.canReplay=function(){return!this.isScheduled()&&typeof this.getTakeoffTime()==="number"&&typeof this.getLandingTime()==="number"&&this.getTakeoffTime()!==this.getLandingTime()&&this.getTrackPositionCount()>=2};FA.Modules.FlightReplay=FA.Modules.FlightReplay||{};FA.Modules.FlightReplay.FlightData=FlightData;}(FA));(function(FA,$){"use strict"
var DataSource=function(options){options=options||{};};DataSource.prototype.processFlightData=function(flightData){this.filedAltitude=(flightData.flightPlan&&flightData.flightPlan.altitude)||null;this.filedSpeed=(flightData.flightPlan&&flightData.flightPlan.speed)||null;if(flightData.track===undefined||flightData.track===null){this.altitudePoints=[];this.groundspeedPoints=[];this.estimatedAltitudePoints=[];this.estimatedGroundspeedPoints=[];return;}
this.altitudePoints=_.uniqBy(flightData.track.filter(function(pos){return pos.timestamp!==null&&!(pos.alt===null&&pos.isolated);}).map(function(pos){return{timestamp:pos.timestamp,value:pos.alt};}).sort(function(a,b){return a.timestamp-b.timestamp;}),'timestamp');this.estimatedAltitudePoints=generateEstimatedPoints(this.altitudePoints,this.range);this.groundspeedPoints=_.uniqBy(flightData.track.filter(function(pos){return pos.timestamp!==null&&!(pos.gs===null&&pos.isolated);}).map(function(pos){return{timestamp:pos.timestamp,value:pos.gs};}).sort(function(a,b){return a.timestamp-b.timestamp;}),'timestamp');this.estimatedGroundspeedPoints=generateEstimatedPoints(this.groundspeedPoints,this.range);};DataSource.prototype.getAltitudePoints=function(){return this.altitudePoints;};DataSource.prototype.getEstimatedAltitudePoints=function(){return this.estimatedAltitudePoints;};DataSource.prototype.getGroundspeedPoints=function(){return this.groundspeedPoints;};DataSource.prototype.getEstimatedGroundspeedPoints=function(){return this.estimatedGroundspeedPoints;};DataSource.prototype.getAltitudeValue=function(timestamp){if(timestamp>this.range.maxTime){timestamp=this.range.maxTime;}
if(timestamp<this.range.minTime){timestamp=this.range.minTime;}
var altitudeValue=interpolateValue(timestamp,this.altitudePoints.filter(function(alt){return alt.value!==null;}));if(altitudeValue===null){var estimatedAltitudeValue=interpolateValue(timestamp,this.estimatedAltitudePoints.filter(function(alt){return alt.value!==null;}));if(estimatedAltitudeValue===null){return null;}
return Math.round(estimatedAltitudeValue);}
return Math.round(altitudeValue);};DataSource.prototype.getGroundspeedValue=function(timestamp){if(timestamp>this.range.maxTime){timestamp=this.range.maxTime;}
if(timestamp<this.range.minTime){timestamp=this.range.minTime;}
var groundspeedValue=interpolateValue(timestamp,this.groundspeedPoints.filter(function(gs){return gs.value!==null;}));if(groundspeedValue===null){var estimatedGroundspeedValue=interpolateValue(timestamp,this.estimatedGroundspeedPoints.filter(function(gs){return gs.value!==null;}));if(estimatedGroundspeedValue===null){return null;}
return Math.round(estimatedGroundspeedValue)}
return Math.round(groundspeedValue);};DataSource.prototype.getMaxAltitudeValue=function(){return getMaxValue(this.altitudePoints);};DataSource.prototype.getMaxGroundspeedValue=function(){return getMaxValue(this.groundspeedPoints);};DataSource.prototype.getFiledAltitude=function(){return this.filedAltitude;};DataSource.prototype.getFiledSpeed=function(){return this.filedSpeed;};DataSource.prototype.setTimeRange=function(range){this.range=range;};var generateEstimatedPoints=function(actualValues,range){if(actualValues.length<2){return[];}
var estimatedValues=[];if(range){var startTimeExists=_.find(actualValues,{timestamp:range.startTime});if(!startTimeExists){var firstValue=_.find(actualValues,function(elem){return elem.value!==null;});if(firstValue!==undefined){estimatedValues.push({timestamp:range.startTime+1,value:firstValue.value});estimatedValues.push(firstValue);estimatedValues.push({timestamp:firstValue.timestamp+1,value:null});}else{estimatedValues.push({timestamp:range.startTime,value:0});}}}
var startEstimated=false;actualValues.forEach(function(pos,idx,values){if(pos.value===null){if(!startEstimated){if(idx===0){estimatedValues=estimatedValues.slice(0,1);}else{estimatedValues.push(values[idx-1]);}
startEstimated=true;}
var nextVals=values.slice(idx+1);if(nextVals.length>0&&nextVals[0].value!==null){estimatedValues.push(nextVals[0]);}}else{if(startEstimated&&estimatedValues.length>0){var last=_.last(estimatedValues);estimatedValues.push({timestamp:last.timestamp+1,value:null});startEstimated=false;}}});if(range){var endTimeExists=_.find(actualValues,{timestamp:range.endTime});if(!endTimeExists){var last;if(startEstimated){last=_.last(estimatedValues);}else{last=_.last(actualValues);estimatedValues.push(last);}
estimatedValues.push({timestamp:range.endTime,value:last!==undefined?last.value:null});}}
return estimatedValues;};var interpolateValue=function(timestamp,points){var i,a,b;var n=points.length;if(n<2){return null;}
if(timestamp<points[0].timestamp){return null;}
for(i=0;i<n-1;i++){a=points[i];b=points[i+1];if(timestamp>=a.timestamp&&timestamp<=b.timestamp){return interpolateSingleValue(timestamp,a,b);}}
return null;};var interpolateSingleValue=function(timestamp,a,b){return a.value+(timestamp-a.timestamp)*(b.value-a.value)/(b.timestamp-a.timestamp);};var getMaxValue=function(points){return points.reduce(function(max,p){return p.value>max?p.value:max;},null);};FA.Modules.FlightReplay=FA.Modules.FlightReplay||{};FA.Modules.FlightReplay.DataSource=DataSource;}(FA,$));(function(FA,$){"use strict"
var GraphOptions=function(containerElement,options){options=options||{};this.baseContainerElement=containerElement;this.state={showFiledAltitude:options.showFiledAltitude===true,showFiledSpeed:options.showFiledSpeed===true};this.checkboxContainer=document.createElement('div');$(this.checkboxContainer).addClass('flightReplayGraphOptionsCheckboxContainer');this.baseContainerElement.appendChild(this.checkboxContainer);this.showCheckboxLabel=document.createElement('div');$(this.showCheckboxLabel).text(options.showCheckboxLabel+":");this.checkboxContainer.appendChild(this.showCheckboxLabel);this.filedAltitudeCheckbox=document.createElement('input');$(this.filedAltitudeCheckbox).attr({id:'flightReplayShowFiledAltitude',type:'checkbox'});$(this.filedAltitudeCheckbox).on('change',onFiledAltitudeCheckboxChange.bind(this));$(this.filedAltitudeCheckbox).prop('checked',this.state.showFiledAltitude);this.filedAltitudeCheckboxLabel=document.createElement('label');$(this.filedAltitudeCheckboxLabel).text(options.filedAltitudeCheckboxLabel);$(this.filedAltitudeCheckboxLabel).attr('for','flightReplayShowFiledAltitude');this.filedAltitudeCheckboxDiv=document.createElement('div');$(this.filedAltitudeCheckboxDiv).addClass('flightReplayCheckboxOption altitude');this.filedAltitudeCheckboxDiv.appendChild(this.filedAltitudeCheckbox);this.filedAltitudeCheckboxDiv.appendChild(this.filedAltitudeCheckboxLabel);this.checkboxContainer.appendChild(this.filedAltitudeCheckboxDiv);this.filedSpeedCheckbox=document.createElement('input');$(this.filedSpeedCheckbox).attr({id:'flightReplayShowFiledSpeed',type:'checkbox'});$(this.filedSpeedCheckbox).on('change',onFiledSpeedCheckboxChange.bind(this));$(this.filedSpeedCheckbox).prop('checked',this.state.showFiledSpeed);this.filedSpeedCheckboxLabel=document.createElement('label');$(this.filedSpeedCheckboxLabel).text(options.filedSpeedCheckboxLabel);$(this.filedSpeedCheckboxLabel).attr('for','flightReplayShowFiledSpeed');this.filedSpeedCheckboxDiv=document.createElement('div');$(this.filedSpeedCheckboxDiv).addClass('flightReplayCheckboxOption speed');this.filedSpeedCheckboxDiv.appendChild(this.filedSpeedCheckbox);this.filedSpeedCheckboxDiv.appendChild(this.filedSpeedCheckboxLabel);this.checkboxContainer.appendChild(this.filedSpeedCheckboxDiv);if(options.trackLogLink){this.trackLogButton=document.createElement('div');$(this.trackLogButton).addClass('flightReplayButton tracklog');this.baseContainerElement.appendChild(this.trackLogButton);this.trackLogButtonIcon=document.createElement('div');$(this.trackLogButtonIcon).addClass('flightReplayButtonIcon');this.trackLogButton.appendChild(this.trackLogButtonIcon);this.trackLogButtonLabel=document.createElement('a');$(this.trackLogButtonLabel).addClass('flightReplayButtonLabel');$(this.trackLogButtonLabel).text(options.trackLogButtonLabel);$(this.trackLogButtonLabel).attr('href',options.trackLogLink);this.trackLogButton.appendChild(this.trackLogButtonLabel);}};GraphOptions.prototype.on=function(event,handler){$(this.baseContainerElement).on(event,handler);};GraphOptions.prototype.trigger=function(event,extra){$(this.baseContainerElement).trigger(event,extra);};GraphOptions.prototype.setFiledAltitudeVisible=function(visible){$(this.filedAltitudeCheckboxDiv).toggle(visible);this.state.showFiledAltitude=visible;$(this.showCheckboxLabel).toggle($(this.filedAltitudeCheckboxDiv).is(':visible')&&$(this.filedSpeedCheckboxDiv).is(':visible'));};GraphOptions.prototype.setFiledSpeedVisible=function(visible){$(this.filedSpeedCheckboxDiv).toggle(visible);this.state.showFiledSpeed=visible;$(this.showCheckboxLabel).toggle($(this.filedAltitudeCheckboxDiv).is(':visible')&&$(this.filedSpeedCheckboxDiv).is(':visible'));};var onFiledAltitudeCheckboxChange=function(event){this.state.showFiledAltitude=$(this.filedAltitudeCheckbox).prop('checked')===true;this.trigger('optionChange')};var onFiledSpeedCheckboxChange=function(event){this.state.showFiledSpeed=$(this.filedSpeedCheckbox).prop('checked')===true;this.trigger('optionChange')};FA.Modules.FlightReplay=FA.Modules.FlightReplay||{};FA.Modules.FlightReplay.GraphOptions=GraphOptions;}(FA,$));(function(FA,$){"use strict"
var PlaybackButtons=function(containerElement,options){options=options||{};this.playbackRateIterator=getIterator(options.playbackRates);this.state={playbackMode:'enRouteLive',playButtonState:'replay',playbackRate:this.playbackRateIterator.reset(),loopButtonState:'disabled'};this.playbackModeText=options.playbackModeText||{};this.buttonLabels=options.buttonLabels||{};this.baseContainerElement=containerElement;this.playbackModeIndicator=document.createElement('div');this.baseContainerElement.appendChild(this.playbackModeIndicator);$(this.playbackModeIndicator).addClass('flightReplayPlaybackModeIndicator');updatePlaybackModeIndicator(this.playbackModeIndicator,this.state.playbackMode,this.playbackModeText);this.playButton=document.createElement('div');$(this.playButton).addClass('flightReplayButton play');$(this.playButton).on('click',onPlayButtonClick.bind(this));this.baseContainerElement.appendChild(this.playButton);this.playButtonLabel=document.createElement('div');$(this.playButtonLabel).addClass('flightReplayButtonLabel');this.playButton.appendChild(this.playButtonLabel);this.playButtonIcon=document.createElement('div');$(this.playButtonIcon).addClass('flightReplayButtonIcon');this.playButton.appendChild(this.playButtonIcon);updatePlayButton(this.playButton,this.playButtonLabel,this.state.playButtonState,this.buttonLabels);this.playbackRateButton=document.createElement('div');$(this.playbackRateButton).addClass('flightReplayButton playbackRate');$(this.playbackRateButton).on('click',onPlaybackRateButtonClick.bind(this));this.baseContainerElement.appendChild(this.playbackRateButton);this.playbackRateButtonLabel=document.createElement('div');$(this.playbackRateButtonLabel).addClass('flightReplayButtonLabel');$(this.playbackRateButtonLabel).text(this.buttonLabels['playbackRate']);this.playbackRateButton.appendChild(this.playbackRateButtonLabel);this.playbackRateButtonIcon=document.createElement('div');$(this.playbackRateButtonIcon).addClass('flightReplayButtonIcon');this.playbackRateButton.appendChild(this.playbackRateButtonIcon);this.playbackRateButtonSpeedLabel=document.createElement('div');$(this.playbackRateButtonSpeedLabel).addClass('flightReplayButtonLabel');this.playbackRateButton.appendChild(this.playbackRateButtonSpeedLabel);updatePlaybackRateButton(this.playbackRateButtonSpeedLabel,this.state.playbackRate);this.loopButton=document.createElement('div');$(this.loopButton).addClass('flightReplayButton loop');$(this.loopButton).on('click',onLoopButtonClick.bind(this));this.baseContainerElement.appendChild(this.loopButton);this.loopButtonLabel=document.createElement('div');$(this.loopButtonLabel).addClass('flightReplayButtonLabel');$(this.loopButtonLabel).text(this.buttonLabels['loop']);this.loopButton.appendChild(this.loopButtonLabel);this.loopButtonToggle=document.createElement('div');$(this.loopButtonToggle).addClass('flightReplayToggle');var loopButtonTogglePaddle=document.createElement('div');$(loopButtonTogglePaddle).addClass('flightReplayTogglePaddle');this.loopButtonToggle.appendChild(loopButtonTogglePaddle);this.loopButton.appendChild(this.loopButtonToggle);this.loopButtonStateLabel=document.createElement('div');$(this.loopButtonStateLabel).addClass('flightReplayButtonLabel');this.loopButton.appendChild(this.loopButtonStateLabel);updateLoopButton(this.loopButton,this.loopButtonToggle,this.loopButtonStateLabel,this.state.loopButtonState,this.buttonLabels);};PlaybackButtons.prototype.on=function(event,handler){$(this.baseContainerElement).on(event,handler);};PlaybackButtons.prototype.trigger=function(event,extra){$(this.baseContainerElement).trigger(event,extra);};PlaybackButtons.prototype.setPlayButtonState=function(playButtonState){this.state.playButtonState=playButtonState;updatePlayButton(this.playButton,this.playButtonLabel,this.state.playButtonState,this.buttonLabels);};PlaybackButtons.prototype.setLoopButtonState=function(loopButtonState){this.state.loopButtonState=loopButtonState;updateLoopButton(this.loopButton,this.loopButtonToggle,this.loopButtonStateLabel,this.state.loopButtonState,this.buttonLabels);}
PlaybackButtons.prototype.setPlaybackMode=function(playbackMode){this.state.playbackMode=playbackMode;updatePlaybackModeIndicator(this.playbackModeIndicator,this.state.playbackMode,this.playbackModeText);}
PlaybackButtons.prototype.isLooping=function(){return this.state.loopButtonState==='active';};var updatePlaybackModeIndicator=function(playbackModeIndicator,mode,playbackModeText){switch(mode){case'enRouteLive':case'historicalLive':$(playbackModeIndicator).removeClass('replay');break;case'enRouteReplay':case'historicalReplay':$(playbackModeIndicator).addClass('replay');break;};$(playbackModeIndicator).text(playbackModeText[mode]);};var onPlayButtonClick=function(event){switch(this.state.playButtonState){case'replay':this.state.playButtonState='pause';this.trigger('clickPlay');break;case'pause':this.state.playButtonState='play';this.trigger('clickPause');break;case'play':this.state.playButtonState='pause';this.trigger('clickContinue');break;};updatePlayButton(this.playButton,this.playButtonLabel,this.state.playButtonState,this.buttonLabels);};var updatePlayButton=function(buttonElement,buttonLabelElement,state,buttonLabels){switch(state){case'play':$(buttonElement).removeClass('pause').addClass('play');$(buttonLabelElement).text(buttonLabels.play);break;case'replay':$(buttonElement).removeClass('pause').addClass('play');$(buttonLabelElement).text(buttonLabels.replay);break;case'pause':$(buttonElement).removeClass('play').addClass('pause');$(buttonLabelElement).text(buttonLabels.pause);break;}};var onPlaybackRateButtonClick=function(event){this.state.playbackRate=this.playbackRateIterator.next();updatePlaybackRateButton(this.playbackRateButtonSpeedLabel,this.state.playbackRate);this.trigger('clickRateChange',this.state.playbackRate);};var updatePlaybackRateButton=function(buttonStateLabelElement,playbackRate){$(buttonStateLabelElement).text(playbackRate+'x');};var onLoopButtonClick=function(event){switch(this.state.loopButtonState){case'disabled':return;case'active':this.state.loopButtonState='inactive';break;case'inactive':this.state.loopButtonState='active';break;}
updateLoopButton(this.loopButton,this.loopButtonToggle,this.loopButtonStateLabel,this.state.loopButtonState,this.buttonLabels);};var updateLoopButton=function(buttonElement,buttonToggleElement,buttonStateLabelElement,state,buttonLabels){switch(state){case'disabled':$(buttonElement).hide();break;case'active':$(buttonToggleElement).addClass('active');$(buttonStateLabelElement).text(buttonLabels.on);$(buttonElement).show();break;case'inactive':$(buttonToggleElement).removeClass('active');$(buttonStateLabelElement).text(buttonLabels.off);$(buttonElement).show();break;}};var getIterator=function(array){var currentIndex=-1;return{next:function(){currentIndex=(currentIndex+1)%array.length;return array[currentIndex];},reset:function(){currentIndex=0;return array[currentIndex];}};};FA.Modules.FlightReplay=FA.Modules.FlightReplay||{};FA.Modules.FlightReplay.PlaybackButtons=PlaybackButtons;}(FA,$));(function(FA,$){"use strict"
var Scrubber=function(containerElement,options){options=options||{};this.range=options.range;this.altitudeFormatter=options.altitudeFormatter;this.altitudeConverter=options.altitudeConverter;this.groundspeedFormatter=options.groundspeedFormatter;this.groundspeedConverter=options.groundspeedConverter;this.baseContainerElement=containerElement;$(this.baseContainerElement).addClass('flightReplayScrubberContainer');this.timeSlider=document.createElement('div');this.baseContainerElement.appendChild(this.timeSlider);noUiSlider.create(this.timeSlider,{animate:false,animationDuration:0,connect:[true,false],start:options.time,tooltips:[{to:formatTooltip.bind(this)}],range:{min:options.range.startTime,max:options.range.endTime}});this.timeSlider.noUiSlider.on('slide',onTimeSliderSlide.bind(this));this.verticalLine=document.createElement('div');$(this.verticalLine).addClass('flightReplayScrubberVerticalLine');this.baseContainerElement.appendChild(this.verticalLine);this.altitudeElement=document.createElement('div');$(this.altitudeElement).addClass('flightReplayScrubberAltitude');this.baseContainerElement.appendChild(this.altitudeElement);this.setAltitude(options.altitude);this.groundspeedElement=document.createElement('div');$(this.groundspeedElement).addClass('flightReplayScrubberGroundspeed');this.baseContainerElement.appendChild(this.groundspeedElement);this.setGroundspeed(options.groundspeed);if(options.position!==undefined&&options.width!==undefined){updateSliderPosition(this.timeSlider,options.position,options.width);}
updateVerticalLinePosition(this);this.timeSlider.noUiSlider.on('change',function(){$(this.timeSlider).find('.noUi-tooltip').hide();}.bind(this));$(this.timeSlider).find('.noUi-tooltip').hide();};Scrubber.prototype.on=function(event,handler){$(this.baseContainerElement).on(event,handler);};Scrubber.prototype.trigger=function(event,extra){$(this.baseContainerElement).trigger(event,extra);};Scrubber.prototype.positionSlider=function(position,width){updateSliderPosition(this.timeSlider,position,width);updateVerticalLinePosition(this);};Scrubber.prototype.setTime=function(timestamp){this.timeSlider.noUiSlider.set(timestamp);updateVerticalLinePosition(this);};Scrubber.prototype.getTime=function(){return Math.round(this.timeSlider.noUiSlider.get());};Scrubber.prototype.setAltitude=function(altitude){this.altitude=altitude;this.refreshAltitude();};Scrubber.prototype.setGroundspeed=function(groundspeed){this.groundspeed=groundspeed;this.refreshGroundspeed();};Scrubber.prototype.refreshAltitude=function(){var altitudeText='';if($.isNumeric(this.altitude)){altitudeText=this.altitudeFormatter(this.altitudeConverter(this.altitude));}
$(this.altitudeElement).text(altitudeText);};Scrubber.prototype.refreshGroundspeed=function(){var groundspeedText='';if($.isNumeric(this.groundspeed)){groundspeedText=this.groundspeedFormatter(this.groundspeedConverter(this.groundspeed));}
$(this.groundspeedElement).text(groundspeedText);};Scrubber.prototype.refreshValues=function(){this.refreshAltitude();this.refreshGroundspeed();};Scrubber.prototype.setTimeRange=function(range){this.range=range;this.timeSlider.noUiSlider.updateOptions({range:{min:this.range.startTime,max:this.range.endTime}});updateVerticalLinePosition(this);};var updateSliderPosition=function(slider,position,width){$(slider).width(width);$(slider).css({top:position.y-($(slider).outerHeight(true)/2),left:position.x});};var updateVerticalLinePosition=function(scrubber){var slider=$(scrubber.timeSlider);var sliderPercentValue=(scrubber.timeSlider.noUiSlider.get()-scrubber.range.startTime)/(scrubber.range.endTime-scrubber.range.startTime);var sliderPosition=slider.position();var verticalLine=$(scrubber.verticalLine);var verticalLineCenter=sliderPosition.left+(sliderPercentValue*slider.width());verticalLine.css({top:0,left:verticalLineCenter-(verticalLine.width()/2),height:sliderPosition.top+(slider.outerHeight(true)/2)});var altitudeElement=$(scrubber.altitudeElement);altitudeElement.css({top:0,left:verticalLineCenter-(verticalLine.width()/2)-altitudeElement.outerWidth(true)});var groundspeedElement=$(scrubber.groundspeedElement);groundspeedElement.css({top:0,left:verticalLineCenter+(verticalLine.width()/2)})};var onTimeSliderSlide=function(){if(this.range.minTime&&this.timeSlider.noUiSlider.get()<this.range.minTime){this.timeSlider.noUiSlider.set(this.range.minTime);}else if(this.range.maxTime&&this.timeSlider.noUiSlider.get()>this.range.maxTime){this.timeSlider.noUiSlider.set(this.range.maxTime);}
$(this.timeSlider).find('.noUi-tooltip').show();updateVerticalLinePosition(this);this.trigger('timeChange',this.getTime())};var formatTooltip=function(value){var current=moment.unix(value);var min=moment.unix(this.range.minTime);var duration=moment.duration(current.diff(min));var output='';var hours=parseInt(duration.asHours());if(hours){output+=hours+'h ';}
var minutes=parseInt(duration.asMinutes())-hours*60;if(minutes){output+=minutes+'m';}
if(!output){output='0m'}
return output;};FA.Modules.FlightReplay=FA.Modules.FlightReplay||{};FA.Modules.FlightReplay.Scrubber=Scrubber;}(FA,$));(function(FA,$,Chart){"use strict"
var AltitudeGroundspeedGraph=function(canvasElement,options){options=options||{};this.dataSource=options.dataSource;this.altitudeFormatter=options.altitudeFormatter;this.altitudeConverter=options.altitudeConverter;this.groundspeedFormatter=options.groundspeedFormatter;this.groundspeedConverter=options.groundspeedConverter;this.showFiledAltitude=options.showFiledAltitude;this.showFiledSpeed=options.showFiledSpeed;this.canvas=canvasElement;this.canvasContext=canvasElement.getContext('2d');createCustomLineChart(this);createCustomTimeScale(this);this.chart=createChart(this.canvasContext,options);};AltitudeGroundspeedGraph.prototype.on=function(event,handler){$(this.canvas).on(event,handler);};AltitudeGroundspeedGraph.prototype.trigger=function(event,extra){$(this.canvas).trigger(event,extra);};AltitudeGroundspeedGraph.prototype.update=function(){var graph=this;this.chart.data.datasets[0].data=this.dataSource.getAltitudePoints().map(function(altitudePoint){return{x:altitudePoint.timestamp,y:graph.altitudeConverter(altitudePoint.value)};});this.chart.data.datasets[1].data=this.dataSource.getEstimatedAltitudePoints().map(function(altitudePoint){return{x:altitudePoint.timestamp,y:graph.altitudeConverter(altitudePoint.value)};});this.chart.data.datasets[2].data=this.dataSource.getGroundspeedPoints().map(function(groundpeedPoint){return{x:groundpeedPoint.timestamp,y:graph.groundspeedConverter(groundpeedPoint.value)};});this.chart.data.datasets[3].data=this.dataSource.getEstimatedGroundspeedPoints().map(function(groundpeedPoint){return{x:groundpeedPoint.timestamp,y:graph.groundspeedConverter(groundpeedPoint.value)};});var maxAltitude=_.max([this.dataSource.getMaxAltitudeValue(),this.dataSource.getFiledAltitude()]);if(maxAltitude!==undefined){this.chart.options.scales.yAxes[0].ticks.display=true;this.chart.options.scales.yAxes[0].ticks.suggestedMax=graph.altitudeConverter(maxAltitude);}else{this.chart.options.scales.yAxes[0].ticks.display=false;}
var maxGroundspeed=_.max([this.dataSource.getMaxGroundspeedValue(),this.dataSource.getFiledSpeed()]);if(maxGroundspeed!==undefined){this.chart.options.scales.yAxes[1].ticks.display=true;this.chart.options.scales.yAxes[1].ticks.suggestedMax=graph.groundspeedConverter(maxGroundspeed);}else{this.chart.options.scales.yAxes[1].ticks.display=false;}
this.chart.options.scales.xAxes[0].time.min=this.range.startTime;this.chart.options.scales.xAxes[0].time.max=this.range.endTime;this.chart.update();};AltitudeGroundspeedGraph.prototype.getTimeAxisPosition=function(){var timeAxis=this.chart.scales.timeAxis;return{position:{x:timeAxis.left,y:timeAxis.top},width:timeAxis.width};};AltitudeGroundspeedGraph.prototype.setTimeRange=function(range){this.range=range;};var createCustomLineChart=function(graph){Chart.defaults.customLine=Chart.defaults.line;var customLineChart=Chart.controllers.line.extend({draw:function(ease){var meta=this.getMeta();if(meta.data.length>=2&&'range'in graph&&'maxTime'in graph.range){var ctx=this.chart.chart.ctx;ctx.save();if(graph.showFiledAltitude===true){drawFiledAltitudeLine(this.chart,graph.altitudeConverter(graph.dataSource.getFiledAltitude()));}
if(graph.showFiledSpeed===true){drawFiledSpeedLine(this.chart,graph.groundspeedConverter(graph.dataSource.getFiledSpeed()));}
var maxX=this.chart.scales.timeAxis.getPixelForValue(graph.range.maxTime);var maxY=this.chart.chart.canvas.height;ctx.rect(0,0,maxX,maxY);ctx.clip();Chart.controllers.line.prototype.draw.call(this,ease);ctx.restore();}else{Chart.controllers.line.prototype.draw.call(this,ease);}}});Chart.controllers.customLine=customLineChart;};var createCustomTimeScale=function(graph){var TimeScale=Chart.scaleService.getScaleConstructor('time');var timeScaleConfig=Chart.scaleService.getScaleDefaults('time');var CustomTimeScale=TimeScale.extend({draw:function(chartArea){TimeScale.prototype.draw.call(this,chartArea);var timeAxis=this.chart.scales.timeAxis
graph.trigger('timeAxisDraw',{position:{x:timeAxis.left,y:timeAxis.top},width:timeAxis.width});},buildTicks:function(){if(this.options.time.min===undefined||this.options.time.max===undefined){return TimeScale.prototype.buildTicks.call(this);}
TimeScale.prototype.buildTicks.call(this);var minTimeTick={value:this.options.time.min*1000};var maxTimeTick={value:this.options.time.max*1000};return[minTimeTick,maxTimeTick];},});Chart.scaleService.registerScaleType('customTime',CustomTimeScale,timeScaleConfig);};var createChart=function(canvasContext,options){var chart=new Chart(canvasContext,{type:'customLine',data:{datasets:[{yAxisID:'altitudeAxis',borderColor:'rgb(0, 231, 46)',borderWidth:1.5,fill:false,lineTension:0},{yAxisID:'altitudeAxis',borderColor:'rgb(255, 255, 255)',borderWidth:1.5,fill:false,lineTension:0},{yAxisID:'groundspeedAxis',borderColor:'rgb(255, 255, 0)',borderWidth:1.5,fill:false,lineTension:0},{yAxisID:'groundspeedAxis',borderColor:'rgb(255, 255, 255)',borderWidth:1.5,fill:false,lineTension:0}],},options:{animation:{duration:0,},hover:{animationDuration:0,},responsiveAnimationDuration:0,elements:{line:{},point:{radius:0 }},maintainAspectRatio:false,layout:{padding:{left:0,right:0,top:25,bottom:0}},legend:{display:false},spanGaps:false,scales:{xAxes:[{id:'timeAxis',type:'customTime',display:true,gridLines:{drawOnChartArea:false,drawTicks:false,lineWidth:2,color:'rgb(2, 160, 226)'},ticks:{fontColor:'rgb(255, 255, 255)',fontSize:11,fontStyle:'regular',padding:12,maxRotation:0,callback:function(value,index){return options.timeFormatter(FADate.convertNumbersToEnglish(value),index);}},time:{parser:function(val){return moment(val,'X');},unit:'hour',displayFormats:{millisecond:'X',hour:'X'},stepSize:1}}],yAxes:[{id:'altitudeAxis',gridLines:{display:false,lineWidth:1,color:'rgb(0, 231, 46)',drawTicks:false},ticks:{beginAtZero:true,fontColor:'rgb(0, 231, 46)',padding:10,callback:function(value){return options.altitudeFormatter(Math.round(value*100)/100);}},scaleLabel:{display:true,labelString:options.altitudeAxisLabel,fontColor:'rgb(0, 231, 46)',},afterBuildTicks:function(scale){if(!scale.options.ticks.display){scale.ticks=[];}}},{id:'groundspeedAxis',position:'right',gridLines:{display:false,lineWidth:1,color:'rgb(255, 255, 0)',drawTicks:false},ticks:{beginAtZero:true,fontColor:'rgb(255, 255, 0)',padding:10,callback:function(value){return options.groundspeedFormatter(Math.round(value*100)/100);}},scaleLabel:{display:true,labelString:options.groundspeedAxisLabel,fontColor:'rgb(255, 255, 0)'},afterBuildTicks:function(scale){if(!scale.options.ticks.display){scale.ticks=[];}}}]}}});return chart;};var drawFiledAltitudeLine=function(chart,filedAltitude){if(filedAltitude===null){return;}
var ctx=chart.chart.ctx;var altitudeAxis=chart.scales.altitudeAxis;var groundspeedAxis=chart.scales.groundspeedAxis;var altitudeDataset=chart.data.datasets[0];var y=altitudeAxis.getPixelForValue(filedAltitude)+0.5;ctx.strokeStyle='#78f378';ctx.setLineDash([8,4]);ctx.beginPath();ctx.moveTo(altitudeAxis.right+0.5,y);ctx.lineTo(groundspeedAxis.left-0.5,y);ctx.stroke();};var drawFiledSpeedLine=function(chart,filedSpeed){if(filedSpeed===null){return;}
var ctx=chart.chart.ctx;var altitudeAxis=chart.scales.altitudeAxis;var groundspeedAxis=chart.scales.groundspeedAxis;var groundspeedDataset=chart.data.datasets[2];var y=groundspeedAxis.getPixelForValue(filedSpeed)+0.5;ctx.strokeStyle='#f4f476';ctx.setLineDash([8,4]);ctx.beginPath();ctx.moveTo(altitudeAxis.right+0.5,y);ctx.lineTo(groundspeedAxis.left-0.5,y);ctx.stroke();};FA.Modules.FlightReplay=FA.Modules.FlightReplay||{};FA.Modules.FlightReplay.AltitudeGroundspeedGraph=AltitudeGroundspeedGraph;}(FA,$,Chart));(function(FA,$,FADate){"use strict";var FlightReplayControl=function(containerElement,map,options){options=options||{};if(options.analytics){var analytics=new FA.Modules.Analytics("FlightReplayControl",options.analytics.interface);this.logEvent=_.once(function(eventName){analytics.logEvent(eventName,this.flightData&&this.flightData.flightId,FADate.getNow());}.bind(this));}else{console.warn("FlightReplayControl: Analytics not enabled");this.logEvent=function(){};}
this.flightData={};this.playbackRateFactor=10;this.isReplaying=false;this.units=options.units;this.labels=options.labels;this.convertAltitude=function(value){if(value===null){return null;}
return FAUser.convertAltitudeValue(value,this.units.altitude);}.bind(this);this.convertGroundspeed=function(value){if(value===null){return null;}
return FAUser.convertSpeedValue(value,this.units.groundspeed);}.bind(this);this.formatTime=function(value,index){var timestamp=value*1000;var timeFormat=FADate.config.userHour+' %Z';var formattedTime;if(FADate.config.timeLocal){formattedTime=FADate.displayFlightTime(timestamp,'',timeFormat);}else{var originTz=this.flightData&&this.flightData.origin&&this.flightData.origin.TZ||'';var destinationTz=this.flightData&&this.flightData.destination&&this.flightData.destination.TZ||'';var originPrefix='';var destinationPrefix='';if(index==0){originPrefix=this.flightData.origin&&this.flightData.origin.isValidAirportCode?FAUser.formatAirportCode(this.flightData.origin.icao,this.flightData.origin.iata,this.flightData.origin.altIdent)+' ':'';destinationPrefix=this.flightData.destination&&this.flightData.destination.isValidAirportCode?FAUser.formatAirportCode(this.flightData.destination.icao,this.flightData.destination.iata,this.flightData.destination.altIdent)+' ':'';}
if(originTz===destinationTz){if(originPrefix&&destinationPrefix){originPrefix+='/ ';}
formattedTime=[originPrefix+destinationPrefix+FADate.displayFlightTime(timestamp,originTz,timeFormat)];}else{formattedTime=[originPrefix+FADate.displayFlightTime(timestamp,originTz,timeFormat),destinationPrefix+FADate.displayFlightTime(timestamp,destinationTz,timeFormat)];}}
return formattedTime;}.bind(this);this.baseContainerElement=containerElement;$(this.baseContainerElement).addClass('flightReplayContainer')
this.dataSource=new FA.Modules.FlightReplay.DataSource();this.graphContainerElement=document.createElement('div');this.baseContainerElement.appendChild(this.graphContainerElement);$(this.graphContainerElement).addClass('flightReplayGraphContainer')
this.graphCanvas=document.createElement('canvas');this.graphContainerElement.appendChild(this.graphCanvas);this.graph=new FA.Modules.FlightReplay.AltitudeGroundspeedGraph(this.graphCanvas,{dataSource:this.dataSource,altitudeFormatter:function(value){return FAUser.formatAltitudeValue(value,this.units.altitude,false);}.bind(this),altitudeConverter:this.convertAltitude,groundspeedFormatter:function(value){return FAUser.formatSpeedValue(value,this.units.groundspeed,false);}.bind(this),groundspeedConverter:this.convertGroundspeed,timeFormatter:this.formatTime,altitudeAxisLabel:this.labels.altitudeAxis.toUpperCase()+' ('+FAUser._altitudeUnitSymbols[this.units.altitude]+')',groundspeedAxisLabel:this.labels.groundspeedAxis.toUpperCase()+' ('+FAUser._speedUnitSymbols[this.units.groundspeed]+')',showFiledAltitude:options.showFiledAltitude,showFiledSpeed:options.showFiledSpeed});this.graph.on('timeAxisDraw',onGraphTimeAxisDraw.bind(this));this.scrubberContainerElement=document.createElement('div');this.graphContainerElement.appendChild(this.scrubberContainerElement);this.playbackNotice=document.createElement('div');this.baseContainerElement.appendChild(this.playbackNotice)
$(this.playbackNotice).addClass('flightReplayNotice');this.playbackButtonsContainerElement=document.createElement('div');this.baseContainerElement.appendChild(this.playbackButtonsContainerElement);$(this.playbackButtonsContainerElement).addClass('flightReplayPlaybackButtonsContainer')
this.playbackButtons=new FA.Modules.FlightReplay.PlaybackButtons(this.playbackButtonsContainerElement,{playbackRates:[10,50,100],playbackModeText:{enRouteLive:options.labels.enRouteLiveModeIndicator,enRouteReplay:options.labels.enRouteReplayModeIndicator,historicalLive:options.labels.historicalLiveModeIndicator,historicalReplay:options.labels.historicalReplayModeIndicator},buttonLabels:{play:options.labels.playButton,pause:options.labels.pauseButton,replay:options.labels.replayButton,playbackRate:options.labels.playbackRateButton,loop:options.labels.loopButton,on:options.labels.toggleOn,off:options.labels.toggleOff}});this.playbackButtons.on('clickPlay',onStartReplay.bind(this));this.playbackButtons.on('clickPause',onPauseReplay.bind(this));this.playbackButtons.on('clickContinue',onContinueReplay.bind(this));this.playbackButtons.on('clickRateChange',onPlaybackRateChange.bind(this));this.graphOptionsContainerElement=document.createElement('div');this.baseContainerElement.appendChild(this.graphOptionsContainerElement);$(this.graphOptionsContainerElement).addClass('flightReplayGraphOptionsContainer');this.graphOptions=new FA.Modules.FlightReplay.GraphOptions(this.graphOptionsContainerElement,{filedAltitudeCheckboxLabel:this.labels.filedAltitudeCheckbox,filedSpeedCheckboxLabel:this.labels.filedSpeedCheckbox,showCheckboxLabel:this.labels.showCheckbox,showFiledAltitude:options.showFiledAltitude,showFiledSpeed:options.showFiledSpeed,trackLogButtonLabel:this.labels.trackLogButton,trackLogLink:options.trackLogLink});this.graphOptions.on('optionChange',onGraphOptionsChange.bind(this));this.map=map;this.map.on('animationFlight.flightDataChange',onFlightDataChange.bind(this));this.map.on('animationController.clockCreated',onAnimationClockCreated.bind(this));this.map.on('animationController.clockTimeChange',onAnimationTimeChange.bind(this));this.map.on('enable-wx-replay',onEnableWxReplay.bind(this));};FlightReplayControl.prototype.getState=function(){if(typeof(this.isReplaying)==="undefined"){return"undefined";}
if(this.isReplaying){return"playing";}else{return"paused";}};FlightReplayControl.prototype.on=function(event,handler){$(this.baseContainerElement).on(event,handler);};FlightReplayControl.prototype.trigger=function(event,extra){$(this.baseContainerElement).trigger(event,extra);};FlightReplayControl.prototype.setUnits=function(units){this.units=units;this.graph.update();if(this.scrubber){this.scrubber.refreshValues();}};var onFlightDataChange=function(event,flightData){if(flightData.track===null){return;}
this.flightData=flightData;this.range={startTime:flightData.takeoffTimes.actual||flightData.takeoffTimes.scheduled,minTime:flightData.takeoffTimes.actual||flightData.takeoffTimes.scheduled,endTime:flightData.landingTimes.actual||flightData.landingTimes.estimated||flightData.landingTimes.scheduled||flightData.timestamp||FADate.getNow()+1,maxTime:flightData.landingTimes.actual||flightData.landingTimes.estimated||flightData.landingTimes.scheduled||flightData.timestamp||FADate.getNow()+1};if(typeof(this._frameBuffer)!=="undefined"){this._frameBuffer.resetTimeSeriesClock(this.range.startTime,this.range.endTime);}
if(flightData.timestamp>this.range.endTime){this.range.endTime=flightData.timestamp;}
if(this.flightData.resultUnknown===true&&flightData.takeoffTimes.actual===flightData.landingTimes.actual){this.range.endTime=flightData.timestamp,this.range.maxTime=flightData.timestamp}
this.graph.setTimeRange(this.range);if(this.scrubber){this.scrubber.setTimeRange(this.range);}
this.dataSource.setTimeRange(this.range);this.dataSource.processFlightData(flightData);this.graphOptions.setFiledAltitudeVisible(this.dataSource.getFiledAltitude()!==null);this.graphOptions.setFiledSpeedVisible(this.dataSource.getFiledSpeed()!==null);this.graph.showFiledAltitude=this.graphOptions.state.showFiledAltitude;this.graph.showFiledSpeed=this.graphOptions.state.showFiledSpeed;if(hasFlightLanded(flightData)){if(this.playbackButtons.state.loopButtonState==='disabled'){this.playbackButtons.setLoopButtonState('inactive');}
this.playbackButtons.setPlaybackMode('historicalLive');}else{this.playbackButtons.setLoopButtonState('disabled');}};var onAnimationClockCreated=function(event){if(this.flightData&&this.flightData.landingTimes.actual){var arrivalTime;if(this.flightData.landingTimes.actual==this.flightData.takeoffTimes.actual){arrivalTime=this.flightData.timestamp;}else{arrivalTime=this.flightData.landingTimes.actual;}
this.map.setAnimationTime(arrivalTime);this.map.setAnimationRate(0);}
this.range.maxTime=this.map.getAnimationClock().getNow();if(this.scrubber===undefined){var animationTime=this.map.getAnimationTime();var scrubberOptions={range:this.range,time:animationTime,altitude:this.dataSource.getAltitudeValue(animationTime),groundspeed:this.dataSource.getGroundspeedValue(animationTime),altitudeFormatter:function(value){return FAUser.formatAltitudeValue(value,this.units.altitude,true);}.bind(this),altitudeConverter:this.convertAltitude,groundspeedFormatter:function(value){return FAUser.formatSpeedValue(value,this.units.groundspeed,true);}.bind(this),groundspeedConverter:this.convertGroundspeed,};if(this.graph!==undefined){var timeAxisPosition=this.graph.getTimeAxisPosition();scrubberOptions.position=timeAxisPosition.position;scrubberOptions.width=timeAxisPosition.width;}
this.scrubber=new FA.Modules.FlightReplay.Scrubber(this.scrubberContainerElement,scrubberOptions);this.scrubber.on('timeChange',onScrubberTimeChange.bind(this));}
this.dataSource.setTimeRange(this.range);this.graph.setTimeRange(this.range);this.graph.update();};var onEnableWxReplay=function(event,frameBuffer){if(typeof(this.attachWeatherReplayBuffer)==="function"){this.attachWeatherReplayBuffer(frameBuffer);}}
var onAnimationTimeChange=function(event,timestamp){this.range.maxTime=Math.min(this.map.getAnimationClock().getNow(),this.range.endTime);this.dataSource.setTimeRange(this.range);this.graph.setTimeRange(this.range);this.graph.update();if(this.scrubber!==undefined){this.scrubber.setTime(timestamp);this.scrubber.setAltitude(this.dataSource.getAltitudeValue(timestamp));this.scrubber.setGroundspeed(this.dataSource.getGroundspeedValue(timestamp))
this.scrubber.setTimeRange(this.range);}
if(timestamp>=this.range.maxTime&&this.isReplaying){if(hasFlightLanded(this.flightData)&&this.playbackButtons.isLooping()===true){this.map.setAnimationTime(this.range.minTime);if(this.scrubber!==undefined){this.scrubber.setTime(this.range.minTime);this.scrubber.setAltitude(this.dataSource.getAltitudeValue(this.range.minTime));this.scrubber.setGroundspeed(this.dataSource.getGroundspeedValue(this.range.minTime));}}else{this.isReplaying=false;this.playbackButtons.setPlayButtonState('replay');if(hasFlightLanded(this.flightData)){this.map.setAnimationRate(0);this.playbackButtons.setPlaybackMode('historicalLive');}else{this.map.setAnimationRate(1);this.playbackButtons.setPlaybackMode('enRouteLive');}}}};var onGraphTimeAxisDraw=function(event,params){if(this.scrubber!==undefined){this.scrubber.positionSlider(params.position,params.width);}};var onScrubberTimeChange=function(event,timestamp){this.logEvent('scrubber');this.isReplaying=false;this.map.setAnimationTime(timestamp);if(hasFlightLanded(this.flightData)){this.map.setAnimationRate(0);if(timestamp>=this.range.maxTime){this.playbackButtons.setPlayButtonState('replay');this.playbackButtons.setPlaybackMode('historicalLive');}else{this.playbackButtons.setPlayButtonState('play');this.playbackButtons.setPlaybackMode('historicalReplay');}}else{if(timestamp>=this.range.maxTime){this.map.setAnimationRate(1);this.playbackButtons.setPlayButtonState('replay');this.playbackButtons.setPlaybackMode('enRouteLive');}else{this.map.setAnimationRate(0);this.playbackButtons.setPlayButtonState('play');this.playbackButtons.setPlaybackMode('enRouteReplay');}}
this.scrubber.setAltitude(this.dataSource.getAltitudeValue(timestamp));this.scrubber.setGroundspeed(this.dataSource.getGroundspeedValue(timestamp));};var onStartReplay=function(event){this.logEvent('replay');this.isReplaying=true;if(hasFlightLanded(this.flightData)){this.playbackButtons.setPlaybackMode('historicalReplay');}else{this.playbackButtons.setPlaybackMode('enRouteReplay');}
this.map.setAnimationTime(this.range.minTime)
this.map.setAnimationRate(this.playbackButtons.state.playbackRate*this.playbackRateFactor);if(this.scrubber!==undefined){this.scrubber.setTime(this.range.minTime);this.scrubber.setAltitude(this.dataSource.getAltitudeValue(this.range.minTime));this.scrubber.setGroundspeed(this.dataSource.getGroundspeedValue(this.range.minTime));}
this.trigger("startedReplay",null);};var onContinueReplay=function(event){this.logEvent('play');this.isReplaying=true;this.map.setAnimationRate(this.playbackButtons.state.playbackRate*this.playbackRateFactor);this.trigger("continuedReplay",null);};var onPauseReplay=function(event){this.logEvent('pause');this.isReplaying=false;this.map.setAnimationRate(0);this.trigger("pausedReplay",null);};var onPlaybackRateChange=function(event,playbackRate){if(this.isReplaying){this.map.setAnimationRate(playbackRate*this.playbackRateFactor);}};var onGraphOptionsChange=function(event){this.graph.showFiledAltitude=this.graphOptions.state.showFiledAltitude;this.graph.showFiledSpeed=this.graphOptions.state.showFiledSpeed;this.graph.update();};var hasFlightLanded=function(flightData){return flightData!=null&&flightData.landingTimes.actual!=null&&flightData.cancelled!==true;};FA.Modules.FlightReplay=FA.Modules.FlightReplay||{};FA.Modules.FlightReplay.FlightReplayControl=FlightReplayControl;}(FA,$,FADate));(function(FA){var defaultConsoleEnabled=false;var snapAnalyticsEnabled=function(){return FA.faConfig.fa_config('snap_analytics_enabled',0)!=0;};var logEventToConsole=function(category,action,label,value){if(this.consoleEnabled){console.log("Analytics Event (category="+category+") "+action+":"+label+":"+value);}}
var logEventToSnapEndpoint=function(category,action,label,value){if(snapAnalyticsEnabled()){var snapEndpoint="/ajax/ignoreall/snap.rvt";var key=(category||'').replace(':','\\:')+":"+(action||'').replace(':','\\:')+":"+(label||'').replace(':','\\:');var ajax=new Ajax.Post(snapEndpoint,{"params":{"key":key}});}}
var logEventToGoogleAnalytics=function(category,action,label,value){if((!category)||(!action)){return;}
if(typeof(ga)!=='function'){return;}
if(label){ga('send','event',category,action,label,value);}else{ga('send','event',category,action);}
console.log("Analytics Event (interface=Google) (category="+category+") "+action+":"+label+":"+value);}
var Analytics=function(categoryName,interface){this.categoryName=(categoryName||'').replace(/\s/g,'');this.consoleEnabled=defaultConsoleEnabled;if(!this.categoryName||this.categoryName===""){console.error("Analytics: categoryName is null or empty string");return null;}
this.setAnalyticsInterface(typeof(interface)!=="undefined"?interface:"default");FA.analyticsCollectors=typeof(FA.analyticsCollectors)!=="undefined"?FA.analyticsCollectors:{};FA.analyticsCollectors[categoryName]=this;}
Analytics.prototype.setAnalyticsInterface=function(interface){var workerFunction=logEventToConsole;switch(interface){case"Google":workerFunction=typeof(ga)==="function"?logEventToGoogleAnalytics:logEventToConsole;if(workerFunction==logEventToConsole){console.error("Analytics: Google Analytics unavailable. (category="+this.categoryName+")");}
break;case"FA_Snap":workerFunction=typeof(Ajax)!=="undefined"&&snapAnalyticsEnabled()?logEventToSnapEndpoint:logEventToConsole;if(workerFunction==logEventToConsole){console.error("Analytics: FA Snap Analytics unavailable. (category="+this.categoryName+")");}
break;case"Console":workerFunction=logEventToConsole;break;}
this.logEvent=(function(worker){return function(action,label,value){worker(this.categoryName,(action||'').replace(/\s/g,''),(label||'').replace(/\s/g,''),value);}})(workerFunction.bind(this));if(!this.consoleEnabled&&workerFunction===logEventToConsole){console.warn("Analytics: logEventToConsole is silenced.");}}
FA.Modules.Analytics=Analytics;})(FA);var console=console||{"log":function(){}};var FlightPage=function(){this.selectors={toggleMyFlightAware:'a[data-action=toggleMyFlightAware]',notifyFriend:'a[data-action=notifyFriend]',notifyMe:'a[data-action=notifyMe]',button:'a.flightPageButton',reportInaccuracies:'a[data-action=reportInaccuracies]',closeMyFlightAwareErrorTooltip:'a[data-action=closeMyFlightAwareErrorTooltip]',activityLogContainer:'div.flightPageActivityLog',mapContainer:'div.flightPageMapContainer',pageContainer:'div.flightPageContainer',avatarContainer:'div.flightPageAvatar',sectionHeading:'h3.flightPageHeading',reportType:'label.flightPageReportType',myFlightAwareErrorTooltip:'div.largeTooltip.myFlightAwareError',toggleIcons:'fa-minus-square fa-plus-square',thumbnailContainer:'div.flightPageThumbnails',icon:'i.fa',notificationModal:'div#flightPageNotificationModal',settingsModal:'div#flightPageSettingsModal',messageModal:'div#flightPageMessageModal',remarkModal:'div#flightPageRemarkModal',staticMapContainer:'div.flightPageStaticMapContainer',staticMapZoomControl:'div.flightPageStaticMapZoomControl',staticMapControls:'div.flightPageStaticMapControls',staticMap:'div.flightPageStaticMap',tableHeading:'h3.flightPageDataTableHeading',table:'div.flightPageDataTable',row:'div.flightPageDataRowTall',templateContainer:'div[data-template="%s"]',templates:'div[data-template]',tourStartBtn:'a.flightPageStartTour',flightPageSummaryMap:'div.flightPageSummaryMap',flightPageDetails:'div.flightPageDetails',actualDestinationWeather:'span#destinationActual',actualOriginWeather:'span#originActual',forecastDestinationWeather:'span#destinationForecast',forecastOriginWeather:'span#originForecast',actualDestinationRunway:'span#destinationActualRunway',actualOriginRunway:'span#originActualRunway',activeDestinationRunways:'span#destinationActiveRunways',activeOriginRunways:'span#originActiveRunways',scheduledFboSelect:'div.flightPageAirportFBOSelector, div.flightPageAirportFBOEditButton, div.flightPageAirportFBOMobileEditButton, .flightPageFBOProcessingSpinner',scheduledFboDropdown:'div.flightPageAirportFBODropdown',scheduledFboRadio:'.destinationSchFbo',scheduledFboLabel:'label.flightPageSelectFBOCell',scheduledFboSelectButton:'a.scheduledFboSelectButton',scheduledFboRemoveButton:'a.scheduledFboRemoveButton',scheduledFboNotifyButton:'a.scheduledFboNotifyButton',scheduledFboSaveButton:'a.scheduledFboSaveButton',scheduledFboForm:'#scheduledFboForm',scheduledFboNoEmailDisclaimer:'.flightPageFBOEmailDisclaimer',scheduledFboEmailInput:'.scheduledFboEmailInput',scheduledFboEmailFormInput:'#scheduledFboEmailFormInput',scheduledFboEmailValid:'.scheduledFboEmailValid',scheduledFboSelectedFbo:'input[name=destinationSchFbo]:checked',estimatedDepartureSelect:'div.flightPageAirportFBOSelector, div.flightPageAirportFBOEditButton, div.flightPageAirportFBOMobileEditButton',};this.debounceTimeout={};this.data={};this.breakpoints={narrow:'767',wide:'1024'};this.tour=null;this.acarsMessage={};if(typeof debugMode!=='undefined'){this.debugMode=debugMode||false;}
this.debugDataLoaded=false;this.init();};FlightPage.ArrDelayTolerance=900;FlightPage.DepDelayTolerance=1800;FlightPage.ArrEarlyTolerance=60;FlightPage.DepEarlyTolerance=60;FlightPage.GateArrivalThreshold=1800;FlightPage.JustLandedThreshold=120;FlightPage.InboundFlightThreshold=1200;FlightPage.ActiveFlight={};FlightPage.RunwayIcon='<img class="flightPageAircraftIcon Landed" src="/images/planeLanding.png" width="46" height="13">';FlightPage.FlightPathLegend='<svg xmlns="http://www.w3.org/2000/svg" class="flightPageFlightPathLegend" viewBox="0 0 191.73 58.59"><defs><style>.cls-1,.cls-2,.cls-3{fill:none;stroke-miterlimit:10;}.cls-1{stroke:aqua;stroke-dasharray:4 2;}.cls-2{stroke:lime;}.cls-3{stroke:#ccc;}.cls-4{font-size:16px;fill:#fff;font-family:HelveticaNeue-Light, Helvetica Neue;}.cls-5{fill:#ccc;}</style></defs><title>est_outline_legend</title><g id="Layer_2" data-name="Layer 2"><g id="Onboarding_3" data-name="Onboarding 3"><line class="cls-1" y1="9.56" x2="44" y2="9.56"/><line class="cls-2" y1="28.4" x2="44" y2="28.4"/><line class="cls-3" y1="48.88" x2="29.43" y2="48.88"/><text class="cls-4" transform="translate(51 13.71)">Filed flight plan<tspan x="0" y="20">Actual flight path</tspan><tspan x="0" y="40">Estimated flight path</tspan></text><path class="cls-5" d="M34.36,42.08l3.88,6h5l.8.85-.8.85h-5l-3.88,6,.37-6h-3.6l-2.06,1.41.84-2.26-.84-2.26L31.13,48h3.6l-.37-6m-.93-2.8.18,2.84.32,5.16H31.36L29.49,46l-2-1.34.83,2.22.74,2-.74,2-.83,2.22,2-1.34,1.87-1.28h2.57l-.32,5.16-.18,2.84L35,56.1l3.66-5.62h4.88l.22-.24.8-.85.48-.51-.48-.51-.8-.85-.22-.24H38.65L35,41.67l-1.56-2.39Z"/></g></g></svg>';FlightPage.COOKIE='fa_fp_ls';FlightPage.prototype.init=function(){this.handlebarsHelpers=new FA.Modules.Helpers.Handlebars();this.handlebarsHelpers.init();FlightPage.hardRefreshTime=null;FlightPage.softRefreshTime=null;FlightPage.FlightsModified=[];this.handleDebugMode();this.handleData();this.handleStaffTools();this.handleFlightPageHeadings();this.handleMessageDialog();this.handleRemarkDialog();this.handleNotificationDialog();this.handleMyFlightAware();this.handleCloseMyFlightAwareErrorTooltip();this.handleReportSelectionsPersistent();this.handleReportInaccuracies();this.handleReportInaccuraciesSelection();this.handleThumbnailScroller();this.handleActivityLog();this.handleStaticMap();this.handleStaticMapZoomControl();this.handleScheduledFBOSelection();this.handleDepartureTimeSelection();$(document).foundation({reveal:{root_element:this.selectors.pageContainer,animation:'none',animation_speed:0},tab:{deep_linking:true,scroll_to_content:false}});this.handleFlightPageSettings();this.handlePageShow();this.setupTourGuide();this.showAdhoc();this.handleWeatherToggle();this.handleRunwayToggle();this.handleScheduledFbo();this.handleEstimatedDepartureTime();FlightPage.turnTimeNeedsBuilding=true;$('.flightPageAdUnit','.flightPageAdBottom').appendAround();$('.flightPageAdUnit','.flightPageSponsorshipAd').appendAround();var viewableHeightPercent=function(targetContainer){var offset=$(targetContainer).offset(),targetHgt=$(targetContainer).height();var scrollTop=$(document).scrollTop(),windowHgt=$(window).outerHeight(),adScrollOffset=scrollTop-offset.top,containerTop=offset.top,containerBottom=offset.top+targetHgt,above=containerTop>=scrollTop?false:true,viewableHgt=above?targetHgt-(scrollTop-containerTop):targetHgt-(containerBottom<(scrollTop+windowHgt)?0:containerBottom-(scrollTop+windowHgt))
viewablePercent=viewableHgt/targetHgt;return viewablePercent>0?viewablePercent:0;};var createAdViewabilityHandler=function($adContainers,analytics){var homeContainer=$($adContainers).filter(".viewableAdHome").get(0);if(homeContainer==undefined){return null;}
homeContainer._faCurrentContainer=homeContainer;homeContainer._faAdViewed=false;homeContainer._faViewabilityTimer=null;var viewabilityTimer=(function(homeContainer,analytics){return function(slotIndex){homeContainer._faAdViewed=true;analytics.logEvent("adViewed","SponsorshipAd",slotIndex);};})(homeContainer,analytics);$(homeContainer).css("overflow","visible");return(function(homeContainer,analytics){return function(eventType){var viewableIndex=-1,homeTop=$(homeContainer).offset().top,offsetY=0,transform="translateY(0px)",viewableTop=-1,bestChoice=-1;var adHgt=$('.flightPageAdUnit',homeContainer).height();$($adContainers).height(adHgt);if($($adContainers).filter(function(){return $(this).css('display')==="none";}).length===$adContainers.length){return;}
var isVisible=false;for(i=$adContainers.length-1;i>=0;i--){isVisible=$($adContainers[i]).is(":visible");if(isVisible&&viewableHeightPercent($adContainers[i])>.5){if(viewableIndex>-1){$($adContainers[viewableIndex]).height(0);}
viewableIndex=i;}else if(viewableIndex==-1){$($adContainers[i]).height(0);}}
if(viewableIndex==-1){analytics.logEvent("noViewableSlot-"+eventType,"SponsorshipAd",viewableIndex);$($adContainers).height(adHgt);var scrollTop=$(document).scrollTop();var pageBottom=$(document).outerHeight();var bestOffset=pageBottom;for(i=$adContainers.length-1;i>=0;i--){isVisible=$($adContainers[i]).is(":visible");adOffset=Math.abs($($adContainers[i]).offset().top-scrollTop);if(isVisible&&adOffset<bestOffset){bestChoice=i;bestOffset=adOffset;}}
viewableIndex=bestChoice;}
if(viewableIndex>=0&&(eventType==="resize"||$adContainers[viewableIndex]!=homeContainer._faCurrentContainer)){homeTop=$(homeContainer).offset().top;if($adContainers[viewableIndex]!=homeContainer._faCurrentContainer){analytics.logEvent("adMoved-"+eventType,"SponsorshipAd",viewableIndex);}
viewableTop=$($adContainers[viewableIndex]).offset().top;if($adContainers[viewableIndex]!==homeContainer){offsetY=(viewableTop-homeTop);transform="translateY("+offsetY+"px)";}
$(".flightPageAdUnit",homeContainer).css({'position':'relative','-webkit-transform':transform,'-moz-transform':transform,'-ms-transform':transform,'-o-transform':transform,'transform':transform});homeContainer._faCurrentContainer=$adContainers[viewableIndex];}
if(viewableIndex!=bestChoice&&viewableIndex>=0&&!homeContainer._faViewabilityTimer&&!homeContainer._faAdViewed){homeContainer._faViewabilityTimer=setTimeout(viewabilityTimer.bind(null,viewableIndex),700);}};})(homeContainer,analytics);};var manageAds=function(){FA.loadAds();var analytics=new FA.Modules.Analytics("FlightPage","Google");FA.updateAdViewability=createAdViewabilityHandler($('.flightPageSponsorshipAd'),analytics);if(FA.updateAdViewability===null){return;}
FA.updateAdViewability("load");window.addEventListener('scroll',FA.Lib.Common.debounce((function(window,analytics){return function(){var top=$(window).scrollTop();analytics.logEvent("FlightPage","ScrollPosition",top);};})(window,analytics),300));window.addEventListener('scroll',FA.Lib.Common.debounce(FA.updateAdViewability.bind(null,"scroll"),300));FA.onGoogletagReady(function(){googletag.cmd.push(function(){googletag.pubads().addEventListener('slotRenderEnded',function(event){FA.updateAdViewability.call(null,"resize");});});});};$(document).ready(manageAds);$('.remarksAndActivityLog').appendAround();$('.flightPageReportInaccuracies').appendAround();};FlightPage.prototype.handleData=function(){if((typeof FlightPageModel==='object'&&!this.debugMode)||(this.debugMode&&this.debugDataLoaded)){var data=FlightPageModel.getData();if(data){data.lastUpdated=FADate.getNow();this.render(data);}
FlightPageModel.on('dataUpdate',$.proxy(function(e,newData){data=newData;data.lastUpdated=FADate.getNow();FlightPage.turnTimeNeedsBuilding=true;if(FlightPage._IntervalId&&!FlightPage.IsAirborne(data)&&!data.globalIdent){FlightPage._IntervalId=setInterval($.proxy(function(){this.render(data);},this),60000);}
this.render(data);},this));if(!FlightPageModel.noRefresh){if(FlightPage.IsAirborne(data)||data.globalIdent){FlightPage._IntervalId=setInterval($.proxy(function(){this.render(data);},this),10000);}else{FlightPage._IntervalId=setInterval($.proxy(function(){this.render(data);},this),60000);}}}else if(!this.debugMode){this.render({});}};FlightPage._ClearInterval=function(){clearInterval(FlightPage._IntervalId);FlightPage._IntervalId=null;};FlightPage.prototype.FirstRender=true;FlightPage.prototype.render=function(data){var that=this;if(!data||typeof data!='object'){return;}
var timestampNow=Date.now();if(FlightPage.hardRefreshTime!==null||FlightPage.softRefreshTime!==null){if(FlightPage.hardRefreshTime>timestampNow||FlightPage.softRefreshTime>timestampNow){return;}else if(FlightPage.hardRefreshTime!==null&&FlightPage.hardRefreshTime<timestampNow){FlightPage.hardRefreshTime=null;return FlightPageModel.refresh();}else{FlightPage.softRefreshTime=null;}}
if(FlightPage.pauseRenderingEnabled===true){return;}
FlightPage.FBOProcessing=false;if('internal'in that.data&&('internal'in data)&&(data.internal===null)){data.internal=that.data.internal;}
if('aircraft'in that.data&&('aircraft'in data)&&(data.aircraft===null)){data.aircraft=that.data.aircraft;}
if('activityLog'in data){if('activityLog'in that.data){var currentFlights=[];data.activityLog.flights.forEach(function(element){currentFlights.push(element.encryptedFlightId);});that.data.activityLog.flights.forEach(function(element){if(currentFlights.indexOf(element.encryptedFlightId)<0){data.activityLog.flights.push(element);}});data.activityLog.additionalLogRowsAvailable=that.data.activityLog.additionalLogRowsAvailable;}
data.activityLog._processed=false;if(this.FirstRender&&data.activityLog.additionalLogRowsAvailable){this.getAdditionalActivityLogData();}}
if('remarks'in that.data&&('remarks'in data)&&(data.remarks===null)){data.remarks=that.data.remarks;}
if(('flightId'in data&&data.flightId)&&('destination'in data&&data.destination&&'icao'in data.destination)){FlightPage.ActiveFlight[([data.flightId,data.destination.icao].join('_'))]=1;}
$(this.selectors.flightPageSummaryMap).toggleClass('flightPageAviatorView',FlightPage.ShowAviatorView(data));$(this.selectors.flightPageDetails).toggleClass('flightPageAviatorView',FlightPage.ShowAviatorView(data));$(this.selectors.templates).each(function(){var template=$(this);if((typeof Handlebars==='object')&&('templates'in Handlebars)){var templateContainer=$(that.selectors.templateContainer.replace('%s',template.data('template')));var templateName=template.data('template').split('/').pop();if(templateContainer.data('disableRefresh')&&'flightId'in that.data){return;}
if('blockedForUser'in data&&data.blockedForUser&&(templateName==='blocked'||templateName==='blockedFbo')){templateContainer.siblings().hide();}else if('blockedForUser'in data&&data.blockedForUser&&!(templateName in{blockedFbo:1,blocked:1,internal:1})){return;}else if((templateName==='blocked'||templateName==='blockedFbo')&&(!('blockedForUser'in data)||!data.blockedForUser)){return;}
if('unknown'in data&&data.unknown&&templateName=='unknown'){templateContainer.siblings().hide();}else if('unknown'in data&&data.unknown&&templateName!=='unknown'){return;}else if(templateName=='unknown'&&(!('unknown'in data)||!data.unknown)){return;}
if((templateName)&&(templateContainer.length)&&(templateName in Handlebars.templates)){var runtimeState={collapsedPanels:{}};templateContainer.find('[data-collapsible]').each(function(){var panel=$(this),collapsed=panel.data('collapsed');if(collapsed&&panel.prop('id')){runtimeState.collapsedPanels[panel.prop('id')]=1;}});var tourGuideElements=[];templateContainer.find('.introjs-showElement').each(function(){if(this.clientHeight||this.offsetHeight){tourGuideElements.push({id:$(this).prop('id'),class:$(this).prop('class')});}});templateContainer.html(Handlebars.templates[templateName](data));templateContainer.find('[data-collapsible]').each(function(){var panel=$(this);if(panel.prop('id')in runtimeState.collapsedPanels){that.togglePanel(panel);}});$.each(tourGuideElements,function(){templateContainer.find('#'+this.id).addClass(this.class);});}}});if(!this.carouselInitialized){if('relatedThumbnails'in data&&data.relatedThumbnails!==null){var rtl=$(document).prop('dir')==='rtl';$(this.selectors.thumbnailContainer).slick({lazyLoad:'progressive',variableWidth:true,slidesToScroll:1,slidesToShow:2,rtl:rtl,infinite:true});}
this.carouselInitialized=true;}
if((!('unknown'in data)||!data.unknown)&&!data.blockedForUser&&(typeof static_map_reload_enabled==='undefined'||static_map_reload_enabled)){this.debounce('reloadStaticMap',function(){that.reloadStaticMap(true,true);},10000)();}
that.data=data;if(FlightPage.turnTimeNeedsBuilding&&FlightPage.showPredictedFeatures(data)){this.buildTurnTimeVisualization();}
this.FirstRender=false;};FlightPage.prototype.getAdditionalActivityLogData=function(){$.get('/ajax/logpoll.rvt',{token:trackpollGlobals.TOKEN},$.proxy(function(resp){try{var flights=resp.flights[this.data.flightId].activityLog.flights}catch(e){var flights=[];}
if(flights.length>0&&flights.length!=this.data.activityLog.flights.length){this.data.activityLog.flights=flights;this.data.activityLog._processed=false;}
this.data.activityLog.additionalLogRowsAvailable=false;this.render(this.data);},this),'json');};FlightPage.prototype.handleStaffTools=function(){$('a.forgeUnknown').click(function(){return confirm('Are you sure you want to set this flight to "result unknown"?');});};FlightPage.prototype.handleFlightPageSettings=function(){var that=this;$(this.selectors.pageContainer).on('click','a.flightPageSettingsModalReveal',function(){$(this).blur();$(that.selectors.settingsModal).foundation('reveal','open');var x=$(document).scrollLeft();var y=$(document).scrollTop();if($(this).data('fp-tab')=='flightPageSettingsUnitTab'){$('a[href="#flightPageSettingsUnitTab"]').parent().addClass('active');$('#flightPageSettingsUnitTab').addClass('active');$('a[href="#flightPageSettingsAirportTab"]').parent().removeClass('active');$('#flightPageSettingsAirportTab').removeClass('active');}else if($(this).data('fp-tab')=='flightPageSettingsAirportTab'){$('a[href="#flightPageSettingsUnitTab"]').parent().removeClass('active');$('#flightPageSettingsUnitTab').removeClass('active');$('a[href="#flightPageSettingsAirportTab"]').parent().addClass('active');$('#flightPageSettingsAirportTab').addClass('active');}
history.replaceState(null,null,window.location.pathname+(window.location.search?window.location.search:"")+"#"+$(this).data('fp-tab'));window.scroll(x,y);});if(window.location.hash.search(/#fndtn-(.*)/)>-1){var tab=window.location.hash.replace(/#fndtn-(.*)/,'$1');$('a.flightPageSettingsModalReveal[data-fp-tab="'+tab+'"]:first').trigger('click');}
var $modal=$('#flightPageSettingsModal');$modal.find('.flightPageModalFooter a.cancel').on('click',function(){$modal.foundation('reveal','close');return false;});$modal.on('opened.fndtn.reveal',function(){if(FlightPage.isTourGuideActive){setTimeout(function(){var triggerStep=!FlightPage.ShowInboundFlightLink(that.data)?4:5;that.tour.goToStep(triggerStep);},0);}});$modal.on('close.fndtn.reveal',function(){that.tour.exit();var x=$(document).scrollLeft();var y=$(document).scrollTop();history.replaceState(null,null,window.location.pathname+(window.location.search?window.location.search:""));window.scroll(x,y);});var icaoBox=$(this.selectors.settingsModal+' input[name=showicao]');var firstBox=$(this.selectors.settingsModal+' input[name=icaofirst]');var firstBoxLabel=firstBox.closest('label');switch(Number(user.airportCode)){case 2:icaoBox.prop('checked',true);firstBox.prop('checked',true);break;case 1:icaoBox.prop('checked',true);firstBox.prop('checked',false);break;case 0:default:icaoBox.prop('checked',false);firstBox.prop('checked',false);firstBox.prop('disabled',true);firstBoxLabel.addClass('grey-disabled');break;}
icaoBox.on('change',function(){var value;var state=$(this).prop('checked');if(!state){firstBox.prop('checked',false);firstBoxLabel.addClass('grey-disabled');value=0;}else if(firstBox.prop('checked')){value=2;}else{firstBoxLabel.removeClass('grey-disabled');value=1;}
firstBox.prop('disabled',!state);that.updateUserSetting('airportCode',value);});firstBox.on('change',function(){var state=$(this).prop('checked');var value=state?2:1;that.updateUserSetting('airportCode',value);});var speedRadio=$(this.selectors.settingsModal+' input[name=speed]');speedRadio.on('change',function(){that.updateUserSetting('speedDisplay',$(this).val());}).filter('[value="'+user.speedDisplay+'"]').prop('checked',true);var distRadio=$(this.selectors.settingsModal+' input[name=distance]');distRadio.on('change',function(){that.updateUserSetting('distance_units',$(this).val());}).filter('[value="'+user.distance_units+'"]').prop('checked',true);var altRadio=$(this.selectors.settingsModal+' input[name=altitude]');altRadio.on('change',function(){that.updateUserSetting('altitudeDisplay',$(this).val());}).filter('[value="'+user.altitudeDisplay+'"]').prop('checked',true);var fuelRadio=$(this.selectors.settingsModal+' input[name=fuelburn]');fuelRadio.on('change',function(){that.updateUserSetting('fuelBurnDisplay',$(this).val());}).filter('[value="'+user.fuelBurnDisplay+'"]').prop('checked',true);var flightpageLayout=$(this.selectors.settingsModal+' input[name=layout]');flightpageLayout.on('change',function(){that.updateUserSetting('flightpageLayout',($(this).prop('checked')?1:0));}).filter('[value="'+user.flightpageLayout+'"]').prop('checked',true);};FlightPage.prototype.updateUserSetting=function(key,value){user[key]=value;this.refresh();$(window).trigger('userPrefUpdate');if(this.replayControl!==undefined){this.replayControl.setUnits({altitude:user.altitudeDisplay,groundspeed:user.speedDisplay});};var data={};data["token"]=trackpollGlobals.USERTOKEN;data[key]=value;$.ajax({type:'post',url:'/ajax/account/update_kv.rvt',data:data}).fail(function(){var errorMessage='<span class="error">Failed to save changes!</span>';$("div.flightPageModalFooterLeft").html(errorMessage);});};FlightPage.prototype.showAdhoc=function(){$('body').on('click','#showAdhoc',function(e){$.ajax({type:'post',url:'/ajax/account/manage_pedigree.rvt',data:{pedigree:'adhoc',action:'enable',token:trackpollGlobals.USERTOKEN}}).done(function(response){if('type'in response&&response.type==='success'){location.reload();}}).fail(function(response){if('type'in response.responseJSON&&response.responseJSON.type==='error'){$('#showAdhoc').hide();var responseMessage=response.responseJSON.message||'Failed to enable position-only viewing.';var adhocErrorHTML='<p class="provisioning_error"><strong>'+responseMessage+'</strong></p>';$('#suggestAdhocNotice').append(adhocErrorHTML);}});});};FlightPage.prototype.handleWeatherToggle=function(){var that=this;$('body').on('click',that.selectors.forecastOriginWeather,function(e){FlightPage.originShowMetar=false;$(that.selectors.forecastOriginWeather).addClass('active');$(that.selectors.actualOriginWeather).removeClass('active');$('div.originTAF').addClass('active');$('div.originMetar').removeClass('active');});$('body').on('click',that.selectors.actualOriginWeather,function(e){FlightPage.originShowMetar=true;$(that.selectors.forecastOriginWeather).removeClass('active');$(that.selectors.actualOriginWeather).addClass('active');$('div.originTAF').removeClass('active');$('div.originMetar').addClass('active');});$('body').on('click',that.selectors.forecastDestinationWeather,function(e){FlightPage.destinationShowMetar=false;$(that.selectors.forecastDestinationWeather).addClass('active');$(that.selectors.actualDestinationWeather).removeClass('active');$('div.destinationTAF').addClass('active');$('div.destinationMetar').removeClass('active');});$('body').on('click',that.selectors.actualDestinationWeather,function(e){FlightPage.destinationShowMetar=true;$(that.selectors.forecastDestinationWeather).removeClass('active');$(that.selectors.actualDestinationWeather).addClass('active');$('div.destinationTAF').removeClass('active');$('div.destinationMetar').addClass('active');});};FlightPage.prototype.handleRunwayToggle=function(){var that=this;$('body').on('click',that.selectors.activeOriginRunways,function(e){FlightPage.originShowActualRunway=false;$(that.selectors.activeOriginRunways).addClass('active');$(that.selectors.actualOriginRunway).removeClass('active');$('div.originActiveRunways').addClass('active');$('div.originActualRunway').removeClass('active');});$('body').on('click',that.selectors.actualOriginRunway,function(e){if($(that.selectors.actualOriginRunway).hasClass('disabled')){return;}
FlightPage.originShowActualRunway=true;$(that.selectors.activeOriginRunways).removeClass('active');$(that.selectors.actualOriginRunway).addClass('active');$('div.originActiveRunways').removeClass('active');$('div.originActualRunway').addClass('active');});$('body').on('click',that.selectors.activeDestinationRunways,function(e){FlightPage.destinationShowActualRunway=false;$(that.selectors.activeDestinationRunways).addClass('active');$(that.selectors.actualDestinationRunway).removeClass('active');$('div.destinationActiveRunways').addClass('active');$('div.destinationActualRunway').removeClass('active');});$('body').on('click',that.selectors.actualDestinationRunway,function(e){if($(that.selectors.actualDestinationRunway).hasClass('disabled')){return;}
FlightPage.destinationShowActualRunway=true;$(that.selectors.activeDestinationRunways).removeClass('active');$(that.selectors.actualDestinationRunway).addClass('active');$('div.destinationActiveRunways').removeClass('active');$('div.destinationActualRunway').addClass('active');});};FlightPage.showRunwayInformation=function(data){var hasRunway=data.runways.origin!==null&&data.runways.destination!==null;return hasRunway;};Handlebars.registerHelper('showRunwayInformation',function(){return FlightPage.showRunwayInformation(this);});FlightPage.activeRunwayList=function(runways){if(runways!==null&&typeof runways==='object'&&runways.length>0){return runways.sort().join(', ');}
return'--';};Handlebars.registerHelper('activeRunwayList',FlightPage.activeRunwayList);FlightPage.prototype.handleScheduledFbo=function(){var that=this;if(FlightPage.showScheduledFboDropdown){$('body').on('click',that.selectors.scheduledFboSelect,function(e){FlightPage.softRefreshTime=FlightPage.getProcessingTime('soft');var currentFboDropdown=$(e.target).parent().find('.flightPageAirportFBODropdown');if(currentFboDropdown.length===0){currentFboDropdown=$(e.target).parent().parent().find('.flightPageAirportFBODropdown');if(currentFboDropdown.length===0){currentFboDropdown=$(e.target).parent().parent().parent().find('.flightPageAirportFBODropdown');}}
$('#scheduledFboFlightId').val(currentFboDropdown.data('flightid'));$('#scheduledFboDisplayIdent').val(currentFboDropdown.data('displayident'));$('#scheduledFboAircraftType').val(currentFboDropdown.data('aircrafttype'));$('#scheduledFboArrival').val(currentFboDropdown.data('arrival'));$('#scheduledFboOrigin').val(currentFboDropdown.data('origin'));$('#scheduledFboDestination').val(currentFboDropdown.data('destination'));$('#scheduledFboDistance').val(currentFboDropdown.data('distance'));$('#scheduledFboTime').val(currentFboDropdown.data('time'));$('#scheduledFboStatus').val(currentFboDropdown.data('status'));$('#scheduledFboPermaurl').val(currentFboDropdown.data('permaurl'));$('#scheduledFboRadioInputs').html('');currentFboDropdown.find('.flightPageSelectFBORow').each(function(){$('<input>',{type:'radio',name:'destinationSchFbo',id:$(this).data('id'),value:$(this).data('value'),checked:$(this).data('checked')==="checked"?true:false,class:$(this).data('class'),'data-flightid':currentFboDropdown.data('flightid')}).appendTo($('#scheduledFboRadioInputs'));});currentFboDropdown.show(50);if(currentFboDropdown.find(that.selectors.scheduledFboSelectedFbo).first().hasClass('destinationSchFboNoEmail')){currentFboDropdown.find(that.selectors.scheduledFboNoEmailDisclaimer).show();currentFboDropdown.find(that.selectors.scheduledFboSaveButton).css('display','block');currentFboDropdown.find(that.selectors.scheduledFboNotifyButton).hide();}else{currentFboDropdown.find(that.selectors.scheduledFboNoEmailDisclaimer).hide();currentFboDropdown.find(that.selectors.scheduledFboSaveButton).hide();currentFboDropdown.find(that.selectors.scheduledFboNotifyButton).css('display','block');}
$(that.selectors.scheduledFboEmailInput).val(that.getScheduledFBOEmail());$(that.selectors.scheduledFboEmailFormInput).val(that.getScheduledFBOEmail());if(FlightPage.validateEmail(that.getScheduledFBOEmail())){$(that.selectors.scheduledFboEmailValid).show();$(that.selectors.scheduledFboLabel).each(function(){$(this).removeClass('flightPageSelectFBOCellDisabled');});}else if(FlightPage.IsIntegrationPortal()){$(that.selectors.scheduledFboLabel).each(function(){$(this).addClass('flightPageSelectFBOCellDisabled');});}
currentFboDropdown.find(that.selectors.scheduledFboLabel).each(function(){$(this).removeClass('flightPageSelectFBOCellChecked');if($(this).data('checked')==="checked"){$(this).addClass('flightPageSelectFBOCellChecked');}});if(!FlightPage.scheduledFboDropdownListenersAdded){$('body').on('change',that.selectors.scheduledFboRadio,function(e){$('.flightPageAirportFBODropdown[data-flightid="'+$(e.target).data('flightid')+'"]').each(function(i,elem){if(!$(elem).find(that.selectors.scheduledFboLabel).first().hasClass('flightPageSelectFBOCellDisabled')){$(elem).find(that.selectors.scheduledFboSelectButton).removeClass('flightPageDisabledButton');if($('body').find(that.selectors.scheduledFboSelectedFbo).first().hasClass('destinationSchFboNoEmail')){$(elem).find(that.selectors.scheduledFboNoEmailDisclaimer).show();$(elem).find(that.selectors.scheduledFboSaveButton).css('display','block');$(elem).find(that.selectors.scheduledFboNotifyButton).hide();}else{$(elem).find(that.selectors.scheduledFboNoEmailDisclaimer).hide();$(elem).find(that.selectors.scheduledFboSaveButton).hide();$(elem).find(that.selectors.scheduledFboNotifyButton).show();}}});});$('body').on('keyup',that.selectors.scheduledFboEmailInput,function(e){that.setScheduledFBOEmail($(e.target).val());if(FlightPage.validateEmail(that.getScheduledFBOEmail())){$(that.selectors.scheduledFboEmailValid).show();$(that.selectors.scheduledFboLabel).each(function(){$(this).removeClass('flightPageSelectFBOCellDisabled');});if($(that.selectors.scheduledFboSelectedFbo).length>0){$(that.selectors.scheduledFboSelectButton).removeClass('flightPageDisabledButton');}}else{$(that.selectors.scheduledFboEmailValid).hide();$(that.selectors.scheduledFboLabel).each(function(){$(this).addClass('flightPageSelectFBOCellDisabled');});$(that.selectors.scheduledFboSelectButton).addClass('flightPageDisabledButton');}
$(that.selectors.scheduledFboEmailFormInput).val(that.getScheduledFBOEmail());});$('body').on('click',that.selectors.scheduledFboSelectButton,function(e){e.preventDefault();e.stopPropagation();$('.flightPageAirportFBODropdownError').hide();var elems=$('.flightPageAirportFBODropdown[data-flightid="'+$(e.target).data('flightid')+'"]');$.post('/ajax/live/scheduledFbo.rvt',$(that.selectors.scheduledFboForm).serialize()).done(function(res){if(res.type!=='success'){$('.flightPageAirportFBODropdownError').show();console.warn('There was a problem updating the scheduled FBO: '+res.message);}else{var flightId=null;elems.each(function(i,elem){flightId=$(elem).data('flightid');$('.flightPageFBOProcessingSpinner[data-flightid='+flightId+']').css('display','inline-block');$('.flightPageAirportFBOEditButton[data-flightid='+flightId+'], .flightPageAirportFBOMobileEditButton[data-flightid='+flightId+'], .flightPageAirportFBOSelector[data-flightid='+flightId+']').hide();$(elem).find('.flightPageAirportFBOButtonContainer').hide();$(elem).find('.flightPageProcessingContainer').show();});FlightPage.hardRefreshTime=FlightPage.getProcessingTime('hard');FlightPage.softRefreshTime=null;$('.flightPageSummaryAirportFBOName[data-flightid='+flightId+']').html('<em>Updating...</em>');if(flightId!==null&&FlightPage.FlightsModified.indexOf(flightId)===-1){FlightPage.FlightsModified.push(flightId);elems.each(function(i,elem){$(elem).hide();});var selectElements=$('.flightPageDepartureSelector[data-flightid='+flightId+'], .flightPageDepartureEditButton[data-flightid='+flightId+']');if(selectElements.length>1){for(var i=0;i<selectElements.length;i++){if($(selectElements[i]).is(':visible')){$('html, body').animate({scrollTop:$(selectElements[i]).offset().top-60},2000);$(selectElements[i]).trigger('click');break;}}}}}}).fail(function(err){$('.flightPageAirportFBODropdownError').show();var msg;if(err.responseJSON){msg=err.responseJSON.message;}else{msg=err.responseText;}
console.error('There was an unknown problem updating the scheduled FBO: '+msg);});});$('body').on('click',that.selectors.scheduledFboRemoveButton,function(e){e.preventDefault();e.stopPropagation();$('.flightPageAirportFBODropdownError').hide();var elems=$('.flightPageAirportFBODropdown[data-flightid="'+$(e.target).data('flightid')+'"]');$.post('/ajax/live/scheduledFbo.rvt',{'encFlightId':$(e.target).data('flightid'),'destinationSchFbo':'removeSelection','userToken':user.token}).done(function(res){if(res.type!=='success'){console.warn('There was a problem updating the scheduled FBO: '+res.message);$('.flightPageAirportFBODropdownError').show();}else{$('input[name=destinationSchFbo]').prop('checked',false);var flightId=null;elems.each(function(i,elem){flightId=$(elem).data('flightid');$('.flightPageFBOProcessingSpinner[data-flightid='+flightId+']').css('display','inline-block');$('.flightPageAirportFBOEditButton[data-flightid='+flightId+'], .flightPageAirportFBOMobileEditButton[data-flightid='+flightId+'], .flightPageAirportFBOSelector[data-flightid='+flightId+']').hide();$(elem).find('.flightPageAirportFBOButtonContainer').hide();$(elem).find('.flightPageProcessingContainer').show();});if(flightId!==null){$('.flightPageSummaryAirportFBOName[data-flightid='+flightId+']').html('Updating...');}
FlightPage.turnTimeNeedsBuilding=true;FlightPage.hardRefreshTime=FlightPage.getProcessingTime('hard');FlightPage.softRefreshTime=null;}}).fail(function(err){$('.flightPageAirportFBODropdownError').show();var msg;if(err.responseJSON){msg=err.responseJSON.message;}else{msg=err.responseText;}
console.error('There was an unknown problem updating the scheduled FBO: '+msg);});});$(document).mouseup(function(e){if(!$(that.selectors.scheduledFboDropdown).is(e.target)&&$(that.selectors.scheduledFboDropdown).has(e.target).length===0&&$(that.selectors.scheduledFboDropdown).is(':visible')){$(that.selectors.scheduledFboDropdown).hide(25);FlightPage.softRefreshTime=null;}});FlightPage.scheduledFboDropdownListenersAdded=true;}});$(that.selectors.scheduledFboRadio).trigger('change');}};FlightPage.prototype.handleScheduledFBOSelection=function(){var that=this;$('body').on('click',this.selectors.scheduledFboLabel,function(e){if(!$(this).hasClass('flightPageSelectFBOCellDisabled')){$(that.selectors.scheduledFboLabel).each(function(){$(this).removeClass('flightPageSelectFBOCellChecked');});$(this).addClass('flightPageSelectFBOCellChecked');}else{return false;}});};FlightPage.getProcessingTime=function(type){if(type==="hard"){if(typeof FAConfig==='object'&&typeof FAConfig.processing_delay==='number'){return Date.now()+FAConfig.processing_delay;}else{return Date.now()+15000;}}else{return Date.now()+60000;}};FlightPage.prototype.handleDepartureTimeSelection=function(){var that=this;$('body').on('click','.flightPageSelectDepartureCell',function(e){if(!$(this).hasClass('flightPageSelectDepartureCellDisabled')){$('.flightPageSelectDepartureCell').each(function(){$(this).removeClass('flightPageSelectDepartureCellChecked');});$(this).addClass('flightPageSelectDepartureCellChecked');}else{return false;}});};FlightPage.prototype.handleEstimatedDepartureTime=function(){var that=this;if(FlightPage.showSetDepartureTime){$('body').on('click','.flightPageDepartureEditButton, .flightPageDepartureMobileEditButton, .flightPageDepartureSelector, .flightPageDepartureSpinner',function(e){FlightPage.softRefreshTime=FlightPage.getProcessingTime('soft');$('.departureTimeExtended').hide();$('.moreDepartureTimesButton').show(50);var currentDepartureDropdown=$(e.target).parent().find('.flightPageDepartureDropdown');$('#departureTimeFlightId').val(currentDepartureDropdown.data('flightid'));$('#departureTimeRadioInputs').html('');currentDepartureDropdown.find('.flightPageSelectDepartureRow').each(function(){$('<input>',{type:'radio',name:'estimatedDeparture',id:$(this).data('id'),value:$(this).data('value'),checked:$(this).data('checked')==="checked"?true:false,class:$(this).data('class'),'data-flightid':currentDepartureDropdown.data('flightid')}).appendTo($('#departureTimeRadioInputs'));});currentDepartureDropdown.show(50);$('label.flightPageSelectDepartureCell').each(function(){$(this).removeClass('flightPageSelectDepartureCellChecked');});if($('input[name=estimatedDeparture]:checked').length>0){var selectedId=$('input[name=estimatedDeparture]:checked').val();$('.label_'+selectedId).addClass('flightPageSelectDepartureCellChecked');}
if(!FlightPage.departureTimeDropdownListenersAdded){$('body').on('change','.departureTimeRadio',function(e){$('.flightPageDepartureDropdown[data-flightid="'+$(e.target).data('flightid')+'"]').each(function(i,elem){if(!$(elem).find('label.flightPageSelectDepartureCell').first().hasClass('flightPageSelectFBOCellDisabled')){$(elem).find('.setDepartureTimeButton').removeClass('flightPageDisabledButton');}});});$('body').on('click','.setDepartureTimeButton',function(e){var elems=$('.flightPageDepartureDropdown[data-flightid="'+$(e.target).data('flightid')+'"]');$('.flightPageDepartureTimeDropdownError').hide();$.post('/ajax/live/scheduledFbo.rvt',$('#departureTimeForm').serialize()).done(function(res){if(res.type!=='success'){$('.flightPageDepartureTimeDropdownError').show();console.warn('There was a problem updating the scheduled FBO: '+res.message);}else{var flightId=null;elems.each(function(i,elem){flightId=$(elem).data('flightid');$(elem).find('.flightPageAirportFBOButtonContainer').hide();$(elem).find('.flightPageProcessingContainer').show();$('.flightPageDepartureSpinner[data-flightid='+flightId+']').css('display','inline-block');$('.flightPageDepartureEditButton[data-flightid='+flightId+'], .flightPageDepartureSelector[data-flightid='+flightId+']').hide();});FlightPage.turnTimeNeedsBuilding=true;FlightPage.hardRefreshTime=FlightPage.getProcessingTime('hard');FlightPage.softRefreshTime=null;if(flightId!==null){$('.flightTime[data-flightid='+flightId+']').each(function(idx,elem){if($(elem).data('type')==="taxiOut"){$(elem).html('<em>Updating...</em>');}else if($(elem).data('type')==="duration"){$(elem).html('');}else{$(elem).html('<em>Recalculating...</em>');}});}
if(flightId!==null&&FlightPage.FlightsModified.indexOf(flightId)===-1){FlightPage.FlightsModified.push(flightId);elems.each(function(i,elem){$(elem).hide();});var selectElements=$('.flightPageAirportFBOSelector[data-flightid='+flightId+'], .flightPageAirportFBOEditButton[data-flightid='+flightId+']');if(selectElements.length>1){for(var i=0;i<selectElements.length;i++){if($(selectElements[i]).is(':visible')){$('html, body').animate({scrollTop:$(selectElements[i]).offset().top-60},2000);$(selectElements[i]).trigger('click');break;}}}}}}).fail(function(err){$('.flightPageDepartureTimeDropdownError').show();var msg;if(err.responseJSON){msg=err.responseJSON.message;}else{msg=err.responseText;}});return false;});$('body').on('click','.moreDepartureTimesButton',function(){$('.departureTimeExtended').css('display','table');$('.moreDepartureTimesButton').hide();return false;});$(document).mouseup(function(e){if(!$('.flightPageDepartureDropdown').is(e.target)&&$('.flightPageDepartureDropdown').has(e.target).length===0&&$('.flightPageDepartureDropdown').is(':visible')){$('.flightPageDepartureDropdown').hide(25);FlightPage.softRefreshTime=null;}});FlightPage.departureTimeDropdownListenersAdded=true;}});}};FlightPage.showOriginMetarWeather=function(data){if(typeof FlightPage.originShowMetar==='undefined'){if(typeof data.weather.origin!=='undefined'&&typeof data.weather.origin.has_metar!=='undefined'){FlightPage.originShowMetar=data.weather.origin.has_metar;}else{FlightPage.originShowMetar=false;}}
return FlightPage.originShowMetar;};Handlebars.registerHelper('showOriginMetarWeather',function(){return FlightPage.showOriginMetarWeather(this);});FlightPage.showDestinationMetarWeather=function(data){if(typeof FlightPage.destinationShowMetar==='undefined'){if(typeof data.weather.destination!=='undefined'&&typeof data.weather.destination.has_metar!=='undefined'){FlightPage.destinationShowMetar=data.weather.destination.has_metar;}else{FlightPage.destinationShowMetar=false;}}
return FlightPage.destinationShowMetar;};Handlebars.registerHelper('showDestinationMetarWeather',function(){return FlightPage.showDestinationMetarWeather(this);});FlightPage.showOriginActualRunway=function(data){if(typeof FlightPage.originShowActualRunway==='undefined'){if(data.runways.origin!==null&&typeof data.runways.origin.actual!=='undefined'&&data.runways.origin.actual!==null){FlightPage.originShowActualRunway=true;}else{FlightPage.originShowActualRunway=false;}}
return FlightPage.originShowActualRunway;};Handlebars.registerHelper('showOriginActualRunway',function(){return FlightPage.showOriginActualRunway(this);});FlightPage.showDestinationActualRunway=function(data){if(typeof FlightPage.destinationShowActualRunway==='undefined'){if(data.runways.destination!==null&&typeof data.runways.destination.actual!=='undefined'&&data.runways.destination.actual!==null){FlightPage.destinationShowActualRunway=true;}else{FlightPage.destinationShowActualRunway=false;}}
return FlightPage.destinationShowActualRunway;};Handlebars.registerHelper('showDestinationActualRunway',function(){return FlightPage.showDestinationActualRunway(this);});FlightPage.styleFlightRules=function(flightRule){var color;switch(flightRule){case'VFR':colorClass='greenFR';break;case'MVFR':colorClass='blueFR';break;case'IFR':colorClass='orangeFR';break;case'LIFR':colorClass='redFR';break;case'BCAT1':colorClass='magentaFR';break;default:colorClass='';}
return colorClass};Handlebars.registerHelper('styleFlightRules',function(frValue){return FlightPage.styleFlightRules(frValue);});FlightPage.prototype.handleFlightPageHeadings=function(){var that=this;$('body').on('click',this.selectors.tableHeading,function(e){var table=$(this);if($(e.target).parents(that.selectors.button).length){return;}
if($(this).data('collapsible')){that.togglePanel(table,that.selectors.table);}});$('body').on('click',this.selectors.sectionHeading,function(e){var section=$(this);if($(e.target).parents(that.selectors.button).length){return;}
if($(this).data('collapsible')){that.togglePanel(section);}});};FlightPage.prototype.togglePanel=function(panel,panelSelector){var that=this;var panelSelector=panelSelector||that.selectors.sectionHeading;panel.find(that.selectors.icon).toggleClass(that.selectors.toggleIcons);panel.data('collapsed',!panel.nextUntil(panelSelector).is(':visible'));if(panelSelector==that.selectors.sectionHeading){panel.nextUntil(panelSelector).toggle();}else{panel.next(panelSelector).toggle();}
if(typeof(FA.updateAdViewability)==="function"){FA.updateAdViewability.call(null,"resize");}};FlightPage.prototype.staticMapRendered=false;FlightPage.prototype.viewportWidth=null;FlightPage.prototype.handleStaticMap=function(){var that=this;if(this.staticMapRendered){return;}
$(window).on('resize',function(){var viewportWidth=$(this).width();if(that.viewportWidth===viewportWidth){return;}
if(viewportWidth<that.breakpoints.narrow){that.debounce('reloadStaticMap',function(){that.reloadStaticMap();},1000)();}else{that.debounce('reloadInteractiveMap',function(){that.createOL3Map();if($('#flightPageInteractiveMap').is(':visible')){that.createReplayControl();}},1000)();}});$(window).on('scroll',function(){if(that.staticMapRendered){return;}
that.reloadStaticMap();});$(window).trigger('resize');}
FlightPage.prototype.handleStaticMapZoomControl=function(){var that=this;$('body').on('click',this.selectors.staticMapZoomControl,function(e){e.preventDefault();var zoomControl=$(e.target);if(zoomControl.hasClass('ZoomIn')){that.reloadStaticMap(false,true,(zoomControl.data('zoomAmount')||0.2));zoomControl.removeClass('ZoomIn');zoomControl.addClass('ZoomOut');}else{that.reloadStaticMap(false,true,false);zoomControl.removeClass('ZoomOut');zoomControl.addClass('ZoomIn');}});};FlightPage.prototype.reloadStaticMap=function(skipLoadingIndicator,ignoreWidthConstraint,zoom){var container=$(this.selectors.staticMapContainer)
map=$(this.selectors.staticMap)
w=$(window);if(!container.is(':visible')){return;}
if(!this.data.links.staticMap){return;}
var position=container.position();if(position&&position.top&&((position.top>(w.scrollTop()+w.height()))||(w.scrollTop()>(position.top+container.height())))){return;}
if(!ignoreWidthConstraint&&(w.width()>this.breakpoints.narrow||w.width()===this.viewportWidth)){return;}
if(!skipLoadingIndicator){map.mask('<i class="fa fa-circle-o-notch fa-spin fa-4x fa-fw"></i>');}
var height=map.height(),width=map.width();var dpi=1;if(typeof window.devicePixelRatio==='number'&&window.devicePixelRatio>1){height=height*window.devicePixelRatio;width=width*window.devicePixelRatio;dpi=window.devicePixelRatio;}
var url=window.location.protocol+'//'+window.location.hostname+this.data.links.staticMap
+'?height='+height
+'&width='+width
+'&dpi='+dpi;if(parseFloat(zoom)){url+='&zoomAmount='+zoom;container.data('zoomState',zoom);}else if(zoom!==false&&container.data('zoomState')){url+='&zoomAmount='+container.data('zoomState');}else{container.data('zoomState','');}
if('lastUpdated'in this.data&&this.data.lastUpdated){var precision=trackpollGlobals.INTERVAL||65;var timestamp=Math.floor(this.data.lastUpdated/precision)*precision;url+='&v='+timestamp;}
$('<img />').prop('src',url).on('load',function(){map.css('background','url('+url+')');map.css('background-size','cover');$(this).remove();if(!skipLoadingIndicator){map.unmask();}});this.staticMapRendered=true;this.viewportWidth=w.width();this.toggleStaticMapControlVisibility();}
FlightPage.prototype.toggleStaticMapControlVisibility=function(){var that=this;if(FlightPage.IsAirborne(that.data)){$(that.selectors.staticMapControls).show();}};FlightPage.prototype.OL3triggered=false;FlightPage.prototype.createOL3Map=function(){if(typeof FAMap==='undefined'){return;}
var $mapContainer=$('#flightPageInteractiveMap');if($mapContainer.is(':hidden')){return;}
if(!this.OL3triggered&&!this.debugMode){this.OL3triggered=true;$mapContainer.html('<div class="flightPageMapLoading"></div>');$(window).trigger('createMap.flightPageInteractiveMap');FAMap.getInstance('flightPageInteractiveMap').done(function(map){FlightPageModel.setMap(map);});}}
FlightPage.prototype.createReplayControl=function(){var that=this;if(typeof FAMap==='undefined'||this.replayControl!==undefined){return;}
var flightData=new FA.Modules.FlightReplay.FlightData(that.data);if(!flightData.canReplay()){return;}
FAMap.getInstance("flightPageInteractiveMap").done(function(map){var replayControlContainer=document.getElementById('flightPageReplayControl');that.replayControl=new FA.Modules.FlightReplay.FlightReplayControl(replayControlContainer,map,{analytics:{interface:'FA_Snap'},units:{altitude:user.altitudeDisplay,groundspeed:user.speedDisplay},labels:{altitudeAxis:Rosetta.getTranslation('FP_Altitude','Altitude'),groundspeedAxis:Rosetta.getTranslation('FP_Speed','Speed'),showCheckbox:Rosetta.getTranslation('FP_Show','Show'),filedAltitudeCheckbox:Rosetta.getTranslation('FP_Filed_Altitude','Filed Altitude'),filedSpeedCheckbox:Rosetta.getTranslation('FP_Filed_Speed','Filed Speed'),enRouteLiveModeIndicator:Rosetta.getTranslation('FP_Enroute','En Route'),enRouteReplayModeIndicator:Rosetta.getTranslation('FP_Map_Replay_Mode','Replay Mode'),historicalLiveModeIndicator:Rosetta.getTranslation('FP_Past_Flight','Past Flight'),historicalReplayModeIndicator:Rosetta.getTranslation('FP_Map_Replay_Mode','Replay Mode'),playButton:Rosetta.getTranslation('FP_Map_Replay_Play','Play'),pauseButton:Rosetta.getTranslation('FP_Map_Replay_Pause','Pause'),replayButton:Rosetta.getTranslation('FP_Map_Replay_Replay','Replay'),playbackRateButton:Rosetta.getTranslation('FP_Map_Replay_Speed','Speed'),loopButton:Rosetta.getTranslation('FP_Map_Replay_Loop','Loop'),trackLogButton:Rosetta.getTranslation('FP_Link_Flight_Log_Graph','View Track Log'),toggleOn:Rosetta.getTranslation('FP_Map_Replay_Toggle_On','On'),toggleOff:Rosetta.getTranslation('FP_Map_Replay_Toggle_Off','Off')},showFiledAltitude:true,showFiledSpeed:true,trackLogLink:FlightPage.ShowTrackLogLink(that.data)?FlightPage.Coalesce(that.data.codeShare.links.trackLog,that.data.links.trackLog):null});that.replayControl.on('startedReplay',map.toggleWeatherLayers.bind(map,that.replayControl,that._frameBuffer));that.replayControl.on('pausedReplay',map.toggleWeatherLayers.bind(map,that.replayControl,that._frameBuffer));that.replayControl.on('continuedReplay',map.toggleWeatherLayers.bind(map,that.replayControl,that._frameBuffer));})};FlightPage.prototype.debounce=function(key,func,wait,immediate){var that=this;return function(){var context=this,args=arguments;var _func=function(){that.debounceTimeout[key]=null;if(!immediate)func.apply(context,args);};var _immediate=immediate&&!that.debounceTimeout[key];clearTimeout(that.debounceTimeout[key]);that.debounceTimeout[key]=setTimeout(_func,wait);if(_immediate)func.apply(context,args);};};FlightPage.prototype.handleMessageDialog=function(){var modal=$(this.selectors.messageModal),that=this;that.acarsMessage=new Message(modal.data('ident'));modal.on('open.fndtn.reveal',function(e){modal.find('input, textarea').not('input[name=ttl]').val('');modal.find('div.flightPageModalFooterRight').show();modal.find('span.flightPageModalMessage').removeClass('success error').empty().hide();that.acarsMessage=new Message(modal.data('ident'));});modal.on('click','div.flightPageModalFooterRight > a.cancel',function(e){e.stopPropagation();e.preventDefault();modal.foundation('reveal','close');});modal.on('click','div.flightPageModalFooterRight > a.send',function(e){e.stopPropagation();e.preventDefault();if(!that.acarsMessage.valid){var error=Rosetta.getTranslation('FP_AD_Message_Error','Please correct the errors in your message before attempting to send it.');modal.find('span.flightPageModalMessage').addClass('error').text(error).show();return;}
that.acarsMessage.send().done(function(){var success=Rosetta.getTranslation('FP_Message_Sent_Successfully','Message sent successfully.');modal.find('div.flightPageModalFooterRight').hide();modal.find('span.flightPageModalMessage').addClass('success').text(success).show();setTimeout(function(){modal.foundation('reveal','close');},(10*1000));}).fail(function(data){var error='Error: '+(data.responseJSON&&'content'in data.responseJSON&&data.responseJSON.content||'Error sending message.');modal.find('div.flightPageModalFooterRight').hide();modal.find('span.flightPageModalMessage').addClass('error').text(error).show();});});modal.on('keyup change','input, select, textarea',function(e){e.stopPropagation();e.preventDefault();var fnShowError=function(error){modal.find('span.flightPageModalMessage').addClass('error').text(error).show();};var fnHideErrors=function(){modal.find('span.flightPageModalMessage').removeClass('success error').empty().hide();};var autoAbbreviate=Boolean(modal.find('input[name=abbreviate]').is(':checked')),message=$.trim(modal.find('textarea[name=message]').val()),aircraft=modal.find('select[name=aircraft]').val(),ttl=parseInt(modal.find('input[name=ttl]').val()),from=$.trim(modal.find('input[name=from]').val()),to=$.trim(modal.find('input[name=to]').val());that.acarsMessage.set('subAbbrevs',autoAbbreviate);that.acarsMessage.setMessage(message);that.acarsMessage.set('via',aircraft);that.acarsMessage.set('from',from);that.acarsMessage.set('to',to);modal.find('textarea[name=message_preview]').val(that.acarsMessage.processedMessage);if(that.acarsMessage.length&&that.acarsMessage.remaining<0){fnShowError(Rosetta.getTranslation('FP_AD_Message_Max_Length','Warning: You have exceeded the number of allowed characters in the message.'));}else if(that.acarsMessage.length&&that.acarsMessage.illegalChars.length){fnShowError(Rosetta.getTranslation('FP_AD_Message_Illegal_Chars','Warning: Your message contains characters that are not permitted and as such, will be omitted from the final message.'));}else if(!ttl||ttl<1||ttl>99){fnShowError(Rosetta.getTranslation('FP_AD_Message_TTL','Please enter a valid number of hours to retry this message for.'));}else{fnHideErrors();}});};FlightPage.prototype.handleRemarkDialog=function(){var modal=$(this.selectors.remarkModal),that=this;modal.on('open.fndtn.reveal',function(e){modal.find('div.flightPageModalFooterRight').show();modal.find('span.flightPageModalMessage').removeClass('success error').empty().hide();});modal.on('click','div.flightPageModalFooterRight > a.cancel',function(e){e.stopPropagation();e.preventDefault();modal.foundation('reveal','close');});modal.on('click','div.flightPageModalFooterRight > a.save',function(e){e.stopPropagation();e.preventDefault();var comments=$.trim(modal.find('textarea[name=comments]').val()),flightid=$.trim(modal.find('input[name=flightid]').val()),ident=$.trim(modal.find('input[name=ident]').val()),type=$.trim(modal.find('input[name=type]:checked').val());$.ajax({type:'POST',url:'/account/remarks.rvt',dataType:'json',data:{token:((typeof(user)==='object')?user.token:""),link:((type=='flight')?flightid:ident),comments:comments,save_remark:1,type:type,id:0,returnRemarkId:1},success:function(response){var success=Rosetta.getTranslation('FP_Remark_Added_Successfully','Remark added successfully.');modal.find('div.flightPageModalFooterRight').hide();modal.find('span.flightPageModalMessage').addClass('success').text(success).show();if(!that.data.remarks){that.data.remarks=[];}
that.data.remarks.unshift({tag:((type=='flight')?(ident+' '+that.data.origin.icao+'->'+that.data.destination.icao):ident),timestamp:FADate.getNow(),content:$('<div/>').text(comments).html(),user:{username:user.username,fullName:user.name},id:response.id,editable:true});that.refresh();setTimeout(function(){modal.foundation('reveal','close');},(5*1000));},error:function(xhr,status,error){var error='Error: '+error;modal.find('div.flightPageModalFooterRight').hide();modal.find('span.flightPageModalMessage').addClass('error').text(error).show();}});});};FlightPage.prototype.handleNotificationDialog=function(){var modal=$(this.selectors.notificationModal),that=this;modal.on('open.fndtn.reveal',function(e){modal.find('div.flightPageModalMessage').removeClass('success error').empty().hide();modal.find('input[name=email]').val('');});modal.on('click','div.flightPageModalFooterRight > a.cancel',function(e){e.stopPropagation();e.preventDefault();modal.foundation('reveal','close');});modal.on('click',this.selectors.notifyMe,function(e){e.stopPropagation();e.preventDefault();var flightid=$.trim(modal.find('input[name=flightid]').val()),ident=$.trim(modal.find('input[name=ident]').val());$(that.selectors.notifyMe).addClass('flightPageDisabledButton');$.ajax({type:'POST',url:'/ajax/live/simple_alert.rvt',dataType:'json',data:{token:((typeof(user)==='object')?user.token:""),email:(user&&'email'in user&&user.email),flight_id:flightid,user_ident:ident,eta_minutes:45},success:function(response){var success=Rosetta.getTranslation('FP_Notification_Added_Successfully_You','Success! you will receive status updates for this flight.');$(that.selectors.notifyMe).removeClass('flightPageDisabledButton');modal.find('div.flightPageModalMessage').removeClass('error').addClass('success').text(success).fadeIn();modal.find('div.flightPageCreateNotification').addClass('flightPageHidden');modal.find('div.flightPageEditNotification').removeClass('flightPageHidden');modal.find('div.flightPageEditNotification a').prop('href','/account/manage/alerts/'+response.alert_id+'/edit');FlightPageModel.refresh();},error:function(xhr,status,error){var error='Error: '+(xhr.responseJSON&&'content'in xhr.responseJSON&&xhr.responseJSON.content||error);$(that.selectors.notifyMe).removeClass('flightPageDisabledButton');modal.find('div.flightPageModalMessage').addClass('error').text(error).show();}});});modal.on('click',this.selectors.notifyFriend,function(e){e.stopPropagation();e.preventDefault();var flightid=$.trim(modal.find('input[name=flightid]').val()),ident=$.trim(modal.find('input[name=ident]').val()),email=$.trim(modal.find('input[name=email]').val());$(that.selectors.notifyFriend).addClass('flightPageDisabledButton');$.ajax({type:'POST',url:'/ajax/live/simple_alert.rvt',dataType:'json',data:{token:((typeof(user)==='object')?user.token:""),flight_id:flightid,user_ident:ident,eta_minutes:45,email:email},success:function(response){var success=Rosetta.getTranslation('FP_Notification_Added_Successfully','Success! %s will receive status updates for this flight.',email);$(that.selectors.notifyFriend).removeClass('flightPageDisabledButton');modal.find('input[name=email]').val('');modal.find('div.flightPageModalMessage').removeClass('error').addClass('success').text(success).fadeIn();},error:function(xhr,status,error){var error='Error: '+(xhr.responseJSON&&'content'in xhr.responseJSON&&xhr.responseJSON.content||error);$(that.selectors.notifyFriend).removeClass('flightPageDisabledButton');modal.find('div.flightPageModalMessage').addClass('error').text(error).fadeIn();}});});};FlightPage.prototype.handleMyFlightAware=function(){var that=this;var errorMessage='';$('body').on('click',this.selectors.toggleMyFlightAware,function(e){e.stopPropagation();e.preventDefault();if((typeof user!=='object')||!('username'in user)||!(user.username)){window.location.href='/account/login?referer='+window.location.href;return;}
if($(this).data('operation')==='redirect'){window.location.href='/me/manage';return;}
var ident=that.get('ident'),codeShare=that.get('codeShare');if(FlightPage.HasCodeShare(that.data)){ident=codeShare.ident;}
$.post('/ajax/live/addtomyfa.rvt',{operation:$(this).data('operation'),data:ident,token:user.token}).done(function(data){if(data.toString().indexOf('1')==0){that.set('myFlightAware',!that.get('myFlightAware'));that.refresh();}else{errorMessage=Rosetta.getTranslation('FP_LimitAndUpgrade_MyFlightAware','You\'ve reached the limit of aircraft you can add to MyFlightAware. <a href="/commercial/premium/">Upgrade to a premium account</a> to add this aircraft to MyFlightAware.');that.set('myFlightAwareError',errorMessage);that.refresh();}}).fail(function(data){errorMessage=Rosetta.getTranslation('Error_Were_Sorry',"We're sorry, but FlightAware has encountered an unrecoverable error and is unable to process your request at this time.");that.set('myFlightAwareError',errorMessage);that.refresh();});$(window).trigger("toggleMyFlightAware");});};FlightPage.prototype.handleCloseMyFlightAwareErrorTooltip=function(){var that=this;$('body').on('click',this.selectors.closeMyFlightAwareErrorTooltip,function(e){e.stopPropagation();e.preventDefault();that.set('myFlightAwareError','');$(that.selectors.myFlightAwareErrorTooltip).hide();});};FlightPage.prototype.handleReportInaccuracies=function(){var that=this;$('body').on('click',this.selectors.reportInaccuracies,function(e){e.stopPropagation();e.preventDefault();var jsonInput=$('#json_report');try{FAMap.getInstance('flightPageInteractiveMap').done(function(map){var debugJSON=new FAMap.Util.Debugger(map);debugJSON.set('trackpoll.'+FAMap.Util.getNow(),$.extend({},trackpollBootstrap));var blob=JSON.stringify(debugJSON.get());jsonInput.val(blob);});}catch(e){jsonInput.val(JSON.stringify({message:'No JSON logged.',error:e.message}));}
$('#flightPageReportFlightId').val(that.data.flightId);$('#flightPageReportIdent').val(that.data.ident);$('#flightPageReportHistory').val(that.data.takeoffTimes.scheduled);FlightPage.LocalStorage.set(that.data.ident+'_text','');FlightPage.LocalStorage.set(that.data.ident+'_email','');FlightPage.LocalStorage.set(that.data.ident+'_radio','');$('#reportInaccuracies').submit();});}
FlightPage.prototype.handleReportInaccuraciesSelection=function(){var that=this;$('body').on('click',this.selectors.reportType,function(e){$(that.selectors.reportType).each(function(){$(this).removeClass('flightPageReportTypeChecked');});$(this).addClass('flightPageReportTypeChecked');FlightPage.LocalStorage.set(that.data.ident+'_radio',$('input[name=errorRadio]:checked').val());});}
FlightPage.prototype.handleReportSelectionsPersistent=function(){var that=this;if(typeof FlightPage.LocalStorage.get(this.data.ident+'_text')!=='undefined'){$('#flightPageReportTextarea').val(FlightPage.LocalStorage.get(this.data.ident+'_text'));}
if(typeof FlightPage.LocalStorage.get(this.data.ident+'_email')!=='undefined'){$('#flightPageReportEmail').val(FlightPage.LocalStorage.get(this.data.ident+'_email'));}
if(typeof FlightPage.LocalStorage.get(this.data.ident+'_radio')!=='undefined'){$('input[value='+FlightPage.LocalStorage.get(this.data.ident+'_radio')+']').attr('checked',true);$('label[for='+FlightPage.LocalStorage.get(this.data.ident+'_radio')+']').addClass('flightPageReportTypeChecked');}
$('body').on('keyup',function(e){FlightPage.LocalStorage.set(that.data.ident+'_text',$('#flightPageReportTextarea').val());FlightPage.LocalStorage.set(that.data.ident+'_email',$('#flightPageReportEmail').val());});}
FlightPage.prototype.get=function(key,def){if(this.data&&key in this.data){return this.data[key];}
return def||null;};FlightPage.prototype.set=function(key,value){if(!this.data){this.data={};}
this.data[key]=value;};FlightPage.prototype.refresh=function(){this.render(this.data);};FlightPage.prototype.handleThumbnailScroller=function(){var that=this;$('body').on('click',this.selectors.thumbnailContainer+':visible img',function(e){e.stopPropagation();e.preventDefault();var img=$(this);if(img.data('target')){window.location.href=img.data('target');}});};FlightPage.prototype.handleActivityLog=function(){var that=this;$(this.selectors.activityLogContainer).on('mousedown',this.selectors.row,function(e){var row=$(this),destination=row.data('target');if(destination){if(e.shiftKey||e.ctrlKey||e.metaKey||e.which===2){window.open(destination,destination);}else{window.location.href=destination;}}});};FlightPage.prototype.handleDebugMode=function(){var that=this;var replayTimeout=null;function replay(){var reader=new FileReader();reader.onload=function(){try{var debugData=JSON.parse(this.result);}catch(e){alert('Unable to parse selected debug file. Are you sure you picked the right thing?');return;}
if(!('fullConfigArgs'in debugData.mapOptions)){alert('This debug dump doesn\'t include full config args and thus isn\'t suitable for use with this tool. You\'ll need to make something custom to use this dump.');}
var refTime=Object.keys(debugData.trackpoll).shift();var now=Math.round(new Date().getTime()/1000);FADate.localTimeCorrectionFactor=refTime-now;var replayDuration=debugData.timestamp-refTime;clearTimeout(replayTimeout);var replayTimeout=setTimeout(function(){alert('Replay complete; any future map activity may not be valid');},replayDuration*1000);var config=FAMap.Util.ConfigPresets.getFullConfig.apply(FAMap.Util.ConfigPresets,debugData.mapOptions.fullConfigArgs);config.persistent={PanZoom:{prefix:'replay_',period:-1},Overlays:{prefix:'replay_',period:-1},BaseLayer:{prefix:'replay_',period:-1}};config.replayData=debugData;that.debugDataLoaded=true;FlightPageModel.debug(new FAMap.Map('flightPageInteractiveMap',config));$('#reset').show();that.handleData(debugData);}
reader.readAsText($('#dumpFile')[0].files[0]);}
$('#dumpFile').on('change',replay);$('#reset').on('click',replay);};FlightPage.prototype.handlePageShow=function(){var that=this;if('onpageshow'in window){window.onpageshow=function(event){if(that.detectBrowserBack()){location.reload();}}}};FlightPage.prototype.detectBrowserBack=function(){return(typeof window.performance==='object'&&typeof window.performance.navigation==='object'&&window.performance.navigation.type==2);};FlightPage.Duration=function(a,b,_options){var options=(typeof _options!=="undefined"&&typeof _options.hash=='object')?_options.hash:(typeof(b)==="object"&&isNaN(b)&&typeof b.hash!=="undefined"?b.hash:{});var shortFormat=('shortFormat'in options)?!!(options.shortFormat):false;var simplifyHHMM=('simplifyHHMM'in options)?!!(options.simplifyHHMM):true;var allowNegative=('allowNegative'in options)?!!(options.allowNegative):false;var hideNegative=('hideNegative'in options)?!!(options.hideNegative):false;var hours=0,minutes=0,seconds=0;var duration='';a=parseInt(a);if(a>0){b=parseInt(b);if(b>0){if(allowNegative||hideNegative){seconds=b-a;}else{seconds=Math.abs(b-a);}}else{seconds=a;}
if(seconds<0&&hideNegative){return null;}
hours=Math.floor(seconds/3600);if(hours<=48){minutes=Math.round((seconds%3600)/60);}
if(minutes===60){hours+=1;minutes=0;}
if(hours!==0&&allowNegative){minutes=Math.abs(minutes);}
if(hours>48||(hours==48&&minutes>0)){if(shortFormat){duration=Rosetta.getTranslation('FP_Duration_More_Than_Short','>48h');}else{duration=Rosetta.getTranslation('FP_Duration_More_Than','More than 48 hours');}}else if(simplifyHHMM&&hours==0){if(shortFormat){duration=Rosetta.getTranslation('FP_Duration_Minutes_Short','%1m',minutes);}else if(minutes==1){duration=Rosetta.getTranslation('FP_Duration_Minute','%1 minute',minutes);}else if(minutes>0){duration=Rosetta.getTranslation('FP_Duration_Minutes','%1 minutes',minutes);}}else if(simplifyHHMM&&minutes==0){if(shortFormat){duration=Rosetta.getTranslation('FP_Duration_Hours_Short','%1h',hours);}else if(hours==1){duration=Rosetta.getTranslation('FP_Duration_Hour','%1 hour',hours);}else{duration=Rosetta.getTranslation('FP_Duration_Hours','%1 hours',hours);}}else{if(shortFormat){if(!simplifyHHMM){var minutesString=new String(minutes);minutes=minutesString.length===1?'0'+minutesString:minutesString;}
duration=Rosetta.getTranslation('FP_Duration_Hours_Minutes_Short','%1h %2m',hours,minutes);}else if(minutes==1&&hours==1){duration=Rosetta.getTranslation('FP_Duration_Hour_Minute','1 hour 1 minute');}else if(minutes==1){duration=Rosetta.getTranslation('FP_Duration_Hours_Minute','%1 hours 1 minute',hours);}else if(hours==1){duration=Rosetta.getTranslation('FP_Duration_Hour_Minutes','1 hour %1 minutes',minutes);}else{duration=Rosetta.getTranslation('FP_Duration_Hours_Minutes','%1 hours %2 minutes',hours,minutes);}}
return duration;}
return"";};Handlebars.registerHelper('duration',FlightPage.Duration);FlightPage.HasLanded=function(data){var arrived=FlightPage.HasArrivedSimple(data);return!data.cancelled&&arrived;};Handlebars.registerHelper('hasLanded',function(){return FlightPage.HasLanded(this);});FlightPage.HasArrived=function(data){var now=FADate.getNow();var arrived=FlightPage.HasArrivedSimple(data);var arrivalTime=FlightPage.Coalesce(data.landingTimes.actual,data.landingTimes.estimated);return data.gateArrivalTimes.actual||(!FlightPage.ExpectGateArrival(data)&&arrived)||(FlightPage.ExpectGateArrival(data)&&FlightPage.ShowAviatorView(data)&&arrived)||(FlightPage.ExpectGateArrival(data)&&!data.gateArrivalTimes.actual&&arrived&&(now-arrivalTime)>FlightPage.GateArrivalThreshold);};Handlebars.registerHelper('hasArrived',function(){return FlightPage.HasArrived(this);});FlightPage.HasDeparted=function(data){return((!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.actual)||((!FlightPage.ExpectGateDeparture(data)||FlightPage.ShowAviatorView(data))&&data.takeoffTimes.actual));};Handlebars.registerHelper('hasDeparted',function(){return FlightPage.HasDeparted(this);});FlightPage.HasDelayedArrival=function(data){var estDep=(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.estimated)||data.takeoffTimes.estimated,actDep=FlightPage.ActualDeparture(data),schDep=(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.scheduled)||data.takeoffTimes.scheduled;var arrived=FlightPage.HasArrivedSimple(data);var estArr=(!FlightPage.ShowAviatorView(data)&&data.gateArrivalTimes.estimated)||data.landingTimes.estimated||data.timestamp,actArr=FlightPage.ActualArrival(data),schArr=(!FlightPage.ShowAviatorView(data)&&data.gateArrivalTimes.scheduled)||data.landingTimes.scheduled;return!data.ga&&((!actArr&&estArr&&schArr&&(estArr>(schArr+FlightPage.ArrDelayTolerance)))||(actArr&&schArr&&(actArr>(schArr+FlightPage.ArrDelayTolerance))));};Handlebars.registerHelper('hasDelayedArrival',function(){return FlightPage.HasDelayedArrival(this);});FlightPage.HasEarlyArrival=function(data){var estDep=(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.estimated)||data.takeoffTimes.estimated,actDep=FlightPage.ActualDeparture(data),schDep=(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.scheduled)||data.takeoffTimes.scheduled;var arrived=FlightPage.HasArrivedSimple(data);var estArr=(!FlightPage.ShowAviatorView(data)&&data.gateArrivalTimes.estimated)||data.landingTimes.estimated||data.timestamp,actArr=FlightPage.ActualArrival(data),schArr=(!FlightPage.ShowAviatorView(data)&&data.gateArrivalTimes.scheduled)||data.landingTimes.scheduled;return(actDep)&&((!actArr&&estArr&&schArr&&(estArr<(schArr-FlightPage.ArrEarlyTolerance)))||(actArr&&schArr&&(actArr<(schArr-FlightPage.ArrEarlyTolerance))));};Handlebars.registerHelper('hasEarlyArrival',function(){return FlightPage.HasEarlyArrival(this);});FlightPage.HasCodeShare=function(data){return data.codeShare&&'ident'in data.codeShare&&data.codeShare.ident!=data.ident;};Handlebars.registerHelper('hasCodeShare',function(){return FlightPage.HasCodeShare(this);});FlightPage.HasDelayedDeparture=function(data){var estDep=(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.estimated)||data.takeoffTimes.estimated,actDep=FlightPage.ActualDeparture(data),schDep=(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.scheduled)||data.takeoffTimes.scheduled;var arrived=FlightPage.HasArrivedSimple(data);var estArr=(!FlightPage.ShowAviatorView(data)&&data.gateArrivalTimes.estimated)||data.landingTimes.estimated||data.timestamp,actArr=FlightPage.ActualArrival(data),schArr=(!FlightPage.ShowAviatorView(data)&&data.gateArrivalTimes.scheduled)||data.landingTimes.scheduled;return!data.ga&&((!actDep&&estDep&&schDep&&(estDep>(schDep+FlightPage.DepDelayTolerance)))||(actDep&&schDep&&(actDep>(schDep+FlightPage.DepDelayTolerance))));};Handlebars.registerHelper('hasDelayedDeparture',function(){return FlightPage.HasDelayedDeparture(this);});FlightPage.HasEarlyDeparture=function(data){var estDep=(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.estimated)||data.takeoffTimes.estimated,actDep=FlightPage.ActualDeparture(data),schDep=(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.scheduled)||data.takeoffTimes.scheduled;var arrived=FlightPage.HasArrivedSimple(data);var estArr=(!FlightPage.ShowAviatorView(data)&&data.gateArrivalTimes.estimated)||data.landingTimes.estimated||data.timestamp,actArr=FlightPage.ActualArrival(data),schArr=(!FlightPage.ShowAviatorView(data)&&data.gateArrivalTimes.scheduled)||data.landingTimes.scheduled;return(!actDep&&estDep&&schDep&&(estDep<(schDep-FlightPage.DepEarlyTolerance)))||(actDep&&schDep&&(actDep<(schDep-FlightPage.DepEarlyTolerance)));};Handlebars.registerHelper('hasEarlyDeparture',function(){return FlightPage.HasEarlyDeparture(this);});FlightPage.HasStaffPrivileges=function(data){return user&&'accounttype'in user&&parseInt(user.accounttype)>=90;};Handlebars.registerHelper('hasStaffPrivileges',function(){return FlightPage.HasStaffPrivileges(this);});FlightPage.ActualDeparture=function(data){return(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.actual)||data.takeoffTimes.actual;};FlightPage.ActualArrival=function(data){return(!FlightPage.ShowAviatorView(data)&&data.gateArrivalTimes.actual)||(!FlightPage.ExpectGateArrival(data)&&FlightPage.HasArrivedSimple(data))||(FlightPage.ShowAviatorView(data)&&FlightPage.HasArrivedSimple(data));};FlightPage.ScheduledDeparture=function(data){return(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.scheduled)||data.takeoffTimes.scheduled;}
FlightPage.HasArrivedSimple=function(data){return data.flightStatus==="arrived"||data.flightStatus==="fru"||data.flightStatus==="cancelled-in-air";}
FlightPage.FutureScheduledDeparture=function(data){return moment.unix(FlightPage.ScheduledDeparture(data)).isAfter(moment());};FlightPage.FutureEstimatedTakeoff=function(data){return moment.unix(data.takeoffTimes.estimated).isAfter(moment());};FlightPage.IsScheduled=function(data){return data.takeoffTimes.estimated>FADate.getNow();};Handlebars.registerHelper('isScheduled',function(){return FlightPage.IsScheduled(this);});FlightPage.ExpectGateDeparture=function(data){return(data.gateDepartureTimes.actual||data.gateDepartureTimes.scheduled||data.gateDepartureTimes.estimated);};Handlebars.registerHelper('expectGateDeparture',function(){return FlightPage.ExpectGateDeparture(this);});FlightPage.ExpectGateArrival=function(data){return data.flightStatus!=='fru'&&(data.gateArrivalTimes.actual||data.gateArrivalTimes.scheduled||data.gateArrivalTimes.estimated);};Handlebars.registerHelper('expectGateArrival',function(){return FlightPage.ExpectGateArrival(this);});FlightPage.HasAirportDelays=function(data){return data.origin.delays!==null||data.destination.delays!==null;};Handlebars.registerHelper('hasAirportDelays',function(){return FlightPage.HasAirportDelays(this);});FlightPage.HasEmptyGateTimes=function(data){hasEmptyGateTimes=true;for(var gateType in{gateDepartureTimes:1,gateArrivalTimes:1}){for(var gateTimeType in data[gateType]){if(data[gateType][gateTimeType]){hasEmptyGateTimes=false;}}}
return hasEmptyGateTimes;};Handlebars.registerHelper('hasEmptyGateTimes',function(){return FlightPage.HasEmptyGateTimes(this);});FlightPage.IsLoggedIn=function(data){return((typeof user=='object')&&('username'in user)&&(user.username));};Handlebars.registerHelper('isLoggedIn',function(){return FlightPage.IsLoggedIn(this);});FlightPage.IsActiveUser=function(){return(FlightPage.IsLoggedIn(this)&&(user.active==="1"||user.arincUser));};Handlebars.registerHelper('isActiveUser',function(){return FlightPage.IsActiveUser();});FlightPage.DisplayTail=function(tail){var url='/live/flight/'+tail.replace(/[^\w]/gi,'');var output;if(url!=window.location.pathname){output='<a href="'+url+'">'+tail+'</a>';}else{output=tail;}
return new Handlebars.SafeString(output);};Handlebars.registerHelper('displayTail',FlightPage.DisplayTail);FlightPage.RegLinks=function(){var separator=' &middot; ';var output=separator;var isFboUser=user.fboUser||FlightPage.HasStaffPrivileges();var regText='Registration';if(isFboUser){regText+='/Analysis';}
output+='<a href="/resources/registration/'+this.aircraft.tail.replace(/[^\w]/gi,'')+'">'+regText+'</a>';if(this.displayIdent!=this.aircraft.tail&&isFboUser){output+=separator;output+='<a href="/resources/registration/'+this.ident+'">'+this.displayIdent+' analysis</a>';}
return new Handlebars.SafeString(output);};Handlebars.registerHelper('regLinks',FlightPage.RegLinks);FlightPage.IsAirborne=function(data){var arrived=FlightPage.HasArrivedSimple(data);return(!data.resultUnknown&&!data.cancelled&&!data.blockedForUser&&!data.unknown&&data.takeoffTimes.actual&&!arrived);};Handlebars.registerHelper('isAirborneFlight',function(){return FlightPage.IsAirborne(this);});FlightPage.IsAirborneAdhocFlight=function(data){return data.adhoc&&!data.destination.friendlyLocation&&!data.destination.icao&&!data.destination.iata&&!data.destination.altIdent;};Handlebars.registerHelper('isAirborneAdhocFlight',function(){return FlightPage.IsAirborneAdhocFlight(this);});FlightPage.ShowFlightProgress=function(data){return((!FlightPage.HasDeparted(data)&&!FlightPage.HasArrived(data))||(FlightPage.HasDeparted(data))||FlightPage.HasArrived(data));};Handlebars.registerHelper('showFlightProgress',function(){return FlightPage.ShowFlightProgress(this);});FlightPage.ShowFlightProgressRemaining=function(data){return FlightPage.ShowFlightProgress(data)&&FlightPage.RemainingFlightTime(data);};Handlebars.registerHelper('showFlightProgressRemaining',function(){return FlightPage.ShowFlightProgressRemaining(this);});FlightPage.ShowFlightProgressDistance=function(data){return FlightPage.ShowFlightProgressRemaining(data)&&data.distance.elapsed&&FlightPage.IsAirborne(data);};Handlebars.registerHelper('showFlightProgressDistance',function(){return FlightPage.ShowFlightProgressDistance(this);});FlightPage.ShowFlightProgressDistanceRemaining=function(data){return FlightPage.ShowFlightProgressRemaining(data)&&data.distance.remaining&&FlightPage.IsAirborne(data);};Handlebars.registerHelper('showFlightProgressDistanceRemaining',function(){return FlightPage.ShowFlightProgressDistanceRemaining(this);});FlightPage.TotalFlightTime=function(data){var departureTime=FlightPage.GetDisplayDepartureTime(data.takeoffTimes,data.gateDepartureTimes,FlightPage.ShowAviatorView(data));var arrivalTime=FlightPage.GetDisplayArrivalTime(data.takeoffTimes,data.landingTimes,data.gateArrivalTimes,data.timestamp,data.resultUnknown,FlightPage.HasArrived(data),FlightPage.ShowAviatorView(data));var total=(arrivalTime.time||data.timestamp)-departureTime.time;return total;};Handlebars.registerHelper('totalFlightTime',function(){return FlightPage.TotalFlightTime(this);});FlightPage.ElapsedFlightTime=function(data){var arrived=FlightPage.HasArrivedSimple(data);var actDep=(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.actual)||(!arrived&&data.takeoffTimes.actual),now=FADate.getNow(),elapsed='';now=now-(now%60);if(actDep&&now>actDep){elapsed=Math.floor(now-actDep);elapsed=elapsed-(elapsed%60);}
if(data.resultUnknown||(data.adhoc&&!FlightPage.HasArrived(data))){elapsed='';}
if(FlightPage.HasArrived(data)||data.cancelled){elapsed='';}
return elapsed;};Handlebars.registerHelper('elapsedFlightTime',function(){return FlightPage.ElapsedFlightTime(this);});FlightPage.RemainingFlightTime=function(data){var estArr=(!FlightPage.ShowAviatorView(data)&&data.gateArrivalTimes.estimated)||data.landingTimes.estimated||data.timestamp,now=FADate.getNow(),remaining=0;now=now-(now%60);if(estArr&&estArr>now&&(Math.round(estArr-now)>60)){remaining=Math.floor(estArr-now);remaining=remaining-(remaining%60);}
if
((data.adhoc&&!FlightPage.HasArrived(data))||!FlightPage.HasDeparted(data)||FlightPage.HasArrived(data)||data.resultUnknown){remaining='';}
return remaining;};Handlebars.registerHelper('remainingFlightTime',function(){return FlightPage.RemainingFlightTime(this);});FlightPage.SuggestAdhoc=function(data){return(!user.adhocEnabled&&data.adhocAvailable);};Handlebars.registerHelper('suggestAdhoc',function(){return FlightPage.SuggestAdhoc(this);});FlightPage.HasAdhocDeparture=function(data){return FA.Lib.Common.isCoordinate(data.origin.icao);};Handlebars.registerHelper('hasAdhocDeparture',function(){return FlightPage.HasAdhocDeparture(this);});FlightPage.HasAdhocArrival=function(data){return FA.Lib.Common.isCoordinate(data.destination.icao);};Handlebars.registerHelper('hasAdhocArrival',function(){return FlightPage.HasAdhocArrival(this);});FlightPage.HideFlightFinderLink=function(data){return!data.destination.icao||!data.origin.icao||FlightPage.HasAdhocDeparture(data)||FlightPage.HasAdhocArrival(data);};Handlebars.registerHelper('hideFlightFinderLink',function(){return FlightPage.HideFlightFinderLink(this);});FlightPage.ShowInboundFlightLink=function(data){return data.inboundFlight&&'linkUrl'in data.inboundFlight&&data.inboundFlight.linkUrl;};Handlebars.registerHelper('showInboundFlightLink',function(){return FlightPage.ShowInboundFlightLink(this);});FlightPage.ShowTrackLogLink=function(data){return data.adhoc||data.resultUnknown||FlightPage.HasDeparted(data)||FlightPage.HasArrived(data);}
Handlebars.registerHelper('showTrackLogLink',function(){return FlightPage.ShowTrackLogLink(this);});FlightPage.ShowTrackLogAndInboundFlightLinks=function(){return FlightPage.ShowInboundFlightLink(this)&&FlightPage.ShowTrackLogLink(this);};Handlebars.registerHelper('showTrackLogAndInboundFlightLinks',FlightPage.ShowTrackLogAndInboundFlightLinks);FlightPage.CanAddRemark=function(data){return FlightPage.HasStaffPrivileges(data)||(user&&'fboUser'in user&&user.fboUser);};Handlebars.registerHelper('canAddRemark',function(){return FlightPage.CanAddRemark(this);});FlightPage.ShowFlightDelays=function(data){return!FlightPage.HasEmptyGateTimes(data)||!data.ga;};Handlebars.registerHelper('showFlightDelays',function(){return FlightPage.ShowFlightDelays(this);});FlightPage.ShowAviatorView=function(data){return data.ga||data.adhoc||(user&&'flightpageLayout'in user&&user.flightpageLayout==1)};Handlebars.registerHelper('showAviatorView',function(){return FlightPage.ShowAviatorView(this);});FlightPage.ShowAviatorViewAirlineFlight=function(data){return!data.ga&&FlightPage.ShowAviatorView(data);};Handlebars.registerHelper('showAviatorViewAirlineFlight',function(){return FlightPage.ShowAviatorViewAirlineFlight(this);});FlightPage.SortFlights=function(flights,dir){flights.sort(function(a,b){var diff;if(a.takeoffTimes.actual&&b.takeoffTimes.actual){diff=a.takeoffTimes.actual-b.takeoffTimes.actual;}else{diff=a.takeoffTimes.estimated-b.takeoffTimes.estimated;}
if(diff==0){if(!a.cancelled&&b.cancelled){diff=1;}else if(!b.cancelled&&a.cancelled){diff=-1;}
if(!a.diverted&&b.diverted){diff=1;}else if(!b.diverted&&a.diverted){diff=-1;}}
if(dir!=='asc'){diff=diff*-1;}
return diff;});};FlightPage.isTourGuideActive=false;FlightPage.prototype.setupTourGuide=function(){var that=this,tourGuideSteps=[{element:'#flightPageTourStep1',intro:function(){if(!FlightPage.ShowAviatorView(that.data)){return Rosetta.getTranslation('FP_Tour_Step_2','Progress bar shows gate-to-gate departures and arrivals (when available)');}else{return Rosetta.getTranslation('FP_Tour_Step_3','Progress bar shows take-off and landing times');}}}];if(FlightPage.ShowInboundFlightLink(that.data)){tourGuideSteps.push({element:'#flightPageTourStep4',intro:Rosetta.getTranslation('FP_Tour_Step_4','View the flight history of the aircraft'),position:'auto'});}
tourGuideSteps.push({element:'#flightPageTourStepMap',intro:FlightPage.FlightPathLegend,position:'auto'},{element:'#flightPageTourStep5',intro:Rosetta.getTranslation('FP_Tour_Step_5','Configure user preferences and unit settings')});if(FlightPage.IsLoggedIn()){tourGuideSteps.push({element:'#flightPageTourStep6',intro:Rosetta.getTranslation('FP_Tour_Step_6','View all flights in Aviator mode'),overlayOpacity:0});}
this.tour=introJs();this.tour.setOptions({steps:tourGuideSteps});this.tour.onafterchange(function(){var triggerStep=!FlightPage.ShowInboundFlightLink(that.data)?3:4;if(this._currentStep==triggerStep&&!FlightPage.isTourGuideActive){FlightPage.isTourGuideActive=true;setTimeout(function(){$(that.selectors.settingsModal).foundation('reveal','open');},0);}});this.tour.onexit(function(){FlightPage.isTourGuideActive=false;setTimeout(function(){$(that.selectors.settingsModal).foundation('reveal','close');},0);});$('body').on('click',this.selectors.tourStartBtn,function(e){e.preventDefault();that.tour.start();});};FlightPage.LocalStorage=(function(){var hasLocalStorage=FA.Lib.Common.hasLocalStorage;return{get:function(key){var storageObject={};try{var data=hasLocalStorage?localStorage.getItem(FlightPage.COOKIE):$.cookie(FlightPage.COOKIE);storageObject=data?$.parseJSON(data):{};}catch(e){}
if(key in storageObject){return storageObject[key];}},set:function(key,value){if(typeof JSON==="undefined"||typeof JSON.stringify==="undefined"){return;}
if(!key){return;}
var storageObject={};try{var data=hasLocalStorage?localStorage.getItem(FlightPage.COOKIE):$.cookie(FlightPage.COOKIE);storageObject=data?$.parseJSON(data):{};}catch(e){}
storageObject[key]=value;if(hasLocalStorage){localStorage.setItem(FlightPage.COOKIE,JSON.stringify(storageObject));}else{$.cookie(FlightPage.COOKIE,JSON.stringify(storageObject));}}};})();FlightPage.Coalesce=function(){if(arguments.length<1){return;}
for(var i=0;i<(arguments.length);i++){if(arguments[i]){return arguments[i];}}};FlightPage.HandlebarsCoalesce=function(){Array.prototype.pop.apply(arguments);return FlightPage.Coalesce.apply(this,arguments);};Handlebars.registerHelper('coalesce',FlightPage.HandlebarsCoalesce);FlightPage.Wrap=function(tag,contents,params){var attrs=[];for(var prop in params.hash){attrs.push(Handlebars.escapeExpression(prop)+'="'
+Handlebars.escapeExpression(params.hash[prop])+'"');}
return new Handlebars.SafeString("<"+tag+" "+attrs.join(" ")+">"+Handlebars.escapeExpression(contents)+"</"+tag+">");};Handlebars.registerHelper('wrap',FlightPage.Wrap);FlightPage.AddNbsp=function(type,contents){if(type==="prepend"){return new Handlebars.SafeString("&nbsp;"+Handlebars.escapeExpression(contents));}else{return new Handlebars.SafeString(Handlebars.escapeExpression(contents)+"&nbsp;");}};Handlebars.registerHelper('addNbsp',FlightPage.AddNbsp);FlightPage.FormatAverageDelay=function(interval){var avgDelay='&mdash;';if(interval>(60*60)){avgDelay=Rosetta.getTranslation('FP_MoreThanHour','More than 1 hour');}else if(interval>(60*40)&&interval<=(60*60)){avgDelay=Rosetta.getTranslation('FP_40m_1hr','40 minutes - 1 hour');}else if(interval>(60*20)&&interval<=(60*40)){avgDelay=Rosetta.getTranslation('FP_20m_40m','20-40 minutes');}else if(interval>(60*10)&&interval<=(60*20)){avgDelay=Rosetta.getTranslation('FP_10m_20m','10-20 minutes');}else if(interval<=(60*10)){avgDelay=Rosetta.getTranslation('FP_10m','Less than 10 minutes');}
return avgDelay;};Handlebars.registerHelper('formatAverageDelay',FlightPage.FormatAverageDelay);FlightPage.FormatAirportCode=function(airport,includeLink,bold){if(bold===undefined||typeof bold!=="boolean"){bold=true;}
bold_class="";if(bold){bold_class="text-bold";}
var formattedAirportCode=FAUser.formatAirportCode(airport.icao,airport.iata,airport.altIdent);if(includeLink===true&&airport.isValidAirportCode===true){var formattedAirportCodeLink=$('<a>');formattedAirportCodeLink.addClass(bold_class);formattedAirportCodeLink.attr('href','/live/airport/'+Handlebars.Utils.escapeExpression(airport.icao));formattedAirportCodeLink.text(Handlebars.Utils.escapeExpression(formattedAirportCode));if(airport.friendlyLocation){formattedAirportCodeLink.attr('data-tip',Handlebars.Utils.escapeExpression(airport.friendlyLocation));}
return new Handlebars.SafeString(formattedAirportCodeLink[0].outerHTML);}
return formattedAirportCode;};Handlebars.registerHelper('formatAirportCode',FlightPage.FormatAirportCode);FlightPage.FormatAirportCity=function(location){location=location.replace(/\//g,'\n/\n');return location;}
Handlebars.registerHelper('formatAirportCity',FlightPage.FormatAirportCity);FlightPage.FlightTime=function(time,isEstimated){this.time=time;this.isEstimated=(typeof isEstimated!=='undefined'?isEstimated:false);};FlightPage.FlightTime.coalesceTimes=function(){return _.find(arguments,function(ft){return ft.time})||new FlightPage.FlightTime();};FlightPage.GetDisplayDepartureTime=function(takeoffTimes,gateDepartureTimes,showAviatorView){var scheduledDeparture=new FlightPage.FlightTime((!showAviatorView&&gateDepartureTimes.scheduled)||takeoffTimes.scheduled);var estimatedDeparture=new FlightPage.FlightTime((!showAviatorView&&gateDepartureTimes.estimated)||takeoffTimes.estimated,true);var actualDeparture=new FlightPage.FlightTime((!showAviatorView&&gateDepartureTimes.actual)||takeoffTimes.actual);return FlightPage.FlightTime.coalesceTimes(actualDeparture,estimatedDeparture,scheduledDeparture);};Handlebars.registerHelper('displayDepartureTime',function(){return FlightPage.GetDisplayDepartureTime(this.takeoffTimes,this.gateDepartureTimes,FlightPage.ShowAviatorView(this)).time;});Handlebars.registerHelper('displayDepartureTimeIsEstimated',function(){return FlightPage.GetDisplayDepartureTime(this.takeoffTimes,this.gateDepartureTimes,FlightPage.ShowAviatorView(this)).isEstimated;});FlightPage.GetDisplayArrivalTime=function(takeoffTimes,landingTimes,gateArrivalTimes,timestamp,flightResultUnknown,hasArrived,showAviatorView){var scheduledArrival=new FlightPage.FlightTime((!showAviatorView&&gateArrivalTimes.scheduled)||landingTimes.scheduled);var estimatedArrival=new FlightPage.FlightTime((!showAviatorView&&gateArrivalTimes.estimated)||landingTimes.estimated,true);var actualArrival=new FlightPage.FlightTime((!showAviatorView&&gateArrivalTimes.actual)||(showAviatorView&&landingTimes.actual)||(hasArrived&&landingTimes.actual)||null);if(flightResultUnknown){return new FlightPage.FlightTime(estimatedArrival.time||timestamp,true);}
return FlightPage.FlightTime.coalesceTimes(actualArrival,estimatedArrival,scheduledArrival);};Handlebars.registerHelper('displayArrivalTime',function(){return this.diverted?"":FlightPage.GetDisplayArrivalTime(this.takeoffTimes,this.landingTimes,this.gateArrivalTimes,this.timestamp,this.resultUnknown,FlightPage.HasArrived(this),FlightPage.ShowAviatorView(this)).time;});Handlebars.registerHelper('displayArrivalTimeIsEstimated',function(){return FlightPage.GetDisplayArrivalTime(this.takeoffTimes,this.landingTimes,this.gateArrivalTimes,this.timestamp,this.resultUnknown,FlightPage.HasArrived(this),FlightPage.ShowAviatorView(this)).isEstimated;});FlightPage.FormatFlightDate=function(timestamp,TZ,format){var date='';var timestamp=timestamp*1000;if(format=='long'){var format=(FADateConfig&&'longDayFormat'in FADateConfig&&FADateConfig.longDayFormat?FADateConfig.longDayFormat:'%A %d-%b-%Y');}else if(format=='short'){var format=(FADateConfig&&'shortDayFormat'in FADateConfig&&FADateConfig.shortDayFormat?FADateConfig.shortDayFormat:'%a %d-%b-%Y');}else{var format=(FADateConfig&&'dateFormat'in FADateConfig&&FADateConfig.dateFormat?FADateConfig.dateFormat:'%d-%b-%Y');}
if(timestamp&&format){date=FADate.displayFlightTime(timestamp,TZ,format);}
return date;};Handlebars.registerHelper('formatFlightDate',FlightPage.FormatFlightDate);FlightPage.FormatFlightDay=function(timestamp,TZ,format){if(timestamp){return FADate.displayFlightTime((timestamp*1000),TZ,'%A');}};Handlebars.registerHelper('formatFlightDay',FlightPage.FormatFlightDay);FlightPage.FormatDate=function(timestamp,format){var date='';var timestamp=timestamp*1000;if(typeof format=='object'){var format=(FADateConfig&&'longDateFormat'in FADateConfig&&FADateConfig.longDateFormat?FADateConfig.longDateFormat:'%A, %B %e, %Y');}
if(timestamp&&format){date=FADate.displayWeatherTime(timestamp,format);}
return date;};Handlebars.registerHelper('formatDate',FlightPage.FormatDate);FlightPage.FormatFlightTime=function(timestamp,airportTZ){var time='';if(!timestamp){return'';}
var config={timeLocal:false,userHour:'h:mm A',dualTzDisplay:false};if(typeof FADateConfig=='object'){config=$.extend(config,FADateConfig);}
var timestamp=timestamp*1000;var format=config.userHour+' %Z';if(timestamp&&format){if(config.dualTzDisplay){time=FADate.displayFlightTime(timestamp,':Zulu',config.userHour+' Z',true);time+='<span class="collapseForMobile">&nbsp;/&nbsp;'+FADate.displayFlightTime(timestamp,airportTZ,format)+'</span>';}else{time=FADate.displayFlightTime(timestamp,airportTZ,format);}}
return new Handlebars.SafeString(time);};Handlebars.registerHelper('formatFlightTime',FlightPage.FormatFlightTime);FlightPage.plusOneLabel=function(departureTimestamp,departureTZ,arrivalTimestamp,arrivalTZ){var format='%D';var departureDay=FADate.displayFlightTime(departureTimestamp*1000,departureTZ,format);var arrivalDay=FADate.displayFlightTime(arrivalTimestamp*1000,arrivalTZ,format);var departure=moment(departureDay,'MM/DD/YYYY');var arrival=moment(arrivalDay,'MM/DD/YYYY');var dayDifference=arrival.diff(departure,'days');if(dayDifference!==0&&dayDifference>=-4&&dayDifference<=4){var sign='';if(dayDifference>0){sign='+';}else if(dayDifference<0){sign='-';}
return' ('+sign+Math.abs(dayDifference)+')';}
return'';};Handlebars.registerHelper('plusOneLabel',FlightPage.plusOneLabel);FlightPage.FormatOperatedByLink=function(){if(FlightPage.HasCodeShare(this)&&(this.friendlyIdent||this.ident)){return new Handlebars.SafeString(Rosetta.getTranslation('FP_Operated_By','Operating as %1','<a href="/live/flight/'+this.ident+'">'+(this.friendlyIdent||this.ident)+'</a>'));}};Handlebars.registerHelper('formatOperatedByLink',FlightPage.FormatOperatedByLink);FlightPage.FormatActivityLogFlightDate=function(departureTime,timezone,isEstimated){var formattedFlightDate=FlightPage.FormatFlightDay(departureTime,timezone)+'<br>'+FlightPage.FormatFlightDate(departureTime,timezone);if(isEstimated){return new Handlebars.SafeString('<em>'+formattedFlightDate+'</em>');}
return new Handlebars.SafeString(formattedFlightDate);}
Handlebars.registerHelper('formatActivityLogFlightDate',FlightPage.FormatActivityLogFlightDate);FlightPage.FormatActivityLogAirportName=function(airport){if(FA.Lib.Common.isCoordinate(airport.icao)&&airport.friendlyName){return new Handlebars.SafeString(Rosetta.getTranslation('FP_Near_City','near %1',airport.friendlyName));}
return new Handlebars.SafeString((airport.friendlyName!=null?airport.friendlyName+" - ":"")+FlightPage.FormatAirportCode(airport,true,false));};Handlebars.registerHelper('formatActivityLogAirportName',FlightPage.FormatActivityLogAirportName);FlightPage.FormatActivityLogAirportCode=function(airport){if(FA.Lib.Common.isCoordinate(airport.icao)&&airport.friendlyName){return new Handlebars.SafeString(Rosetta.getTranslation('FP_Near_City','near %1',airport.friendlyName));}
return new Handlebars.SafeString(FlightPage.FormatAirportCode(airport,false));};Handlebars.registerHelper('FormatActivityLogAirportCode',FlightPage.FormatActivityLogAirportCode);FlightPage.FormatActivityLogDepartureTime=function(departureTime,origin,isEstimated){var formattedDepartureTime='<span class="noWrapTime">'+FlightPage.FormatFlightTime(departureTime,origin.TZ)+'</span>';if(FA.Lib.Common.isCoordinate(origin.icao)){return new Handlebars.SafeString('<em>'+Rosetta.getTranslation('FP_First_Seen_At','First seen at %1',formattedDepartureTime)+'</em>');}
if(isEstimated){return new Handlebars.SafeString('<em>'+formattedDepartureTime+'</em>');}
return new Handlebars.SafeString(formattedDepartureTime);};Handlebars.registerHelper('formatActivityLogDepartureTime',FlightPage.FormatActivityLogDepartureTime);FlightPage.FormatActivityLogArrivalTime=function(departureTime,arrivalTime,origin,destination,isEstimated,resultUnknown){var formattedArrivalTime='<span class="noWrapTime'+(resultUnknown?' flightPageResultUnknown':'')+'">'
+FlightPage.FormatFlightTime(arrivalTime,destination.TZ)
+FlightPage.plusOneLabel(departureTime,origin.TZ,arrivalTime,destination.TZ)
+(resultUnknown&&!FA.Lib.Common.isCoordinate(destination.icao)?' <a href="/about/faq#flightresultunknown">(?)</a>':'')
+'</span>';if(FA.Lib.Common.isCoordinate(destination.icao)){return new Handlebars.SafeString('<em>'+Rosetta.getTranslation('FP_Last_Seen_At','Last seen at %1',formattedArrivalTime)+'</em>');}
if(isEstimated){return new Handlebars.SafeString('<em>'+formattedArrivalTime+'</em>');}
return new Handlebars.SafeString(formattedArrivalTime);};Handlebars.registerHelper('formatActivityLogArrivalTime',FlightPage.FormatActivityLogArrivalTime);FlightPage.FlightProgressBar=function(){var now=FADate.getNow(),progress=0,data=this,style='',icon='';now=now-(now%60);if(!(!FlightPage.ExpectGateDeparture(data)&&data.takeoffTimes.actual)&&!(data.gateDepartureTimes.actual)||data.cancelled||data.adhoc){style='Scheduled';}else{style='Enroute';var total=Math.abs(FlightPage.TotalFlightTime(data)),elapsed=Math.abs(FlightPage.ElapsedFlightTime(data)),progress=Math.min(100,Math.max(0,(elapsed/total)*100));var arrived=FlightPage.HasArrivedSimple(data);if(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.actual&&!data.takeoffTimes.actual){icon=FlightPage.RunwayIcon;progress=Math.min(progress,10);}else if(data.takeoffTimes.actual&&!arrived){if($(window).width()<769){FlightPage.EnrouteIcon='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 59.4 40" enable-background="new 0 0 59.4 40" xml:space="preserve" class="flightPageAircraftIcon Enroute" preserveAspectRatio="xMaxYMax meet"><g><path d="M51.6,14.2L36.5,15L25.8,0h-7.7l5.6,15.7L8.3,16.6l-3.1-6.3H0l2.6,10.3L0,31h5.2l3.1-6.3l15.3,0.9L18.1,40h7.7 l10.6-13.8l15.2,0.8c0,0,7.7-4.1,7.7-6.7C59.4,17.9,51.6,14.2,51.6,14.2z"/></g></svg>';}else if(FAMap.olExtras){var icon=data.icon
if(icon==='starwars'){icon='airliner';}
FlightPage.EnrouteIcon=FAMap.olExtras.Style.iconDefs.shapes[icon].svg.replace('aircraft_color_fill','#00A900').replace('aircraft_color_stroke','#00A900');}
icon=FlightPage.EnrouteIcon||"";}}
if(FlightPage.HasDeparted(data)&&FlightPage.HasArrived(data)){style='Arrived';progress=100;}else if(!FlightPage.ShowAviatorView(data)&&FlightPage.ExpectGateArrival(data)&&arrived&&!data.gateArrivalTimes.actual){icon=FlightPage.RunwayIcon;progress=100;}
if(FlightPage.ShowFlightDelays(data)&&(FlightPage.HasDelayedDeparture(data)||data.cancelled)){style+=' DelayedDeparture';}
if(FlightPage.ShowFlightDelays(data)&&(FlightPage.HasDelayedArrival(data)||data.cancelled)){style+=' DelayedArrival';}
return new Handlebars.SafeString('<div class="flightPageProgressTrack '+style+'">'
+(!data.adhoc?'<span class="flightPageProgressTrackMarker">&nbsp;</span>':'')
+'<span class="flightPageProgressTrackCompleted" style="width:'+progress+'%">'+icon+'</span>'
+'</div>');};Handlebars.registerHelper('flightProgressBar',FlightPage.FlightProgressBar);FlightPage.FlightStatusDurationAsString=function(interval){var duration='',d=moment.duration(interval,'seconds');var time={hour:(60*60),day:(60*60*24)};if(interval>=(365*time.day)){var years=Math.floor(d.asYears());if(years>1){duration=Rosetta.getTranslation('FP_v2_Status_Over_Years','over %1 years',years);}else{duration=Rosetta.getTranslation('FP_v2_Status_Over_Year','over a year');}}else if(interval>=(35*time.day)&&interval<(365*time.day)){var months=Math.floor((d.asDays()/31));if(months>1){duration=Rosetta.getTranslation('FP_v2_Status_Over_Months','over %1 months',months);}else{duration=Rosetta.getTranslation('FP_v2_Status_Over_Month','over a month');}}else if(interval>=(7*time.day)&&interval<(35*time.day)){var weeks=Math.floor(d.asWeeks());if(weeks>1){duration=Rosetta.getTranslation('FP_v2_Status_Over_Weeks','over %1 weeks',weeks);}else{duration=Rosetta.getTranslation('FP_v2_Status_Over_Week','over a week');}}else if(interval>=time.day&&interval<(7*time.day)){var days=Math.floor(d.asDays());if(days>1){duration=Rosetta.getTranslation('FP_v2_Status_Over_Days','over %1 days',days);}else{duration=Rosetta.getTranslation('FP_v2_Status_Over_Day','over a day');}}else if(interval>(8*time.hour)&&interval<time.day){var hours=Math.floor(d.asHours());duration=Rosetta.getTranslation('FP_v2_Status_Over_Hours','over %1 hours',hours);}else{duration=FlightPage.Duration(interval);}
return duration;};FlightPage.FlightStatus=function(){var now=FADate.getNow(),styles='normal',status='',data=this,desc='';now=now-(now%60);if(data.resultUnknown){status=Rosetta.getTranslation('FP_Estimated_Arrival','Estimated arrival');desc='<a href="https://flightaware.com/about/faq#flightresultunknown">'+Rosetta.getTranslation('FP_LearnMore','learn more')+'</a>';styles='unknown';if(data.adhoc&&FlightPage.HasAdhocArrival(data)){styles='normal';status='';desc='';}else if('fruOverride'in data&&data.fruOverride){status=Rosetta.getTranslation('FP_Result_Unknown','Result unknown');if(data.internal&&'fruOverridePerson'in data.internal&&data.internal.fruOverridePerson){status+=' <span class="fruOverridePerson">(set by '+data.internal.fruOverridePerson+')</span>'}}}else if(FlightPage.HasLanded(this)){var arrived=FlightPage.HasArrivedSimple(data);var arrivalTime=FlightPage.Coalesce(data.landingTimes.actual,data.landingTimes.estimated);if(data.poweredOff){var timeSincePoweredOff=now-data.poweredOff;if(timeSincePoweredOff<FlightPage.JustLandedThreshold){status=Rosetta.getTranslation('FP_Just_PoweredOff','Just powered off');}else{status=Rosetta.getTranslation('FP_PoweredOff_Ago','Powered off %1 ago',(FlightPage.FlightStatusDurationAsString(timeSincePoweredOff)||Rosetta.getTranslation('FP_Few_Seconds','a few seconds')));}}else if(data.taxiIn){status=Rosetta.getTranslation('FP_Parked','Parked');if(data.destination.fbo){var timeSinceTaxiIn=now-data.taxiIn;desc=Rosetta.getTranslation('FP_Arrived_At_FBO','Arrived at %1 - %2 ago',data.destination.fbo,(FlightPage.FlightStatusDurationAsString(timeSinceTaxiIn)||Rosetta.getTranslation('FP_Few_Seconds','a few seconds')));}}else if(!FlightPage.ExpectGateArrival(this)||(!data.gateArrivalTimes.actual&&arrived)){var timeSinceLanding=now-arrivalTime;if(timeSinceLanding<0){status=Rosetta.getTranslation('FP_Tentatively_Landed','Tentatively Landed');}else if(timeSinceLanding<FlightPage.JustLandedThreshold){status=Rosetta.getTranslation('FP_Just_Landed','Just landed');}else{status=Rosetta.getTranslation('FP_Landed_Ago','Landed %1 ago',(FlightPage.FlightStatusDurationAsString(timeSinceLanding)||Rosetta.getTranslation('FP_Few_Seconds','a few seconds')));}
if(FlightPage.ExpectGateArrival(this)&&!data.gateArrivalTimes.actual&&arrived&&(now-arrivalTime)<FlightPage.GateArrivalThreshold){if(data.destination.gate){desc=Rosetta.getTranslation('FP_Taxiing_Gate','Taxiing to gate %1',data.destination.gate);}else if(data.destination.terminal){desc=Rosetta.getTranslation('FP_Taxiing_Terminal','Taxiing to terminal %1',data.destination.terminal);}else if(!data.ga){desc=$.trim(Rosetta.getTranslation('FP_Taxiing_Terminal','Taxiing to terminal %1',''));}}}else{var timeSinceArrival=now-(data.gateArrivalTimes.actual||arrivalTime);if(timeSinceArrival<0){status=Rosetta.getTranslation('FP_Tentatively_Arrived','Tentatively Arrived');}else if(timeSinceArrival<FlightPage.JustLandedThreshold){status=Rosetta.getTranslation('FP_Just_Arrived','Just arrived');}else{status=Rosetta.getTranslation('FP_Arrived_Ago','Arrived %1 ago',(FlightPage.FlightStatusDurationAsString(timeSinceArrival)||Rosetta.getTranslation('FP_Few_Seconds','a few seconds')));}
if(data.destination.gate){desc=Rosetta.getTranslation('FP_Gate','Gate %1',data.destination.gate);}else if(data.destination.terminal){desc=Rosetta.getTranslation('FP_Terminal','Terminal %1',data.destination.terminal);}else{desc='';}}}else if(FlightPage.IsAirborne(this)){var timeToLanding=-1;if(data.landingTimes.estimated){timeToLanding=Math.max(data.landingTimes.estimated-now,0);}
if(timeToLanding==0){if(FlightPage.ExpectGateArrival(this)){status=Rosetta.getTranslation('FP_Arriving_Shortly','Arriving shortly');desc='';}else{status=Rosetta.getTranslation('FP_Landing_Shortly','Landing shortly');desc='';}}else{if(!FlightPage.HasDelayedArrival(this)&&!data.adhoc&&!data.ga){status=Rosetta.getTranslation('FP_Enroute_And_On_Time','En route and on time');}else{status=Rosetta.getTranslation('FP_Enroute','En route');}
if(FlightPage.ExpectGateArrival(this)&&!FlightPage.ShowAviatorView(data)){var expectedGateArrival=(data.gateArrivalTimes.estimated||data.landingTimes.estimated||data.gateArrivalTimes.scheduled||data.landingTimes.scheduled)-now;if(expectedGateArrival>60){desc=Rosetta.getTranslation('FP_Arriving_In','Arriving in %1',(FlightPage.FlightStatusDurationAsString(expectedGateArrival)||Rosetta.getTranslation('FP_Few_Seconds','a few seconds')));}else{desc=Rosetta.getTranslation('FP_Arriving_Shortly','Arriving shortly');}}else if(timeToLanding>0){if(timeToLanding>60){desc=Rosetta.getTranslation('FP_Landing_In','Landing in %1',(FlightPage.FlightStatusDurationAsString(timeToLanding)||Rosetta.getTranslation('FP_Few_Seconds','a few seconds')));}else{desc=Rosetta.getTranslation('FP_Landing_Shortly','Landing shortly');}}else{desc='';}}}else{if(data.cancelled){status=Rosetta.getTranslation('FP_Cancelled','Cancelled');styles='cancelled';}else if(data.taxiOut){status=Rosetta.getTranslation('FP_Taxiing','Taxiing');if(data.takeoffTimes&&(data.takeoffTimes.scheduled||data.takeoffTimes.estimated)){timeToTakeoff=Math.max(FlightPage.Coalesce(data.takeoffTimes.estimated,data.takeoffTimes.scheduled)-now,0);var timeToTakeoffString=FlightPage.FlightStatusDurationAsString(timeToTakeoff);desc=timeToTakeoffString?Rosetta.getTranslation('FP_Departing_In','Departing in %1',timeToTakeoffString):Rosetta.getTranslation('FP_Departing_Soon','Departing soon');}}else if(data.gateDepartureTimes.actual){status=Rosetta.getTranslation('FP_Taxiing_Take_Off','Taxiing for takeoff');var timeSincePushback=now-data.gateDepartureTimes.actual;var timePhrase=(FlightPage.FlightStatusDurationAsString(timeSincePushback)||Rosetta.getTranslation('FP_Few_Seconds_Ago','a few seconds ago'));if(data.origin.gate){desc=Rosetta.getTranslation('FP_Left_Gate','Left gate %1',timePhrase);}else if(data.origin.terminal){desc=Rosetta.getTranslation('FP_Left_Terminal','Left terminal %1',timePhrase);}else{desc=Rosetta.getTranslation('FP_Left_Terminal','Left terminal %1',timePhrase);}
if(FlightPage.HasDelayedDeparture(this)&&FlightPage.ShowFlightDelays(this)){styles='delayed';}}else if(data.poweredOn){var timeSincePoweredOn=now-data.poweredOn;status=Rosetta.getTranslation('FP_PoweredOn_Ago','Powered on %1 ago',(FlightPage.FlightStatusDurationAsString(timeSincePoweredOn)||Rosetta.getTranslation('FP_Few_Seconds','a few seconds')));if(data.takeoffTimes&&(data.takeoffTimes.scheduled||data.takeoffTimes.estimated)){timeToTakeoff=Math.max(FlightPage.Coalesce(data.takeoffTimes.estimated,data.takeoffTimes.scheduled)-now,0);if(timeToTakeoff>0){desc=Rosetta.getTranslation('FP_Departing_In','Departing in %1',(FlightPage.FlightStatusDurationAsString(timeToTakeoff)||Rosetta.getTranslation('FP_Few_Seconds','a few seconds')));}}}else{var leavingWord=(FlightPage.ExpectGateDeparture(this))?'Depart':'Take_Off';if(FlightPage.ExpectGateDeparture(this)){relativeTime=(data.gateDepartureTimes.estimated||data.takeoffTimes.estimated||data.gateDepartureTimes.scheduled||data.takeoffTimes.scheduled)-now;}else{relativeTime=data.takeoffTimes.estimated-now;}
if(relativeTime>60){status=Rosetta.getTranslation('FP_Expected_'+leavingWord,'Expected to depart in %1',(FlightPage.FlightStatusDurationAsString(relativeTime)||Rosetta.getTranslation('FP_Few_Seconds','a few seconds')));}else if(relativeTime<=60&&relativeTime>0){status=Rosetta.getTranslation('FP_'+leavingWord+'_Shortly','Expected to depart shortly');}else{status=Rosetta.getTranslation('FP_Scheduled','Scheduled');}
if(FlightPage.ShowInboundFlightLink(data)&&!FlightPage.HasDeparted(data)&&(((data.gateDepartureTimes.estimated||data.takeoffTimes.estimated||0)-now)>FlightPage.InboundFlightThreshold)){desc='<a href="'+data.inboundFlight.linkUrl+'">'+Rosetta.getTranslation('FP_Where_Is_My_Plane_Now','Where is my plane now?')+'</a>';}
if(FlightPage.HasDelayedDeparture(this)&&FlightPage.ShowFlightDelays(this)){styles='delayed';}}}
if(styles==='normal'&&FlightPage.ShowFlightDelays(this)){styles=(FlightPage.HasDelayedArrival(this))?'delayed':'normal';}
return new Handlebars.SafeString('<div class="flightPageSummaryStatus '+styles+'">'
+status+(desc?'<div class="flightPageSummaryStatusExt">'+desc+'</div>':'')+'</div>');};Handlebars.registerHelper('flightStatus',FlightPage.FlightStatus);FlightPage.Count=function(list){return('length'in list&&list.length||0);};Handlebars.registerHelper('count',FlightPage.Count);FlightPage.processActivityLogData=function(data){if(!('_processed'in data.activityLog)||!data.activityLog._processed){data.activityLog.flights.forEach(function(flight){if(flight.flightId==data.flightId&&flight.destination.icao==data.destination.icao){Object.keys(data).forEach(function(k){if(k!='activityLog'){flight[k]=data[k];}});}
flight._state=undefined;var arrived=FlightPage.HasArrivedSimple(flight);var estDep=(!FlightPage.ShowAviatorView(flight)&&flight.gateDepartureTimes.estimated)||flight.takeoffTimes.estimated,actDep=FlightPage.ActualDeparture(flight),schDep=(!FlightPage.ShowAviatorView(flight)&&flight.gateDepartureTimes.scheduled)||flight.takeoffTimes.scheduled;var estArr=(!FlightPage.ShowAviatorView(flight)&&flight.gateArrivalTimes.estimated)||flight.landingTimes.estimated||flight.timestamp,actArr=FlightPage.ActualArrival(flight),schArr=(!FlightPage.ShowAviatorView(flight)&&flight.gateArrivalTimes.scheduled)||flight.landingTimes.scheduled;var enrouteId=false;var noState=!flight._state;var scheduledState=(flight._state==='scheduled');var futureSchDep=FlightPage.FutureScheduledDeparture(flight);;var futureEstTakeoff=FlightPage.FutureEstimatedTakeoff(flight);if((noState||scheduledState)&&!actDep&&!actArr&&!flight.resultUnknown&&(futureSchDep||(futureEstTakeoff||(!futureEstTakeoff&&!actDep)))){if(!flight.cancelled||(flight.cancelled&&futureSchDep)){flight._state='scheduled';}else if(!futureSchDep){flight._state='historical';}}else if((!flight._state||flight._state==='enroute')&&!FlightPage.HasArrived(flight)&&actDep&&!flight.cancelled&&!flight.resultUnknown&&((!flight.diverted&&!enrouteId)||(enrouteId&&flight.flightId==enrouteId&&flight.diverted))){if(!enrouteId){enrouteId=flight.flightId;}
flight._state='enroute';}else{flight._state='historical';}});data.activityLog._processed=true;}
return data;};FlightPage.buildActivityLogRelations=function(data){var context=[];data.forEach(function(flight){context.push(flight);});FlightPage.SortFlights(context,'asc');var previousFlight=null;context.forEach(function(flight){if(previousFlight===null){previousFlight=flight;}else{flight.previousFlight=previousFlight;previousFlight=flight;}});FlightPage.SortFlights(context,'desc');var nextFlight=null;context.forEach(function(flight){if(nextFlight===null){nextFlight=flight;}else{flight.nextFlight=nextFlight;nextFlight=flight;}});return context;};FlightPage.ScheduledFlights=function(options){var context={upcoming:[],moreUpcomingFlights:0},now=FADate.getNow(),flightids={};var flightData=FlightPage.processActivityLogData(this);var flights=FlightPage.buildActivityLogRelations(flightData.activityLog.flights);flights.forEach(function(data){var actDep=FlightPage.ActualDeparture(data),schDep=(!FlightPage.ShowAviatorView(data)&&data.gateDepartureTimes.scheduled)||data.takeoffTimes.scheduled;if(data._state=='scheduled'){if(!actDep&&!data.resultUnknown&&!data.cancelled&&(schDep>(now+(86400*2)))&&!data.globalVisualizer){context.moreUpcomingFlights++;}else{flightids[data.flightId]=1;context.upcoming.push(data);}}});var key=this.flightId;var noState=!this._state;var actDep=FlightPage.ActualDeparture(this);var actArr=FlightPage.ActualArrival(this);var scheduledState=(this._state==='scheduled');var futureSchDep=FlightPage.FutureScheduledDeparture(this);var futureEstTakeoff=FlightPage.FutureEstimatedTakeoff(this);if(!(key in flightids)&&!this.cancelled&&(noState||scheduledState)&&!actDep&&!actArr&&!this.resultUnknown&&(futureSchDep||(futureEstTakeoff||(!futureEstTakeoff&&!actDep)))){this.aircraftType=(this.aircraft&&this.aircraft.type);context.upcoming.push(this);}
if(context.upcoming.length){if(FlightPage.showPredictedFeatures(context.upcoming[0])){FlightPage.SortFlights(context.upcoming,'asc');}else{FlightPage.SortFlights(context.upcoming,'desc');}
return options.fn(context);}};Handlebars.registerHelper('scheduledFlights',FlightPage.ScheduledFlights);FlightPage.HistoricalFlights=function(options){var context={historical:[]},flightids={};var flightData=FlightPage.processActivityLogData(this);var flights=FlightPage.buildActivityLogRelations(flightData.activityLog.flights);flights.forEach(function(data){if(data._state==='historical'){var key=[data.flightId,data.destination.icao].join('_');flightids[key]=1;context.historical.push(data);}});var key=[this.flightId,this.destination.icao].join('_');if(!(key in flightids)&&(FlightPage.HasArrived(this)||(this.cancelled&&!FlightPage.FutureScheduledDeparture(this)&&!FlightPage.FutureEstimatedTakeoff(this)))){this.aircraftType=(this.aircraft&&this.aircraft.type);context.historical.push(this);}
if(context.historical.length){FlightPage.SortFlights(context.historical,'desc');return options.fn(context);}};Handlebars.registerHelper('historicalFlights',FlightPage.HistoricalFlights);FlightPage.EnrouteFlight=function(options){var context={enroute:[]};var flightData=FlightPage.processActivityLogData(this);var flights=FlightPage.buildActivityLogRelations(flightData.activityLog.flights);flights.forEach(function(data){if(data._state==='enroute'){context.enroute.push(data);}});if(context.enroute.length){FlightPage.SortFlights(context.enroute,'desc');return options.fn(context);}};Handlebars.registerHelper('enrouteFlight',FlightPage.EnrouteFlight);FlightPage.HasCurrentFlights=function(options){var hasFlight=false;var flightData=FlightPage.processActivityLogData(this);flightData.activityLog.flights.forEach(function(data){if(data._state!=='historical'){hasFlight=true;}});return hasFlight;};Handlebars.registerHelper('hasCurrentFlights',FlightPage.HasCurrentFlights);FlightPage.DelayStatus=function(type){var type=(type==='departure'?type:'arrival'),now=FADate.getNow(),status='normal',adjective='',delay=null,dur=0;now=now-(now%60);if(type==='departure'){var status=(FlightPage.HasDelayedDeparture(this)?'delayed':'normal');if(status=='normal'){status=(FlightPage.HasEarlyDeparture(this)?'early':'normal');}
var est=this.gateDepartureTimes.estimated||this.takeoffTimes.estimated,act=this.gateDepartureTimes.actual||!FlightPage.ExpectGateDeparture(this)&&this.takeoffTimes.actual,sch=this.gateDepartureTimes.scheduled||this.takeoffTimes.scheduled;}else{var status=(FlightPage.HasDelayedArrival(this)?'delayed':'normal');if(status=='normal'){status=(FlightPage.HasEarlyArrival(this)?'early':'normal');}
var arrived=FlightPage.HasArrivedSimple(this);var arrivalTime=FlightPage.Coalesce(this.landingTimes.actual,this.landingTimes.estimated);var est=this.gateArrivalTimes.estimated||this.landingTimes.estimated,act=this.gateArrivalTimes.actual||!FlightPage.ExpectGateArrival(this)&&arrivalTime,sch=this.gateArrivalTimes.scheduled||this.landingTimes.scheduled;}
if(status in{delayed:1,early:1}){if(act&&(sch||est)){dur=(act-(sch||est));}else if(est&&sch){dur=(est-sch);}}
delay=FlightPage.Duration(Math.abs(dur));if(!delay){status='normal';}
if(type==='arrival'&&this.resultUnknown){return new Handlebars.SafeString('<span class="flightPage'+(type.charAt(0).toUpperCase()+type.slice(1))+'DelayStatus unknown">'
+'<a href="https://flightaware.com/about/faq#flightresultunknown">'
+Rosetta.getTranslation('FP_EstimatedArrivalTime','estimated arrival time')
+'</a></span>');}
var delayString;if(delay){if(dur>0){delayString=Rosetta.getTranslation('FP_Late','%1 late',delay);}else{delayString=Rosetta.getTranslation('FP_Early','%1 early',delay);}}else{delayString=Rosetta.getTranslation('FP_On_Time','on time');}
return new Handlebars.SafeString('<span class="flightPage'+(type.charAt(0).toUpperCase()+type.slice(1))+'DelayStatus '+status+'">('
+delayString+')</span>');};Handlebars.registerHelper('delayStatus',FlightPage.DelayStatus);FlightPage.NormalizedIdent=function(data){if(FlightPage.ScrambledIdent){return FlightPage.ScrambledIdent;}
if(FlightPage.HasCodeShare(data)){return data.codeShare.displayIdent;}else{return data.displayIdent;}};Handlebars.registerHelper('ident',function(){return FlightPage.NormalizedIdent(this);});FlightPage.IataIdent=function(data){if(FlightPage.HasCodeShare(data)){return data.codeShare.iataIdent;}else{return data.iataIdent;}};Handlebars.registerHelper('iataIdent',function(){return FlightPage.IataIdent(this);});FlightPage.FriendlyIdent=function(){if(FlightPage.HasCodeShare(this)){return this.codeShare.friendlyIdent;}else{return this.friendlyIdent;}};Handlebars.registerHelper('friendlyIdent',FlightPage.FriendlyIdent);FlightPage.FormatAltitude=function(flightLevel){return FAUser.formatAltitude(flightLevel);};Handlebars.registerHelper('formatAltitude',FlightPage.FormatAltitude);FlightPage.FormatHeading=function(heading){while(heading.length<3){heading="0"+heading;}
return heading;};Handlebars.registerHelper('formatHeading',FlightPage.FormatHeading);FlightPage.FormatSpeed=function(knots){return FAUser.formatSpeed(knots);};Handlebars.registerHelper('formatSpeed',FlightPage.FormatSpeed);FlightPage.FormatFuelBurn=function(gallons,pounds){return FAUser.formatFuelBurn(gallons,pounds);};Handlebars.registerHelper('formatFuelBurn',FlightPage.FormatFuelBurn);FlightPage.FormatDistance=function(nauticalMiles){return FAUser.formatDistance(nauticalMiles);};Handlebars.registerHelper('formatDistance',FlightPage.FormatDistance);FlightPage.FormatBlockingDate=function(timestamp){return FADate.tclFormat(moment.unix(timestamp),'%Y-%m-%d');};Handlebars.registerHelper('formatBlockingDate',FlightPage.FormatBlockingDate);Handlebars.registerHelper('getPageURL',function(){return window.location.href;});Handlebars.registerHelper('eq',function(a,b){return(a==b);});FlightPage.IsIntegrationPortal=function(data){return FAIntegrationConfig&&'enabled'in FAIntegrationConfig&&FAIntegrationConfig.enabled;};Handlebars.registerHelper('isIntegrationPortal',function(){return FlightPage.IsIntegrationPortal(this);});FlightPage.CanMessageAircraft=function(){var data=this;return FlightPage.IsIntegrationPortal(data)&&data.aircraft.canMessage;};Handlebars.registerHelper('canMessageAircraft',FlightPage.CanMessageAircraft);FlightPage.FlightPageAvatar=function(){var data=this;var img=typeof data.thumbnail==='object'&&'imageUrl'in data.thumbnail&&data.thumbnail.imageUrl,target=typeof data.thumbnail==='object'&&'linkUrl'in data.thumbnail&&data.thumbnail.linkUrl;if(typeof data.codeShare==='object'&&'ident'in data.codeShare&&data.codeShare.ident!=''&&data.codeShare.ident!=data.ident){img='thumbnail'in data.codeShare&&'imageUrl'in data.codeShare.thumbnail&&data.codeShare.thumbnail.imageUrl;target='thumbnail'in data.codeShare&&'linkUrl'in data.codeShare.thumbnail&&data.codeShare.thumbnail.linkUrl;}
if(!data.ga&&FlightPage.ShowAviatorView(data)&&$.isArray(data.relatedThumbnails)&&data.relatedThumbnails.length){img='thumbnail'in data.relatedThumbnails[0]&&data.relatedThumbnails[0]['thumbnail'];target='target'in data.relatedThumbnails[0]&&data.relatedThumbnails[0]['target'];}
var upload=/(upload-photo-now)/.test(img);if(!upload&&img&&img!=''){img='<img src="'+img+'" height="90px">';}else{img='<div><span>'+Rosetta.getTranslation('FP_Upload_Photo','upload photo')+'</span></div>';}
return new Handlebars.SafeString('<div class="flightPageAvatar '+(upload?'flightPageUploadPhoto':'')+'">'
+'<a href="'+target+'" class="flightPageAvatarLink">'+img+'</a></div>');};Handlebars.registerHelper('flightPageAvatar',FlightPage.FlightPageAvatar);FlightPage.TranslateString=function(){var args=Array.apply(null,arguments);args.pop();return new Handlebars.SafeString(Rosetta.getTranslation.apply(null,args));};Handlebars.registerHelper('mc',FlightPage.TranslateString);FlightPage.LastUpdated=function(){var now=FADate.getNow();if((now-this.timestamp)>3600){return'';}
var secondsElapsed=Math.floor(now-this.lastUpdated);if(secondsElapsed>3600){return'';}
var timeText=Rosetta.getTranslation('FP_Few_Seconds','a few seconds');if(secondsElapsed>=60){timeText=FlightPage.Duration(this.lastUpdated,now);}else if(secondsElapsed>=30){timeText='30 '+Rosetta.getTranslation('FP_Seconds','seconds');}
return Rosetta.getTranslation("FP_Updated_Ago","updated %1 ago",timeText);};Handlebars.registerHelper('lastUpdated',FlightPage.LastUpdated);Handlebars.registerHelper('now',function(){return FADate.getNow();});FlightPage.ShowCondensedFlightTimes=function(){return FlightPage.HasEmptyGateTimes(this)||this.ga;};Handlebars.registerHelper('showCondensedFlightTimes',FlightPage.ShowCondensedFlightTimes);FlightPage.HighlightCurrentFlightRow=function(){var highlight=false;var key=[this.flightId,this.destination.icao].join('_');if(key in FlightPage.ActiveFlight&&FlightPage.ActiveFlight[key]==1){FlightPage.ActiveFlight[key]++;highlight=true;}
return highlight;};Handlebars.registerHelper('highlightCurrentFlightRow',FlightPage.HighlightCurrentFlightRow);FlightPage.FormatRemarks=function(options){var context={type:{},ct:0};for(var i=0;i<this.remarks.length;i++){var data=this.remarks[i];if(!context.type[data.tag]){context.type[data.tag]=[];}
context.type[data.tag].push(data);context.ct++;}
if(context.ct>0){return options.fn(context);}};Handlebars.registerHelper('formatRemarks',FlightPage.FormatRemarks);FlightPage.HasSpecialAircraftPrefix=function(data){return data.aircraft.lifeguard;};Handlebars.registerHelper('hasSpecialAircraftPrefix',function(){return FlightPage.HasSpecialAircraftPrefix(this);});FlightPage.FormatSpecialAircraftPrefix=function(data){return new Handlebars.SafeString('<span class="flightPageIdentPrefixLbl" title="Civillian Air Ambulance (Urgent, Priority Air Traffic)"><a href="/live/special/lifeguard/">MEDEVAC</a></span>');};Handlebars.registerHelper('formatSpecialAircraftPrefix',function(){return FlightPage.FormatSpecialAircraftPrefix(this);});FlightPage.DataLinkSelect=function(){var currentIdent=FlightPage.NormalizedIdent(this),options='';if(FAIntegrationConfig&&'idents'in FAIntegrationConfig&&'length'in FAIntegrationConfig.idents){FAIntegrationConfig.idents.sort(function(a,b){return(a!=currentIdent)?1:-1;});for(var i=0;i<FAIntegrationConfig.idents.length;i++){var ident=FAIntegrationConfig.idents[i];options+='<option value="'+ident+'" '+(currentIdent==ident?' selected ':'')+'>'+ident+'</option>';}}
return new Handlebars.SafeString('<select multiple name="aircraft" size="3">'
+options
+'</select>');};Handlebars.registerHelper('dataLinkSelect',FlightPage.DataLinkSelect);FlightPage.ShowFlownDistance=function(data){return FlightPage.HasLanded(data)&&data.distance.actual;};Handlebars.registerHelper('showFlownDistance',function(){return FlightPage.ShowFlownDistance(this);});FlightPage.FormatOwnerDisplay=function(data){return Rosetta.getTranslation("FP_"+data,data,data);};Handlebars.registerHelper('formatOwnerDisplay',FlightPage.FormatOwnerDisplay);FlightPage.FormatDistanceElapsed=function(data){if(data.distance.elapsed){return new Handlebars.SafeString(Rosetta.getTranslation('FP_X_Flown','%1 flown','<strong>'
+Handlebars.escapeExpression(FlightPage.FormatDistance(data.distance.elapsed))+'</strong>'));}};Handlebars.registerHelper('formatDistanceElapsed',function(){return FlightPage.FormatDistanceElapsed(this);});FlightPage.FormatDistanceRemaining=function(data){if(data.distance.remaining){return new Handlebars.SafeString(Rosetta.getTranslation('FP_X_To_Go','%1 to go','<strong>'
+Handlebars.escapeExpression(FlightPage.FormatDistance(data.distance.remaining))+'</strong>'));}};Handlebars.registerHelper('formatDistanceRemaining',function(){return FlightPage.FormatDistanceRemaining(this);});FlightPage.RefererLink=function(url){return new Handlebars.SafeString(url+'?referer='+window.location.href);}
Handlebars.registerHelper('refererLink',FlightPage.RefererLink);FlightPage.ShowArrivalTooltip=function(scheduledLanding,scheduledGateArrival){if(scheduledLanding>scheduledGateArrival){var tooltipIcon='<a href=\'/about/faq#flightpage\' class="flightArrival" data-tip="Why does this look wrong?"><img src="/images/question_icon.svg" width="12" height="12"/></a>';return new Handlebars.SafeString(tooltipIcon);}};Handlebars.registerHelper('showArrivalTooltip',FlightPage.ShowArrivalTooltip);FlightPage.ScrambleIdent=function(){if(typeof window.location.href==='string'&&typeof window.location.href.includes==='function'&&window.location.href.includes('scrambleIdent')){return true;}else{return false;}};Handlebars.registerHelper('scrambleIdent',FlightPage.ScrambleIdent);FlightPage.GetScrambleIdent=function(friendlyIdent,standardIdent){if(FlightPage.ScrambledIdent){return FlightPage.ScrambledIdent;}
var ident=false;if(friendlyIdent){ident=friendlyIdent;}else{ident=standardIdent;}
if(ident){var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var numbers="0123456789";var scramble="";for(var i=0;i<ident.length;i++){if(ident[i].match(/[A-Z]/)){scramble+=letters[Math.floor(Math.random()*letters.length)];}else if(ident[i].match(/[0-9]/)){scramble+=numbers[Math.floor(Math.random()*numbers.length)];}else{scramble+=ident[i];}}
FlightPage.ScrambledIdent=scramble;return scramble;}
return"TEST";};Handlebars.registerHelper('getScrambledIdent',FlightPage.GetScrambleIdent);FlightPage.nonEmployeeAccount=function(){return(typeof user==='object'&&typeof user.accounttype!=='undefined'&&parseInt(user.accounttype)<90);};Handlebars.registerHelper('nonEmployeeAccount',FlightPage.nonEmployeeAccount);FlightPage.ValueOrDash=function(value){if(value==='No data'){return new Handlebars.SafeString('--');}
if(value===0||value){return value;}
return new Handlebars.SafeString('--');}
Handlebars.registerHelper('valueOrDash',FlightPage.ValueOrDash);FlightPage.AnyTruthy=function(){for(var i=0;i<arguments.length-1;i++){if(arguments[i]){return true;}}
return false;}
Handlebars.registerHelper('anyTruthy',FlightPage.AnyTruthy);FlightPage.emittedFBOs=function(originFBO,destinationFBO){if(typeof originFBO==="undefined"&&typeof destinationFBO==="undefined"&&!FlightPage.showScheduledFboDropdown(this)){return false;}
return true;}
Handlebars.registerHelper('emittedFBOs',FlightPage.emittedFBOs);FlightPage.hasTaxiTimes=function(taxiIn,taxiOut){if(taxiIn||taxiOut){return true;}
return false;}
Handlebars.registerHelper('hasTaxiTimes',FlightPage.hasTaxiTimes);FlightPage.emptyObject=function(obj){return _.isEmpty(obj);}
Handlebars.registerHelper('isEmptyObject',FlightPage.emptyObject);FlightPage.showScheduledFboDropdown=function(data){var showDropdown=!FlightPage.HasLanded(data)&&FlightPage.showGlobalFlightFeatures(data)&&!data.adhoc&&!data.cancelled&&!data.diverted;return showDropdown;};Handlebars.registerHelper('showScheduledFboDropdown',function(){return FlightPage.showScheduledFboDropdown(this)});FlightPage.showSetDepartureTime=function(data){return(!FlightPage.HasDeparted(data)&&!FlightPage.HasLanded(data)&&FlightPage.showGlobalFlightFeatures(data)&&FlightPage.showPredictedFeatures(data)&&data.predictedAvailable&&!data.cancelled&&!data.diverted);};Handlebars.registerHelper('showSetDepartureTime',function(){return FlightPage.showSetDepartureTime(this)});FlightPage.showGlobalFlightFeatures=function(data){return(data.globalIdent&&data.globalFlightFeatures);};Handlebars.registerHelper('showGlobalFlightFeatures',function(){return FlightPage.showGlobalFlightFeatures(this)});FlightPage.showPredictedFeatures=function(data){return(data.globalIdent&&data.globalFlightFeatures&&data.globalVisualizer);};Handlebars.registerHelper('showPredictedFeatures',function(){return FlightPage.showPredictedFeatures(this)});Handlebars.registerHelper('getUserToken',function(){if(typeof user==="object"&&"token"in user){return new Handlebars.SafeString(user.token);}else{return"";}});FlightPage.pauseRendering=function(timeout){if(typeof timeout!=='number'){var timeout=60000;}
clearTimeout(FlightPage.pauseRenderingTimeout);FlightPage.pauseRenderingTimeout=setTimeout(function(){FlightPage.resumeRendering();},timeout);FlightPage.pauseRenderingEnabled=true;};FlightPage.resumeRendering=function(preventRefresh){clearTimeout(FlightPage.pauseRenderingTimeout);FlightPage.pauseRenderingEnabled=false;if(!preventRefresh){FlightPageModel.refresh();}};FlightPage.prototype.setScheduledFBOEmail=function(email){this.scheduledFboEmailValue=email;FlightPage.LocalStorage.set('scheduledFBOEmail',this.scheduledFboEmailValue);$(this.selectors.scheduledFboEmailInput).val(this.scheduledFboEmailValue);};FlightPage.prototype.getScheduledFBOEmail=function(){if(typeof this.scheduledFboEmailValue!=='undefined'){return this.scheduledFboEmailValue;}else{this.scheduledFboEmailValue=FlightPage.LocalStorage.get('scheduledFBOEmail');return this.scheduledFboEmailValue;}};FlightPage.validateEmail=function(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());};FlightPage.isCAVOK=function(data){return(typeof data==='string'&&data.toLowerCase()==='clouds and visibility are ok');}
Handlebars.registerHelper('isCAVOK',function(data){return FlightPage.isCAVOK(data)});FlightPage.groundTime=function(landing,takeoff,rawDuration){if(typeof landing!=='object'||typeof takeoff!=='object'){return'';}
if(landing.destination.icao!==takeoff.origin.icao){return'';}
var currentFlightTime=FlightPage.Coalesce(landing.taxiIn,landing.predictedTimes.in,landing.landingTimes.actual,landing.landingTimes.estimated);var nextFlightTime=FlightPage.Coalesce(takeoff.taxiOut,takeoff.predictedTimes.out,takeoff.takeoffTimes.actual,takeoff.takeoffTimes.estimated);if(nextFlightTime!==null){if(rawDuration===true){return nextFlightTime-currentFlightTime;}else{if(nextFlightTime<currentFlightTime){var delayedString='';if(currentFlightTime-nextFlightTime>60){delayedString=' by '+FlightPage.Duration(currentFlightTime,nextFlightTime,optionsHash);}
return new Handlebars.SafeString('<img src="/images/flightpage/icon-warning-schedule_overlap.svg" height="10"> Flight departing from '+FlightPage.FormatAirportCode(landing.destination)+' will be delayed'+delayedString);}else if((nextFlightTime-30*60)<currentFlightTime){return new Handlebars.SafeString('<img src="/images/flightpage/icon-warning-schedule_tight.svg" height="10"> Turn time may cause delay departing from '+FlightPage.FormatAirportCode(landing.destination)+'');}else{return new Handlebars.SafeString('<img src="/images/flightpage/icon-on_time.svg" height="10"> Flight activity is on time.');;}}}
if(rawDuration===true){return(takeoffTime-taxiTakeoff)-(taxiLanding+landingTime);}
var optionsHash={'hash':{'allowNegative':true}};if(landing.landingTimes.actual&&landing.taxiIn&&takeoff.taxiOut&&takeoff.takeoffTimes.actual){return new Handlebars.SafeString(FlightPage.Duration((taxiLanding+landingTime),(takeoffTime-taxiTakeoff),optionsHash));}else{return new Handlebars.SafeString('<em>'+FlightPage.Duration((taxiLanding+landingTime),(takeoffTime-taxiTakeoff),optionsHash)+'</em>');}};Handlebars.registerHelper('groundTime',function(landing,takeoff){return FlightPage.groundTime(landing,takeoff)});FlightPage.turnTimeGroundStatus=function(landing,takeoff){var groundLength=FlightPage.groundTime(landing,takeoff,true);if(groundLength===''){return'noStatus';}else if(groundLength<=0){return"redStatus";}else if(groundLength<30*60){return"orangeStatus";}
return"noStatus";};Handlebars.registerHelper('turnTimeGroundStatus',FlightPage.turnTimeGroundStatus);FlightPage.isValidFutureFlight=function(flight){return(flight.landingTimes.actual===null&&!flight.cancelled&&flight.landingTimes.estimated!==null&&flight.takeoffTimes.estimated!==null&&flight.landingTimes.estimated<((Date.now())/1000+86400)&&flight.takeoffTimes.estimated>((Date.now())/1000-172800));};FlightPage.prototype.hasTaxiOut=function(flight){return(flight.taxiOut||(typeof flight.predictedTimes==='object'&&flight.predictedTimes.out));};FlightPage.prototype.hasTaxiIn=function(flight){return(flight.taxiIn||(typeof flight.predictedTimes==='object'&&flight.predictedTimes.in));};FlightPage.prototype.getTaxiOut=function(flight){var taxiOut=null;if(flight.taxiOut){taxiOut=flight.taxiOut;}else if(flight.predictedTimes.out){taxiOut=flight.predictedTimes.out;}
return taxiOut;};FlightPage.prototype.isTaxiOutEstimated=function(flight){return(flight.taxiOut===null||flight.taxiOut==="");};FlightPage.prototype.getTaxiOutEnd=function(flight){return FlightPage.Coalesce(flight.takeoffTimes.actual,flight.takeoffTimes.estimated)-1;};FlightPage.prototype.getTaxiIn=function(flight){return flight.taxiIn?flight.taxiIn:flight.predictedTimes.in;};FlightPage.prototype.isTaxiInEstimated=function(flight){return(flight.taxiOut===null||flight.taxiOut==="");};FlightPage.prototype.getTaxiInEnd=function(flight){return FlightPage.Coalesce(flight.landingTimes.actual,flight.landingTimes.estimated)-1;}
FlightPage.prototype.getTakeOffTime=function(flight){return FlightPage.Coalesce(flight.takeoffTimes.actual,flight.takeoffTimes.estimated)};FlightPage.prototype.isTakeOffEstimated=function(flight){return flight.takeoffTimes.actual===null;};FlightPage.prototype.getLandingTime=function(flight){return FlightPage.Coalesce(flight.landingTimes.actual,flight.landingTimes.estimated);};FlightPage.prototype.isLandingEstimated=function(flight){return flight.landingTimes.actual===null;};FlightPage.prototype.getFlightEndingTime=function(flight){return FlightPage.Coalesce(this.getTaxiIn(flight),this.getLandingTime(flight));};FlightPage.prototype.getFlightStartTime=function(flight){return FlightPage.Coalesce(this.getTaxiOut(flight),this.getTakeOffTime(flight));};FlightPage.prototype.getTaxiInTime=function(flight){return this.getTaxiInEnd(flight)-this.getTaxiIn(flight);};FlightPage.prototype.getTaxiOutTime=function(flight){return this.getTaxiOutEnd(flight)-this.getTaxiOut(flight);};FlightPage.prototype.getDestinationFBO=function(flight){if(flight.destination.fbo){return flight.destination.fbo;}else if(flight.destination.fbo_scheduled){return'<em>'+flight.destination.fbo_scheduled.name+'</em>';}else{return'';}};FlightPage.wrapEstimated=function(str,estimated){if(estimated){return'<em>'+str+'</em>';}else{return str;}};FlightPage.prototype.getFlightTitleText=function(flight){var retbuf='';if(this.getTaxiOut(flight)){retbuf+='<b>Taxi Out: </b>'+FlightPage.wrapEstimated(FlightPage.FormatFlightTime(this.getTaxiOut(flight),flight.origin.TZ),this.isTaxiOutEstimated(flight))+'<br>';}
retbuf+='<b>Takeoff: </b>'+FlightPage.wrapEstimated(FlightPage.FormatFlightTime(this.getTakeOffTime(flight),flight.origin.TZ),this.isTakeOffEstimated(flight))+'<br>';retbuf+='<b>Landing: </b>'+FlightPage.wrapEstimated(FlightPage.FormatFlightTime(this.getLandingTime(flight),flight.destination.TZ),this.isLandingEstimated(flight))+'<br>';if(this.getTaxiIn(flight)){retbuf+='<b>Taxi In: </b>'+FlightPage.wrapEstimated(FlightPage.FormatFlightTime(this.getTaxiIn(flight),flight.destination.TZ),this.isTaxiInEstimated(flight));}
return retbuf;};FlightPage.prototype.buildTurnTimeVisualization=function(){FlightPage.turnTimeNeedsBuilding=false;if(FlightPage.Timeline){FlightPage.Timeline.destroy();}
tippy('.flightPageInfoIcon',{content:$('#flightPageTurnTimeTooltip').html(),theme:'turntime',placement:'bottom',trigger:'mouseenter click'});var flightData=FlightPage.processActivityLogData(this.data);var flights=FlightPage.buildActivityLogRelations(flightData.activityLog.flights);FlightPage.SortFlights(flights,'asc');if(flights.length<2){return false;}
var timelineData=[];var groups=[];groups.push({id:0,content:flights[0].displayIdent,className:'summary-label'});var startGraph=null;var maxDate=null;var foundFlights=0;for(var i=0;i<flights.length;i++){if(FlightPage.isValidFutureFlight(flights[i])){foundFlights++;var taxiOut=null;if(this.hasTaxiOut(flights[i])){taxiOut=this.getTaxiOut(flights[i]);timelineData.push({id:i+1000,group:i+1,content:'',className:'taxi',title:this.getFlightTitleText(flights[i]),start:moment.unix(taxiOut),end:moment.unix(this.getTaxiOutEnd(flights[i]))});}
if(startGraph===null){startGraph=FlightPage.Coalesce(taxiOut,this.getTakeOffTime(flights[i]));}
var activeFlight=(this.encryptedFlightId=flights[i].encryptedFlightId)?'active':'';timelineData.push({id:i+1,group:i+1,content:'',className:'flight '+activeFlight,title:this.getFlightTitleText(flights[i]),start:moment.unix(this.getTakeOffTime(flights[i])),end:moment.unix(this.getLandingTime(flights[i]))});var taxiIn=null;if(this.hasTaxiIn(flights[i])){var taxiIn=this.getTaxiIn(flights[i]);timelineData.push({id:i+2000,group:i+1,content:'',className:'taxi',title:this.getFlightTitleText(flights[i]),start:moment.unix(this.getTaxiInEnd(flights[i])),end:moment.unix(taxiIn)});}
timelineData.push({id:'Z'+i,group:0,content:'',className:'summaryFlight',start:moment.unix(FlightPage.Coalesce(taxiOut,this.getTakeOffTime(flights[i]))),end:moment.unix(FlightPage.Coalesce(taxiIn,this.getLandingTime(flights[i])))});maxDate=moment.unix(this.getFlightEndingTime(flights[i]));if(typeof previousGroupIcon!=='string'){var previousGroupIcon='';}
var groupIcon=previousGroupIcon;if(flights[i].nextFlight&&FlightPage.isValidFutureFlight(flights[i].nextFlight)){var currentFlightTime=this.getFlightEndingTime(flights[i]);var nextFlightTime=this.getFlightStartTime(flights[i].nextFlight);if(nextFlightTime!==null){if(nextFlightTime<=currentFlightTime&&FlightPage.validNextFlight(flights[i],flights[i].nextFlight)){timelineData.push({id:'A'+i,content:'',start:moment.unix(nextFlightTime),end:moment.unix(currentFlightTime),type:'background',className:'turnTimeConflict'});var pointTime=nextFlightTime+(currentFlightTime-nextFlightTime)/2;timelineData.push({id:flights[i].nextFlight.encryptedFlightId+'/conflictPoint-'+i,group:0,content:'<svg height="15" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><circle cx="8" cy="8" fill="#f00" r="8"/><path d="m4.50837565 3.12201228-1.38617964 1.38717048 3.49084019 3.49084019-3.49090909 3.49153245 1.38629451 1.3862945 3.49155543-3.49030864 3.49086315 3.49023974 1.3871246-1.3861337-3.491001-3.49162435 3.490932-3.49093204-1.3870097-1.38700971-3.49090906 3.49153247z" fill="#fff" fill-rule="nonzero"/></g></svg>',start:moment.unix(pointTime),type:'point',className:'summaryConflictPoint'});timelineData.push({id:flights[i].nextFlight.encryptedFlightId+'/conflictOverlap-'+i,group:0,content:'',start:moment.unix(nextFlightTime),end:moment.unix(currentFlightTime),className:'summaryGround summaryOverlapGround',encFlightID:flights[i].nextFlight.encryptedFlightId});previousGroupIcon='<img style="height: 10px; width: 10px" height="10" class="conflictImageLabel" data-flightid="'+flights[i].nextFlight.encryptedFlightId+'" src="/images/flightpage/icon-conflict@2x.png"> '}else if((nextFlightTime-30*60)<currentFlightTime&&flights[i].destination.icao===flights[i].nextFlight.origin.icao){timelineData.push({id:'A'+i,content:'',start:moment.unix(currentFlightTime),end:moment.unix(nextFlightTime),type:'background',className:'turnTimeKindaConflict'});var pointTime=currentFlightTime+(nextFlightTime-currentFlightTime)/2;timelineData.push({id:flights[i].nextFlight.encryptedFlightId+'/tightPoint-'+i,group:0,content:'<svg height="15" viewBox="0 0 16 15" width="16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m14.9991283 14.2222222c.5527662 0 .7785563-.3952274.5124785-.8682545l-7.02321361-12.48571314c-.26973211-.47952375-.71070862-.47302713-.97678638 0l-7.02321362 12.48571314c-.26973211.4795237-.04376233.8682545.51247847.8682545z" fill="#fff"/><path d="m14.9991283 14.2222222c.5527662 0 .7785563-.3952274.5124785-.8682545l-7.02321361-12.48571314c-.26973211-.47952375-.71070862-.47302713-.97678638 0l-7.02321362 12.48571314c-.26973211.4795237-.04376233.8682545.51247847.8682545zm-7.94030477-1.8962963v-1.8962963h1.88235294v1.8962963zm0-2.84444442v-3.79259259h1.88235294v3.79259259z" fill="#ff6f00"/></g></svg>',start:moment.unix(pointTime),type:'point',className:'summaryTightPoint',});timelineData.push({id:flights[i].nextFlight.encryptedFlightId+'/tightOverlap-'+i,group:0,content:'',start:moment.unix(currentFlightTime),end:moment.unix(nextFlightTime),className:'summaryGround summaryTightGround',});previousGroupIcon='<img style="height: 10px; width: 10px" height="10" class="conflictImageLabel" data-flightid="'+flights[i].nextFlight.encryptedFlightId+'" src="/images/flightpage/icon-warning@2x.png"> '}else{timelineData.push({id:'ZZ'+i,group:0,content:'',start:moment.unix(currentFlightTime),end:moment.unix(nextFlightTime),className:'summaryGround'});var parkedContent='Parked at ';if(this.getDestinationFBO(flights[i])!=''){parkedContent+=this.getDestinationFBO(flights[i]);}else{parkedContent+=FlightPage.FormatActivityLogAirportCode(flights[i].destination);}
var labelParked='';if((nextFlightTime-currentFlightTime)>28800){labelParked=parkedContent;}
timelineData.push({id:'ZXZ'+i,group:i+1,start:moment.unix(currentFlightTime),end:moment.unix(nextFlightTime),className:'parked',content:labelParked,title:parkedContent});previousGroupIcon='';}}}
groups.push({id:i+1,content:'<span class="flightPageGraphLabel" data-flightid="'+flights[i].encryptedFlightId+'">'+groupIcon+FlightPage.FormatActivityLogAirportCode(flights[i].origin)+' - '+FlightPage.FormatActivityLogAirportCode(flights[i].destination)+'</span>',className:'flight-label'});}}
if(foundFlights<2){$('#flightPageTurnTimeTitle').hide();return false;}
if(startGraph===null){startGraph=(Date.now()-15*60*60*1000)/1000;}
startGraph=Math.round(startGraph);var minDate=Math.round((Date.now()-15*60*1000)/1000);if(startGraph<minDate){minDate=startGraph-15*60;}
var endGraph=startGraph+8*60*60;var options={zoomKey:'ctrlKey',horizontalScroll:true,stack:false,start:moment.unix(startGraph),end:maxDate,tooltip:{followMouse:true,overflowMethod:'cap'},min:moment.unix(minDate),max:maxDate,showMajorLabels:true,showMinorLabels:false,selectable:false,dataAttributes:'all',zoomMin:2*60*60*1000};var parsedData=new vis.DataSet(timelineData);$('#flightPageTurnTimeContainer').show();FlightPage.Timeline=new vis.Timeline(document.getElementById('flightPageTurnTimeVisualization'),parsedData,groups,options);FlightPage.Timeline.addCustomTime(Date.now(),'t1');FlightPage.Timeline.on('currentTimeTick',function(properties){FlightPage.Timeline.setCustomTime(Date.now(),'t1');});var minDateRounded=minDate-(minDate%3600);for(var k=0;k<48;k++){FlightPage.Timeline.addCustomTime(moment.unix(minDateRounded+(k*3600)),'hourlyTick'+k);}
FlightPage.Timeline.customTimes[FlightPage.Timeline.customTimes.length-1].hammer.off("panstart panmove panend");$('.summaryConflictPoint, .summaryOverlapGround, .summaryTightPoint, .summaryTightGround, .conflictImageLabel').on('click',function(e){var flightId=null;if(typeof $(e.target).data('id')!=='undefined'){flightId=$(e.target).data('id').split('/')[0];}else if(typeof $(e.target.parentElement).data('id')!=='undefined'){flightId=$(e.target.parentElement).data('id').split('/')[0];}
if(flightId!==null){var selectElements=$('.flightPageDepartureSelector[data-flightid='+flightId+'], .flightPageDepartureEditButton[data-flightid='+flightId+']');if(selectElements.length>1){for(var i=0;i<selectElements.length;i++){if($(selectElements[i]).is(':visible')){$('html, body').animate({scrollTop:$(selectElements[i]).offset().top-60},2000);$(selectElements[i]).trigger('click');break;}}}}});$('.flightPageGraphLabel').on('click',function(e){var selectedRow=$('.flightPageActivityRow[data-flightid='+$(e.target).data('flightid')+']');if(selectedRow.length>1){selectedRow=selectedRow[0];}
if($(selectedRow)){$('html, body').animate({scrollTop:$(selectedRow).offset().top-30},2000);}});};FlightPage.validNextFlight=function(currentFlight,nextFlight){return(currentFlight.destination.icao===nextFlight.origin.icao||currentFlight.destination.iata===nextFlight.origin.iata);};Handlebars.registerHelper('validNextFlight',FlightPage.validNextFlight);FlightPage.getTaxiTimeOptions=function(departureTime,extended){var roundedTime=departureTime-(departureTime%900);var count=6;var start=-2;if(extended===true){start=count;count=20;}
var times=[];for(var i=start;i<count;i++){times.push(roundedTime+(i*900));}
return times;};Handlebars.registerHelper('getTaxiTimeOptions',FlightPage.getTaxiTimeOptions);FlightPage.isIE11=function(){return window.navigator.userAgent.indexOf('Trident')>-1||window.navigator.userAgent.indexOf('MSIE')>-1;};Handlebars.registerHelper('isIE11',FlightPage.isIE11);FlightPage.NotificationContent=function(data){var buttonText=Rosetta.getTranslation('FP_Get_Notifications','Get Notifications');var svgFillColor;var svgStrokeWidth='2px';if(data&&'myAlerts'in data&&data.myAlerts.editAlert){buttonText=Rosetta.getTranslation('FP_Edit_Notifications','Edit Notifications');svgFillColor='#FFFFFF';svgStrokeWidth='1px';}else if(data&&'ga'in data&&FlightPage.HasArrived(data)&&!data.ga){svgFillColor='#9FDBF4';}else{svgFillColor='#00A0E2';}
var svgString='<svg version="1.1" class="flightPageNotificationIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" style="enable-background:new 0 0 16 16;" xml:space="preserve"><style type="text/css">.st0{fill:'+svgFillColor+';}</style><g><g><path class="st0" stroke-width="'+svgStrokeWidth+'" d="M11.9,6.1c0-2.7-1.1-4.1-3.2-4.5c0,0,0-0.1,0-0.1C8.7,0.7,8,0,7.2,0S5.7,0.7,5.7,1.5c0,0,0,0.1,0,0.1C3.6,2,2.5,3.4,2.5,6.1c0,5.5-3.8,5-2,6.4c0.9,0.8,3,1,4.7,1.1c0,0.1,0,0.2,0,0.3c0,1,1,2,2,2s2-1,2-2c0-0.1,0-0.2,0-0.3c1.6-0.1,3.6-0.3,4.4-1.1C15.1,11.1,11.9,11.6,11.9,6.1z"/></path></g></g></svg>'
var buttonText=' <span>'+buttonText+'</span>';return new Handlebars.SafeString(svgString+buttonText);}
Handlebars.registerHelper('notificationContent',function(){return FlightPage.NotificationContent(this);});FlightPage.NotificationUrl=function(data){if(data.ga){return data.myAlerts.editAlert||data.myAlerts.advancedAlert;}else if(data.codeShare.friendlyIdent===null){return data.myAlerts.editAlert||data.myAlerts.advancedAlert;}else{return'javascript:void(0);';}}
Handlebars.registerHelper('notificationUrl',function(){return FlightPage.NotificationUrl(this);});FlightPage.NotificationClasses=function(data){if(FlightPage.HasArrived(data)&&!data.ga&&!data.myAlerts.editAlert){return'flightPageButton flightPageNotificationButton flightPageDisabledButton';}else{return'flightPageButton flightPageNotificationButton';}}
Handlebars.registerHelper('notificationClasses',function(){return FlightPage.NotificationClasses(this);});FlightPage.CanCreateNotification=function(data){return(data.ga||data.myAlerts.editAlert||!(FlightPage.HasArrived(data)));}
Handlebars.registerHelper('canCreateNotification',function(){return FlightPage.CanCreateNotification(this);});FlightPage.NotificationTooltip=function(data){if(!(FlightPage.CanCreateNotification(data))){return Rosetta.getTranslation('FP_Status_Updates_Not_Available','Status updates are not available for historical flights.');}
return"";}
Handlebars.registerHelper('notificationTooltip',function(){return FlightPage.NotificationTooltip(this);});(function(FA){FA.Modules.Helpers=typeof(FA.Modules.Helpers)==="undefined"?{}:FA.Modules.Helpers;})(FA);(function(FA,Handlebars){var HandlebarsHelpers=function(){};HandlebarsHelpers.prototype.init=function(){Handlebars.registerHelper('flightaware_cdn',this.FlightawareCDN);Handlebars.registerHelper('if_multi',this.IfMulti);Handlebars.registerHelper('ifOr',this.IfOr);Handlebars.registerHelper('equalityCheck',this.equalityCheck);};HandlebarsHelpers.prototype.FlightawareCDN=function(filepath,filename){var imgPath=filepath
if(typeof filename==='string'){imgPath+=filename;}
imgPath=imgPath.replace(/^\//,'');if(typeof handlebarsConfig==='object'&&'cdnUrl'in handlebarsConfig){return handlebarsConfig.cdnUrl+imgPath;}
return imgPath;};HandlebarsHelpers.prototype.IfMulti=function(){var options=[].pop.apply(arguments);var success=true;for(var i=0;i<arguments.length;i++){if(!arguments[i]){success=false;break;}}
if(success){return options.fn(this);}else{return options.inverse(this);}};HandlebarsHelpers.prototype.IfOr=function(){var options=[].pop.apply(arguments);var success=false;for(var i=0;i<arguments.length;i++){if(arguments[i]){success=true;break;}}
if(success){return options.fn(this);}else{return options.inverse(this);}};HandlebarsHelpers.prototype.equalityCheck=function(strOne,strTwo){if(strOne===strTwo)
return true;return false;}
FA.Modules.Helpers.Handlebars=HandlebarsHelpers;})(FA,Handlebars);